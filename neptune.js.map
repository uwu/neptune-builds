{"version":3,"file":"neptune.js","sources":["../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/methods/is_server.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/symbols.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/utils.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/objects/callable.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/constants.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/lazy.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/objects/owner.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/objects/superroot.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/context.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/batch.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/is_observable_frozen.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/is_untracked.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/objects/scheduler.sync.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/objects/observable.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/objects/observables.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/objects/observer.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/objects/memo.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/memo.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/boolean.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/cleanup.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/objects/context.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/context.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/disposed.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/objects/scheduler.async.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/objects/effect.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/effect.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/resolve.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/objects/root.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/for.cache.keyed.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/is_observable.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/get.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/objects/suspense.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/suspense.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/for.cache.unkeyed.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/is_store.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/untrack.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/warmup.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/switch.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/ternary.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/is_batching.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/observable.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/is_observable_writable.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/target.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/readonly.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/root.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/selector.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/store.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/suspended.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/tick.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/try_catch.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/untracked.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/with.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/constants.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/methods/wrap_element.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/utils/creators.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/utils/lang.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/hooks/use_resolved.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/hooks/use_event_listener.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/hooks/use_abort_controller.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/hooks/use_abort_signal.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/hooks/use_scheduler.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/hooks/use_animation_frame.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/hooks/use_animation_loop.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/components/suspense.context.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/components/suspense.manager.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/hooks/use_render_effect.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/hooks/use_resource.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/hooks/use_fetch.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/hooks/use_idle_callback.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/hooks/use_idle_loop.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/hooks/use_interval.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/hooks/use_promise.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/hooks/use_timeout.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/hooks/use_cheap_disposed.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/hooks/use_microtask.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/utils/classlist.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/utils/diff.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/utils/fragment.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/utils/resolvers.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/utils/setters.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/methods/create_element.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/components/dynamic.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/components/error_boundary.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/components/for.js","../node_modules/.pnpm/oby@14.3.0/node_modules/oby/dist/methods/for.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/components/fragment.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/hooks/use_guarded.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/components/if.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/components/keep_alive.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/methods/render.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/components/portal.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/components/suspense.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/components/switch.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/components/ternary.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/jsx/runtime.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/methods/create_directive.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/methods/hmr.js","../node_modules/.pnpm/htm@3.1.1/node_modules/htm/dist/htm.module.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/methods/html.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/methods/lazy.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/methods/render_to_string.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/methods/template.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/methods/create_context.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/methods/h.js","../node_modules/.pnpm/voby@0.54.0/node_modules/voby/dist/hooks/use_context.js","../src/ui/components.js","../src/api/intercept.js","../src/api/observe.js","../src/api/registerRoute.js","../node_modules/.pnpm/idb-keyval@6.2.1/node_modules/idb-keyval/dist/index.js","../src/api/utils.js","../node_modules/.pnpm/es-module-lexer@1.3.0/node_modules/es-module-lexer/dist/lexer.js","../node_modules/.pnpm/parse-imports@1.1.2/node_modules/parse-imports/src/parse-import-clause/skip.js","../node_modules/.pnpm/parse-imports@1.1.2/node_modules/parse-imports/src/parse-import-clause/parse-default-import.js","../node_modules/.pnpm/parse-imports@1.1.2/node_modules/parse-imports/src/parse-import-clause/parse-named-imports.js","../node_modules/.pnpm/parse-imports@1.1.2/node_modules/parse-imports/src/parse-import-clause/parse-namespace-import.js","../node_modules/.pnpm/parse-imports@1.1.2/node_modules/parse-imports/src/parse-import-clause/index.js","../node_modules/.pnpm/slashes@3.0.12/node_modules/slashes/lib/esm/get-unescaped-any.js","../node_modules/.pnpm/slashes@3.0.12/node_modules/slashes/lib/esm/remove-slashes.js","../node_modules/.pnpm/parse-imports@1.1.2/node_modules/parse-imports/src/parse-module-specifier/is-constant-string-literal.js","../node_modules/.pnpm/parse-imports@1.1.2/node_modules/parse-imports/src/parse-module-specifier/parse-type.js","../node_modules/.pnpm/parse-imports@1.1.2/node_modules/parse-imports/src/parse-module-specifier/resolve.js","../node_modules/.pnpm/parse-imports@1.1.2/node_modules/parse-imports/src/parse-module-specifier/index.js","../node_modules/.pnpm/parse-imports@1.1.2/node_modules/parse-imports/src/index.js","../node_modules/.pnpm/@uwu+quartz@1.2.6/node_modules/@uwu/quartz/index.js","../node_modules/.pnpm/spitroast@1.4.3/node_modules/spitroast/dist/esm/shared.js","../node_modules/.pnpm/spitroast@1.4.3/node_modules/spitroast/dist/esm/unpatch.js","../node_modules/.pnpm/spitroast@1.4.3/node_modules/spitroast/dist/esm/getPatchFunc.js","../node_modules/.pnpm/spitroast@1.4.3/node_modules/spitroast/dist/esm/hook.js","../node_modules/.pnpm/spitroast@1.4.3/node_modules/spitroast/dist/esm/index.js","../src/api/registerTab.js","../src/api/hookContextMenu.js","../src/windowObject.js","../src/handleExfiltrations.js","../src/styles.js","../src/api/plugins.js","../node_modules/.pnpm/quartz-plugin-url-import@1.0.1/node_modules/quartz-plugin-url-import/index.js","../src/ui/settings.js","../src/index.js"],"sourcesContent":["/* HELPERS */\nconst IS_BROWSER = !!globalThis.CDATASection?.toString?.().match(/^\\s*function\\s+CDATASection\\s*\\(\\s*\\)\\s*\\{\\s*\\[native code\\]\\s*\\}\\s*$/);\n/* MAIN */\nconst isServer = () => {\n    return !IS_BROWSER;\n};\n/* EXPORT */\nexport default isServer;\n","/* MAIN */\nconst SYMBOL_CACHED = Symbol('Cached');\nconst SYMBOL_OBSERVABLE = Symbol('Observable');\nconst SYMBOL_OBSERVABLE_FROZEN = Symbol('Observable.Frozen');\nconst SYMBOL_OBSERVABLE_READABLE = Symbol('Observable.Readable');\nconst SYMBOL_OBSERVABLE_WRITABLE = Symbol('Observable.Writable');\nconst SYMBOL_STORE = Symbol('Store');\nconst SYMBOL_STORE_KEYS = Symbol('Store.Keys');\nconst SYMBOL_STORE_OBSERVABLE = Symbol('Store.Observable');\nconst SYMBOL_STORE_TARGET = Symbol('Store.Target');\nconst SYMBOL_STORE_VALUES = Symbol('Store.Values');\nconst SYMBOL_STORE_UNTRACKED = Symbol('Store.Untracked');\nconst SYMBOL_SUSPENSE = Symbol('Suspense');\nconst SYMBOL_UNCACHED = Symbol('Uncached');\nconst SYMBOL_UNTRACKED = Symbol('Untracked');\nconst SYMBOL_UNTRACKED_UNWRAPPED = Symbol('Untracked.Unwrapped');\n/* EXPORT */\nexport { SYMBOL_CACHED, SYMBOL_OBSERVABLE, SYMBOL_OBSERVABLE_FROZEN, SYMBOL_OBSERVABLE_READABLE, SYMBOL_OBSERVABLE_WRITABLE, SYMBOL_STORE, SYMBOL_STORE_KEYS, SYMBOL_STORE_OBSERVABLE, SYMBOL_STORE_TARGET, SYMBOL_STORE_VALUES, SYMBOL_STORE_UNTRACKED, SYMBOL_SUSPENSE, SYMBOL_UNCACHED, SYMBOL_UNTRACKED, SYMBOL_UNTRACKED_UNWRAPPED };\n","/* MAIN */\nconst castArray = (value) => {\n    return isArray(value) ? value : [value];\n};\nconst castError = (error) => {\n    if (error instanceof Error)\n        return error;\n    if (typeof error === 'string')\n        return new Error(error);\n    return new Error('Unknown error');\n};\nconst { is } = Object;\nconst { isArray } = Array;\nconst isEqual = (a, b) => {\n    if (a.length !== b.length)\n        return false;\n    for (let i = 0, l = a.length; i < l; i++) {\n        const valueA = a[i];\n        const valueB = b[i];\n        if (!is(valueA, valueB))\n            return false;\n    }\n    return true;\n};\nconst isFunction = (value) => {\n    return typeof value === 'function';\n};\nconst isObject = (value) => {\n    return (value !== null) && (typeof value === 'object');\n};\nconst isSymbol = (value) => {\n    return typeof value === 'symbol';\n};\nconst noop = () => {\n    return;\n};\nconst nope = () => {\n    return false;\n};\n/* EXPORT */\nexport { castArray, castError, is, isArray, isEqual, isFunction, isObject, isSymbol, noop, nope };\n","/* IMPORT */\nimport { SYMBOL_OBSERVABLE, SYMBOL_OBSERVABLE_FROZEN, SYMBOL_OBSERVABLE_READABLE, SYMBOL_OBSERVABLE_WRITABLE } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN - FUNCTIONS */\nfunction frozenFunction() {\n    if (arguments.length) {\n        throw new Error('A readonly Observable can not be updated');\n    }\n    else {\n        return this;\n    }\n}\nfunction readableFunction() {\n    if (arguments.length) {\n        throw new Error('A readonly Observable can not be updated');\n    }\n    else {\n        return this.get();\n    }\n}\nfunction writableFunction(fn) {\n    if (arguments.length) {\n        if (isFunction(fn)) {\n            return this.C(fn);\n        }\n        else {\n            return this.set(fn); //TSC\n        }\n    }\n    else {\n        return this.get();\n    }\n}\n/* MAIN - GENERATORS */\nconst frozen = (value) => {\n    const fn = frozenFunction.bind(value); //TSC\n    fn[SYMBOL_OBSERVABLE] = true;\n    fn[SYMBOL_OBSERVABLE_FROZEN] = true;\n    return fn;\n};\nconst readable = (value) => {\n    //TODO: Make a frozen one instead if disposed\n    const fn = readableFunction.bind(value); //TSC\n    fn[SYMBOL_OBSERVABLE] = true;\n    fn[SYMBOL_OBSERVABLE_READABLE] = value;\n    return fn;\n};\nconst writable = (value) => {\n    const fn = writableFunction.bind(value); //TSC\n    fn[SYMBOL_OBSERVABLE] = true;\n    fn[SYMBOL_OBSERVABLE_WRITABLE] = value;\n    return fn;\n};\n/* EXPORT */\nexport { frozen, readable, writable };\n","/* IMPORT */\nimport { frozen } from './objects/callable.js';\n/* MAIN */\nconst DIRTY_NO = 0; // The observer is not dirty, for sure\nconst DIRTY_MAYBE_NO = 1; // The observer is not dirty, possibly\nconst DIRTY_MAYBE_YES = 2; // The observer is dirty, possibly\nconst DIRTY_YES = 3; // The observer is dirty, for sure\nconst OBSERVABLE_FALSE = frozen(false);\nconst OBSERVABLE_TRUE = frozen(true);\nconst UNAVAILABLE = new Proxy({}, new Proxy({}, { get() { throw new Error('Unavailable value'); } })); //TSC\nconst UNINITIALIZED = function () { }; //TSC\n/* EXPORT */\nexport { DIRTY_NO, DIRTY_MAYBE_NO, DIRTY_MAYBE_YES, DIRTY_YES };\nexport { OBSERVABLE_FALSE, OBSERVABLE_TRUE };\nexport { UNAVAILABLE, UNINITIALIZED };\n","/* IMPORT */\n/* MAIN */\nconst lazyArrayEach = (arr, fn) => {\n    if (arr instanceof Array) {\n        for (let i = 0, l = arr.length; i < l; i++) {\n            fn(arr[i]);\n        }\n    }\n    else if (arr) {\n        fn(arr);\n    }\n};\nconst lazyArrayEachRight = (arr, fn) => {\n    if (arr instanceof Array) {\n        for (let i = arr.length - 1; i >= 0; i--) {\n            fn(arr[i]);\n        }\n    }\n    else if (arr) {\n        fn(arr);\n    }\n};\nconst lazyArrayPush = (obj, key, value) => {\n    const arr = obj[key];\n    if (arr instanceof Array) {\n        arr.push(value);\n    }\n    else if (arr) {\n        obj[key] = [arr, value];\n    }\n    else {\n        obj[key] = value;\n    }\n};\nconst lazySetAdd = (obj, key, value) => {\n    const set = obj[key];\n    if (set instanceof Set) {\n        set.add(value);\n    }\n    else if (set) {\n        if (value !== set) {\n            const s = new Set();\n            s.add(set);\n            s.add(value);\n            obj[key] = s;\n        }\n    }\n    else {\n        obj[key] = value;\n    }\n};\nconst lazySetDelete = (obj, key, value) => {\n    const set = obj[key];\n    if (set instanceof Set) {\n        set.delete(value);\n    }\n    else if (set === value) {\n        obj[key] = undefined;\n    }\n};\nconst lazySetEach = (set, fn) => {\n    if (set instanceof Set) {\n        for (const value of set) {\n            fn(value);\n        }\n    }\n    else if (set) {\n        fn(set);\n    }\n};\n/* EXPORT */\nexport { lazyArrayEach, lazyArrayEachRight, lazyArrayPush };\nexport { lazySetAdd, lazySetDelete, lazySetEach };\n","/* IMPORT */\nimport { UNAVAILABLE } from '../constants.js';\nimport { OBSERVER, OWNER, setObserver, setOwner } from '../context.js';\nimport { lazyArrayEachRight } from '../lazy.js';\nimport { castError } from '../utils.js';\n/* HELPERS */\nconst onCleanup = (cleanup) => cleanup.call(cleanup);\nconst onDispose = (owner) => owner.Q(true);\n/* MAIN */\n//TODO: Throw when registering stuff O disposing, maybe\nclass Owner {\n    constructor() {\n        /* VARIABLES */\n        this.disposed = false;\n        this.B = undefined;\n        this.S = undefined;\n        this.D = undefined;\n        this.K = undefined;\n        this.T = undefined;\n        this.U = undefined;\n    }\n    /* API */\n    catch(error, silent) {\n        const { S } = this;\n        if (S) {\n            S(error); //TODO: This assumes that the error handler won't throw immediately, which we know, but Owner shouldn't know\n            return true;\n        }\n        else {\n            if (this.parent?.catch(error, true))\n                return true;\n            if (silent)\n                return false;\n            // console.error ( error.stack ); // <-- Log \"error.stack\" to better understand where the error happened\n            throw error;\n        }\n    }\n    Q(deep) {\n        lazyArrayEachRight(this.D, onDispose);\n        lazyArrayEachRight(this.K, onDispose);\n        lazyArrayEachRight(this.U, onDispose);\n        lazyArrayEachRight(this.B, onCleanup);\n        this.B = undefined;\n        this.disposed = deep;\n        this.S = undefined;\n        this.K = undefined;\n        this.U = undefined;\n    }\n    get(symbol) {\n        return this.context?.[symbol];\n    }\n    E(fn, owner, observer) {\n        const ownerPrev = OWNER;\n        const observerPrev = OBSERVER;\n        setOwner(owner);\n        setObserver(observer);\n        try {\n            return fn();\n        }\n        catch (error) {\n            this.catch(castError(error), false); // Bubbling the error up\n            return UNAVAILABLE; // Returning a value that is the least likely to cause bugs\n        }\n        finally {\n            setOwner(ownerPrev);\n            setObserver(observerPrev);\n        }\n    }\n}\n/* EXPORT */\nexport default Owner;\n","/* IMPORT */\nimport Owner from './owner.js';\n/* MAIN */\nclass SuperRoot extends Owner {\n    constructor() {\n        /* VARIABLES */\n        super(...arguments);\n        this.context = {};\n    }\n}\n/* EXPORT */\nexport default SuperRoot;\n","/* IMPORT */\nimport SuperRoot from './objects/superroot.js';\n/* MAIN - READ */\n// This module relies on live-binding of exported variables to avoid a bunch of property accesses\nlet BATCH;\nlet SUPER_OWNER = new SuperRoot();\nlet OBSERVER;\nlet OWNER = SUPER_OWNER;\n/* MAIN - WRITE */\n// Unfortunately live-bounded exports can't just be overridden, so we need these functions\nconst setBatch = (value) => BATCH = value;\nconst setObserver = (value) => OBSERVER = value;\nconst setOwner = (value) => OWNER = value;\n/* EXPORT */\nexport { BATCH, OBSERVER, OWNER, SUPER_OWNER };\nexport { setBatch, setObserver, setOwner };\n","/* IMPORT */\nimport { setBatch } from '../context.js';\nimport { noop } from '../utils.js';\n/* HELPERS */\nlet M = 0;\nlet resolve = noop;\n/* MAIN */\nconst batch = async (fn) => {\n    if (!M) {\n        setBatch(new Promise(r => resolve = r));\n    }\n    try {\n        M += 1;\n        return await fn();\n    }\n    finally {\n        M -= 1;\n        if (!M) {\n            setBatch(undefined);\n            resolve();\n        }\n    }\n};\n/* MAIN */\nexport default batch;\n","/* IMPORT */\nimport { SYMBOL_OBSERVABLE_FROZEN, SYMBOL_OBSERVABLE_READABLE } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nconst isObservableFrozen = (value) => {\n    return isFunction(value) && ((SYMBOL_OBSERVABLE_FROZEN in value) || !!value[SYMBOL_OBSERVABLE_READABLE]?.parent?.disposed);\n};\n/* EXPORT */\nexport default isObservableFrozen;\n","/* IMPORT */\nimport { SYMBOL_UNTRACKED, SYMBOL_UNTRACKED_UNWRAPPED } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nconst isUntracked = (value) => {\n    return isFunction(value) && ((SYMBOL_UNTRACKED in value) || (SYMBOL_UNTRACKED_UNWRAPPED in value));\n};\n/* EXPORT */\nexport default isUntracked;\n","/* IMPORT */\n/* MAIN */\n// This ensures that there's only one flushing of the queue happening at the same time\nclass Scheduler {\n    constructor() {\n        /* VARIABLES */\n        this.A1 = [];\n        this.M = 0;\n        this.A2 = false;\n        /* QUEING API */\n        this.N = () => {\n            if (this.A2)\n                return;\n            if (this.M)\n                return;\n            if (!this.A1.length)\n                return;\n            try {\n                this.A2 = true;\n                while (true) {\n                    const queue = this.A1;\n                    if (!queue.length)\n                        break;\n                    this.A1 = [];\n                    for (let i = 0, l = queue.length; i < l; i++) {\n                        queue[i].C();\n                    }\n                }\n            }\n            finally {\n                this.A2 = false;\n            }\n        };\n        this.E = (fn) => {\n            this.M += 1;\n            fn();\n            this.M -= 1;\n            this.N();\n        };\n        /* SCHEDULING API */\n        this.F = (observer) => {\n            this.A1.push(observer);\n        };\n    }\n}\n/* EXPORT */\nexport default new Scheduler();\n","/* IMPORT */\nimport { DIRTY_MAYBE_NO, DIRTY_YES, UNINITIALIZED } from '../constants.js';\nimport { OBSERVER } from '../context.js';\nimport Scheduler from './scheduler.sync.js';\nimport { is, nope } from '../utils.js';\n/* MAIN */\nclass Observable {\n    /* CONSTRUCTOR */\n    constructor(value, options, parent) {\n        this.K = new Set();\n        this.value = value;\n        if (parent) {\n            this.parent = parent;\n        }\n        if (options?.equals !== undefined) {\n            this.equals = options.equals || nope;\n        }\n    }\n    /* API */\n    get() {\n        if (!this.parent?.disposed) {\n            this.parent?.C();\n            OBSERVER?.A.L(this);\n        }\n        return this.value;\n    }\n    set(value) {\n        const equals = this.equals || is;\n        const fresh = (this.value === UNINITIALIZED) || !equals(value, this.value);\n        if (!fresh)\n            return value;\n        this.value = value;\n        Scheduler.M += 1;\n        this.I(DIRTY_YES);\n        Scheduler.M -= 1;\n        Scheduler.N();\n        return value;\n    }\n    I(J) {\n        for (const observer of this.K) {\n            if (observer.J !== DIRTY_MAYBE_NO || observer.A.has(this)) { // Maybe this is a potential future dependency we haven't re-read yet\n                if (observer.sync) {\n                    observer.J = Math.max(observer.J, J);\n                    Scheduler.F(observer);\n                }\n                else {\n                    observer.I(J);\n                }\n            }\n        }\n    }\n    C(fn) {\n        const value = fn(this.value);\n        return this.set(value);\n    }\n}\n/* EXPORT */\nexport default Observable;\n","/* IMPORT */\n/* MAIN */\n// Dedicated data structures for managing A efficiently\n// We use an array if the list is small enough, as that's faster than a Set, and only switch to Sets O that\nclass ObservablesArray {\n    /* CONSTRUCTOR */\n    constructor(observer) {\n        this.observer = observer;\n        this.A = [];\n        this.P = 0;\n    }\n    /* API */\n    Q(deep) {\n        if (deep) {\n            const { observer, A } = this;\n            for (let i = 0; i < A.length; i++) {\n                A[i].K.delete(observer);\n            }\n        }\n        this.P = 0;\n    }\n    R() {\n        const { observer, A, P } = this;\n        const observablesLength = A.length;\n        if (P < observablesLength) {\n            for (let i = P; i < observablesLength; i++) {\n                A[i].K.delete(observer);\n            }\n            A.length = P;\n        }\n    }\n    empty() {\n        return !this.A.length;\n    }\n    has(observable) {\n        const index = this.A.indexOf(observable);\n        return index >= 0 && index < this.P;\n    }\n    L(observable) {\n        const { observer, A, P } = this;\n        const observablesLength = A.length;\n        if (observablesLength > 0) {\n            if (A[P] === observable) {\n                this.P += 1;\n                return;\n            }\n            const index = A.indexOf(observable);\n            if (index >= 0 && index < P) {\n                return;\n            }\n            if (P < observablesLength - 1) {\n                this.R();\n            }\n            else if (P === observablesLength - 1) {\n                A[P].K.delete(observer);\n            }\n        }\n        observable.K.add(observer);\n        A[this.P++] = observable;\n        if (P === 128) { // Switching to a Set, as indexOf checks may get artbirarily expensive otherwise\n            observer.A = new ObservablesSet(observer, A);\n        }\n    }\n    C() {\n        const { A } = this;\n        for (let i = 0, l = A.length; i < l; i++) {\n            A[i].parent?.C();\n        }\n    }\n}\nclass ObservablesSet {\n    /* CONSTRUCTOR */\n    constructor(observer, A) {\n        this.observer = observer;\n        this.A = new Set(A);\n    }\n    /* API */\n    Q(deep) {\n        for (const observable of this.A) {\n            observable.K.delete(this.observer);\n        }\n    }\n    R() {\n        return;\n    }\n    empty() {\n        return !this.A.size;\n    }\n    has(observable) {\n        return this.A.has(observable);\n    }\n    L(observable) {\n        const { observer, A } = this;\n        const sizePrev = A.size;\n        observable.K.add(observer);\n        const sizeNext = A.size;\n        if (sizePrev === sizeNext)\n            return; // Cheaper than Set.has+Set.add\n        A.add(observable);\n    }\n    C() {\n        for (const observable of this.A) {\n            observable.parent?.C();\n        }\n    }\n}\n/* EXPORT */\nexport { ObservablesArray, ObservablesSet };\n","/* IMPORT */\nimport { DIRTY_NO, DIRTY_MAYBE_NO, DIRTY_MAYBE_YES, DIRTY_YES } from '../constants.js';\nimport { OWNER, SUPER_OWNER } from '../context.js';\nimport { lazyArrayPush } from '../lazy.js';\nimport { ObservablesArray, ObservablesSet } from './observables.js';\nimport Owner from './owner.js';\n/* MAIN */\nclass Observer extends Owner {\n    /* CONSTRUCTOR */\n    constructor() {\n        super();\n        /* VARIABLES */\n        this.parent = OWNER;\n        this.context = OWNER.context;\n        this.J = DIRTY_YES;\n        this.A = new ObservablesArray(this);\n        if (OWNER !== SUPER_OWNER) {\n            lazyArrayPush(this.parent, 'K', this);\n        }\n    }\n    /* API */\n    Q(deep) {\n        this.A.Q(deep);\n        super.Q(deep);\n    }\n    H(fn) {\n        this.Q(false);\n        this.J = DIRTY_MAYBE_NO; // Resetting the trip flag, we didn't re-execute just yet\n        try {\n            return this.E(fn, this, this);\n        }\n        finally {\n            this.A.R();\n        }\n    }\n    run() {\n        throw new Error('Abstract method');\n    }\n    I(J) {\n        throw new Error('Abstract method');\n    }\n    C() {\n        if (this.disposed)\n            return; // Disposed, it shouldn't be updated again\n        if (this.J === DIRTY_MAYBE_YES) { // Maybe we are dirty, let's check with our A, to be sure\n            this.A.C();\n        }\n        if (this.J === DIRTY_YES) { // We are dirty, let's H\n            this.J = DIRTY_MAYBE_NO; // Trip flag, to be able to tell if we caused ourselves to be dirty again\n            this.run();\n            if (this.J === DIRTY_MAYBE_NO) { // Not dirty anymore\n                this.J = DIRTY_NO;\n            }\n            else { // Maybe we are still dirty, let's check again\n                this.C();\n            }\n        }\n        else { // Not dirty\n            this.J = DIRTY_NO;\n        }\n    }\n}\n/* EXPORT */\nexport default Observer;\n","/* IMPORT */\nimport { DIRTY_MAYBE_YES, UNAVAILABLE, UNINITIALIZED } from '../constants.js';\nimport Observable from './observable.js';\nimport Observer from './observer.js';\n/* MAIN */\nclass Memo extends Observer {\n    /* CONSTRUCTOR */\n    constructor(fn, options) {\n        super();\n        this.fn = fn;\n        this.observable = new Observable(UNINITIALIZED, options, this);\n        if (options?.sync === true) {\n            this.sync = true;\n            this.C();\n        }\n    }\n    /* API */\n    run() {\n        const G = super.H(this.fn);\n        if (!this.disposed && this.A.empty()) {\n            this.disposed = true;\n        }\n        if (G !== UNAVAILABLE) {\n            this.observable.set(G);\n        }\n    }\n    I(J) {\n        const statusPrev = this.J;\n        if (statusPrev >= J)\n            return;\n        this.J = J;\n        if (statusPrev === DIRTY_MAYBE_YES)\n            return;\n        this.observable.I(DIRTY_MAYBE_YES);\n    }\n}\n/* EXPORT */\nexport default Memo;\n","/* IMPORT */\nimport isObservableFrozen from './is_observable_frozen.js';\nimport isUntracked from './is_untracked.js';\nimport { frozen, readable } from '../objects/callable.js';\nimport Memo from '../objects/memo.js';\n/* MAIN */\nconst memo = (fn, options) => {\n    if (isObservableFrozen(fn)) {\n        return fn;\n    }\n    else if (isUntracked(fn)) {\n        return frozen(fn());\n    }\n    else {\n        const memo = new Memo(fn, options);\n        const observable = readable(memo.observable);\n        return observable;\n    }\n};\n/* EXPORT */\nexport default memo;\n","/* IMPORT */\nimport isObservableFrozen from './is_observable_frozen.js';\nimport isUntracked from './is_untracked.js';\nimport memo from './memo.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nconst boolean = (value) => {\n    if (isFunction(value)) {\n        if (isObservableFrozen(value) || isUntracked(value)) {\n            return !!value();\n        }\n        else {\n            return memo(() => !!value());\n        }\n    }\n    else {\n        return !!value;\n    }\n};\n/* EXPORT */\nexport default boolean;\n","/* IMPORT */\nimport { OWNER } from '../context.js';\nimport { lazyArrayPush } from '../lazy.js';\n/* MAIN */\nconst cleanup = (fn) => {\n    lazyArrayPush(OWNER, 'B', fn);\n};\n/* EXPORT */\nexport default cleanup;\n","/* IMPORT */\nimport { OWNER } from '../context.js';\nimport { lazyArrayPush } from '../lazy.js';\nimport Owner from './owner.js';\n/* MAIN */\nclass Context extends Owner {\n    /* CONSTRUCTOR */\n    constructor(context) {\n        super();\n        /* VARIABLES */\n        this.parent = OWNER;\n        this.context = { ...OWNER.context, ...context };\n        lazyArrayPush(this.parent, 'D', this);\n    }\n    /* API */\n    E(fn) {\n        return super.E(fn, this, undefined);\n    }\n}\n/* EXPORT */\nexport default Context;\n","/* IMPORT */\nimport { OWNER } from '../context.js';\nimport Context from '../objects/context.js';\nimport { isSymbol, noop } from '../utils.js';\nfunction context(symbolOrContext, fn) {\n    if (isSymbol(symbolOrContext)) {\n        return OWNER.context[symbolOrContext];\n    }\n    else {\n        return new Context(symbolOrContext).E(fn || noop);\n    }\n}\n/* EXPORT */\nexport default context;\n","/* IMPORT */\nimport cleanup from './cleanup.js';\nimport { readable } from '../objects/callable.js';\nimport Observable from '../objects/observable.js';\n/* MAIN */\nconst disposed = () => {\n    const observable = new Observable(false);\n    const A4 = () => observable.set(true);\n    cleanup(A4);\n    return readable(observable);\n};\n/* EXPORT */\nexport default disposed;\n","/* IMPORT */\nimport { BATCH } from '../context.js';\n/* MAIN */\n// Using 2 microtasks to give a chance to things using 1 microtask (like refs in Voby) to run first\nclass Scheduler {\n    constructor() {\n        /* VARIABLES */\n        this.A1 = [];\n        this.A2 = false;\n        this.A3 = false;\n        /* QUEUING API */\n        this.N = () => {\n            if (this.A2)\n                return;\n            if (!this.A1.length)\n                return;\n            try {\n                this.A2 = true;\n                while (true) {\n                    const queue = this.A1;\n                    if (!queue.length)\n                        break;\n                    this.A1 = [];\n                    for (let i = 0, l = queue.length; i < l; i++) {\n                        queue[i].C();\n                    }\n                }\n            }\n            finally {\n                this.A2 = false;\n            }\n        };\n        this.queue = () => {\n            if (this.A3)\n                return;\n            this.A3 = true;\n            this.resolve();\n        };\n        this.resolve = () => {\n            queueMicrotask(() => {\n                queueMicrotask(() => {\n                    if (BATCH) {\n                        BATCH.finally(this.resolve);\n                    }\n                    else {\n                        this.A3 = false;\n                        this.N();\n                    }\n                });\n            });\n        };\n        /* SCHEDULING API */\n        this.F = (effect) => {\n            this.A1.push(effect);\n            this.queue();\n        };\n    }\n}\n/* EXPORT */\nexport default new Scheduler();\n","/* IMPORT */\nimport { lazyArrayPush } from '../lazy.js';\nimport Observer from './observer.js';\nimport Scheduler from './scheduler.async.js';\nimport { SYMBOL_SUSPENSE } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nclass Effect extends Observer {\n    /* CONSTRUCTOR */\n    constructor(fn, options) {\n        super();\n        this.fn = fn;\n        if (options?.suspense !== false) {\n            const suspense = this.get(SYMBOL_SUSPENSE);\n            if (suspense) {\n                this.suspense = suspense;\n            }\n        }\n        if (options?.sync === true) {\n            this.sync = true;\n        }\n        if (options?.sync === 'init') {\n            this.init = true;\n            this.C();\n        }\n        else {\n            this.F();\n        }\n    }\n    /* API */\n    run() {\n        const G = super.H(this.fn);\n        if (isFunction(G)) {\n            lazyArrayPush(this, 'B', G);\n        }\n    }\n    F() {\n        if (this.suspense?.suspended)\n            return;\n        if (this.sync) {\n            this.C();\n        }\n        else {\n            Scheduler.F(this);\n        }\n    }\n    I(J) {\n        const statusPrev = this.J;\n        if (statusPrev >= J)\n            return;\n        this.J = J;\n        if (!this.sync || (statusPrev !== 2 && statusPrev !== 3)) { // It isn't currently executing, so let's F it\n            this.F();\n        }\n    }\n    C() {\n        if (this.suspense?.suspended)\n            return;\n        super.C();\n    }\n}\n/* EXPORT */\nexport default Effect;\n","/* IMPORT */\nimport Effect from '../objects/effect.js';\n/* MAIN */\nconst effect = (fn, options) => {\n    const effect = new Effect(fn, options);\n    const Q = () => effect.Q(true);\n    return Q;\n};\n/* EXPORT */\nexport default effect;\n","/* IMPORT */\nimport memo from './memo.js';\nimport { frozen } from '../objects/callable.js';\nimport { SYMBOL_OBSERVABLE, SYMBOL_UNTRACKED, SYMBOL_UNTRACKED_UNWRAPPED } from '../symbols.js';\nimport { isFunction } from '../utils.js';\nfunction resolve(value) {\n    if (isFunction(value)) {\n        if (SYMBOL_UNTRACKED_UNWRAPPED in value) {\n            return resolve(value());\n        }\n        else if (SYMBOL_UNTRACKED in value) {\n            return frozen(resolve(value()));\n        }\n        else if (SYMBOL_OBSERVABLE in value) {\n            return value;\n        }\n        else {\n            return memo(() => resolve(value()));\n        }\n    }\n    if (value instanceof Array) {\n        const resolved = new Array(value.length);\n        for (let i = 0, l = resolved.length; i < l; i++) {\n            resolved[i] = resolve(value[i]);\n        }\n        return resolved;\n    }\n    else {\n        return value;\n    }\n}\n/* EXPORT */\nexport default resolve;\n","/* IMPORT */\nimport { OWNER } from '../context.js';\nimport { lazySetAdd, lazySetDelete } from '../lazy.js';\nimport Owner from './owner.js';\nimport { SYMBOL_SUSPENSE } from '../symbols.js';\n/* MAIN */\nclass Root extends Owner {\n    /* CONSTRUCTOR */\n    constructor(V) {\n        super();\n        /* VARIABLES */\n        this.parent = OWNER;\n        this.context = OWNER.context;\n        if (V) {\n            const suspense = this.get(SYMBOL_SUSPENSE);\n            if (suspense) {\n                this.A0 = true;\n                lazySetAdd(this.parent, 'T', this);\n            }\n        }\n    }\n    /* API */\n    Q(deep) {\n        if (this.A0) {\n            lazySetDelete(this.parent, 'T', this);\n        }\n        super.Q(deep);\n    }\n    E(fn) {\n        const Q = () => this.Q(true);\n        const fnWithDispose = () => fn(Q);\n        return super.E(fnWithDispose, this, undefined);\n    }\n}\n/* EXPORT */\nexport default Root;\n","/* IMPORT */\nimport { OWNER } from '../context.js';\nimport { lazySetAdd, lazySetDelete } from '../lazy.js';\nimport cleanup from './cleanup.js';\nimport resolve from './resolve.js';\nimport { frozen, readable } from '../objects/callable.js';\nimport Observable from '../objects/observable.js';\nimport Root from '../objects/root.js';\nimport { SYMBOL_CACHED, SYMBOL_SUSPENSE, SYMBOL_UNCACHED } from '../symbols.js';\n/* HELPERS */\nconst DUMMY_INDEX = frozen(-1);\nclass MappedRoot extends Root {\n}\n/* MAIN */\nclass CacheKeyed {\n    /* CONSTRUCTOR */\n    constructor(fn) {\n        /* VARIABLES */\n        this.parent = OWNER;\n        this.suspense = OWNER.get(SYMBOL_SUSPENSE);\n        this.A5 = new Map();\n        this.A6 = false; // The A6 is flipped with each iteration, the T that don't have the updated one are disposed, it's like a cheap M basically\n        this.A7 = 0; // Number of previous items\n        this.A8 = 0; // Number of previous items that got reused\n        this.A9 = 0; // Number of next items\n        /* API */\n        this.cleanup = () => {\n            if (!this.A7)\n                return; // There was nothing AA, no need to cleanup\n            if (this.A7 === this.A8)\n                return; // All the previous items were reused, no need to cleanup\n            const { A5, A6 } = this;\n            if (!A5.size)\n                return; // Nothing to Q of\n            if (this.A9) { // Regular cleanup\n                A5.forEach((mapped, value) => {\n                    if (mapped.A6 === A6)\n                        return;\n                    mapped.Q(true);\n                    A5.delete(value);\n                });\n            }\n            else { // There is nothing O, disposing quickly\n                this.A5.forEach(mapped => {\n                    mapped.Q(true);\n                });\n                this.A5 = new Map();\n            }\n        };\n        this.Q = () => {\n            if (this.suspense) {\n                lazySetDelete(this.parent, 'T', this.T);\n            }\n            this.A7 = this.A5.size;\n            this.A8 = 0;\n            this.A9 = 0;\n            this.cleanup();\n        };\n        this.AA = () => {\n            this.A6 = !this.A6;\n            this.A8 = 0;\n            this.A9 = 0;\n        };\n        this.O = (values) => {\n            this.A9 = values.length;\n            this.cleanup();\n            this.A7 = this.A9;\n            this.A8 = 0;\n        };\n        this.map = (values) => {\n            this.AA();\n            const { A5, A6, fn, AB } = this;\n            const results = new Array(values.length);\n            let resultsCached = true; // Whether all results are cached, if so this enables an optimization\n            let resultsUncached = true; // Whether all results are anew, if so this enables an optimization in Voby\n            let A8 = 0;\n            for (let i = 0, l = values.length; i < l; i++) {\n                const value = values[i];\n                const cached = A5.get(value);\n                if (cached && cached.A6 !== A6) {\n                    resultsUncached = false;\n                    A8 += 1;\n                    cached.A6 = A6;\n                    cached.index?.set(i);\n                    results[i] = cached.G; //TSC\n                }\n                else {\n                    resultsCached = false;\n                    const mapped = new MappedRoot(false);\n                    if (cached) {\n                        cleanup(() => mapped.Q(true));\n                    }\n                    mapped.E(() => {\n                        let index = DUMMY_INDEX;\n                        if (AB) {\n                            mapped.index = new Observable(i);\n                            index = readable(mapped.index);\n                        }\n                        const G = results[i] = resolve(fn(value, index));\n                        mapped.A6 = A6;\n                        mapped.G = G;\n                        if (!cached) {\n                            A5.set(value, mapped);\n                        }\n                    });\n                }\n            }\n            this.A8 = A8;\n            this.O(values);\n            if (resultsCached) {\n                results[SYMBOL_CACHED] = true;\n            }\n            if (resultsUncached) {\n                results[SYMBOL_UNCACHED] = true;\n            }\n            return results;\n        };\n        this.T = () => {\n            return Array.from(this.A5.values());\n        };\n        this.fn = fn;\n        this.AB = (fn.length > 1);\n        if (this.suspense) {\n            lazySetAdd(this.parent, 'T', this.T);\n        }\n    }\n}\n/* EXPORT */\nexport default CacheKeyed;\n","/* IMPORT */\nimport { SYMBOL_OBSERVABLE } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nconst isObservable = (value) => {\n    return isFunction(value) && (SYMBOL_OBSERVABLE in value);\n};\n/* EXPORT */\nexport default isObservable;\n","/* IMPORT */\nimport isObservable from './is_observable.js';\nimport { isFunction } from '../utils.js';\nfunction get(value, getFunction = true) {\n    const is = getFunction ? isFunction : isObservable;\n    if (is(value)) {\n        return value();\n    }\n    else {\n        return value;\n    }\n}\n/* EXPORT */\nexport default get;\n","/* IMPORT */\nimport { DIRTY_MAYBE_YES, DIRTY_YES } from '../constants.js';\nimport { OWNER } from '../context.js';\nimport { lazyArrayEach, lazyArrayPush, lazySetEach } from '../lazy.js';\nimport Effect from './effect.js';\nimport Owner from './owner.js';\nimport { SYMBOL_SUSPENSE } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nclass Suspense extends Owner {\n    /* CONSTRUCTOR */\n    constructor() {\n        super();\n        /* VARIABLES */\n        this.parent = OWNER;\n        this.context = { ...OWNER.context, [SYMBOL_SUSPENSE]: this };\n        lazyArrayPush(this.parent, 'U', this);\n        this.suspended = (OWNER.get(SYMBOL_SUSPENSE)?.suspended || 0);\n    }\n    /* API */\n    A4(force) {\n        if (!this.suspended && !force)\n            return; // Already suspended, this can happen at instantion time\n        const suspendedPrev = this.suspended;\n        const suspendedNext = suspendedPrev + (force ? 1 : -1);\n        this.suspended = suspendedNext;\n        if (!!suspendedPrev === !!suspendedNext)\n            return; // Same state, nothing to pause or resume\n        /* NOTIFYING OBSERVERS, ROOTS AND SUSPENSES */\n        this.observable?.set(!!suspendedNext);\n        const notifyOwner = (owner) => {\n            lazyArrayEach(owner.D, notifyOwner);\n            lazyArrayEach(owner.K, notifyObserver);\n            lazyArrayEach(owner.U, notifySuspense);\n            lazySetEach(owner.T, notifyRoot);\n        };\n        const notifyObserver = (observer) => {\n            if (observer instanceof Effect) {\n                if (observer.J === DIRTY_MAYBE_YES || observer.J === DIRTY_YES) {\n                    if (observer.init) {\n                        observer.C();\n                    }\n                    else {\n                        observer.F();\n                    }\n                }\n            }\n            notifyOwner(observer);\n        };\n        const notifyRoot = (root) => {\n            if (isFunction(root)) {\n                root().forEach(notifyOwner);\n            }\n            else {\n                notifyOwner(root);\n            }\n        };\n        const notifySuspense = (suspense) => {\n            suspense.A4(force);\n        };\n        notifyOwner(this);\n    }\n    E(fn) {\n        return super.E(fn, this, undefined);\n    }\n}\n/* EXPORT */\nexport default Suspense;\n","/* IMPORT */\nimport boolean from './boolean.js';\nimport effect from './effect.js';\nimport get from './get.js';\nimport Suspense from '../objects/suspense.js';\n/* MAIN */\nconst suspense = (when, fn) => {\n    const suspense = new Suspense();\n    const condition = boolean(when);\n    const A4 = () => suspense.A4(get(condition));\n    effect(A4, { sync: true });\n    return suspense.E(fn);\n};\n/* EXPORT */\nexport default suspense;\n","/* IMPORT */\nimport { OWNER } from '../context.js';\nimport { lazySetAdd, lazySetDelete } from '../lazy.js';\nimport cleanup from './cleanup.js';\nimport get from './get.js';\nimport memo from './memo.js';\nimport resolve from './resolve.js';\nimport suspense from './suspense.js';\nimport { frozen, readable } from '../objects/callable.js';\nimport Observable from '../objects/observable.js';\nimport Root from '../objects/root.js';\nimport { SYMBOL_CACHED, SYMBOL_SUSPENSE, SYMBOL_UNCACHED } from '../symbols.js';\n/* HELPERS */\nconst DUMMY_INDEX = frozen(-1);\nclass MappedRoot extends Root {\n}\n/* MAIN */\n//TODO: Optimize this more\nclass CacheUnkeyed {\n    /* CONSTRUCTOR */\n    constructor(fn, pooled) {\n        /* VARIABLES */\n        this.parent = OWNER;\n        this.suspense = OWNER.get(SYMBOL_SUSPENSE);\n        this.A5 = new Map();\n        this.AC = [];\n        this.AD = 0;\n        /* API */\n        this.cleanup = () => {\n            let pooled = 0;\n            let poolable = Math.max(0, this.pooled ? this.AD - this.AC.length : 0);\n            this.A5.forEach(mapped => {\n                if (poolable > 0 && pooled++ < poolable) {\n                    mapped.suspended?.set(true);\n                    this.AC.push(mapped);\n                }\n                else {\n                    mapped.Q(true);\n                }\n            });\n        };\n        this.Q = () => {\n            if (this.suspense) {\n                lazySetDelete(this.parent, 'T', this.T);\n            }\n            this.A5.forEach(mapped => {\n                mapped.Q(true);\n            });\n            this.AC.forEach(mapped => {\n                mapped.Q(true);\n            });\n        };\n        this.map = (values) => {\n            const { A5, fn, AB } = this;\n            const cacheNext = new Map();\n            const results = new Array(values.length);\n            const AC = this.AC;\n            const pooled = this.pooled;\n            let resultsCached = true; // Whether all results are cached, if so this enables an optimization\n            let resultsUncached = true; // Whether all results are anew, if so this enables an optimization in Voby\n            let leftovers = [];\n            if (A5.size) {\n                for (let i = 0, l = values.length; i < l; i++) {\n                    const value = values[i];\n                    const cached = A5.get(value);\n                    if (cached) {\n                        resultsUncached = false;\n                        A5.delete(value);\n                        cacheNext.set(value, cached);\n                        cached.index?.set(i);\n                        results[i] = cached.G; //TSC\n                    }\n                    else {\n                        leftovers.push(i);\n                    }\n                }\n            }\n            else {\n                leftovers = new Array(results.length);\n            }\n            outer: for (let i = 0, l = leftovers.length; i < l; i++) {\n                const index = leftovers[i] || i;\n                const value = values[index];\n                const isDuplicate = cacheNext.has(value);\n                if (!isDuplicate) {\n                    for (const [key, mapped] of A5.entries()) {\n                        A5.delete(key);\n                        cacheNext.set(value, mapped);\n                        mapped.index?.set(index);\n                        mapped.value?.set(value);\n                        results[index] = mapped.G; //TSC\n                        continue outer;\n                    }\n                }\n                resultsCached = false;\n                let mapped;\n                if (pooled && AC.length) {\n                    mapped = AC.pop(); //TSC\n                    mapped.index?.set(index);\n                    mapped.value?.set(value);\n                    mapped.suspended?.set(false);\n                    results[index] = mapped.G; //TSC\n                }\n                else {\n                    mapped = new MappedRoot(false);\n                    mapped.E(() => {\n                        let $index = DUMMY_INDEX;\n                        if (AB) {\n                            mapped.index = new Observable(index);\n                            $index = readable(mapped.index);\n                        }\n                        const observable = mapped.value = new Observable(value);\n                        const suspended = pooled ? new Observable(false) : undefined;\n                        const $value = memo(() => get(observable.get())); //TSC\n                        const G = results[index] = suspended ? suspense(() => suspended.get(), () => resolve(fn($value, $index))) : resolve(fn($value, $index));\n                        mapped.value = observable;\n                        mapped.G = G;\n                        mapped.suspended = suspended;\n                    });\n                }\n                if (isDuplicate) { // Expensive, not reusable\n                    cleanup(() => mapped.Q(true));\n                }\n                else { // Cheap, reusable\n                    cacheNext.set(value, mapped);\n                }\n            }\n            this.AD = Math.max(this.AD, results.length);\n            this.cleanup();\n            this.A5 = cacheNext;\n            if (resultsCached) {\n                results[SYMBOL_CACHED] = true;\n            }\n            if (resultsUncached) {\n                results[SYMBOL_UNCACHED] = true;\n            }\n            return results;\n        };\n        this.T = () => {\n            return [...this.A5.values(), ...this.AC.values()];\n        };\n        this.fn = fn;\n        this.AB = (fn.length > 1);\n        this.pooled = pooled;\n        if (this.suspense) {\n            lazySetAdd(this.parent, 'T', this.T);\n        }\n    }\n}\n/* EXPORT */\nexport default CacheUnkeyed;\n","/* IMPORT */\nimport { SYMBOL_STORE } from '../symbols.js';\nimport { isObject } from '../utils.js';\n/* MAIN */\nconst isStore = (value) => {\n    return isObject(value) && (SYMBOL_STORE in value);\n};\n/* EXPORT */\nexport default isStore;\n","/* IMPORT */\nimport { OBSERVER, setObserver } from '../context.js';\nimport { isFunction } from '../utils.js';\nfunction untrack(fn) {\n    if (isFunction(fn)) {\n        const observerPrev = OBSERVER;\n        if (observerPrev) {\n            try {\n                setObserver(undefined);\n                return fn();\n            }\n            finally {\n                setObserver(observerPrev);\n            }\n        }\n        else {\n            return fn();\n        }\n    }\n    else {\n        return fn;\n    }\n}\n/* EXPORT */\nexport default untrack;\n","/* IMPORT */\nimport untrack from './untrack.js';\n/* MAIN */\n// This function ensures an Observable contains a fresh value, mainly to try to push it into a frozen state, if possible\nconst warmup = (value) => {\n    untrack(value);\n    return value;\n};\n/* EXPORT */\nexport default warmup;\n","/* IMPORT */\nimport get from './get.js';\nimport isObservableFrozen from './is_observable_frozen.js';\nimport isUntracked from './is_untracked.js';\nimport memo from './memo.js';\nimport resolve from './resolve.js';\nimport warmup from './warmup.js';\nimport { frozen } from '../objects/callable.js';\nimport { is, isFunction } from '../utils.js';\n/* HELPERS */\nconst match = (condition, values, fallback) => {\n    for (let i = 0, l = values.length; i < l; i++) {\n        const value = values[i];\n        if (value.length === 1)\n            return value[0];\n        if (is(value[0], condition))\n            return value[1];\n    }\n    return fallback;\n};\nfunction _switch(when, values, fallback) {\n    const isDynamic = isFunction(when) && !isObservableFrozen(when) && !isUntracked(when);\n    if (isDynamic) {\n        const value = warmup(memo(() => match(when(), values, fallback)));\n        if (isObservableFrozen(value)) {\n            return frozen(resolve(value()));\n        }\n        else {\n            return memo(() => resolve(get(value)));\n        }\n    }\n    else {\n        const value = match(get(when), values, fallback);\n        return frozen(resolve(value));\n    }\n}\n/* EXPORT */\nexport default _switch;\n","/* IMPORT */\nimport boolean from './boolean.js';\nimport _switch from './switch.js';\n/* MAIN */\nconst ternary = (when, valueTrue, valueFalse) => {\n    const condition = boolean(when);\n    return _switch(condition, [[true, valueTrue], [valueFalse]]);\n};\n/* EXPORT */\nexport default ternary;\n","/* IMPORT */\nimport { BATCH } from '../context.js';\nimport SchedulerAsync from '../objects/scheduler.async.js';\nimport SchedulerSync from '../objects/scheduler.sync.js';\n/* MAIN */\nconst isBatching = () => {\n    return !!BATCH || SchedulerAsync.A3 || SchedulerAsync.A2 || SchedulerSync.A2;\n};\n/* EXPORT */\nexport default isBatching;\n","/* IMPORT */\nimport { writable } from '../objects/callable.js';\nimport ObservableClass from '../objects/observable.js';\nfunction observable(value, options) {\n    return writable(new ObservableClass(value, options));\n}\n/* EXPORT */\nexport default observable;\n","/* IMPORT */\nimport { SYMBOL_OBSERVABLE_WRITABLE } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nconst isObservableWritable = (value) => {\n    return isFunction(value) && (SYMBOL_OBSERVABLE_WRITABLE in value);\n};\n/* EXPORT */\nexport default isObservableWritable;\n","/* IMPORT */\nimport { UNAVAILABLE } from '../constants.js';\nimport { SYMBOL_OBSERVABLE_READABLE, SYMBOL_OBSERVABLE_WRITABLE } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nconst target = (observable) => {\n    if (isFunction(observable)) {\n        return observable[SYMBOL_OBSERVABLE_READABLE] || observable[SYMBOL_OBSERVABLE_WRITABLE] || UNAVAILABLE;\n    }\n    else {\n        return observable;\n    }\n};\n/* EXPORT */\nexport default target;\n","/* IMPORT */\nimport isObservableWritable from './is_observable_writable.js';\nimport target from './target.js';\nimport { readable } from '../objects/callable.js';\n/* MAIN */\nconst readonly = (observable) => {\n    if (isObservableWritable(observable)) {\n        return readable(target(observable));\n    }\n    else {\n        return observable;\n    }\n};\n/* EXPORT */\nexport default readonly;\n","/* IMPORT */\nimport Root from '../objects/root.js';\n/* MAIN */\nconst root = (fn) => {\n    return new Root(true).E(fn);\n};\n/* EXPORT */\nexport default root;\n","/* IMPORT */\nimport { OBSERVABLE_FALSE, OBSERVABLE_TRUE } from '../constants.js';\nimport cleanup from './cleanup.js';\nimport effect from './effect.js';\nimport isObservableFrozen from './is_observable_frozen.js';\nimport memo from './memo.js';\nimport untrack from './untrack.js';\nimport warmup from './warmup.js';\nimport { readable } from '../objects/callable.js';\nimport Observable from '../objects/observable.js';\nimport { is } from '../utils.js';\n/* HELPERS */\nclass DisposableMap extends Map {\n    constructor() {\n        super(...arguments);\n        this.disposed = false;\n    }\n}\nclass SelectedObservable extends Observable {\n    constructor() {\n        super(...arguments);\n        this.AE = 1;\n    }\n    /* API */\n    call() {\n        if (this.AF.disposed)\n            return;\n        this.AE -= 1;\n        if (this.AE)\n            return;\n        this.AF.delete(this.AG);\n    }\n}\n/* MAIN */\nconst selector = (AG) => {\n    /* NORMALIZING SOURCE */\n    AG = warmup(memo(AG));\n    /* FROZEN SOURCE */\n    if (isObservableFrozen(AG)) {\n        const sourceValue = untrack(AG);\n        return (value) => {\n            return (value === sourceValue) ? OBSERVABLE_TRUE : OBSERVABLE_FALSE;\n        };\n    }\n    /* SELECTEDS */\n    let AF = new DisposableMap();\n    let selectedValue = untrack(AG);\n    effect(() => {\n        const valuePrev = selectedValue;\n        const valueNext = AG();\n        if (is(valuePrev, valueNext))\n            return;\n        selectedValue = valueNext;\n        AF.get(valuePrev)?.set(false);\n        AF.get(valueNext)?.set(true);\n    }, { suspense: false, sync: true });\n    /* CLEANUP ALL */\n    const cleanupAll = () => {\n        AF.disposed = true;\n    };\n    cleanup(cleanupAll);\n    /* SELECTOR */\n    return (value) => {\n        /* INIT */\n        let selected = AF.get(value);\n        if (selected) {\n            selected.AE += 1;\n        }\n        else {\n            selected = new SelectedObservable(value === selectedValue);\n            selected.AF = AF;\n            selected.AG = value;\n            AF.set(value, selected);\n        }\n        /* CLEANUP */\n        cleanup(selected);\n        /* RETURN */\n        return readable(selected);\n    };\n};\n/* EXPORT */\nexport default selector;\n","/* IMPORT */\nimport { BATCH, OBSERVER } from '../context.js';\nimport { lazySetAdd, lazySetDelete, lazySetEach } from '../lazy.js';\nimport cleanup from './cleanup.js';\nimport effect from './effect.js';\nimport isBatching from './is_batching.js';\nimport isStore from './is_store.js';\nimport untrack from './untrack.js';\nimport { readable } from '../objects/callable.js';\nimport ObservableClass from '../objects/observable.js';\nimport { SYMBOL_STORE, SYMBOL_STORE_KEYS, SYMBOL_STORE_OBSERVABLE, SYMBOL_STORE_TARGET, SYMBOL_STORE_VALUES, SYMBOL_STORE_UNTRACKED } from '../symbols.js';\nimport { castArray, is, isArray, isFunction, isObject, noop, nope } from '../utils.js';\n/* CLASSES */\nclass StoreMap extends Map {\n    AH(key, value) {\n        super.set(key, value);\n        return value;\n    }\n}\nclass StoreCleanable {\n    constructor() {\n        this.AE = 0;\n    }\n    listen() {\n        this.AE += 1;\n        cleanup(this);\n    }\n    call() {\n        this.AE -= 1;\n        if (this.AE)\n            return;\n        this.Q();\n    }\n    Q() { }\n}\nclass StoreKeys extends StoreCleanable {\n    constructor(parent, observable) {\n        super();\n        this.parent = parent;\n        this.observable = observable;\n    }\n    Q() {\n        this.parent.keys = undefined;\n    }\n}\nclass StoreValues extends StoreCleanable {\n    constructor(parent, observable) {\n        super();\n        this.parent = parent;\n        this.observable = observable;\n    }\n    Q() {\n        this.parent.values = undefined;\n    }\n}\nclass StoreHas extends StoreCleanable {\n    constructor(parent, key, observable) {\n        super();\n        this.parent = parent;\n        this.key = key;\n        this.observable = observable;\n    }\n    Q() {\n        this.parent.has?.delete(this.key);\n    }\n}\nclass StoreProperty extends StoreCleanable {\n    constructor(parent, key, observable, AI) {\n        super();\n        this.parent = parent;\n        this.key = key;\n        this.observable = observable;\n        this.AI = AI;\n    }\n    Q() {\n        this.parent.AJ?.delete(this.key);\n    }\n}\nconst StoreListenersRegular = {\n    /* VARIABLES */\n    AK: 0,\n    AL: new Set(),\n    AM: new Set(),\n    /* API */\n    AN: () => {\n        const { AL, AM } = StoreListenersRegular;\n        const traversed = new Set();\n        const traverse = (AI) => {\n            if (traversed.has(AI))\n                return;\n            traversed.add(AI);\n            lazySetEach(AI.AO, traverse);\n            lazySetEach(AI.AP, listener => {\n                AL.add(listener);\n            });\n        };\n        AM.forEach(traverse);\n        return () => {\n            AL.forEach(listener => {\n                listener();\n            });\n        };\n    },\n    V: (AI) => {\n        StoreListenersRegular.AM.add(AI);\n        StoreScheduler.F();\n    },\n    reset: () => {\n        StoreListenersRegular.AL = new Set();\n        StoreListenersRegular.AM = new Set();\n    }\n};\nconst StoreListenersRoots = {\n    /* VARIABLES */\n    AK: 0,\n    AM: new Map(),\n    /* API */\n    AN: () => {\n        const { AM } = StoreListenersRoots;\n        return () => {\n            AM.forEach((rootsSet, store) => {\n                const T = Array.from(rootsSet);\n                lazySetEach(store.AQ, listener => {\n                    listener(T);\n                });\n            });\n        };\n    },\n    V: (store, root) => {\n        const T = StoreListenersRoots.AM.get(store) || new Set();\n        T.add(root);\n        StoreListenersRoots.AM.set(store, T);\n        StoreScheduler.F();\n    },\n    AR: (current, parent, key) => {\n        if (!parent.AO) {\n            const root = current?.store || untrack(() => parent.store[key]);\n            StoreListenersRoots.V(parent, root);\n        }\n        else {\n            const traversed = new Set();\n            const traverse = (AI) => {\n                if (traversed.has(AI))\n                    return;\n                traversed.add(AI);\n                lazySetEach(AI.AO, parent => {\n                    if (!parent.AO) {\n                        StoreListenersRoots.V(parent, AI.store);\n                    }\n                    traverse(parent);\n                });\n            };\n            traverse(current || parent);\n        }\n    },\n    reset: () => {\n        StoreListenersRoots.AM = new Map();\n    }\n};\nconst StoreScheduler = {\n    /* VARIABLES */\n    AK: false,\n    /* API */\n    N: () => {\n        const flushRegular = StoreListenersRegular.AN();\n        const flushRoots = StoreListenersRoots.AN();\n        StoreScheduler.reset();\n        flushRegular();\n        flushRoots();\n    },\n    AS: () => {\n        if (isBatching()) {\n            if (BATCH) {\n                BATCH.finally(StoreScheduler.AS);\n            }\n            else {\n                setTimeout(StoreScheduler.AS, 0);\n            }\n        }\n        else {\n            StoreScheduler.N();\n        }\n    },\n    reset: () => {\n        StoreScheduler.AK = false;\n        StoreListenersRegular.reset();\n        StoreListenersRoots.reset();\n    },\n    F: () => {\n        if (StoreScheduler.AK)\n            return;\n        StoreScheduler.AK = true;\n        queueMicrotask(StoreScheduler.AS);\n    }\n};\n/* CONSTANTS */\nconst NODES = new WeakMap();\nconst SPECIAL_SYMBOLS = new Set([SYMBOL_STORE, SYMBOL_STORE_KEYS, SYMBOL_STORE_OBSERVABLE, SYMBOL_STORE_TARGET, SYMBOL_STORE_VALUES]);\nconst UNREACTIVE_KEYS = new Set(['__proto__', '__defineGetter__', '__defineSetter__', '__lookupGetter__', '__lookupSetter__', 'prototype', 'constructor', 'hasOwnProperty', 'isPrototypeOf', 'propertyIsEnumerable', 'toLocaleString', 'toSource', 'toString', 'valueOf']);\nconst STORE_TRAPS = {\n    /* API */\n    get: (target, key) => {\n        if (SPECIAL_SYMBOLS.has(key)) {\n            if (key === SYMBOL_STORE)\n                return true;\n            if (key === SYMBOL_STORE_TARGET)\n                return target;\n            if (key === SYMBOL_STORE_KEYS) {\n                if (isListenable()) {\n                    const AI = getNodeExisting(target);\n                    AI.keys || (AI.keys = getNodeKeys(AI));\n                    AI.keys.listen();\n                    AI.keys.observable.get();\n                }\n                return;\n            }\n            if (key === SYMBOL_STORE_VALUES) {\n                if (isListenable()) {\n                    const AI = getNodeExisting(target);\n                    AI.values || (AI.values = getNodeValues(AI));\n                    AI.values.listen();\n                    AI.values.observable.get();\n                }\n                return;\n            }\n            if (key === SYMBOL_STORE_OBSERVABLE) {\n                return (key) => {\n                    key = (typeof key === 'number') ? String(key) : key;\n                    const AI = getNodeExisting(target);\n                    const getter = AI.AT?.get(key);\n                    if (getter)\n                        return getter.bind(AI.store);\n                    AI.AJ || (AI.AJ = new StoreMap());\n                    const value = target[key];\n                    const property = AI.AJ.get(key) || AI.AJ.AH(key, getNodeProperty(AI, key, value));\n                    const options = AI.equals ? { equals: AI.equals } : undefined;\n                    property.observable || (property.observable = getNodeObservable(AI, value, options));\n                    const observable = readable(property.observable);\n                    return observable;\n                };\n            }\n        }\n        if (UNREACTIVE_KEYS.has(key))\n            return target[key];\n        const AI = getNodeExisting(target);\n        const getter = AI.AT?.get(key);\n        const value = getter || target[key];\n        AI.AJ || (AI.AJ = new StoreMap());\n        const listenable = isListenable();\n        const proxiable = isProxiable(value);\n        const property = listenable || proxiable ? AI.AJ.get(key) || AI.AJ.AH(key, getNodeProperty(AI, key, value)) : undefined;\n        if (property?.AI) {\n            lazySetAdd(property.AI, 'AO', AI);\n        }\n        if (property && listenable) {\n            const options = AI.equals ? { equals: AI.equals } : undefined;\n            property.listen();\n            property.observable || (property.observable = getNodeObservable(AI, value, options));\n            property.observable.get();\n        }\n        if (getter) {\n            return getter.call(AI.store);\n        }\n        else {\n            if (typeof value === 'function' && value === Array.prototype[key]) {\n                return function () {\n                    return value.apply(AI.store, arguments);\n                };\n            }\n            return property?.AI?.store || value;\n        }\n    },\n    set: (target, key, value) => {\n        value = getTarget(value);\n        const AI = getNodeExisting(target);\n        const setter = AI.AU?.get(key);\n        if (setter) {\n            setter.call(AI.store, value);\n        }\n        else {\n            const valuePrev = target[key];\n            const hadProperty = !!valuePrev || (key in target);\n            const equals = AI.equals || is;\n            if (hadProperty && equals(value, valuePrev) && (key !== 'length' || !Array.isArray(target)))\n                return true; // Array.prototype.length is special, it gets updated AA this trap is called, we need to special-case it...\n            target[key] = value;\n            AI.values?.observable.set(0);\n            if (!hadProperty) {\n                AI.keys?.observable.set(0);\n                AI.has?.get(key)?.observable.set(true);\n            }\n            const property = AI.AJ?.get(key);\n            if (property?.AI) {\n                lazySetDelete(property.AI, 'AO', AI);\n            }\n            if (property) {\n                property.observable?.set(value);\n                property.AI = isProxiable(value) ? NODES.get(value) || getNode(value, AI) : undefined;\n            }\n            if (property?.AI) {\n                lazySetAdd(property.AI, 'AO', AI);\n            }\n            if (StoreListenersRoots.AK) {\n                StoreListenersRoots.AR(property?.AI, AI, key);\n            }\n            if (StoreListenersRegular.AK) {\n                StoreListenersRegular.V(AI);\n            }\n        }\n        return true;\n    },\n    deleteProperty: (target, key) => {\n        const hasProperty = (key in target);\n        if (!hasProperty)\n            return true;\n        const deleted = Reflect.deleteProperty(target, key);\n        if (!deleted)\n            return false;\n        const AI = getNodeExisting(target);\n        AI.keys?.observable.set(0);\n        AI.values?.observable.set(0);\n        AI.has?.get(key)?.observable.set(false);\n        const property = AI.AJ?.get(key);\n        if (StoreListenersRoots.AK) {\n            StoreListenersRoots.AR(property?.AI, AI, key);\n        }\n        if (property?.AI) {\n            lazySetDelete(property.AI, 'AO', AI);\n        }\n        if (property) {\n            property.observable?.set(undefined);\n            property.AI = undefined;\n        }\n        if (StoreListenersRegular.AK) {\n            StoreListenersRegular.V(AI);\n        }\n        return true;\n    },\n    defineProperty: (target, key, descriptor) => {\n        const AI = getNodeExisting(target);\n        const equals = AI.equals || is;\n        const hadProperty = (key in target);\n        const descriptorPrev = Reflect.getOwnPropertyDescriptor(target, key);\n        if (descriptorPrev && isEqualDescriptor(descriptorPrev, descriptor, equals))\n            return true;\n        const defined = Reflect.defineProperty(target, key, descriptor);\n        if (!defined)\n            return false;\n        if (!descriptor.get) {\n            AI.AT?.delete(key);\n        }\n        else if (descriptor.get) {\n            AI.AT || (AI.AT = new StoreMap());\n            AI.AT.set(key, descriptor.get);\n        }\n        if (!descriptor.set) {\n            AI.AU?.delete(key);\n        }\n        else if (descriptor.set) {\n            AI.AU || (AI.AU = new StoreMap());\n            AI.AU.set(key, descriptor.set);\n        }\n        if (hadProperty !== !!descriptor.enumerable) {\n            AI.keys?.observable.set(0);\n            AI.has?.get(key)?.observable.set(!!descriptor.enumerable);\n        }\n        const property = AI.AJ?.get(key);\n        if (StoreListenersRoots.AK) {\n            StoreListenersRoots.AR(property?.AI, AI, key);\n        }\n        if (property?.AI) {\n            lazySetDelete(property.AI, 'AO', AI);\n        }\n        if (property) {\n            if ('get' in descriptor) {\n                property.observable?.set(descriptor.get);\n                property.AI = undefined;\n            }\n            else {\n                const value = descriptor.value;\n                property.observable?.set(value);\n                property.AI = isProxiable(value) ? NODES.get(value) || getNode(value, AI) : undefined;\n            }\n        }\n        if (property?.AI) {\n            lazySetAdd(property.AI, 'AO', AI);\n        }\n        if (StoreListenersRoots.AK) {\n            StoreListenersRoots.AR(property?.AI, AI, key);\n        }\n        if (StoreListenersRegular.AK) {\n            StoreListenersRegular.V(AI);\n        }\n        return true;\n    },\n    has: (target, key) => {\n        if (key === SYMBOL_STORE)\n            return true;\n        if (key === SYMBOL_STORE_TARGET)\n            return true;\n        const value = (key in target);\n        if (isListenable()) {\n            const AI = getNodeExisting(target);\n            AI.has || (AI.has = new StoreMap());\n            const has = AI.has.get(key) || AI.has.AH(key, getNodeHas(AI, key, value));\n            has.listen();\n            has.observable.get();\n        }\n        return value;\n    },\n    ownKeys: (target) => {\n        const keys = Reflect.ownKeys(target);\n        if (isListenable()) {\n            const AI = getNodeExisting(target);\n            AI.keys || (AI.keys = getNodeKeys(AI));\n            AI.keys.listen();\n            AI.keys.observable.get();\n        }\n        return keys;\n    }\n};\nconst STORE_UNTRACK_TRAPS = {\n    /* API */\n    has: (target, key) => {\n        if (key === SYMBOL_STORE_UNTRACKED)\n            return true;\n        return (key in target);\n    }\n};\n/* HELPERS */\nconst getNode = (value, parent, equals) => {\n    const store = new Proxy(value, STORE_TRAPS);\n    const gettersAndSetters = getGettersAndSetters(value);\n    const AI = { AO: parent, store };\n    if (gettersAndSetters) {\n        const { AT, AU } = gettersAndSetters;\n        if (AT)\n            AI.AT = AT;\n        if (AU)\n            AI.AU = AU;\n    }\n    if (equals === false) {\n        AI.equals = nope;\n    }\n    else if (equals) {\n        AI.equals = equals;\n    }\n    else if (parent?.equals) {\n        AI.equals = parent.equals;\n    }\n    NODES.set(value, AI);\n    return AI;\n};\nconst getNodeExisting = (value) => {\n    const AI = NODES.get(value);\n    if (!AI)\n        throw new Error('Impossible');\n    return AI;\n};\nconst getNodeFromStore = (store) => {\n    return getNodeExisting(getTarget(store));\n};\nconst getNodeKeys = (AI) => {\n    const observable = getNodeObservable(AI, 0, { equals: false });\n    const keys = new StoreKeys(AI, observable);\n    return keys;\n};\nconst getNodeValues = (AI) => {\n    const observable = getNodeObservable(AI, 0, { equals: false });\n    const values = new StoreValues(AI, observable);\n    return values;\n};\nconst getNodeHas = (AI, key, value) => {\n    const observable = getNodeObservable(AI, value);\n    const has = new StoreHas(AI, key, observable);\n    return has;\n};\nconst getNodeObservable = (AI, value, options) => {\n    return new ObservableClass(value, options);\n};\nconst getNodeProperty = (AI, key, value) => {\n    const observable = undefined;\n    const propertyNode = isProxiable(value) ? NODES.get(value) || getNode(value, AI) : undefined;\n    const property = new StoreProperty(AI, key, observable, propertyNode);\n    AI.AJ || (AI.AJ = new StoreMap());\n    AI.AJ.set(key, property);\n    return property;\n};\nconst getGettersAndSetters = (value) => {\n    if (isArray(value))\n        return;\n    let AT;\n    let AU;\n    const keys = Object.keys(value);\n    for (let i = 0, l = keys.length; i < l; i++) {\n        const key = keys[i];\n        const descriptor = Object.getOwnPropertyDescriptor(value, key);\n        if (!descriptor)\n            continue;\n        const { get, set } = descriptor;\n        if (get) {\n            AT || (AT = new StoreMap());\n            AT.set(key, get);\n        }\n        if (set) {\n            AU || (AU = new StoreMap());\n            AU.set(key, set);\n        }\n    }\n    if (!AT && !AU)\n        return;\n    return { AT, AU };\n};\nconst getStore = (value, options) => {\n    if (isStore(value))\n        return value;\n    const AI = NODES.get(value) || getNode(value, undefined, options?.equals);\n    return AI.store;\n};\nconst getTarget = (value) => {\n    if (isStore(value))\n        return value[SYMBOL_STORE_TARGET];\n    return value;\n};\nconst getUntracked = (value) => {\n    if (!isObject(value))\n        return value;\n    if (isUntracked(value))\n        return value;\n    return new Proxy(value, STORE_UNTRACK_TRAPS);\n};\nconst isEqualDescriptor = (a, b, equals) => {\n    return (!!a.configurable === !!b.configurable && !!a.enumerable === !!b.enumerable && !!a.writable === !!b.writable && equals(a.value, b.value) && a.get === b.get && a.set === b.set);\n};\nconst isListenable = () => {\n    return !!OBSERVER;\n};\nconst isProxiable = (value) => {\n    if (value === null || typeof value !== 'object')\n        return false;\n    if (SYMBOL_STORE in value)\n        return true;\n    if (SYMBOL_STORE_UNTRACKED in value)\n        return false;\n    if (isArray(value))\n        return true;\n    const prototype = Object.getPrototypeOf(value);\n    if (prototype === null)\n        return true;\n    return (Object.getPrototypeOf(prototype) === null);\n};\nconst isUntracked = (value) => {\n    if (value === null || typeof value !== 'object')\n        return false;\n    return (SYMBOL_STORE_UNTRACKED in value);\n};\n/* MAIN */\n//TODO: Maybe have the \"on\" method trigger immediately too like \"$.on\", or maybe the other way around, which seems more flexible\n//TODO: Explore converting target values back to numbers (the Proxy always receives strings) whenever possible, to save memory\n//TODO: Implement \"_onRoots\" better, perhaps provding string paths instead, which should be more powerful\nconst store = (value, options) => {\n    if (!isObject(value))\n        return value;\n    if (isUntracked(value))\n        return value;\n    return getStore(value, options);\n};\n/* UTILITIES */\nstore.on = (target, listener) => {\n    /* VARIABLES */\n    const targets = castArray(target);\n    const selectors = targets.filter(isFunction);\n    const AM = targets.filter(isStore).map(getNodeFromStore);\n    /* ON */\n    StoreListenersRegular.AK += 1;\n    const disposers = selectors.map(selector => {\n        let inited = false;\n        return effect(() => {\n            if (inited) {\n                StoreListenersRegular.AL.add(listener);\n                StoreScheduler.F();\n            }\n            inited = true;\n            selector();\n        }, { suspense: false, sync: true });\n    });\n    AM.forEach(AI => {\n        lazySetAdd(AI, 'AP', listener);\n    });\n    /* OFF */\n    return () => {\n        StoreListenersRegular.AK -= 1;\n        disposers.forEach(disposer => {\n            disposer();\n        });\n        AM.forEach(AI => {\n            lazySetDelete(AI, 'AP', listener);\n        });\n    };\n};\nstore._onRoots = (target, listener) => {\n    if (!isStore(target))\n        return noop;\n    const AI = getNodeFromStore(target);\n    if (AI.AO)\n        throw new Error('Only top-level stores are supported');\n    /* ON */\n    StoreListenersRoots.AK += 1;\n    lazySetAdd(AI, 'AQ', listener);\n    /* OFF */\n    return () => {\n        StoreListenersRoots.AK -= 1;\n        lazySetDelete(AI, 'AQ', listener);\n    };\n};\nstore.reconcile = (() => {\n    //TODO: Support AT, AU and symbols (symbols could be supported with Reflect.ownKeys, but that's like 2x slower)\n    const getType = (value) => {\n        if (isArray(value))\n            return 1;\n        if (isProxiable(value))\n            return 2;\n        return 0;\n    };\n    const reconcileOuter = (prev, next) => {\n        const uprev = getTarget(prev);\n        const unext = getTarget(next);\n        reconcileInner(prev, next);\n        const prevType = getType(uprev);\n        const nextType = getType(unext);\n        if (prevType === 1 || nextType === 1) {\n            prev.length = next.length;\n        }\n        return prev;\n    };\n    const reconcileInner = (prev, next) => {\n        const uprev = getTarget(prev);\n        const unext = getTarget(next);\n        const prevKeys = Object.keys(uprev);\n        const nextKeys = Object.keys(unext);\n        for (let i = 0, l = nextKeys.length; i < l; i++) {\n            const key = nextKeys[i];\n            const prevValue = uprev[key];\n            const nextValue = unext[key];\n            if (!is(prevValue, nextValue)) {\n                const prevType = getType(prevValue);\n                const nextType = getType(nextValue);\n                if (prevType && prevType === nextType) {\n                    reconcileInner(prev[key], nextValue);\n                    if (prevType === 1) {\n                        prev[key].length = nextValue.length;\n                    }\n                }\n                else {\n                    prev[key] = nextValue;\n                }\n            }\n            else if (prevValue === undefined && !(key in uprev)) {\n                prev[key] = undefined;\n            }\n        }\n        for (let i = 0, l = prevKeys.length; i < l; i++) {\n            const key = prevKeys[i];\n            if (!(key in unext)) {\n                delete prev[key];\n            }\n        }\n        return prev;\n    };\n    const reconcile = (prev, next) => {\n        return untrack(() => {\n            return reconcileOuter(prev, next);\n        });\n    };\n    return reconcile;\n})();\nstore.untrack = (value) => {\n    return getUntracked(value);\n};\nstore.unwrap = (value) => {\n    return getTarget(value);\n};\n/* EXPORT */\nexport default store;\n","/* IMPORT */\nimport { OBSERVABLE_FALSE } from '../constants.js';\nimport { OWNER } from '../context.js';\nimport { readable } from '../objects/callable.js';\nimport Observable from '../objects/observable.js';\nimport { SYMBOL_SUSPENSE } from '../symbols.js';\n/* MAIN */\nconst suspended = () => {\n    const suspense = OWNER.get(SYMBOL_SUSPENSE);\n    if (!suspense)\n        return OBSERVABLE_FALSE;\n    const observable = (suspense.observable || (suspense.observable = new Observable(!!suspense.suspended)));\n    return readable(observable);\n};\n/* EXPORT */\nexport default suspended;\n","/* IMPORT */\nimport Scheduler from '../objects/scheduler.async.js';\n/* MAIN */\nconst tick = () => {\n    Scheduler.N();\n};\n/* EXPORT */\nexport default tick;\n","/* IMPORT */\nimport { OWNER } from '../context.js';\nimport memo from './memo.js';\nimport $ from './observable.js';\nimport resolve from './resolve.js';\n/* MAIN */\nconst tryCatch = (value, fn) => {\n    const observable = $();\n    return memo(() => {\n        const error = observable();\n        if (error) {\n            const reset = () => observable(undefined);\n            const options = { error, reset };\n            return resolve(fn(options));\n        }\n        else {\n            OWNER.S = observable;\n            return resolve(value);\n        }\n    });\n};\n/* EXPORT */\nexport default tryCatch;\n","/* IMPORT */\nimport untrack from './untrack.js';\nimport { SYMBOL_UNTRACKED } from '../symbols.js';\nimport { isFunction } from '../utils.js';\nfunction untracked(fn) {\n    const untracked = isFunction(fn) ? (...args) => untrack(() => fn(...args)) : () => fn;\n    untracked[SYMBOL_UNTRACKED] = true;\n    return untracked;\n}\n/* EXPORT */\nexport default untracked;\n","/* IMPORT */\nimport { OBSERVER, OWNER } from '../context.js';\n/* MAIN */\nconst _with = () => {\n    const owner = OWNER;\n    const observer = OBSERVER;\n    return (fn) => {\n        return owner.E(() => fn(), owner, observer);\n    };\n};\n/* EXPORT */\nexport default _with;\n","/* IMPORT */\nimport { SYMBOL_OBSERVABLE, SYMBOL_OBSERVABLE_FROZEN, SYMBOL_OBSERVABLE_READABLE, SYMBOL_UNCACHED, SYMBOL_UNTRACKED, SYMBOL_UNTRACKED_UNWRAPPED } from './oby.js';\n/* MAIN */\nconst CONTEXTS_DATA = new WeakMap();\nconst DIRECTIVES = {};\nconst SYMBOL_SUSPENSE = Symbol('Suspense');\nconst SYMBOL_TEMPLATE_ACCESSOR = Symbol('Template.Accessor');\nconst SYMBOLS_DIRECTIVES = {};\n/* EXPORT */\nexport { SYMBOL_OBSERVABLE, SYMBOL_OBSERVABLE_FROZEN, SYMBOL_OBSERVABLE_READABLE, SYMBOL_UNCACHED, SYMBOL_UNTRACKED, SYMBOL_UNTRACKED_UNWRAPPED };\nexport { CONTEXTS_DATA, DIRECTIVES, SYMBOL_SUSPENSE, SYMBOL_TEMPLATE_ACCESSOR, SYMBOLS_DIRECTIVES };\n","/* IMPORT */\nimport { SYMBOL_UNTRACKED_UNWRAPPED } from '../constants.js';\n/* MAIN */\nconst wrapElement = (element) => {\n    element[SYMBOL_UNTRACKED_UNWRAPPED] = true;\n    return element;\n};\n/* EXPORT */\nexport default wrapElement;\n","/* IMPORT */\n/* MAIN */\nconst createComment = document.createComment.bind(document, '');\nconst createHTMLNode = document.createElement.bind(document);\nconst createSVGNode = document.createElementNS.bind(document, 'http://www.w3.org/2000/svg');\nconst createText = document.createTextNode.bind(document);\n/* EXPORT */\nexport { createComment, createHTMLNode, createSVGNode, createText };\n","/* IMPORT */\nimport { SYMBOL_OBSERVABLE_FROZEN, SYMBOL_OBSERVABLE_READABLE, SYMBOL_TEMPLATE_ACCESSOR, SYMBOL_UNTRACKED, SYMBOL_UNTRACKED_UNWRAPPED } from '../constants.js';\n/* MAIN */\nconst { assign } = Object;\nconst castArray = (value) => {\n    return isArray(value) ? value : [value];\n};\nconst castError = (exception) => {\n    if (isError(exception))\n        return exception;\n    if (isString(exception))\n        return new Error(exception);\n    return new Error('Unknown error');\n};\nconst flatten = (arr) => {\n    for (let i = 0, l = arr.length; i < l; i++) {\n        if (!isArray(arr[i]))\n            continue;\n        return arr.flat(Infinity);\n    }\n    return arr;\n};\nconst indexOf = (() => {\n    const _indexOf = Array.prototype.indexOf;\n    return (arr, value) => {\n        return _indexOf.call(arr, value);\n    };\n})();\nconst { isArray } = Array;\nconst isBoolean = (value) => {\n    return typeof value === 'boolean';\n};\nconst isComponent = (value) => {\n    return isFunction(value) && (SYMBOL_UNTRACKED_UNWRAPPED in value);\n};\nconst isError = (value) => {\n    return value instanceof Error;\n};\nconst isFalsy = (value) => {\n    return !value;\n};\nconst isFunction = (value) => {\n    return typeof value === 'function';\n};\nconst isFunctionReactive = (value) => {\n    return !(SYMBOL_UNTRACKED in value || SYMBOL_UNTRACKED_UNWRAPPED in value || SYMBOL_OBSERVABLE_FROZEN in value || value[SYMBOL_OBSERVABLE_READABLE]?.parent?.disposed);\n};\nconst isNil = (value) => {\n    return value === null || value === undefined;\n};\nconst isNode = (value) => {\n    return value instanceof Node;\n};\nconst isObject = (value) => {\n    return typeof value === 'object' && value !== null;\n};\nconst isPromise = (value) => {\n    return value instanceof Promise;\n};\nconst isString = (value) => {\n    return typeof value === 'string';\n};\nconst isSVG = (value) => {\n    return !!value['isSVG'];\n};\nconst isSVGElement = (() => {\n    const svgRe = /^(t(ext$|s)|s[vwy]|g)|^set|tad|ker|p(at|s)|s(to|c$|ca|k)|r(ec|cl)|ew|us|f($|e|s)|cu|n[ei]|l[ty]|[GOP]/; //URL: https://regex101.com/r/Ck4kFp/1\n    const svgCache = {};\n    return (element) => {\n        const cached = svgCache[element];\n        return (cached !== undefined) ? cached : (svgCache[element] = !element.includes('-') && svgRe.test(element));\n    };\n})();\nconst isTemplateAccessor = (value) => {\n    return isFunction(value) && (SYMBOL_TEMPLATE_ACCESSOR in value);\n};\nconst isTruthy = (value) => {\n    return !!value;\n};\nconst isVoidChild = (value) => {\n    return value === null || value === undefined || typeof value === 'boolean' || typeof value === 'symbol';\n};\nconst noop = () => {\n    return;\n};\nconst once = (fn) => {\n    let called = false;\n    let result;\n    return () => {\n        if (!called) {\n            called = true;\n            result = fn();\n        }\n        return result;\n    };\n};\n/* EXPORT */\nexport { assign, castArray, castError, flatten, indexOf, isArray, isBoolean, isComponent, isError, isFalsy, isFunction, isFunctionReactive, isNil, isNode, isObject, isPromise, isString, isSVG, isSVGElement, isTemplateAccessor, isTruthy, isVoidChild, noop, once };\n","/* IMPORT */\nimport isObservable from '../methods/is_observable.js';\nimport { isArray, isFunction } from '../utils/lang.js';\nfunction useResolved(values, callback, resolveFunction) {\n    const isResolvable = (resolveFunction !== false && callback !== false) ? isFunction : isObservable;\n    const resolve = (value) => isResolvable(value) ? value() : value;\n    if (isArray(values)) {\n        const resolved = values.map(resolve);\n        if (isFunction(callback)) {\n            return callback.apply(undefined, resolved);\n        }\n        else {\n            return resolved;\n        }\n    }\n    else {\n        const resolved = resolve(values);\n        if (isFunction(callback)) {\n            return callback(resolved);\n        }\n        else {\n            return resolved;\n        }\n    }\n}\n/* EXPORT */\nexport default useResolved;\n","/* IMPORT */\nimport useEffect from './use_effect.js';\nimport useResolved from './use_resolved.js';\nimport $$ from '../methods/SS.js';\nimport { castArray } from '../utils/lang.js';\nfunction useEventListener(target, event, handler, options) {\n    return useEffect(() => {\n        const fn = $$(handler, false);\n        return useResolved([target, event, options], (target, event, options) => {\n            const targets = castArray(target);\n            targets.forEach(target => {\n                target?.addEventListener(event, fn, options);\n            });\n            return () => {\n                targets.forEach(target => {\n                    target?.removeEventListener(event, fn, options);\n                });\n            };\n        });\n    }, { sync: 'init' });\n}\n/* EXPORT */\nexport default useEventListener;\n","/* IMPORT */\nimport useCleanup from './use_cleanup.js';\nimport useEventListener from './use_event_listener.js';\nimport { castArray } from '../utils/lang.js';\n/* MAIN */\nconst useAbortController = (signals = []) => {\n    signals = castArray(signals);\n    const controller = new AbortController();\n    const abort = controller.abort.bind(controller);\n    const aborted = signals.some(signal => signal.aborted);\n    if (aborted) {\n        abort();\n    }\n    else {\n        signals.forEach(signal => useEventListener(signal, 'abort', abort));\n        useCleanup(abort);\n    }\n    return controller;\n};\n/* EXPORT */\nexport default useAbortController;\n","/* IMPORT */\nimport useAbortController from './use_abort_controller.js';\n/* MAIN */\nconst useAbortSignal = (signals = []) => {\n    return useAbortController(signals).signal;\n};\n/* EXPORT */\nexport default useAbortSignal;\n","/* IMPORT */\nimport useEffect from './use_effect.js';\nimport useSuspended from './use_suspended.js';\nimport $$ from '../methods/SS.js';\nimport untrack from '../methods/untrack.js';\n/* MAIN */\nconst useScheduler = ({ loop, once, callback, cancel, schedule }) => {\n    let executed = false;\n    let suspended = useSuspended();\n    let tickId;\n    const work = (value) => {\n        executed = true;\n        if ($$(loop))\n            tick();\n        $$(callback, false)(value);\n    };\n    const tick = () => {\n        tickId = untrack(() => schedule(work));\n    };\n    const dispose = () => {\n        untrack(() => cancel(tickId));\n    };\n    useEffect(() => {\n        if (once && executed)\n            return;\n        if (suspended())\n            return;\n        tick();\n        return dispose;\n    }, { suspense: false });\n    return dispose;\n};\n/* EXPORT */\nexport default useScheduler;\n","/* IMPORT */\nimport useScheduler from './use_scheduler.js';\n/* MAIN */\nconst useAnimationFrame = (callback) => {\n    return useScheduler({\n        callback,\n        once: true,\n        cancel: cancelAnimationFrame,\n        schedule: requestAnimationFrame\n    });\n};\n/* EXPORT */\nexport default useAnimationFrame;\n","/* IMPORT */\nimport useScheduler from './use_scheduler.js';\n/* MAIN */\nconst useAnimationLoop = (callback) => {\n    return useScheduler({\n        callback,\n        loop: true,\n        cancel: cancelAnimationFrame,\n        schedule: requestAnimationFrame\n    });\n};\n/* EXPORT */\nexport default useAnimationLoop;\n","/* IMPORT */\nimport { SYMBOL_SUSPENSE } from '../constants.js';\nimport useMemo from '../hooks/use_memo.js';\nimport $ from '../methods/S.js';\nimport { context, resolve } from '../oby.js';\n/* MAIN */\nconst SuspenseContext = {\n    create: () => {\n        const parent = SuspenseContext.get();\n        const count = $(0);\n        const active = useMemo(() => !!count());\n        const increment = (nr = 1) => { parent?.increment(nr); count(prev => prev + nr); };\n        const decrement = (nr = -1) => queueMicrotask(() => { parent?.decrement(nr); count(prev => prev + nr); });\n        const data = { active, increment, decrement };\n        return data;\n    },\n    get: () => {\n        return context(SYMBOL_SUSPENSE);\n    },\n    wrap: (fn) => {\n        const data = SuspenseContext.create();\n        return context({ [SYMBOL_SUSPENSE]: data }, () => {\n            return resolve(() => fn(data));\n        });\n    }\n};\n/* EXPORT */\nexport default SuspenseContext;\n","/* IMPORT */\nimport SuspenseContext from './suspense.context.js';\nimport useCleanup from '../hooks/use_cleanup.js';\n/* MAIN */\nclass SuspenseManager {\n    constructor() {\n        /* VARIABLES */\n        this.suspenses = new Map();\n        /* API */\n        this.change = (suspense, nr) => {\n            const counter = this.suspenses.get(suspense) || 0;\n            const counterNext = Math.max(0, counter + nr);\n            if (counter === counterNext)\n                return;\n            if (counterNext) {\n                this.suspenses.set(suspense, counterNext);\n            }\n            else {\n                this.suspenses.delete(suspense);\n            }\n            if (nr > 0) {\n                suspense.increment(nr);\n            }\n            else {\n                suspense.decrement(nr);\n            }\n        };\n        this.suspend = () => {\n            const suspense = SuspenseContext.get();\n            if (!suspense)\n                return;\n            this.change(suspense, 1);\n            useCleanup(() => {\n                this.change(suspense, -1);\n            });\n        };\n        this.unsuspend = () => {\n            this.suspenses.forEach((counter, suspense) => {\n                this.change(suspense, -counter);\n            });\n        };\n    }\n}\n;\n/* EXPORT */\nexport default SuspenseManager;\n","/* IMPORT */\nimport useEffect from './use_effect.js';\n/* HELPERS */\nconst options = {\n    sync: 'init'\n};\n/* MAIN */\n// This function exists for convenience, and to avoid creating unnecessary options objects\nconst useRenderEffect = (fn) => {\n    return useEffect(fn, options);\n};\n/* EXPORT */\nexport default useRenderEffect;\n","/* IMPORT */\nimport SuspenseManager from '../components/suspense.manager.js';\nimport useCheapDisposed from './use_cheap_disposed.js';\nimport useReadonly from './use_readonly.js';\nimport useRenderEffect from './use_render_effect.js';\nimport $ from '../methods/S.js';\nimport $$ from '../methods/SS.js';\nimport { assign, castError, isPromise } from '../utils/lang.js';\n/* MAIN */\n//TODO: Maybe port this to oby, as \"from\"\n//TODO: Option for returning the resource as a store, where also the returned value gets wrapped in a store\n//FIXME: SSR demo: toggling back and forth between /home and /loader is buggy, /loader gets loaded with no data, which is wrong\nconst useResource = (fetcher) => {\n    const pending = $(true);\n    const error = $();\n    const value = $();\n    const latest = $();\n    const { suspend, unsuspend } = new SuspenseManager();\n    const resourcePending = { pending: true, get value() { return void suspend(); }, get latest() { return latest() ?? void suspend(); } };\n    const resourceRejected = { pending: false, get error() { return error(); }, get value() { throw error(); }, get latest() { throw error(); } };\n    const resourceResolved = { pending: false, get value() { return value(); }, get latest() { return value(); } };\n    const resourceFunction = { pending: () => pending(), error: () => error(), value: () => resource().value, latest: () => resource().latest };\n    const resource = $(resourcePending);\n    useRenderEffect(() => {\n        const disposed = useCheapDisposed();\n        const onPending = () => {\n            pending(true);\n            error(undefined);\n            value(undefined);\n            resource(resourcePending);\n        };\n        const onResolve = (result) => {\n            if (disposed())\n                return;\n            pending(false);\n            error(undefined);\n            value(() => result);\n            latest(() => result);\n            resource(resourceResolved);\n        };\n        const onReject = (exception) => {\n            if (disposed())\n                return;\n            pending(false);\n            error(castError(exception));\n            value(undefined);\n            latest(undefined);\n            resource(resourceRejected);\n        };\n        const fetch = () => {\n            try {\n                const value = $$(fetcher());\n                if (isPromise(value)) {\n                    onPending();\n                    value.then(onResolve, onReject);\n                    value.then(unsuspend, unsuspend);\n                }\n                else {\n                    onResolve(value);\n                }\n            }\n            catch (error) {\n                onReject(error);\n            }\n        };\n        fetch();\n    });\n    return assign(useReadonly(resource), resourceFunction);\n};\n/* EXPORT */\nexport default useResource;\n","/* IMPORT */\nimport useAbortSignal from './use_abort_signal.js';\nimport useResolved from './use_resolved.js';\nimport useResource from './use_resource.js';\n/* MAIN */\nconst useFetch = (request, init) => {\n    return useResource(() => {\n        return useResolved([request, init], (request, init = {}) => {\n            const signal = useAbortSignal(init.signal || []);\n            init.signal = signal;\n            return fetch(request, init);\n        });\n    });\n};\n/* EXPORT */\nexport default useFetch;\n","/* IMPORT */\nimport useScheduler from './use_scheduler.js';\nimport $$ from '../methods/SS.js';\n/* MAIN */\nconst useIdleCallback = (callback, options) => {\n    return useScheduler({\n        callback,\n        once: true,\n        cancel: cancelIdleCallback,\n        schedule: callback => requestIdleCallback(callback, $$(options))\n    });\n};\n/* EXPORT */\nexport default useIdleCallback;\n","/* IMPORT */\nimport useScheduler from './use_scheduler.js';\nimport $$ from '../methods/SS.js';\n/* MAIN */\nconst useIdleLoop = (callback, options) => {\n    return useScheduler({\n        callback,\n        loop: true,\n        cancel: cancelIdleCallback,\n        schedule: callback => requestIdleCallback(callback, $$(options))\n    });\n};\n/* EXPORT */\nexport default useIdleLoop;\n","/* IMPORT */\nimport useScheduler from './use_scheduler.js';\nimport $$ from '../methods/SS.js';\n/* MAIN */\nconst useInterval = (callback, ms) => {\n    return useScheduler({\n        callback,\n        cancel: clearInterval,\n        schedule: callback => setInterval(callback, $$(ms))\n    });\n};\n/* EXPORT */\nexport default useInterval;\n","/* IMPORT */\nimport useResource from './use_resource.js';\nimport $$ from '../methods/SS.js';\n/* MAIN */\nconst usePromise = (promise) => {\n    return useResource(() => $$(promise));\n};\n/* EXPORT */\nexport default usePromise;\n","/* IMPORT */\nimport useScheduler from './use_scheduler.js';\nimport $$ from '../methods/SS.js';\n/* MAIN */\nconst useTimeout = (callback, ms) => {\n    return useScheduler({\n        callback,\n        once: true,\n        cancel: clearTimeout,\n        schedule: callback => setTimeout(callback, $$(ms))\n    });\n};\n/* EXPORT */\nexport default useTimeout;\n","/* IMPORT */\nimport { useCleanup } from './/index.js';\n/* MAIN */\nconst useCheapDisposed = () => {\n    let disposed = false;\n    const get = () => disposed;\n    const set = () => disposed = true;\n    useCleanup(set);\n    return get;\n};\n/* EXPORT */\nexport default useCheapDisposed;\n","/* IMPORT */\nimport useCheapDisposed from './use_cheap_disposed.js';\nimport { with as _with } from '../oby.js';\n/* MAIN */\n//TODO: Maybe port this to oby\nconst useMicrotask = (fn) => {\n    const disposed = useCheapDisposed();\n    const runWithOwner = _with();\n    queueMicrotask(() => {\n        if (disposed())\n            return;\n        runWithOwner(fn);\n    });\n};\n/* EXPORT */\nexport default useMicrotask;\n","/* IMPORT */\nimport { isString } from './lang.js';\n/* MAIN */\n// This function exists to optimize memory usage in some cases, where the classList API won't be touched without sacrificing performance\nconst classesToggle = (element, classes, force) => {\n    const { className } = element;\n    /* OPTIMIZED PATH */\n    if (isString(className)) {\n        if (!className) { // Optimized addition/deletion\n            if (force) { // Optimized addition\n                element.className = classes;\n                return;\n            }\n            else { // Optimized deletion, nothing to do really\n                return;\n            }\n        }\n        else if (!force && className === classes) { // Optimized deletion\n            element.className = '';\n            return;\n        }\n    }\n    /* REGULAR PATH */\n    if (classes.includes(' ')) {\n        classes.split(' ').forEach(cls => {\n            if (!cls.length)\n                return;\n            element.classList.toggle(cls, !!force);\n        });\n    }\n    else {\n        element.classList.toggle(classes, !!force);\n    }\n};\n/* EXPORT */\nexport { classesToggle };\n","/**\n * ISC License\n *\n * Copyright (c) 2020, Andrea Giammarchi, @WebReflection\n *\n * Permission to use, copy, modify, and/or distribute this software for any\n * purpose with or without fee is hereby granted, provided that the above\n * copyright notice and this permission notice appear in all copies.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n * REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n * AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n * INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n * LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE\n * OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n * PERFORMANCE OF THIS SOFTWARE.\n */\n/* MAIN */\n// This is just a slightly customized version of udomdiff: with types, no accessor function and support for diffing unwrapped nodes\nconst dummyNode = document.createComment('');\nconst beforeDummyWrapper = [dummyNode];\nconst afterDummyWrapper = [dummyNode];\nconst diff = (parent, before, after, nextSibling) => {\n    if (before === after)\n        return;\n    if (before instanceof Node) {\n        beforeDummyWrapper[0] = before;\n        before = beforeDummyWrapper;\n    }\n    if (after instanceof Node) {\n        afterDummyWrapper[0] = after;\n        after = afterDummyWrapper;\n    }\n    const bLength = after.length;\n    let aEnd = before.length;\n    let bEnd = bLength;\n    let aStart = 0;\n    let bStart = 0;\n    let map = null;\n    let removable;\n    while (aStart < aEnd || bStart < bEnd) {\n        // append head, tail, or nodes in between: fast path\n        if (aEnd === aStart) {\n            // we could be in a situation where the rest of nodes that\n            // need to be added are not at the end, and in such case\n            // the node to `insertBefore`, if the index is more than 0\n            // must be retrieved, otherwise it's gonna be the first item.\n            const node = bEnd < bLength ?\n                (bStart ?\n                    (after[bStart - 1].nextSibling) :\n                    after[bEnd - bStart]) :\n                nextSibling;\n            if (bStart < bEnd) {\n                // parent.insertBefore(after[bStart++], node);\n                if (node) {\n                    node.before.apply(node, after.slice(bStart, bEnd));\n                }\n                else {\n                    parent.append.apply(parent, after.slice(bStart, bEnd));\n                }\n                bStart = bEnd;\n            }\n        }\n        // remove head or tail: fast path\n        else if (bEnd === bStart) {\n            while (aStart < aEnd) {\n                // remove the node only if it's unknown or not live\n                if (!map || !map.has(before[aStart])) {\n                    removable = before[aStart];\n                    try {\n                        parent.removeChild(removable);\n                    }\n                    catch {\n                        //FIXME: This try..catch block shouldn't exist, though sometimes setChildStatic wants to update the DOM immediately -- tricky\n                    }\n                }\n                aStart++;\n            }\n        }\n        // same node: fast path\n        else if (before[aStart] === after[bStart]) {\n            aStart++;\n            bStart++;\n        }\n        // same tail: fast path\n        else if (before[aEnd - 1] === after[bEnd - 1]) {\n            aEnd--;\n            bEnd--;\n        }\n        // The once here single last swap \"fast path\" has been removed in v1.1.0\n        // https://github.com/WebReflection/udomdiff/blob/single-final-swap/esm/index.js#L69-L85\n        // reverse swap: also fast path\n        else if (before[aStart] === after[bEnd - 1] &&\n            after[bStart] === before[aEnd - 1]) {\n            // this is a \"shrink\" operation that could happen in these cases:\n            // [1, 2, 3, 4, 5]\n            // [1, 4, 3, 2, 5]\n            // or asymmetric too\n            // [1, 2, 3, 4, 5]\n            // [1, 2, 3, 5, 6, 4]\n            const node = before[--aEnd].nextSibling;\n            parent.insertBefore(after[bStart++], before[aStart++].nextSibling);\n            parent.insertBefore(after[--bEnd], node);\n            // mark the future index as identical (yeah, it's dirty, but cheap 👍)\n            // The main reason to do this, is that when a[aEnd] will be reached,\n            // the loop will likely be on the fast path, as identical to b[bEnd].\n            // In the best case scenario, the next loop will skip the tail,\n            // but in the worst one, this node will be considered as already\n            // processed, bailing out pretty quickly from the map index check\n            before[aEnd] = after[bEnd];\n        }\n        // map based fallback, \"slow\" path\n        else {\n            // the map requires an O(bEnd - bStart) operation once\n            // to store all future nodes indexes for later purposes.\n            // In the worst case scenario, this is a full O(N) cost,\n            // and such scenario happens at least when all nodes are different,\n            // but also if both first and last items of the lists are different\n            if (!map) {\n                map = new Map;\n                let i = bStart;\n                while (i < bEnd)\n                    map.set(after[i], i++);\n            }\n            // if it's a future node, hence it needs some handling\n            if (map.has(before[aStart])) {\n                // grab the index of such node, 'cause it might have been processed\n                const index = map.get(before[aStart]);\n                // if it's not already processed, look on demand for the next LCS\n                if (bStart < index && index < bEnd) {\n                    let i = aStart;\n                    // counts the amount of nodes that are the same in the future\n                    let sequence = 1;\n                    while (++i < aEnd && i < bEnd && map.get(before[i]) === (index + sequence))\n                        sequence++;\n                    // effort decision here: if the sequence is longer than replaces\n                    // needed to reach such sequence, which would brings again this loop\n                    // to the fast path, prepend the difference before a sequence,\n                    // and move only the future list index forward, so that aStart\n                    // and bStart will be aligned again, hence on the fast path.\n                    // An example considering aStart and bStart are both 0:\n                    // a: [1, 2, 3, 4]\n                    // b: [7, 1, 2, 3, 6]\n                    // this would place 7 before 1 and, from that time on, 1, 2, and 3\n                    // will be processed at zero cost\n                    if (sequence > (index - bStart)) {\n                        const node = before[aStart];\n                        if (bStart < index) {\n                            // parent.insertBefore(after[bStart++], node);\n                            if (node) {\n                                node.before.apply(node, after.slice(bStart, index));\n                            }\n                            else {\n                                parent.append.apply(parent, after.slice(bStart, index));\n                            }\n                            bStart = index;\n                        }\n                    }\n                    // if the effort wasn't good enough, fallback to a replace,\n                    // moving both source and target indexes forward, hoping that some\n                    // similar node will be found later on, to go back to the fast path\n                    else {\n                        parent.replaceChild(after[bStart++], before[aStart++]);\n                    }\n                }\n                // otherwise move the source forward, 'cause there's nothing to do\n                else\n                    aStart++;\n            }\n            // this node has no meaning in the future list, so it's more than safe\n            // to remove it, and check the next live node out instead, meaning\n            // that only the live list index should be forwarded\n            else {\n                removable = before[aStart++];\n                try {\n                    parent.removeChild(removable);\n                }\n                catch {\n                    //FIXME: This try..catch block shouldn't exist, though sometimes setChildStatic wants to update the DOM immediately -- tricky\n                }\n            }\n        }\n    }\n    beforeDummyWrapper[0] = dummyNode;\n    afterDummyWrapper[0] = dummyNode;\n};\n/* EXPORT */\nexport default diff;\n","/* IMPORT */\n/* HELPERS */\nconst NOOP_CHILDREN = [];\n/* MAIN */\nconst FragmentUtils = {\n    make: () => {\n        return {\n            values: undefined,\n            length: 0\n        };\n    },\n    makeWithNode: (node) => {\n        return {\n            values: node,\n            length: 1\n        };\n    },\n    makeWithFragment: (fragment) => {\n        return {\n            values: fragment,\n            fragmented: true,\n            length: 1\n        };\n    },\n    getChildrenFragmented: (thiz, children = []) => {\n        const { values, length } = thiz;\n        if (!length)\n            return children;\n        if (values instanceof Array) {\n            for (let i = 0, l = values.length; i < l; i++) {\n                const value = values[i];\n                if (value instanceof Node) {\n                    children.push(value);\n                }\n                else {\n                    FragmentUtils.getChildrenFragmented(value, children);\n                }\n            }\n        }\n        else {\n            if (values instanceof Node) {\n                children.push(values);\n            }\n            else {\n                FragmentUtils.getChildrenFragmented(values, children);\n            }\n        }\n        return children;\n    },\n    getChildren: (thiz) => {\n        if (!thiz.length)\n            return NOOP_CHILDREN;\n        if (!thiz.fragmented)\n            return thiz.values;\n        if (thiz.length === 1)\n            return FragmentUtils.getChildren(thiz.values);\n        return FragmentUtils.getChildrenFragmented(thiz);\n    },\n    pushFragment: (thiz, fragment) => {\n        FragmentUtils.pushValue(thiz, fragment);\n        thiz.fragmented = true;\n    },\n    pushNode: (thiz, node) => {\n        FragmentUtils.pushValue(thiz, node);\n    },\n    pushValue: (thiz, value) => {\n        const { values, length } = thiz; //TSC\n        if (length === 0) {\n            thiz.values = value;\n        }\n        else if (length === 1) {\n            thiz.values = [values, value];\n        }\n        else {\n            values.push(value);\n        }\n        thiz.length += 1;\n    },\n    replaceWithNode: (thiz, node) => {\n        thiz.values = node;\n        delete thiz.fragmented;\n        thiz.length = 1;\n    },\n    replaceWithFragment: (thiz, fragment) => {\n        thiz.values = fragment.values;\n        thiz.fragmented = fragment.fragmented;\n        thiz.length = fragment.length;\n    }\n};\n/* EXPORT */\nexport default FragmentUtils;\n","/* IMPORT */\nimport { SYMBOL_UNCACHED } from '../constants.js';\nimport isObservable from '../methods/is_observable.js';\nimport useRenderEffect from '../hooks/use_render_effect.js';\nimport $$ from '../methods/SS.js';\nimport { createText } from './creators.js';\nimport { isArray, isFunction, isFunctionReactive, isString } from './lang.js';\n/* MAIN */\nconst resolveChild = (value, setter, _dynamic = false) => {\n    if (isFunction(value)) {\n        if (!isFunctionReactive(value)) {\n            resolveChild(value(), setter, _dynamic);\n        }\n        else {\n            useRenderEffect(() => {\n                resolveChild(value(), setter, true);\n            });\n        }\n    }\n    else if (isArray(value)) {\n        const [values, hasObservables] = resolveArraysAndStatics(value);\n        values[SYMBOL_UNCACHED] = value[SYMBOL_UNCACHED]; // Preserving this special symbol\n        setter(values, hasObservables || _dynamic);\n    }\n    else {\n        setter(value, _dynamic);\n    }\n};\nconst resolveClass = (classes, resolved = {}) => {\n    if (isString(classes)) {\n        classes.split(/\\s+/g).filter(Boolean).filter(cls => {\n            resolved[cls] = true;\n        });\n    }\n    else if (isFunction(classes)) {\n        resolveClass(classes(), resolved);\n    }\n    else if (isArray(classes)) {\n        classes.forEach(cls => {\n            resolveClass(cls, resolved); //TSC\n        });\n    }\n    else if (classes) {\n        for (const key in classes) {\n            const value = classes[key];\n            const isActive = !!$$(value);\n            if (!isActive)\n                continue;\n            resolved[key] = true;\n        }\n    }\n    return resolved;\n};\nconst resolveArraysAndStatics = (() => {\n    // This function does 3 things:\n    // 1. It deeply flattens the array, only if actually needed though (!)\n    // 2. It resolves statics, it's important to resolve them soon enough or they will be re-created multiple times (!)\n    // 3. It checks if we found any Observables along the way, avoiding looping over the array another time in the future\n    const DUMMY_RESOLVED = [];\n    const resolveArraysAndStaticsInner = (values, resolved, hasObservables) => {\n        for (let i = 0, l = values.length; i < l; i++) {\n            const value = values[i];\n            const type = typeof value;\n            if (type === 'string' || type === 'number' || type === 'bigint') { // Static\n                if (resolved === DUMMY_RESOLVED)\n                    resolved = values.slice(0, i);\n                resolved.push(createText(value));\n            }\n            else if (type === 'object' && isArray(value)) { // Array\n                if (resolved === DUMMY_RESOLVED)\n                    resolved = values.slice(0, i);\n                hasObservables = resolveArraysAndStaticsInner(value, resolved, hasObservables)[1];\n            }\n            else if (type === 'function' && isObservable(value)) { // Observable\n                if (resolved !== DUMMY_RESOLVED)\n                    resolved.push(value);\n                hasObservables = true;\n            }\n            else { // Something else\n                if (resolved !== DUMMY_RESOLVED)\n                    resolved.push(value);\n            }\n        }\n        if (resolved === DUMMY_RESOLVED)\n            resolved = values;\n        return [resolved, hasObservables];\n    };\n    return (values) => {\n        return resolveArraysAndStaticsInner(values, DUMMY_RESOLVED, false);\n    };\n})();\n/* EXPORT */\nexport { resolveChild, resolveClass, resolveArraysAndStatics };\n","/* IMPORT */\nimport { DIRECTIVES, SYMBOLS_DIRECTIVES, SYMBOL_UNCACHED } from '../constants.js';\nimport useMicrotask from '../hooks/use_microtask.js';\nimport useRenderEffect from '../hooks/use_render_effect.js';\nimport isStore from '../methods/is_store.js';\nimport $$ from '../methods/SS.js';\nimport store from '../methods/store.js';\nimport untrack from '../methods/untrack.js';\nimport { context, with as _with } from '../oby.js';\nimport { SYMBOL_STORE_OBSERVABLE } from '../oby.js';\nimport { classesToggle } from './classlist.js';\nimport { createText, createComment } from './creators.js';\nimport diff from './diff.js';\nimport FragmentUtils from './fragment.js';\nimport { castArray, flatten, isArray, isBoolean, isFunction, isFunctionReactive, isNil, isString, isSVG, isTemplateAccessor } from './lang.js';\nimport { resolveChild, resolveClass } from './resolvers.js';\n/* MAIN */\nconst setAttributeStatic = (() => {\n    const attributesBoolean = new Set(['allowfullscreen', 'async', 'autofocus', 'autoplay', 'checked', 'controls', 'default', 'disabled', 'formnovalidate', 'hidden', 'indeterminate', 'ismap', 'loop', 'multiple', 'muted', 'nomodule', 'novalidate', 'open', 'playsinline', 'readonly', 'required', 'reversed', 'seamless', 'selected']);\n    const attributeCamelCasedRe = /e(r[HRWrv]|[Vawy])|Con|l(e[Tcs]|c)|s(eP|y)|a(t[rt]|u|v)|Of|Ex|f[XYa]|gt|hR|d[Pg]|t[TXYd]|[UZq]/; //URL: https://regex101.com/r/I8Wm4S/1\n    const attributesCache = {};\n    const uppercaseRe = /[A-Z]/g;\n    const normalizeKeySvg = (key) => {\n        return attributesCache[key] || (attributesCache[key] = attributeCamelCasedRe.test(key) ? key : key.replace(uppercaseRe, char => `-${char.toLowerCase()}`));\n    };\n    return (element, key, value) => {\n        if (isSVG(element)) {\n            key = (key === 'xlinkHref' || key === 'xlink:href') ? 'href' : normalizeKeySvg(key);\n            if (isNil(value) || (value === false && attributesBoolean.has(key))) {\n                element.removeAttribute(key);\n            }\n            else {\n                element.setAttribute(key, String(value));\n            }\n        }\n        else {\n            if (isNil(value) || (value === false && attributesBoolean.has(key))) {\n                element.removeAttribute(key);\n            }\n            else {\n                value = (value === true) ? '' : String(value);\n                element.setAttribute(key, value);\n            }\n        }\n    };\n})();\nconst setAttribute = (element, key, value) => {\n    if (isFunction(value) && isFunctionReactive(value)) {\n        useRenderEffect(() => {\n            setAttributeStatic(element, key, value());\n        });\n    }\n    else {\n        setAttributeStatic(element, key, $$(value));\n    }\n};\nconst setChildReplacementFunction = (parent, fragment, child) => {\n    useRenderEffect(() => {\n        let valueNext = child();\n        while (isFunction(valueNext)) {\n            valueNext = valueNext();\n        }\n        setChildStatic(parent, fragment, false, valueNext, true);\n    });\n};\nconst setChildReplacementText = (child, childPrev) => {\n    if (childPrev.nodeType === 3) {\n        childPrev.nodeValue = child;\n        return childPrev;\n    }\n    else {\n        const parent = childPrev.parentElement;\n        if (!parent)\n            throw new Error('Invalid child replacement');\n        const textNode = createText(child);\n        parent.replaceChild(textNode, childPrev);\n        return textNode;\n    }\n};\nconst setChildReplacement = (child, childPrev) => {\n    const type = typeof child;\n    if (type === 'string' || type === 'number' || type === 'bigint') {\n        setChildReplacementText(String(child), childPrev);\n    }\n    else {\n        const parent = childPrev.parentElement;\n        if (!parent)\n            throw new Error('Invalid child replacement');\n        const fragment = FragmentUtils.makeWithNode(childPrev);\n        if (type === 'function') {\n            setChildReplacementFunction(parent, fragment, child); //TSC\n        }\n        else {\n            setChild(parent, child, fragment);\n        }\n    }\n};\nconst setChildStatic = (parent, fragment, fragmentOnly, child, dynamic) => {\n    if (!dynamic && child === undefined)\n        return; // Ignoring static undefined children, avoiding inserting some useless placeholder nodes\n    const prev = FragmentUtils.getChildren(fragment);\n    const prevIsArray = (prev instanceof Array);\n    const prevLength = prevIsArray ? prev.length : 1;\n    const prevFirst = prevIsArray ? prev[0] : prev;\n    const prevLast = prevIsArray ? prev[prevLength - 1] : prev;\n    const prevSibling = prevLast?.nextSibling || null;\n    if (prevLength === 0) { // Fast path for appending a node the first time\n        const type = typeof child;\n        if (type === 'string' || type === 'number' || type === 'bigint') {\n            const textNode = createText(child);\n            if (!fragmentOnly) {\n                parent.appendChild(textNode);\n            }\n            FragmentUtils.replaceWithNode(fragment, textNode);\n            return;\n        }\n        else if (type === 'object' && child !== null && typeof child.nodeType === 'number') { //TSC\n            const node = child;\n            if (!fragmentOnly) {\n                parent.insertBefore(node, null);\n            }\n            FragmentUtils.replaceWithNode(fragment, node);\n            return;\n        }\n    }\n    if (prevLength === 1) { // Fast path for single text child\n        const type = typeof child;\n        if (type === 'string' || type === 'number' || type === 'bigint') {\n            const node = setChildReplacementText(String(child), prevFirst); //TODO: maybe \"fragmentOnly\" should be passed on here, but it seems unnecessary\n            FragmentUtils.replaceWithNode(fragment, node);\n            return;\n        }\n    }\n    const fragmentNext = FragmentUtils.make();\n    const children = (Array.isArray(child) ? child : [child]); //TSC\n    for (let i = 0, l = children.length; i < l; i++) {\n        const child = children[i];\n        const type = typeof child;\n        if (type === 'string' || type === 'number' || type === 'bigint') {\n            FragmentUtils.pushNode(fragmentNext, createText(child));\n        }\n        else if (type === 'object' && child !== null && typeof child.nodeType === 'number') {\n            FragmentUtils.pushNode(fragmentNext, child);\n        }\n        else if (type === 'function') {\n            const fragment = FragmentUtils.make();\n            let childFragmentOnly = !fragmentOnly; // Avoiding mutating the DOM immediately, letting the parent handle it\n            FragmentUtils.pushFragment(fragmentNext, fragment);\n            resolveChild(child, (child, dynamic) => {\n                const fragmentOnly = childFragmentOnly;\n                childFragmentOnly = false;\n                setChildStatic(parent, fragment, fragmentOnly, child, dynamic);\n            });\n        }\n    }\n    let next = FragmentUtils.getChildren(fragmentNext);\n    let nextLength = fragmentNext.length;\n    if (nextLength === 0 && prevLength === 1 && prevFirst.nodeType === 8) { // It's a placeholder already, no need to replace it\n        return;\n    }\n    if (!fragmentOnly && (nextLength === 0 || (prevLength === 1 && prevFirst.nodeType === 8) || children[SYMBOL_UNCACHED])) { // Fast path for removing all children and/or replacing the placeholder\n        const { childNodes } = parent;\n        if (childNodes.length === prevLength) { // Maybe this fragment doesn't handle all children but only a range of them, checking for that here\n            parent.textContent = '';\n            if (nextLength === 0) { // Placeholder, to keep the right spot in the array of children\n                const placeholder = createComment();\n                FragmentUtils.pushNode(fragmentNext, placeholder);\n                if (next !== fragmentNext.values) {\n                    next = placeholder;\n                    nextLength += 1;\n                }\n            }\n            if (prevSibling) {\n                if (next instanceof Array) {\n                    prevSibling.before.apply(prevSibling, next);\n                }\n                else {\n                    parent.insertBefore(next, prevSibling);\n                }\n            }\n            else {\n                if (next instanceof Array) {\n                    parent.append.apply(parent, next);\n                }\n                else {\n                    parent.append(next);\n                }\n            }\n            FragmentUtils.replaceWithFragment(fragment, fragmentNext);\n            return;\n        }\n    }\n    if (nextLength === 0) { // Placeholder, to keep the right spot in the array of children\n        const placeholder = createComment();\n        FragmentUtils.pushNode(fragmentNext, placeholder);\n        if (next !== fragmentNext.values) {\n            next = placeholder;\n            nextLength += 1;\n        }\n    }\n    if (!fragmentOnly) {\n        diff(parent, prev, next, prevSibling);\n    }\n    FragmentUtils.replaceWithFragment(fragment, fragmentNext);\n};\nconst setChild = (parent, child, fragment = FragmentUtils.make()) => {\n    resolveChild(child, setChildStatic.bind(undefined, parent, fragment, false));\n};\nconst setClassStatic = classesToggle;\nconst setClass = (element, key, value) => {\n    if (isFunction(value) && isFunctionReactive(value)) {\n        useRenderEffect(() => {\n            setClassStatic(element, key, value());\n        });\n    }\n    else {\n        setClassStatic(element, key, $$(value));\n    }\n};\nconst setClassBooleanStatic = (element, value, key, keyPrev) => {\n    if (keyPrev && keyPrev !== true) {\n        setClassStatic(element, keyPrev, false);\n    }\n    if (key && key !== true) {\n        setClassStatic(element, key, value);\n    }\n};\nconst setClassBoolean = (element, value, key) => {\n    if (isFunction(key) && isFunctionReactive(key)) {\n        let keyPrev;\n        useRenderEffect(() => {\n            const keyNext = key();\n            setClassBooleanStatic(element, value, keyNext, keyPrev);\n            keyPrev = keyNext;\n        });\n    }\n    else {\n        setClassBooleanStatic(element, value, $$(key));\n    }\n};\nconst setClassesStatic = (element, object, objectPrev) => {\n    if (isString(object)) {\n        if (isSVG(element)) {\n            element.setAttribute('class', object);\n        }\n        else {\n            element.className = object;\n        }\n    }\n    else {\n        if (objectPrev) {\n            if (isString(objectPrev)) {\n                if (objectPrev) {\n                    if (isSVG(element)) {\n                        element.setAttribute('class', '');\n                    }\n                    else {\n                        element.className = '';\n                    }\n                }\n            }\n            else if (isArray(objectPrev)) {\n                objectPrev = store.unwrap(objectPrev);\n                for (let i = 0, l = objectPrev.length; i < l; i++) {\n                    if (!objectPrev[i])\n                        continue;\n                    setClassBoolean(element, false, objectPrev[i]);\n                }\n            }\n            else {\n                objectPrev = store.unwrap(objectPrev);\n                for (const key in objectPrev) {\n                    if (object && key in object)\n                        continue;\n                    setClass(element, key, false);\n                }\n            }\n        }\n        if (isArray(object)) {\n            if (isStore(object)) {\n                for (let i = 0, l = object.length; i < l; i++) {\n                    const fn = untrack(() => isFunction(object[i]) ? object[i] : object[SYMBOL_STORE_OBSERVABLE](String(i))); //TSC\n                    setClassBoolean(element, true, fn);\n                }\n            }\n            else {\n                for (let i = 0, l = object.length; i < l; i++) {\n                    if (!object[i])\n                        continue;\n                    setClassBoolean(element, true, object[i]);\n                }\n            }\n        }\n        else {\n            if (isStore(object)) {\n                for (const key in object) {\n                    const fn = untrack(() => isFunction(object[key]) ? object[key] : object[SYMBOL_STORE_OBSERVABLE](key)); //TSC\n                    setClass(element, key, fn);\n                }\n            }\n            else {\n                for (const key in object) {\n                    setClass(element, key, object[key]);\n                }\n            }\n        }\n    }\n};\nconst setClasses = (element, object) => {\n    if (isFunction(object) || isArray(object)) {\n        let objectPrev;\n        useRenderEffect(() => {\n            const objectNext = resolveClass(object);\n            setClassesStatic(element, objectNext, objectPrev);\n            objectPrev = objectNext;\n        });\n    }\n    else {\n        setClassesStatic(element, object);\n    }\n};\nconst setDirective = (element, directive, args) => {\n    const symbol = SYMBOLS_DIRECTIVES[directive] || Symbol();\n    const data = context(symbol) || DIRECTIVES[symbol];\n    if (!data)\n        throw new Error(`Directive \"${directive}\" not found`);\n    const call = () => data.fn(element, ...castArray(args)); //TSC\n    if (data.immediate) {\n        call();\n    }\n    else {\n        useMicrotask(call);\n    }\n};\nconst setEventStatic = (() => {\n    //TODO: Maybe delete event delegation\n    //TODO: Maybe delegate more events: [onmousemove, onmouseout, onmouseover, onpointerdown, onpointermove, onpointerout, onpointerover, onpointerup, ontouchend, ontouchmove, ontouchstart]\n    const delegatedEvents = {\n        onauxclick: ['_onauxclick', false],\n        onbeforeinput: ['_onbeforeinput', false],\n        onclick: ['_onclick', false],\n        ondblclick: ['_ondblclick', false],\n        onfocusin: ['_onfocusin', false],\n        onfocusout: ['_onfocusout', false],\n        oninput: ['_oninput', false],\n        onkeydown: ['_onkeydown', false],\n        onkeyup: ['_onkeyup', false],\n        onmousedown: ['_onmousedown', false],\n        onmouseup: ['_onmouseup', false]\n    };\n    const delegate = (event) => {\n        const key = `_${event}`;\n        document.addEventListener(event.slice(2), event => {\n            const targets = event.composedPath();\n            let target = null;\n            Object.defineProperty(event, 'currentTarget', {\n                configurable: true,\n                get() {\n                    return target;\n                }\n            });\n            for (let i = 0, l = targets.length; i < l; i++) {\n                target = targets[i];\n                const handler = target[key];\n                if (!handler)\n                    continue;\n                handler(event);\n                if (event.cancelBubble)\n                    break;\n            }\n            target = null;\n        });\n    };\n    return (element, event, value) => {\n        if (event.startsWith('onmiddleclick')) { // Special-cased synthetic event, somewhat ugly but very convenient\n            const _value = value;\n            event = `onauxclick${event.slice(13)}`;\n            value = _value && ((event) => event['button'] === 1 && _value(event));\n        }\n        const delegated = delegatedEvents[event];\n        if (delegated) {\n            if (!delegated[1]) { // Not actually delegating yet\n                delegated[1] = true;\n                delegate(event);\n            }\n            element[delegated[0]] = value;\n        }\n        else if (event.endsWith('passive')) {\n            const isCapture = event.endsWith('capturepassive');\n            const type = event.slice(2, -7 - (isCapture ? 7 : 0));\n            const key = `_${event}`;\n            const valuePrev = element[key];\n            if (valuePrev)\n                element.removeEventListener(type, valuePrev, { capture: isCapture });\n            if (value)\n                element.addEventListener(type, value, { passive: true, capture: isCapture });\n            element[key] = value;\n        }\n        else if (event.endsWith('capture')) {\n            const type = event.slice(2, -7);\n            const key = `_${event}`;\n            const valuePrev = element[key];\n            if (valuePrev)\n                element.removeEventListener(type, valuePrev, { capture: true });\n            if (value)\n                element.addEventListener(type, value, { capture: true });\n            element[key] = value;\n        }\n        else {\n            element[event] = value;\n        }\n    };\n})();\nconst setEvent = (element, event, value) => {\n    setEventStatic(element, event, value);\n};\nconst setHTMLStatic = (element, value) => {\n    element.innerHTML = String(isNil(value) ? '' : value);\n};\nconst setHTML = (element, value) => {\n    useRenderEffect(() => {\n        setHTMLStatic(element, $$($$(value).__html));\n    });\n};\nconst setPropertyStatic = (element, key, value) => {\n    if (key === 'tabIndex' && isBoolean(value)) {\n        value = value ? 0 : undefined;\n    }\n    if (key === 'value' && element.tagName === 'SELECT' && !element['_$inited']) {\n        element['_$inited'] = true;\n        queueMicrotask(() => element[key] = value);\n    }\n    element[key] = value;\n    if (isNil(value)) {\n        setAttributeStatic(element, key, null);\n    }\n};\nconst setProperty = (element, key, value) => {\n    if (isFunction(value) && isFunctionReactive(value)) {\n        useRenderEffect(() => {\n            setPropertyStatic(element, key, value());\n        });\n    }\n    else {\n        setPropertyStatic(element, key, $$(value));\n    }\n};\nconst setRef = (element, value) => {\n    if (isNil(value))\n        return;\n    const values = flatten(castArray(value)).filter(Boolean);\n    if (!values.length)\n        return;\n    useMicrotask(() => untrack(() => values.forEach(value => value?.(element))));\n};\nconst setStyleStatic = (() => {\n    // From Preact: https://github.com/preactjs/preact/blob/e703a62b77c9de45e886d8a7f59bd0db658318f9/src/constants.js#L3\n    // const propertyNonDimensionalRe = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n    // From this Preact issue: https://github.com/preactjs/preact/issues/2607\n    const propertyNonDimensionalRe = /^(-|f[lo].*[^se]$|g.{5,}[^ps]$|z|o[pr]|(W.{5})?[lL]i.*(t|mp)$|an|(bo|s).{4}Im|sca|m.{6}[ds]|ta|c.*[st]$|wido|ini)/i;\n    const propertyNonDimensionalCache = {};\n    return (element, key, value) => {\n        if (key.charCodeAt(0) === 45) { // /^-/\n            if (isNil(value)) {\n                element.style.removeProperty(key);\n            }\n            else {\n                element.style.setProperty(key, String(value));\n            }\n        }\n        else if (isNil(value)) {\n            element.style[key] = null;\n        }\n        else {\n            element.style[key] = (isString(value) || (propertyNonDimensionalCache[key] || (propertyNonDimensionalCache[key] = propertyNonDimensionalRe.test(key))) ? value : `${value}px`);\n        }\n    };\n})();\nconst setStyle = (element, key, value) => {\n    if (isFunction(value) && isFunctionReactive(value)) {\n        useRenderEffect(() => {\n            setStyleStatic(element, key, value());\n        });\n    }\n    else {\n        setStyleStatic(element, key, $$(value));\n    }\n};\nconst setStylesStatic = (element, object, objectPrev) => {\n    if (isString(object)) {\n        element.setAttribute('style', object);\n    }\n    else {\n        if (objectPrev) {\n            if (isString(objectPrev)) {\n                if (objectPrev) {\n                    element.style.cssText = '';\n                }\n            }\n            else {\n                objectPrev = store.unwrap(objectPrev);\n                for (const key in objectPrev) {\n                    if (object && key in object)\n                        continue;\n                    setStyleStatic(element, key, null);\n                }\n            }\n        }\n        if (isStore(object)) {\n            for (const key in object) {\n                const fn = untrack(() => isFunction(object[key]) ? object[key] : object[SYMBOL_STORE_OBSERVABLE](key)); //TSC\n                setStyle(element, key, fn);\n            }\n        }\n        else {\n            for (const key in object) {\n                setStyle(element, key, object[key]);\n            }\n        }\n    }\n};\nconst setStyles = (element, object) => {\n    if (isFunction(object) && isFunctionReactive(object)) {\n        let objectPrev;\n        useRenderEffect(() => {\n            const objectNext = object();\n            setStylesStatic(element, objectNext, objectPrev);\n            objectPrev = objectNext;\n        });\n    }\n    else {\n        setStylesStatic(element, $$(object));\n    }\n};\nconst setTemplateAccessor = (element, key, value) => {\n    if (key === 'children') {\n        const placeholder = createText(''); // Using a Text node rather than a Comment as the former may be what we actually want ultimately\n        element.insertBefore(placeholder, null);\n        value(element, 'setChildReplacement', undefined, placeholder);\n    }\n    else if (key === 'ref') {\n        value(element, 'setRef');\n    }\n    else if (key === 'style') {\n        value(element, 'setStyles');\n    }\n    else if (key === 'class') {\n        if (!isSVG(element)) {\n            element.className = ''; // Ensuring the attribute is present\n        }\n        value(element, 'setClasses');\n    }\n    else if (key === 'dangerouslySetInnerHTML') {\n        value(element, 'setHTML');\n    }\n    else if (key.charCodeAt(0) === 111 && key.charCodeAt(1) === 110) { // /^on/\n        value(element, 'setEvent', key.toLowerCase());\n    }\n    else if (key.charCodeAt(0) === 117 && key.charCodeAt(3) === 58) { // /^u..:/\n        value(element, 'setDirective', key.slice(4));\n    }\n    else if (key === 'innerHTML' || key === 'outerHTML' || key === 'textContent' || key === 'className') {\n        // Forbidden props\n    }\n    else if (key in element && !isSVG(element)) {\n        value(element, 'setProperty', key);\n    }\n    else {\n        element.setAttribute(key, ''); // Ensuring the attribute is present\n        value(element, 'setAttribute', key);\n    }\n};\nconst setProp = (element, key, value) => {\n    if (isTemplateAccessor(value)) {\n        setTemplateAccessor(element, key, value);\n    }\n    else if (key === 'children') {\n        setChild(element, value);\n    }\n    else if (key === 'ref') {\n        setRef(element, value);\n    }\n    else if (key === 'style') {\n        setStyles(element, value);\n    }\n    else if (key === 'class') {\n        setClasses(element, value);\n    }\n    else if (key === 'dangerouslySetInnerHTML') {\n        setHTML(element, value);\n    }\n    else if (key.charCodeAt(0) === 111 && key.charCodeAt(1) === 110) { // /^on/\n        setEvent(element, key.toLowerCase(), value);\n    }\n    else if (key.charCodeAt(0) === 117 && key.charCodeAt(3) === 58) { // /^u..:/\n        setDirective(element, key.slice(4), value);\n    }\n    else if (key === 'innerHTML' || key === 'outerHTML' || key === 'textContent' || key === 'className') {\n        // Forbidden props\n    }\n    else if (key in element && !isSVG(element)) {\n        setProperty(element, key, value);\n    }\n    else {\n        setAttribute(element, key, value);\n    }\n};\nconst setProps = (element, object) => {\n    for (const key in object) {\n        setProp(element, key, object[key]);\n    }\n};\n/* EXPORT */\nexport { setAttributeStatic, setAttribute, setChildReplacementFunction, setChildReplacementText, setChildReplacement, setChildStatic, setChild, setClassStatic, setClass, setClassBooleanStatic, setClassesStatic, setClasses, setEventStatic, setEvent, setHTMLStatic, setHTML, setPropertyStatic, setProperty, setRef, setStyleStatic, setStyle, setStylesStatic, setStyles, setTemplateAccessor, setProp, setProps };\n","/* IMPORT */\nimport untrack from './untrack.js';\nimport wrapElement from './wrap_element.js';\nimport { createHTMLNode, createSVGNode } from '../utils/creators.js';\nimport { isFunction, isNil, isNode, isString, isSVGElement, isVoidChild } from '../utils/lang.js';\nimport { setProps } from '../utils/setters.js';\n/* MAIN */\n// It's important to wrap components, so that they can be executed in the right order, from parent to child, rather than from child to parent in some cases\nconst createElement = (component, props, ..._children) => {\n    const { children: __children, key, ref, ...rest } = (props || {}); //TSC\n    const children = (_children.length === 1) ? _children[0] : (_children.length === 0) ? __children : _children;\n    if (isFunction(component)) {\n        const props = rest;\n        if (!isNil(children))\n            props.children = children;\n        if (!isNil(ref))\n            props.ref = ref;\n        return wrapElement(() => {\n            return untrack(() => component.call(component, props)); //TSC\n        });\n    }\n    else if (isString(component)) {\n        const props = rest;\n        const isSVG = isSVGElement(component);\n        const createNode = isSVG ? createSVGNode : createHTMLNode;\n        if (!isVoidChild(children))\n            props.children = children;\n        if (!isNil(ref))\n            props.ref = ref;\n        return wrapElement(() => {\n            const child = createNode(component); //TSC\n            if (isSVG)\n                child['isSVG'] = true;\n            untrack(() => setProps(child, props));\n            return child;\n        });\n    }\n    else if (isNode(component)) {\n        return wrapElement(() => component);\n    }\n    else {\n        throw new Error('Invalid component');\n    }\n};\n/* EXPORT */\nexport default createElement;\n","/* IMPORT */\nimport useMemo from '../hooks/use_memo.js';\nimport createElement from '../methods/create_element.js';\nimport resolve from '../methods/resolve.js';\nimport $$ from '../methods/SS.js';\n/* MAIN */\nconst Dynamic = ({ component, props, children }) => {\n    return useMemo(() => {\n        return resolve(createElement($$(component, false), $$(props), children));\n    });\n};\n/* EXPORT */\nexport default Dynamic;\n","/* IMPORT */\nimport untrack from '../methods/untrack.js';\nimport { tryCatch } from '../oby.js';\nimport { isFunction } from '../utils/lang.js';\n/* MAIN */\nconst ErrorBoundary = ({ fallback, children }) => {\n    return tryCatch(children, props => untrack(() => isFunction(fallback) ? fallback(props) : fallback));\n};\n/* EXPORT */\nexport default ErrorBoundary;\n","/* IMPORT */\nimport { for as _for } from '../oby.js';\nfunction For({ values, fallback, pooled, unkeyed, children }) {\n    return _for(values, children, fallback, { pooled, unkeyed }); //TSC\n}\n/* EXPORT */\nexport default For;\n","/* IMPORT */\nimport cleanup from './cleanup.js';\nimport CacheKeyed from './for.cache.keyed.js';\nimport CacheUnkeyed from './for.cache.unkeyed.js';\nimport get from './get.js';\nimport isStore from './is_store.js';\nimport memo from './memo.js';\nimport resolve from './resolve.js';\nimport untrack from './untrack.js';\nimport { SYMBOL_CACHED, SYMBOL_STORE_VALUES } from '../symbols.js';\nimport { isArray, isEqual } from '../utils.js';\nfunction _for(values, fn, fallback = [], options) {\n    const { Q, map } = options?.unkeyed ? new CacheUnkeyed(fn, !!options.pooled) : new CacheKeyed(fn); //TSC\n    cleanup(Q);\n    const value = memo(() => {\n        return get(values);\n    }, {\n        equals: (next, prev) => {\n            return !!next && !!prev && !next.length && !prev.length && !isStore(next) && !isStore(prev);\n        }\n    });\n    return memo(() => {\n        const array = value();\n        if (isStore(array)) {\n            array[SYMBOL_STORE_VALUES];\n        }\n        return untrack(() => {\n            const results = map(array);\n            return results?.length ? results : resolve(fallback);\n        });\n    }, {\n        equals: (next, prev) => {\n            return isArray(next) && !!next[SYMBOL_CACHED] && isArray(prev) && isEqual(next, prev);\n        }\n    });\n}\n/* EXPORT */\nexport default _for;\n","/* IMPORT */\n/* MAIN */\nconst Fragment = ({ children }) => {\n    return children;\n};\n/* EXPORT */\nexport default Fragment;\n","/* IMPORT */\nimport useMemo from './use_memo.js';\nimport $$ from '../methods/SS.js';\nimport { isNil } from '../utils/lang.js';\n/* MAIN */\n//TODO: Maybe port this to oby, as \"when\" or \"is\" or \"guarded\"\n//TODO: Optimize this, checking if the value is actually potentially reactive\nconst useGuarded = (value, guard) => {\n    let valueLast;\n    const guarded = useMemo(() => {\n        const current = $$(value);\n        if (!guard(current))\n            return valueLast;\n        return valueLast = current;\n    });\n    return () => {\n        const current = guarded();\n        if (isNil(current))\n            throw new Error('The value never passed the type guard');\n        return current;\n    };\n};\n/* EXPORT */\nexport default useGuarded;\n","/* IMPORT */\nimport isObservable from '../methods/is_observable.js';\nimport useGuarded from '../hooks/use_guarded.js';\nimport useUntracked from '../hooks/use_untracked.js';\nimport { ternary } from '../oby.js';\nimport { isComponent, isFunction, isTruthy } from '../utils/lang.js';\n/* MAIN */\n//TODO: Support an is/guard prop, maybe\nconst If = ({ when, fallback, children }) => {\n    if (isFunction(children) && !isObservable(children) && !isComponent(children)) { // Calling the children function with an (() => Truthy<T>)\n        const truthy = useGuarded(when, isTruthy);\n        return ternary(when, useUntracked(() => children(truthy)), fallback);\n    }\n    else { // Just passing the children along\n        return ternary(when, children, fallback); //TSC\n    }\n};\n/* EXPORT */\nexport default If;\n","/* IMPORT */\nimport useCleanup from '../hooks/use_cleanup.js';\nimport useMemo from '../hooks/use_memo.js';\nimport useResolved from '../hooks/use_resolved.js';\nimport useRoot from '../hooks/use_root.js';\nimport useSuspense from '../hooks/use_suspense.js';\nimport resolve from '../methods/resolve.js';\nimport $ from '../methods/S.js';\nimport { with as _with } from '../oby.js';\n/* HELPERS */\nconst cache = {};\nconst runWithSuperRoot = _with();\nlet lockId = 1;\n/* MAIN */\n//TODO: Support hot-swapping owner and context, to make the context JustWork™\nconst KeepAlive = ({ id, ttl, children }) => {\n    return useMemo(() => {\n        return useResolved([id, ttl], (id, ttl) => {\n            const lock = lockId++;\n            const item = cache[id] || (cache[id] = { id, lock });\n            item.lock = lock;\n            item.reset?.();\n            item.suspended || (item.suspended = $(false));\n            item.suspended(false);\n            if (!item.dispose || !item.result) {\n                runWithSuperRoot(() => {\n                    useRoot(dispose => {\n                        item.dispose = () => {\n                            delete cache[id];\n                            dispose();\n                        };\n                        useSuspense(item.suspended, () => {\n                            item.result = resolve(children);\n                        });\n                    });\n                });\n            }\n            useCleanup(() => {\n                const hasLock = () => lock === item.lock;\n                if (!hasLock())\n                    return;\n                item.suspended?.(true);\n                if (!ttl || ttl <= 0 || ttl >= Infinity)\n                    return;\n                const dispose = () => hasLock() && item.dispose?.();\n                const timeoutId = setTimeout(dispose, ttl);\n                const reset = () => clearTimeout(timeoutId);\n                item.reset = reset;\n            });\n            return item.result;\n        });\n    });\n};\n/* EXPORT */\nexport default KeepAlive;\n","/* IMPORT */\nimport useRoot from '../hooks/use_root.js';\nimport { setChild } from '../utils/setters.js';\n/* MAIN */\nconst render = (child, parent) => {\n    if (!parent || !(parent instanceof HTMLElement))\n        throw new Error('Invalid parent node');\n    parent.textContent = '';\n    return useRoot(dispose => {\n        setChild(parent, child);\n        return () => {\n            dispose();\n            parent.textContent = '';\n        };\n    });\n};\n/* EXPORT */\nexport default render;\n","/* IMPORT */\nimport useBoolean from '../hooks/use_boolean.js';\nimport useRenderEffect from '../hooks/use_render_effect.js';\nimport render from '../methods/render.js';\nimport $$ from '../methods/SS.js';\nimport { createHTMLNode } from '../utils/creators.js';\nimport { assign } from '../utils/lang.js';\n/* MAIN */\nconst Portal = ({ when = true, mount, wrapper, children }) => {\n    const portal = $$(wrapper) || createHTMLNode('div');\n    if (!(portal instanceof HTMLElement))\n        throw new Error('Invalid wrapper node');\n    const condition = useBoolean(when);\n    useRenderEffect(() => {\n        if (!$$(condition))\n            return;\n        const parent = $$(mount) || document.body;\n        if (!(parent instanceof Element))\n            throw new Error('Invalid mount node');\n        parent.insertBefore(portal, null);\n        return () => {\n            parent.removeChild(portal);\n        };\n    });\n    useRenderEffect(() => {\n        if (!$$(condition))\n            return;\n        return render(children, portal);\n    });\n    return assign(() => $$(condition) || children, { metadata: { portal } });\n};\n/* EXPORT */\nexport default Portal;\n","/* IMPORT */\nimport SuspenseContext from './suspense.context.js';\nimport useMemo from '../hooks/use_memo.js';\nimport useSuspense from '../hooks/use_suspense.js';\nimport resolve from '../methods/resolve.js';\nimport $$ from '../methods/SS.js';\nimport { suspense as _suspense, ternary } from '../oby.js';\n/* MAIN */\nconst Suspense = ({ when, fallback, children }) => {\n    return SuspenseContext.wrap(suspense => {\n        const condition = useMemo(() => !!$$(when) || suspense.active());\n        const childrenSuspended = useSuspense(condition, () => resolve(children));\n        return ternary(condition, fallback, childrenSuspended);\n    });\n};\n/* EXPORT */\nexport default Suspense;\n","/* IMPORT */\nimport { switch as _switch } from '../oby.js';\nimport { assign, castArray } from '../utils/lang.js';\n/* MAIN */\n//TODO: Enforce children of Switch to be of type Switch.Case or Switch.Default\nconst Switch = ({ when, fallback, children }) => {\n    const childrenWithValues = castArray(children); //TSC\n    const values = childrenWithValues.map(child => child().metadata);\n    return _switch(when, values, fallback); //TSC\n};\n/* UTILITIES */\nSwitch.Case = ({ when, children }) => {\n    const metadata = { metadata: [when, children] };\n    return assign(() => children, metadata);\n};\nSwitch.Default = ({ children }) => {\n    const metadata = { metadata: [children] };\n    return assign(() => children, metadata);\n};\n/* EXPORT */\nexport default Switch;\n","/* IMPORT */\nimport { ternary } from '../oby.js';\n/* MAIN */\nconst Ternary = ({ when, children }) => {\n    return ternary(when, children[0], children[1]);\n};\n/* EXPORT */\nexport default Ternary;\n","/* IMPORT */\nimport './types.js';\nimport Fragment from '../components/fragment.js';\nimport createElement from '../methods/create_element.js';\n/* MAIN */\nconst jsx = (component, props) => {\n    return createElement(component, props);\n};\n/* EXPORT */\nexport { jsx, jsx as jsxs, jsx as jsxDEV, Fragment };\n","/* IMPORT */\nimport { DIRECTIVES, SYMBOLS_DIRECTIVES } from '../constants.js';\nimport resolve from './resolve.js';\nimport { context } from '../oby.js';\n/* MAIN */\nconst createDirective = (name, fn, options) => {\n    const immediate = !!options?.immediate;\n    const data = { fn, immediate };\n    const symbol = (SYMBOLS_DIRECTIVES[name] || (SYMBOLS_DIRECTIVES[name] = Symbol()));\n    const Provider = ({ children }) => {\n        return context({ [symbol]: data }, () => {\n            return resolve(children);\n        });\n    };\n    const ref = (...args) => {\n        return (element) => {\n            fn(element, ...args);\n        };\n    };\n    const register = () => {\n        if (symbol in DIRECTIVES)\n            throw new Error('Directive \"name\" is already registered');\n        DIRECTIVES[symbol] = data;\n    };\n    return { Provider, ref, register };\n};\n/* EXPORT */\nexport default createDirective;\n","/* IMPORT */\nimport useMemo from '../hooks/use_memo.js';\nimport $ from './S.js';\nimport resolve from './resolve.js';\nimport untrack from './untrack.js';\nimport { isFunction } from '../utils/lang.js';\n/* HELPERS */\nconst COMPONENT_RE = /^_?[A-Z][a-zA-Z0-9$_-]*$/;\nconst SYMBOL_AS = '__hmr_as__';\nconst SYMBOL_COLD_COMPONENT = Symbol('HMR.Cold');\nconst SYMBOL_HOT_COMPONENT = Symbol('HMR.Hot');\nconst SYMBOL_HOT_ID = Symbol('HMR.ID');\nconst SOURCES = new WeakMap();\n/* MAIN */\n//TODO: This seems excessively complicated, maybe it can be simplified somewhat?\n//TODO: Make this work better when a nested component is added/removed too\nconst hmr = (accept, component) => {\n    if (accept) { // Making the component hot\n        /* CHECK */\n        const cached = component[SYMBOL_HOT_COMPONENT];\n        if (cached)\n            return cached; // Already hot\n        const isProvider = !isFunction(component) && ('Provider' in component);\n        if (isProvider)\n            return component; // Context/Directive providers are not hot-reloadable\n        /* HELPERS */\n        const createHotComponent = (path) => {\n            return (...args) => {\n                return useMemo(() => {\n                    const component = path.reduce((component, key) => component[key], SOURCES.get(id())?.() || source());\n                    const result = resolve(untrack(() => component(...args)));\n                    return result;\n                });\n            };\n        };\n        const createHotComponentDeep = (component, path) => {\n            const cached = component[SYMBOL_HOT_COMPONENT];\n            if (cached)\n                return cached;\n            const hot = component[SYMBOL_HOT_COMPONENT] = createHotComponent(path);\n            for (const key in component) {\n                const value = component[key];\n                if (isFunction(value) && COMPONENT_RE.test(key)) { // A component\n                    hot[key] = createHotComponentDeep(value, [...path, key]);\n                }\n                else { // Something else\n                    hot[key] = value;\n                }\n            }\n            return hot;\n        };\n        const onAccept = (module) => {\n            const hot = module[component[SYMBOL_AS]] || module[component.name] || module.default;\n            if (!hot)\n                return console.error(`[hmr] Failed to handle update for \"${component.name}\" component:\\n\\n`, component);\n            const cold = hot[SYMBOL_COLD_COMPONENT] || hot;\n            hot[SYMBOL_HOT_ID]?.(id());\n            SOURCES.get(id())?.(() => cold);\n        };\n        /* MAIN */\n        const id = $({});\n        const source = $(component);\n        SOURCES.set(id(), source);\n        const cold = component[SYMBOL_COLD_COMPONENT] || component;\n        const hot = createHotComponentDeep(component, []);\n        cold[SYMBOL_HOT_COMPONENT] = hot;\n        hot[SYMBOL_COLD_COMPONENT] = cold;\n        hot[SYMBOL_HOT_COMPONENT] = hot;\n        hot[SYMBOL_HOT_ID] = id;\n        accept(onAccept);\n        /* RETURN */\n        return hot;\n    }\n    else { // Returning the component as is\n        return component;\n    }\n};\n/* EXPORT */\nexport default hmr;\n","var n=function(t,s,r,e){var u;s[0]=0;for(var h=1;h<s.length;h++){var p=s[h++],a=s[h]?(s[0]|=p?1:2,r[s[h++]]):s[++h];3===p?e[0]=a:4===p?e[1]=Object.assign(e[1]||{},a):5===p?(e[1]=e[1]||{})[s[++h]]=a:6===p?e[1][s[++h]]+=a+\"\":p?(u=t.apply(a,n(t,a,r,[\"\",null])),e.push(u),a[0]?s[0]|=2:(s[h-2]=0,s[h]=u)):e.push(a)}return e},t=new Map;export default function(s){var r=t.get(this);return r||(r=new Map,t.set(this,r)),(r=n(this,r.get(s)||(r.set(s,r=function(n){for(var t,s,r=1,e=\"\",u=\"\",h=[0],p=function(n){1===r&&(n||(e=e.replace(/^\\s*\\n\\s*|\\s*\\n\\s*$/g,\"\")))?h.push(0,n,e):3===r&&(n||e)?(h.push(3,n,e),r=2):2===r&&\"...\"===e&&n?h.push(4,n,0):2===r&&e&&!n?h.push(5,0,!0,e):r>=5&&((e||!n&&5===r)&&(h.push(r,0,e,s),r=6),n&&(h.push(r,n,0,s),r=6)),e=\"\"},a=0;a<n.length;a++){a&&(1===r&&p(),p(a));for(var l=0;l<n[a].length;l++)t=n[a][l],1===r?\"<\"===t?(p(),h=[h],r=3):e+=t:4===r?\"--\"===e&&\">\"===t?(r=1,e=\"\"):e=t+e[0]:u?t===u?u=\"\":e+=t:'\"'===t||\"'\"===t?u=t:\">\"===t?(p(),r=1):r&&(\"=\"===t?(r=5,s=e,e=\"\"):\"/\"===t&&(r<5||\">\"===n[a][l+1])?(p(),3===r&&(h=h[0]),r=h,(h=h[0]).push(2,0,r),r=0):\" \"===t||\"\\t\"===t||\"\\n\"===t||\"\\r\"===t?(p(),r=2):e+=t),3===r&&\"!--\"===e&&(r=4,h=h[0])}return p(),h}(s)),r),arguments,[])).length>1?r:r[0]}\n","/* IMPORT */\nimport htm from 'htm';\nimport createElement from './create_element.js';\nimport { assign } from '../utils/lang.js';\n/* HELPERS */\nconst registry = {};\nconst h = (type, props, ...children) => createElement(registry[type] || type, props, ...children);\nconst register = (components) => void assign(registry, components);\n/* MAIN */\nconst html = assign(htm.bind(h), { register });\n/* EXPORT */\nexport default html;\n","/* IMPORT */\nimport useMemo from '../hooks/use_memo.js';\nimport useResolved from '../hooks/use_resolved.js';\nimport useResource from '../hooks/use_resource.js';\nimport creatElement from './create_element.js';\nimport resolve from './resolve.js';\nimport { once } from '../utils/lang.js';\n/* MAIN */\nconst lazy = (fetcher) => {\n    const fetcherOnce = once(fetcher);\n    const component = (props) => {\n        const resource = useResource(fetcherOnce);\n        return useMemo(() => {\n            return useResolved(resource, ({ pending, error, value }) => {\n                if (pending)\n                    return;\n                if (error)\n                    throw error;\n                const component = ('default' in value) ? value.default : value;\n                return resolve(creatElement(component, props));\n            });\n        });\n    };\n    component.preload = () => {\n        return new Promise((resolve, reject) => {\n            const resource = useResource(fetcherOnce);\n            useResolved(resource, ({ pending, error }) => {\n                if (pending)\n                    return;\n                if (error)\n                    return reject(error);\n                return resolve();\n            });\n        });\n    };\n    return component;\n};\n/* EXPORT */\nexport default lazy;\n","/* IMPORT */\nimport Portal from '../components/portal.js';\nimport Suspense from '../components/suspense.js';\nimport SuspenseContext from '../components/suspense.context.js';\nimport { SYMBOL_SUSPENSE } from '../constants.js';\nimport useEffect from '../hooks/use_effect.js';\nimport useRoot from '../hooks/use_root.js';\nimport { context } from '../oby.js';\n/* MAIN */\n//TODO: Implement this properly, without relying on JSDOM or stuff like that\nconst renderToString = (child) => {\n    return new Promise(resolve => {\n        useRoot(dispose => {\n            context({ [SYMBOL_SUSPENSE]: undefined }, () => {\n                SuspenseContext.wrap(suspense => {\n                    const { portal } = Portal({ children: Suspense({ children: child }) }).metadata;\n                    useEffect(() => {\n                        if (suspense.active())\n                            return;\n                        resolve(portal.innerHTML);\n                        dispose();\n                    });\n                });\n            });\n        });\n    });\n};\n/* EXPORT */\nexport default renderToString;\n","/* IMPORT */\nimport { SYMBOL_TEMPLATE_ACCESSOR } from '../constants.js';\nimport wrapElement from './wrap_element.js';\nimport { assign, indexOf, isFunction, isString } from '../utils/lang.js';\nimport { setAttribute, setChildReplacement, setClasses, setEvent, setHTML, setProperty, setRef, setStyles } from '../utils/setters.js';\n/* MAIN */\n//TODO: Avoid using \"Function\" and \"eval\", while still keeping similar performance, if possible\n//TODO: support complex children in the template function\nconst template = (fn) => {\n    const safePropertyRe = /^[a-z0-9-_]+$/i;\n    const checkValidProperty = (property) => {\n        if (isString(property) && safePropertyRe.test(property))\n            return true;\n        throw new Error(`Invalid property, only alphanumeric properties are allowed inside templates, received: \"${property}\"`);\n    };\n    const makeAccessor = (actionsWithNodes) => {\n        return new Proxy({}, {\n            get(target, prop) {\n                checkValidProperty(prop);\n                const accessor = (node, method, key, targetNode) => {\n                    if (key)\n                        checkValidProperty(key);\n                    actionsWithNodes.push([node, method, prop, key, targetNode]);\n                };\n                const metadata = { [SYMBOL_TEMPLATE_ACCESSOR]: true };\n                return assign(accessor, metadata);\n            }\n        });\n    };\n    const makeActionsWithNodesAndTemplate = () => {\n        const actionsWithNodes = [];\n        const accessor = makeAccessor(actionsWithNodes);\n        const component = fn(accessor);\n        if (isFunction(component)) {\n            const root = component();\n            if (root instanceof Element) {\n                return { actionsWithNodes, root };\n            }\n        }\n        throw new Error('Invalid template, it must return a function that returns an Element');\n    };\n    const makeActionsWithPaths = (actionsWithNodes) => {\n        const actionsWithPaths = [];\n        for (let i = 0, l = actionsWithNodes.length; i < l; i++) {\n            const [node, method, prop, key, targetNode] = actionsWithNodes[i];\n            const nodePath = makeNodePath(node);\n            const targetNodePath = targetNode ? makeNodePath(targetNode) : undefined;\n            actionsWithPaths.push([nodePath, method, prop, key, targetNodePath]);\n        }\n        return actionsWithPaths;\n    };\n    const makeNodePath = (() => {\n        let prevNode = null;\n        let prevPath;\n        return (node) => {\n            if (node === prevNode)\n                return prevPath; // Cache hit\n            const path = [];\n            let child = node;\n            let parent = child.parentNode;\n            while (parent) {\n                const index = !child.previousSibling ? 0 : !child.nextSibling ? -0 : indexOf(parent.childNodes, child);\n                path.push(index);\n                child = parent;\n                parent = parent.parentNode;\n            }\n            prevNode = node;\n            prevPath = path;\n            return path;\n        };\n    })();\n    const makeNodePathProperties = (path) => {\n        const properties = ['root'];\n        const parts = path.slice().reverse();\n        for (let i = 0, l = parts.length; i < l; i++) {\n            const part = parts[i];\n            if (Object.is(0, part)) {\n                properties.push('firstChild');\n            }\n            else if (Object.is(-0, part)) {\n                properties.push('lastChild');\n            }\n            else {\n                properties.push('firstChild');\n                for (let nsi = 0; nsi < part; nsi++) {\n                    properties.push('nextSibling');\n                }\n            }\n        }\n        return properties;\n    };\n    const makeReviverPaths = (actionsWithPaths) => {\n        const paths = [];\n        for (let i = 0, l = actionsWithPaths.length; i < l; i++) {\n            const action = actionsWithPaths[i];\n            const nodePath = action[0];\n            const targetNodePath = action[4];\n            paths.push(nodePath);\n            if (targetNodePath) {\n                paths.push(targetNodePath);\n            }\n        }\n        return paths;\n    };\n    const makeReviverVariablesData = (paths, properties) => {\n        const data = new Array(paths.length);\n        for (let i = 0, l = paths.length; i < l; i++) {\n            data[i] = {\n                path: paths[i],\n                properties: properties[i]\n            };\n        }\n        return data;\n    };\n    const makeReviverVariables = (actionsWithPaths) => {\n        const paths = makeReviverPaths(actionsWithPaths);\n        const properties = paths.map(makeNodePathProperties);\n        const data = makeReviverVariablesData(paths, properties);\n        const assignments = [];\n        const map = new Map();\n        let variableId = 0;\n        while (true) {\n            const datum = data.find(datum => datum.properties.length > 1);\n            if (!datum)\n                break;\n            const [current, next] = datum.properties;\n            const variable = `$${variableId++}`;\n            const assignment = `const ${variable} = ${current}.${next};`;\n            assignments.push(assignment);\n            for (let i = 0, l = data.length; i < l; i++) {\n                const datum = data[i];\n                const [otherCurrent, otherNext] = datum.properties;\n                if (otherCurrent !== current || otherNext !== next)\n                    continue;\n                datum.properties[0] = variable;\n                datum.properties.splice(1, 1);\n            }\n        }\n        for (let i = 0, l = data.length; i < l; i++) {\n            const datum = data[i];\n            map.set(datum.path, datum.properties[0]);\n        }\n        return { assignments, map };\n    };\n    const makeReviverActions = (actionsWithPaths, variables) => {\n        const actions = [];\n        for (let i = 0, l = actionsWithPaths.length; i < l; i++) { //TODO: Write this more cleanly, with a single case\n            const [nodePath, method, prop, key, targetNodePath] = actionsWithPaths[i];\n            if (targetNodePath) {\n                actions.push(`this.${method} ( props[\"${prop}\"], ${variables.get(targetNodePath)} );`);\n            }\n            else if (key) {\n                actions.push(`this.${method} ( ${variables.get(nodePath)}, \"${key}\", props[\"${prop}\"] );`);\n            }\n            else {\n                actions.push(`this.${method} ( ${variables.get(nodePath)}, props[\"${prop}\"] );`);\n            }\n        }\n        return actions;\n    };\n    const makeReviver = (actionsWithPaths) => {\n        const { assignments, map } = makeReviverVariables(actionsWithPaths);\n        const actions = makeReviverActions(actionsWithPaths, map);\n        const fn = new Function('root', 'props', `${assignments.join('')}${actions.join('')}return root;`);\n        const apis = { setAttribute, setChildReplacement, setClasses, setEvent, setHTML, setProperty, setRef, setStyles };\n        const reviver = fn.bind(apis);\n        return reviver;\n    };\n    const makeComponent = () => {\n        const { actionsWithNodes, root } = makeActionsWithNodesAndTemplate();\n        const actionsWithPaths = makeActionsWithPaths(actionsWithNodes);\n        const reviver = makeReviver(actionsWithPaths);\n        return (props) => {\n            const clone = root.cloneNode(true);\n            return wrapElement(reviver.bind(undefined, clone, props));\n        };\n    };\n    return makeComponent();\n};\n/* EXPORT */\nexport default template;\n","/* IMPORT */\nimport { CONTEXTS_DATA } from '../constants.js';\nimport resolve from './resolve.js';\nimport { context } from '../oby.js';\nfunction createContext(defaultValue) {\n    const symbol = Symbol();\n    const Provider = ({ value, children }) => {\n        return context({ [symbol]: value }, () => {\n            return resolve(children);\n        });\n    };\n    const Context = { Provider };\n    CONTEXTS_DATA.set(Context, { symbol, defaultValue });\n    return Context;\n}\n/* EXPORT */\nexport default createContext;\n","/* IMPORT */\nimport createElement from './create_element.js';\nimport { isArray, isObject } from '../utils/lang.js';\nfunction h(component, props, ...children) {\n    if (children.length || (isObject(props) && !isArray(props))) {\n        return createElement(component, props, ...children); //TSC\n    }\n    else {\n        return createElement(component, null, props); //TSC\n    }\n}\n/* EXPORT */\nexport default h;\n","/* IMPORT */\nimport { CONTEXTS_DATA } from '../constants.js';\nimport { context } from '../oby.js';\nimport { isNil } from '../utils/lang.js';\nfunction useContext(Context) {\n    const { symbol, defaultValue } = CONTEXTS_DATA.get(Context) || { symbol: Symbol() };\n    const valueContext = context(symbol);\n    const value = isNil(valueContext) ? defaultValue : valueContext;\n    return value;\n}\n/* EXPORT */\nexport default useContext;\n","import { html, render, $, isObservable } from \"voby\";\n\nexport function ReactiveRoot({ children }) {\n  const root = html`<div style=\"display:contents\" />`();\n  root.addEventListener(\"DOMNodeRemovedFromDocument\", render(html`${children}`, root));\n\n  return root;\n}\n\nexport function Switch(props) {\n  let checked = props.checked ?? false;\n\n  if (!props.onClick) {\n    checked = $(!!checked);\n    props.onClick = () => checked((c) => !c);\n  }\n\n  return html`\n    <div>\n      <input class=\"neptune-switch-checkbox\" type=\"checkbox\" checked=${checked} />\n      <span onClick=${props.onClick} class=\"neptune-switch\"></span>\n    </div>\n  `;\n}\n\nexport function TextInput({ placeholder = \"\", type = \"text\", value = \"\", onEnter = () => {} }) {\n  if (!isObservable(value)) value = $(value);\n\n  return html`\n    <input\n      class=\"neptune-text-input\"\n      value=${value}\n      onKeyup=${(e) => {\n        if (e.key != \"Enter\") return;\n        onEnter(e);\n      }}\n      onInput=${(e) => value(e.target.value)}\n      placeholder=${placeholder}\n      type=${type} />\n  `;\n}\n\nexport function Button({ onClick = () => {}, children }) {\n  return html` <button class=\"neptune-button\" onClick=${onClick}>${children}</button> `;\n}\n","export const interceptors = {};\n\nexport default function intercept(types, cb, once = false) {\n  if (typeof types == \"string\") types = [types];\n\n  const uninterceptors = [];\n  const unintercept = () => uninterceptors.forEach((u) => u());\n\n  for (let type of types) {\n    if (!interceptors[type]) interceptors[type] = [];\n\n    const handleIntercept = once\n      ? (...args) => {\n          cb(...args);\n          unintercept();\n        }\n      : cb;\n    interceptors[type].push(handleIntercept);\n\n    uninterceptors.push(() =>\n      interceptors[type].splice(interceptors[type].indexOf(handleIntercept), 1),\n    );\n  }\n\n  return unintercept;\n}\n","// code source: https://github.com/KaiHax/kaihax/blob/master/src/patcher.ts\n\nconst observations = new Set();\nconst observer = new MutationObserver((records) => {\n  // de-dupe to be sure\n  const changedElems = new Set();\n\n  for (const record of records) {\n    changedElems.add(record.target);\n\n    for (const e of record.removedNodes)\n      if (e instanceof HTMLElement || e instanceof SVGElement) changedElems.add(e);\n  }\n\n  for (const elem of changedElems)\n    for (const obs of observations) {\n      if (elem.matches(obs[0])) obs[1](elem);\n\n      elem\n        .querySelectorAll(obs[0])\n        .forEach(\n          (e) => !obs[2] && (e instanceof HTMLElement || e instanceof SVGElement) && obs[1](e),\n        );\n    }\n});\n\nconst startObserving = () =>\n  observer.observe(document.body, {\n    subtree: true,\n    childList: true,\n    attributes: true,\n  });\n\nconst stopObserving = () => observer.disconnect();\n\nexport function observe(sel, cb) {\n  if (observations.size === 0) startObserving();\n  const entry = [sel, cb, false];\n  observations.add(entry);\n\n  const unobs = () => {\n    observations.delete(entry);\n    if (observations.size === 0) stopObserving();\n  };\n\n  unobs.now = () => {\n    entry[2] = true;\n    unobs();\n  };\n\n  return unobs;\n}\nexport function unobserve() {\n  observations.clear();\n  stopObserving();\n}\n","import { ReactiveRoot } from \"../ui/components.js\";\nimport intercept from \"./intercept.js\";\nimport { observe } from \"./observe.js\";\n\nconst pageNotFoundSelector = `[class^=\"contentArea--\"] [class^=\"pageNotFoundError--\"]`;\n\nconst replacePage = (page, component) => {\n  page.style.display = \"none\";\n\n  const neptunePage = document.createElement(\"div\");\n  neptunePage.className = \"__NEPTUNE_PAGE\";\n\n  page.insertAdjacentElement(\"afterend\", neptunePage);\n  neptunePage.appendChild(ReactiveRoot({ children: component }));\n};\n\nintercept(\"ROUTER_LOCATION_CHANGED\", () => {\n  for (const page of document.getElementsByClassName(\"__NEPTUNE_PAGE\"))\n    page.parentElement.removeChild(page);\n});\n\nexport default function registerRoute(path, component) {\n  return intercept(\"ROUTER_LOCATION_CHANGED\", ([payload]) => {\n    if (payload.pathname != `/neptune/${path}`) return;\n\n    const pageNotFound = document.querySelector(pageNotFoundSelector);\n    if (pageNotFound) return replacePage(pageNotFound, component);\n\n    const unob = observe(pageNotFoundSelector, (page) => {\n      unob.now();\n      replacePage(page, component);\n    });\n  });\n}\n","function promisifyRequest(request) {\n    return new Promise((resolve, reject) => {\n        // @ts-ignore - file size hacks\n        request.oncomplete = request.onsuccess = () => resolve(request.result);\n        // @ts-ignore - file size hacks\n        request.onabort = request.onerror = () => reject(request.error);\n    });\n}\nfunction createStore(dbName, storeName) {\n    const request = indexedDB.open(dbName);\n    request.onupgradeneeded = () => request.result.createObjectStore(storeName);\n    const dbp = promisifyRequest(request);\n    return (txMode, callback) => dbp.then((db) => callback(db.transaction(storeName, txMode).objectStore(storeName)));\n}\nlet defaultGetStoreFunc;\nfunction defaultGetStore() {\n    if (!defaultGetStoreFunc) {\n        defaultGetStoreFunc = createStore('keyval-store', 'keyval');\n    }\n    return defaultGetStoreFunc;\n}\n/**\n * Get a value by its key.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction get(key, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => promisifyRequest(store.get(key)));\n}\n/**\n * Set a value with a key.\n *\n * @param key\n * @param value\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction set(key, value, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.put(value, key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Set multiple values at once. This is faster than calling set() multiple times.\n * It's also atomic – if one of the pairs can't be added, none will be added.\n *\n * @param entries Array of entries, where each entry is an array of `[key, value]`.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction setMany(entries, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        entries.forEach((entry) => store.put(entry[1], entry[0]));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Get multiple values by their keys\n *\n * @param keys\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction getMany(keys, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => Promise.all(keys.map((key) => promisifyRequest(store.get(key)))));\n}\n/**\n * Update a value. This lets you see the old value and update it as an atomic operation.\n *\n * @param key\n * @param updater A callback that takes the old value and returns a new value.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction update(key, updater, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => \n    // Need to create the promise manually.\n    // If I try to chain promises, the transaction closes in browsers\n    // that use a promise polyfill (IE10/11).\n    new Promise((resolve, reject) => {\n        store.get(key).onsuccess = function () {\n            try {\n                store.put(updater(this.result), key);\n                resolve(promisifyRequest(store.transaction));\n            }\n            catch (err) {\n                reject(err);\n            }\n        };\n    }));\n}\n/**\n * Delete a particular key from the store.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction del(key, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.delete(key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Delete multiple keys at once.\n *\n * @param keys List of keys to delete.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction delMany(keys, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        keys.forEach((key) => store.delete(key));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Clear all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction clear(customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.clear();\n        return promisifyRequest(store.transaction);\n    });\n}\nfunction eachCursor(store, callback) {\n    store.openCursor().onsuccess = function () {\n        if (!this.result)\n            return;\n        callback(this.result);\n        this.result.continue();\n    };\n    return promisifyRequest(store.transaction);\n}\n/**\n * Get all keys in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction keys(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAllKeys) {\n            return promisifyRequest(store.getAllKeys());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.key)).then(() => items);\n    });\n}\n/**\n * Get all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction values(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAll) {\n            return promisifyRequest(store.getAll());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.value)).then(() => items);\n    });\n}\n/**\n * Get all entries in the store. Each entry is an array of `[key, value]`.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction entries(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        // (although, hopefully we'll get a simpler path some day)\n        if (store.getAll && store.getAllKeys) {\n            return Promise.all([\n                promisifyRequest(store.getAllKeys()),\n                promisifyRequest(store.getAll()),\n            ]).then(([keys, values]) => keys.map((key, i) => [key, values[i]]));\n        }\n        const items = [];\n        return customStore('readonly', (store) => eachCursor(store, (cursor) => items.push([cursor.key, cursor.value])).then(() => items));\n    });\n}\n\nexport { clear, createStore, del, delMany, entries, get, getMany, keys, promisifyRequest, set, setMany, update, values };\n","import { createStore as createIdbStore, set as idbSet, get as idbGet } from \"idb-keyval\";\nimport { store } from \"voby\";\n\nexport function appendStyle(style) {\n  const styleTag = document.createElement(\"style\");\n  styleTag.innerHTML = style;\n\n  document.head.appendChild(styleTag);\n\n  return (newStyle) => {\n    if (newStyle == undefined) return document.head.removeChild(styleTag);\n\n    styleTag.innerHTML = newStyle;\n  };\n}\n\nconst idbStore = createIdbStore(\"__NEPTUNE_IDB_STORAGE\", \"__NEPTUNE_IDB_STORAGE\");\n\nexport function createPersistentObject(id) {\n  const persistentObject = store({});\n\n  idbGet(id, idbStore).then((obj) => store.reconcile(persistentObject, obj ?? {}));\n\n  store.on(persistentObject, () => {\n    idbSet(id, store.unwrap(persistentObject), idbStore);\n  });\n\n  return persistentObject;\n}\n","/* es-module-lexer 1.3.0 */\nconst A=1===new Uint8Array(new Uint16Array([1]).buffer)[0];export function parse(E,g=\"@\"){if(!C)return init.then((()=>parse(E)));const I=E.length+1,o=(C.__heap_base.value||C.__heap_base)+4*I-C.memory.buffer.byteLength;o>0&&C.memory.grow(Math.ceil(o/65536));const D=C.sa(I-1);if((A?B:Q)(E,new Uint16Array(C.memory.buffer,D,I)),!C.parse())throw Object.assign(new Error(`Parse error ${g}:${E.slice(0,C.e()).split(\"\\n\").length}:${C.e()-E.lastIndexOf(\"\\n\",C.e()-1)}`),{idx:C.e()});const K=[],k=[];for(;C.ri();){const A=C.is(),Q=C.ie(),B=C.ai(),g=C.id(),I=C.ss(),o=C.se();let D;C.ip()&&(D=J(E.slice(-1===g?A-1:A,-1===g?Q+1:Q))),K.push({n:D,s:A,e:Q,ss:I,se:o,d:g,a:B})}for(;C.re();){const A=C.es(),Q=C.ee(),B=C.els(),g=C.ele(),I=E.slice(A,Q),o=I[0],D=B<0?void 0:E.slice(B,g),K=D?D[0]:\"\";k.push({s:A,e:Q,ls:B,le:g,n:'\"'===o||\"'\"===o?J(I):I,ln:'\"'===K||\"'\"===K?J(D):D})}function J(A){try{return(0,eval)(A)}catch(A){}}return[K,k,!!C.f()]}function Q(A,Q){const B=A.length;let C=0;for(;C<B;){const B=A.charCodeAt(C);Q[C++]=(255&B)<<8|B>>>8}}function B(A,Q){const B=A.length;let C=0;for(;C<B;)Q[C]=A.charCodeAt(C++)}let C;export const init=WebAssembly.compile((E=\"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9wBGDQFBACgCoAohAQwCC0EAKAKgCiIBQQJqQbAIQQoQLQ0BQQYhAAwCC0EAKAKgCiIBLwECQekARw0AIAEvAQRB9ABHDQBBBCEAIAEvAQZB6ABGDQELQQAgAUF+ajYCoAoPC0EAIAEgAEEBdGo2AqAKAkBBARAnQfsARg0AQQAgATYCoAoPC0EAKAKgCiICIQADQEEAIABBAmo2AqAKAkACQAJAQQEQJyIAQSJGDQAgAEEnRw0BQScQGEEAQQAoAqAKQQJqNgKgCkEBECchAAwCC0EiEBhBAEEAKAKgCkECajYCoApBARAnIQAMAQsgABAqIQALAkAgAEE6Rg0AQQAgATYCoAoPC0EAQQAoAqAKQQJqNgKgCgJAQQEQJyIAQSJGDQAgAEEnRg0AQQAgATYCoAoPCyAAEBhBAEEAKAKgCkECajYCoAoCQAJAQQEQJyIAQSxGDQAgAEH9AEYNAUEAIAE2AqAKDwtBAEEAKAKgCkECajYCoApBARAnQf0ARg0AQQAoAqAKIQAMAQsLQQAoAuQJIgEgAjYCECABQQAoAqAKQQJqNgIMC20BAn8CQAJAA0ACQCAAQf//A3EiAUF3aiICQRdLDQBBASACdEGfgIAEcQ0CCyABQaABRg0BIAAhAiABECYNAkEAIQJBAEEAKAKgCiIAQQJqNgKgCiAALwECIgANAAwCCwsgACECCyACQf//A3ELqwEBBH8CQAJAQQAoAqAKIgIvAQAiA0HhAEYNACABIQQgACEFDAELQQAgAkEEajYCoApBARAnIQJBACgCoAohBQJAAkAgAkEiRg0AIAJBJ0YNACACECoaQQAoAqAKIQQMAQsgAhAYQQBBACgCoApBAmoiBDYCoAoLQQEQJyEDQQAoAqAKIQILAkAgAiAFRg0AIAUgBEEAIAAgACABRiICG0EAIAEgAhsQAgsgAwtyAQR/QQAoAqAKIQBBACgCpAohAQJAAkADQCAAQQJqIQIgACABTw0BAkACQCACLwEAIgNBpH9qDgIBBAALIAIhACADQXZqDgQCAQECAQsgAEEEaiEADAALC0EAIAI2AqAKECJBAA8LQQAgAjYCoApB3QALSQEDf0EAIQMCQCACRQ0AAkADQCAALQAAIgQgAS0AACIFRw0BIAFBAWohASAAQQFqIQAgAkF/aiICDQAMAgsLIAQgBWshAwsgAwsL4gECAEGACAvEAQAAeABwAG8AcgB0AG0AcABvAHIAdABlAHQAYQByAG8AbQB1AG4AYwB0AGkAbwBuAHMAcwBlAHIAdAB2AG8AeQBpAGUAZABlAGwAZQBjAG8AbgB0AGkAbgBpAG4AcwB0AGEAbgB0AHkAYgByAGUAYQByAGUAdAB1AHIAZABlAGIAdQBnAGcAZQBhAHcAYQBpAHQAaAByAHcAaABpAGwAZQBmAG8AcgBpAGYAYwBhAHQAYwBmAGkAbgBhAGwAbABlAGwAcwAAQcQJCxABAAAAAgAAAAAEAAAwOQAA\",\"undefined\"!=typeof Buffer?Buffer.from(E,\"base64\"):Uint8Array.from(atob(E),(A=>A.charCodeAt(0))))).then(WebAssembly.instantiate).then((({exports:A})=>{C=A}));var E;","/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const separatorRegex = /^(?:\\s+|,)$/u\n\nexport const skipSeparators = (imported, i) => {\n  while (i < imported.length && separatorRegex.test(imported[i])) {\n    i++\n  }\n\n  return i\n}\n\nexport const skipNonSeparators = (imported, i) => {\n  while (i < imported.length && !separatorRegex.test(imported[i])) {\n    i++\n  }\n\n  return i\n}\n","/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { skipNonSeparators } from './skip.js'\n\nconst parseDefaultImport = (importClauseString, i) => {\n  const startIndex = i\n  i = skipNonSeparators(importClauseString, i)\n\n  return { defaultImport: importClauseString.slice(startIndex, i), i }\n}\n\nexport default parseDefaultImport\n","/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst parseNamedImports = (importClauseString, i) => {\n  const startIndex = ++i\n\n  while (i < importClauseString.length && importClauseString[i] !== `}`) {\n    i++\n  }\n\n  const namedImports = importClauseString\n    .slice(startIndex, i++)\n    .split(`,`)\n    .map(namedImport => {\n      namedImport = namedImport.trim()\n      if (namedImport.includes(` `)) {\n        const components = namedImport.split(` `)\n        return {\n          specifier: components[0],\n          binding: components[components.length - 1],\n        }\n      }\n      return { specifier: namedImport, binding: namedImport }\n    })\n    .filter(({ specifier }) => specifier.length > 0)\n\n  return { namedImports, i }\n}\n\nexport default parseNamedImports\n","/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { skipNonSeparators, skipSeparators } from './skip.js'\n\nconst parseNamespaceImport = (importClauseString, i) => {\n  i++\n  i = skipSeparators(importClauseString, i)\n  i += `as`.length\n  i = skipSeparators(importClauseString, i)\n\n  const startIndex = i\n  i = skipNonSeparators(importClauseString, i)\n\n  return {\n    namespaceImport: importClauseString.slice(startIndex, i),\n    i,\n  }\n}\n\nexport default parseNamespaceImport\n","/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport parseDefaultImport from './parse-default-import.js'\nimport parseNamedImports from './parse-named-imports.js'\nimport parseNamespaceImport from './parse-namespace-import.js'\nimport { separatorRegex } from './skip.js'\n\n// Assumes import clause is syntactically valid\nconst parseImportClause = importClauseString => {\n  let defaultImport\n  let namespaceImport\n  const namedImports = []\n\n  for (let i = 0; i < importClauseString.length; i++) {\n    if (separatorRegex.test(importClauseString[i])) {\n      continue\n    }\n\n    if (importClauseString[i] === `{`) {\n      let newNamedImports\n      ;({ namedImports: newNamedImports, i } = parseNamedImports(\n        importClauseString,\n        i,\n      ))\n      namedImports.push(...newNamedImports)\n    } else if (importClauseString[i] === `*`) {\n      ;({ namespaceImport, i } = parseNamespaceImport(importClauseString, i))\n    } else {\n      ;({ defaultImport, i } = parseDefaultImport(importClauseString, i))\n    }\n  }\n\n  return {\n    default: defaultImport,\n    namespace: namespaceImport,\n    named: namedImports,\n  }\n}\n\nexport default parseImportClause\n","const getUnescapedAny = (sequence, code) => {\n    if (code != null) {\n        return String.fromCodePoint(code);\n    }\n    switch (sequence) {\n        case '\\\\b':\n            return '\\b';\n        case '\\\\f':\n            return '\\f';\n        case '\\\\n':\n            return '\\n';\n        case '\\\\r':\n            return '\\r';\n        case '\\\\t':\n            return '\\t';\n        case '\\\\v':\n            return '\\v';\n    }\n    return false;\n};\nexport { getUnescapedAny };\n//# sourceMappingURL=get-unescaped-any.js.map","import { getUnescapedAny } from './get-unescaped-any.js';\nconst removeSlashes = (source, options = {}) => {\n    const { getUnescaped = getUnescapedAny } = options;\n    const rx = /(?:(\\\\(u([0-9a-f]{4})|u\\{([0-9a-f]+)\\}|x([0-9a-f]{2})|(\\d{1,3})|([\\s\\S]|$)))|([\\s\\S]))/giu;\n    let match;\n    let result = '';\n    while (null != (match = rx.exec(source))) {\n        const [, sequence, fallback, unicode, unicodePoint, hex, octal, char, literal] = match;\n        if (literal) {\n            result += literal;\n            continue;\n        }\n        let code;\n        if (char != null) {\n            code = null;\n        }\n        else if (octal) {\n            code = Number.parseInt(octal, 8);\n        }\n        else {\n            code = Number.parseInt((unicodePoint || unicode || hex), 16);\n        }\n        try {\n            const unescaped = getUnescaped(sequence, code);\n            if (!unescaped) {\n                result += fallback;\n            }\n            else if (unescaped === true) {\n                result += getUnescapedAny(sequence, code) || fallback;\n            }\n            else {\n                result += unescaped;\n            }\n        }\n        catch (_error) {\n            result += fallback;\n        }\n    }\n    return result;\n};\nconst stripSlashes = removeSlashes;\nexport { removeSlashes, stripSlashes };\n//# sourceMappingURL=remove-slashes.js.map","/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Assumes the string is syntactically valid\nconst isConstantStringLiteral = stringLiteral => {\n  const quote = [`'`, `\"`, `\\``].find(\n    quoteCandidate =>\n      stringLiteral.startsWith(quoteCandidate) &&\n      stringLiteral.endsWith(quoteCandidate),\n  )\n\n  if (quote == null) {\n    return false\n  }\n\n  for (let i = 1; i < stringLiteral.length - 1; i++) {\n    // Check for end of string literal before end of stringLiteral\n    if (stringLiteral[i] === quote && stringLiteral[i - 1] !== `\\\\`) {\n      return false\n    }\n\n    // Check for interpolated value in template literal\n    if (\n      quote === `\\`` &&\n      stringLiteral.slice(i, i + 2) === `\\${` &&\n      stringLiteral[i - 1] !== `\\\\`\n    ) {\n      return false\n    }\n  }\n\n  return true\n}\n\nexport default isConstantStringLiteral\n","/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport module from 'module'\n\nconst builtinModules = new Set(module.builtinModules)\n\nconst parseType = moduleSpecifier => {\n  if (moduleSpecifier.length === 0) {\n    return `invalid`\n  }\n\n  if (moduleSpecifier.startsWith(`/`)) {\n    return `absolute`\n  }\n\n  if (moduleSpecifier.startsWith(`.`)) {\n    return `relative`\n  }\n\n  if (builtinModules.has(moduleSpecifier)) {\n    return `builtin`\n  }\n\n  return `package`\n}\n\nexport default parseType\n","/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createRequire } from 'module'\nimport { dirname } from 'path'\n\nconst require = createRequire(import.meta.url)\n\nconst resolve = (from, to) => {\n  try {\n    return require.resolve(to, { paths: [dirname(from)] })\n  } catch {\n    return undefined\n  }\n}\n\nexport default resolve\n","/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport assert from 'assert'\nimport { removeSlashes } from 'slashes'\nimport isConstantStringLiteral from './is-constant-string-literal.js'\nimport parseType from './parse-type.js'\nimport resolve from './resolve.js'\n\nconst parseModuleSpecifier = (\n  moduleSpecifierString,\n  { isDynamicImport, resolveFrom },\n) => {\n  assert(isDynamicImport || isConstantStringLiteral(moduleSpecifierString))\n\n  const { isConstant, value } =\n    !isDynamicImport || isConstantStringLiteral(moduleSpecifierString)\n      ? {\n          isConstant: true,\n          value: removeSlashes(moduleSpecifierString.slice(1, -1)),\n        }\n      : { isConstant: false, value: undefined }\n\n  return {\n    type: isConstant ? parseType(value) : `unknown`,\n    isConstant,\n    code: moduleSpecifierString,\n    value,\n    resolved:\n      typeof resolveFrom === `string` && isConstant\n        ? resolve(resolveFrom, value)\n        : undefined,\n  }\n}\n\nexport default parseModuleSpecifier\n","/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { parse } from 'es-module-lexer'\nimport parseImportClause from './parse-import-clause/index.js'\nimport parseModuleSpecifier from './parse-module-specifier/index.js'\n\nconst parseImports = async (code, { resolveFrom } = {}) => {\n  const [imports] = await parse(\n    code,\n    resolveFrom == null ? undefined : resolveFrom,\n  )\n\n  return {\n    *[Symbol.iterator]() {\n      for (let {\n        d: dynamicImportStartIndex,\n        ss: statementStartIndex,\n        s: moduleSpecifierStartIndex,\n        e: moduleSpecifierEndIndexExclusive,\n      } of imports) {\n        const isImportMeta = dynamicImportStartIndex === -2\n        if (isImportMeta) {\n          continue\n        }\n\n        const isDynamicImport = dynamicImportStartIndex > -1\n\n        // Include string literal quotes in character range\n        if (!isDynamicImport) {\n          moduleSpecifierStartIndex--\n          moduleSpecifierEndIndexExclusive++\n        }\n\n        const moduleSpecifierString = code.slice(\n          moduleSpecifierStartIndex,\n          moduleSpecifierEndIndexExclusive,\n        )\n        const moduleSpecifier = parseModuleSpecifier(moduleSpecifierString, {\n          isDynamicImport,\n          resolveFrom,\n        })\n\n        let importClause\n        if (!isDynamicImport) {\n          let importClauseString = code\n            .slice(\n              statementStartIndex + `import`.length,\n              moduleSpecifierStartIndex,\n            )\n            .trim()\n          if (importClauseString.endsWith(`from`)) {\n            importClauseString = importClauseString.slice(\n              0,\n              Math.max(0, importClauseString.length - `from`.length),\n            )\n          }\n          importClause = parseImportClause(importClauseString)\n        }\n\n        yield {\n          startIndex: statementStartIndex,\n          // Include the closing parenthesis for dynamic import\n          endIndex: isDynamicImport\n            ? moduleSpecifierEndIndexExclusive + 1\n            : moduleSpecifierEndIndexExclusive,\n          isDynamicImport,\n          moduleSpecifier,\n          importClause,\n        }\n      }\n    },\n  }\n}\n\nexport default parseImports\n","import parseImports from \"parse-imports\";\n\nasync function betterParseImports(code) {\n  const exports = [];\n\n  // This looks stupid but it's less iterations\n  const imports = [...(await parseImports(code))].filter((i) => {\n    if (i.isDynamicImport) return;\n    if (code.slice(i.startIndex, i.startIndex + 6) == \"import\") return true;\n\n    i.isExport = true;\n    exports.push(i);\n  });\n\n  return [imports, exports];\n}\n\nconst removeFromString = (string, start, end) =>\n  string.slice(0, start) + string.slice(end);\n\nconst insertIntoString = (string, start, newString) =>\n  string.slice(0, start) + newString + string.slice(start);\n\nconst destructurifyImp = (obj) =>\n  Object.entries(obj)\n    .map(([k, v]) => `${k}:${v}`)\n    .join();\n\nconst destructurifyExp = (obj) =>\n  Object.entries(obj)\n    .map(([k, v]) => `${v}:${k}`)\n    .join();\n\nexport default async function quartz(\n  code,\n  config = { plugins: [] },\n  moduleId = false\n) {\n  let generatedImports = \"\";\n\n  for (const plugin of config.plugins)\n    if (plugin.transform) code = plugin.transform({ code });\n\n  const [imports, exports] = await betterParseImports(code);\n\n  // I don't want to have to parse any of this shit more than once.\n  let offset = 0;\n\n  for (const exp of exports) {\n    imports.push(exp);\n\n    const startIndex = exp.startIndex + offset;\n    const endIndex = exp.endIndex + offset;\n\n    const namespace = exp.importClause.namespace;\n    if (namespace != undefined) {\n      // Because of how `export * from \"module\"` works, we can't dynamically export things.\n      // My proposal is that we have a $$$QUARTZ_DYNAMIC_EXPORTS object passed through,\n      // we add a randomly generated namespace, and then we convert the export into reassigning $$$QUARTZ_DYNAMIC_EXPORTS.\n      // We then spread the exports and the dynamic exports together and return that as the exports.\n\n      if (namespace != \"\") {\n        code = removeFromString(code, startIndex, endIndex);\n        const newExport = `export { ${namespace} };`;\n        code = insertIntoString(code, startIndex, newExport);\n\n        offset -= endIndex - startIndex + newExport.length;\n      }\n\n      continue;\n    }\n\n    const fromIndex =\n      startIndex + code.slice(startIndex, endIndex).lastIndexOf(\"from\");\n    code = removeFromString(code, fromIndex, endIndex);\n    offset -= endIndex - fromIndex;\n  }\n\n  let quartzStore = {};\n\n  for (const imp of imports) {\n    if (!imp.isExport) {\n      code = removeFromString(\n        code,\n        imp.startIndex + offset,\n        imp.endIndex + offset\n      );\n\n      offset -= imp.endIndex + offset - (imp.startIndex + offset);\n    }\n\n    let id = (Math.random() + 1).toString(36).substring(7);\n\n    let store = (quartzStore[id] = {});\n    let accessor = `$$$QUARTZ_STORE[\"${id}\"]`;\n\n    for (const plugin of config.plugins) {\n      if (!plugin.resolve) continue;\n\n      const generatedImport = await plugin.resolve({\n        config,\n        accessor,\n        store,\n        name: imp.moduleSpecifier.value,\n        moduleId,\n      });\n\n      if (!generatedImport) continue;\n\n      const addImport = (name) =>\n        (generatedImports += `const ${name} = ${generatedImport};`);\n\n      const { importClause } = imp;\n\n      if (importClause.default) addImport(`{default:${importClause.default}}`);\n      if (importClause.namespace) addImport(importClause.namespace);\n      if (importClause.named.length > 0) {\n        for (const name of importClause.named) {\n          addImport(`{${name.specifier}:${name.binding}}`);\n        }\n      }\n    }\n  }\n\n  // This appears to be the only way to share things between realms.\n  const globalStoreID = (Math.random() + 1).toString(36).substring(7);\n  globalThis[globalStoreID] = quartzStore;\n\n  // console.log(generatedImports + code)\n\n  const mod = await import(`data:text/javascript;base64,${btoa(`const $$$QUARTZ_STORE = globalThis[\"${globalStoreID}\"];` + generatedImports + code)}`)\n  delete globalThis[globalStoreID];\n\n  return mod;\n}","// we use this array multiple times\nexport const patchTypes = [\"a\", \"b\", \"i\"];\nexport const patchedObjects = new Map();\n","import { patchedObjects, patchTypes } from \"./shared.js\";\nexport function unpatch(funcParent, funcName, hookId, type) {\n    const patchedObject = patchedObjects.get(funcParent);\n    const patch = patchedObject?.[funcName];\n    if (!patch?.[type].has(hookId))\n        return false;\n    patch[type].delete(hookId);\n    // If there are no more hooks for every type, remove the patch\n    if (patchTypes.every((t) => patch[t].size === 0)) {\n        // reflect defineproperty is like object defineproperty\n        // but instead of erroring it returns if it worked or not.\n        // this is more easily minifiable, hence its use. -- sink\n        const success = Reflect.defineProperty(funcParent, funcName, {\n            value: patch.o,\n            writable: true,\n            configurable: true,\n        });\n        if (!success)\n            funcParent[funcName] = patch.o;\n        delete patchedObject[funcName];\n    }\n    if (Object.keys(patchedObject).length == 0)\n        patchedObjects.delete(funcParent);\n    return true;\n}\nexport function unpatchAll() {\n    for (const [parentObject, patchedObject] of patchedObjects.entries())\n        for (const funcName in patchedObject)\n            for (const hookType of patchTypes)\n                for (const hookId of patchedObject[funcName]?.[hookType].keys() ?? [])\n                    unpatch(parentObject, funcName, hookId, hookType);\n}\n","// curried - getPatchFunc(\"before\")(...)\n// allows us to apply an argument while leaving the rest open much cleaner.\n// functional programming strikes again! -- sink\nimport hook from \"./hook.js\";\nimport { patchedObjects } from \"./shared.js\";\nimport { unpatch } from \"./unpatch.js\";\n// creates a hook if needed, else just adds one to the patches array\nexport default (patchType) => (funcName, funcParent, callback, oneTime = false) => {\n    if (typeof funcParent[funcName] !== \"function\")\n        throw new Error(`${funcName} is not a function in ${funcParent.constructor.name}`);\n    if (!patchedObjects.has(funcParent))\n        patchedObjects.set(funcParent, {});\n    const parentInjections = patchedObjects.get(funcParent);\n    if (!parentInjections[funcName]) {\n        const origFunc = funcParent[funcName];\n        // note to future me optimising for size: extracting new Map() to a func increases size --sink\n        parentInjections[funcName] = {\n            o: origFunc,\n            b: new Map(),\n            i: new Map(),\n            a: new Map(),\n        };\n        const runHook = (ctxt, args, construct) => {\n            const ret = hook(funcName, funcParent, args, ctxt, construct);\n            if (oneTime)\n                unpatchThisPatch();\n            return ret;\n        };\n        const replaceProxy = new Proxy(origFunc, {\n            apply: (_, ctxt, args) => runHook(ctxt, args, false),\n            construct: (_, args) => runHook(origFunc, args, true),\n            get: (target, prop, receiver) => prop == \"toString\"\n                ? origFunc.toString.bind(origFunc)\n                : Reflect.get(target, prop, receiver),\n        });\n        // this works around breaking some async find implementation which listens for assigns via proxy\n        // see comment in unpatch.ts\n        const success = Reflect.defineProperty(funcParent, funcName, {\n            value: replaceProxy,\n            configurable: true,\n            writable: true,\n        });\n        if (!success)\n            funcParent[funcName] = replaceProxy;\n    }\n    const hookId = Symbol();\n    const unpatchThisPatch = () => unpatch(funcParent, funcName, hookId, patchType);\n    parentInjections[funcName][patchType].set(hookId, callback);\n    return unpatchThisPatch;\n};\n","// calls relevant patches and returns the final result\nimport { patchedObjects } from \"./shared.js\";\nexport default function (funcName, funcParent, funcArgs, \n// the value of `this` to apply\nctxt, \n// if true, the function is actually constructor\nisConstruct) {\n    const patch = patchedObjects.get(funcParent)?.[funcName];\n    // This is in the event that this function is being called after all patches are removed.\n    if (!patch)\n        return isConstruct\n            ? Reflect.construct(funcParent[funcName], funcArgs, ctxt)\n            : funcParent[funcName].apply(ctxt, funcArgs);\n    // Before patches\n    for (const hook of patch.b.values()) {\n        const maybefuncArgs = hook.call(ctxt, funcArgs);\n        if (Array.isArray(maybefuncArgs))\n            funcArgs = maybefuncArgs;\n    }\n    // Instead patches\n    let workingRetVal = [...patch.i.values()].reduce((prev, current) => (...args) => current.call(ctxt, args, prev), \n    // This calls the original function\n    (...args) => isConstruct\n        ? Reflect.construct(patch.o, args, ctxt)\n        : patch.o.apply(ctxt, args))(...funcArgs);\n    // After patches\n    for (const hook of patch.a.values())\n        workingRetVal = hook.call(ctxt, funcArgs, workingRetVal) ?? workingRetVal;\n    return workingRetVal;\n}\n","import getPatchFunc from \"./getPatchFunc.js\";\nimport { unpatchAll } from \"./unpatch.js\";\nconst before = getPatchFunc(\"b\");\nconst instead = getPatchFunc(\"i\");\nconst after = getPatchFunc(\"a\");\nexport { instead, before, after, unpatchAll };\n","import registerRoute from \"./registerRoute.js\";\nimport intercept from \"./intercept.js\";\nimport { actions } from \"../handleExfiltrations.js\";\nfunction makeInactive(tab) {\n  tab.classList.remove(Array.from(tab.classList).find((c) => c.startsWith(\"activeItem--\")));\n}\n\nconst getTabs = () => document.querySelector(`.sidebarWrapper section[class^=\"section--\"]`);\n\n// Automatically set tab to unchecked.\nintercept(\"ROUTER_LOCATION_CHANGED\", () => {\n  for (const tab of document.getElementsByClassName(\"__NEPTUNE_TAB\")) tab.style.color = \"\";\n});\n\n/*\n  This entire function abuses their router's 404 handling to insert our own tabs.\n  Because 404s count towards router history, our tabs function perfectly fine even when using the back arrows!\n*/\nexport default function registerTab(name, path, component = () => {}) {\n  const unobservers = [];\n\n  const addTab = (tabs) => {\n    const tab = tabs.children[0].cloneNode(true);\n    makeInactive(tab);\n\n    tab.querySelector(`[class^=\"responsiveText--\"]`).textContent = name;\n\n    tab.classList.add(\"__NEPTUNE_TAB\");\n\n    tab.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n\n      actions.router.push({\n        pathname: `/neptune/${path}`,\n        replace: true,\n      });\n    });\n\n    const removeRouteHandler = registerRoute(path, () => {\n      tab.style.color = \"var(--wave-color-solid-accent-fill)\";\n\n      return component;\n    });\n\n    tabs.appendChild(tab);\n    unobservers.push(removeRouteHandler, () => tabs.removeChild(tab));\n  };\n\n  const tabs = getTabs();\n\n  if (!tabs) {\n    // Instead of DOM observing we just intercept the first action that gets called after the UI shows. Maybe we can DOM observe later?\n    unobservers.push(\n      intercept(\n        \"favorites/SET_FAVORITE_IDS\",\n        () => {\n          addTab(getTabs());\n        },\n        true,\n      ),\n    );\n  } else addTab(tabs);\n\n  return () => unobservers.forEach((u) => u());\n}\n","import intercept from \"./intercept.js\";\nimport { observe } from \"./observe.js\";\n\nexport default function hookContextMenu(menuType, name, handler) {\n  return intercept(\"contextMenu/OPEN\", ([payload]) => {\n    // TODO: Change this to a switch statement.\n\n    if (payload?.type != menuType) return;\n\n    const unob = observe(`[data-type=\"contextmenu-item\"]`, (elem) => {\n      unob.now();\n\n      const contextMenuItem = elem.cloneNode(true);\n      const contextMenuLabel = contextMenuItem.querySelector(`[class^=\"actionTextInner--\"]`);\n      contextMenuLabel.innerText = name;\n\n      const parentClasses = contextMenuLabel.parentElement.classList;\n\n      contextMenuItem.innerHTML = \"\";\n\n      const contextMenuWrapper = document.createElement(\"div\");\n      contextMenuWrapper.setAttribute(\"tabindex\", \"0\");\n      contextMenuWrapper.classList.add(...parentClasses);\n      contextMenuWrapper.appendChild(contextMenuLabel);\n\n      contextMenuItem.addEventListener(\"keyup\", (event) => {\n        if (event.keyCode != 13) return;\n\n        event.target.click();\n      });\n\n      contextMenuItem.appendChild(contextMenuWrapper);\n\n      contextMenuItem.addEventListener(\"click\", (event) => {\n        handler(event);\n      });\n\n      elem.parentElement.appendChild(contextMenuItem);\n    });\n  });\n}\n","import * as voby from \"voby\";\nimport * as patcher from \"spitroast\";\nimport * as utils from \"./api/utils.js\";\nimport * as plugins from \"./api/plugins.js\";\nimport intercept from \"./api/intercept.js\";\nimport { observe } from \"./api/observe.js\";\nimport registerTab from \"./api/registerTab.js\";\nimport registerRoute from \"./api/registerRoute.js\";\nimport hookContextMenu from \"./api/hookContextMenu.js\";\n\nexport default {\n  patcher,\n  utils,\n  intercept,\n  observe,\n  registerTab,\n  registerRoute,\n  hookContextMenu,\n  voby,\n  plugins,\n};\n","import windowObject from \"./windowObject.js\";\nimport * as patcher from \"spitroast\";\nimport { interceptors } from \"./api/intercept.js\";\nimport loadStyles from \"./styles.js\";\n\n// abandon all hope, ye who enter here\n\n/*\n  This code runs before webpackChunk_tidal_web is defined.\n  Upon it being assigned to, we patch push to intercept webpackRequire and exfiltrate modules.\n  The upcoming comments will explain each step of the process.\n*/\n\n// Variables used for hooking into webpack.\nlet patchedPush = false;\nlet webpackObject;\n\n// Exfiltrations gained from hooking into webpack.\nlet patchedPrepareAction = false;\nlet exfiltratedStore;\n\n// Built action handlers\nexport const actions = {};\nwindowObject.actions = actions;\n\nconst getModulesFromWpRequire = (wpRequire) =>\n  Object.fromEntries(\n    Object.entries(wpRequire.m).map(([k]) => [k, { id: k, loaded: true, exports: wpRequire(k) }]),\n  );\n\nObject.defineProperty(window, \"webpackChunk_tidal_web\", {\n  get: () => webpackObject,\n  set(val) {\n    if (webpackObject) return true;\n    loadStyles();\n\n    /*\n      We replace webpackObject with a proxy that waits for .push to be gotten.\n      This could be replaced with an Object.defineProperty call that assigns push to a getter,\n      but I didn't feel like it. Fuck you.\n    */\n    webpackObject = new Proxy(val, {\n      get(obj, prop) {\n        if (prop == \"push\" && !patchedPush) {\n          patchedPush = true;\n\n          // This patcher call patches .push.\n          patcher.before(prop, obj, (args) => {\n            // Push can be called with multiple chunks, so instead of only doing the first argument we handle all of them.\n            for (let arg of args) {\n              if (!arg[1]) continue;\n\n              // Each chunk contains an object containing a list of modules, so we iterate over each module id.\n              for (let id in arg[1]) {\n                // Modules get passed webpackRequire as their third argument, so we patch over each module to essentially patch webpackRequire.\n                patcher.before(id, arg[1], (args) => {\n                  const wpRequire = args[2];\n\n                  if (!windowObject.hasOwnProperty(\"modules\"))\n                    Object.defineProperty(windowObject, \"modules\", {\n                      get: () => Object.values(getModulesFromWpRequire(wpRequire)),\n                    });\n\n                  // See above: patching webpackRequire.\n                  patcher.after(2, args, (_, resp) => {\n                    try {\n                      /*\n                        This entire block exfiltrates modules we need / patches them.\n                        The only modules we need export an object, so we return if they aren't an object.\n                      */\n                      if (typeof resp != \"object\") return;\n\n                      try {\n                        if (!exfiltratedStore) {\n                          // We sift through the modules to find a module that exports a function that gets the global Redux store.\n                          const [key] = Object.entries(resp).find(([, e]) =>\n                            e?.toString?.().includes?.('Error(\"No global store set\"'),\n                          );\n\n                          if (key) exfiltratedStore = true;\n\n                          /*\n                            Because we patch so early, the global Redux store is not defined yet,\n                            so we wait for the getStore function to be called.\n                          */\n                          patcher.after(key, resp, (_, resp) => {\n                            if (!typeof resp == \"object\" && windowObject.store) return;\n\n                            windowObject.store = resp;\n                          });\n                        }\n                      } catch {}\n\n                      try {\n                        if (patchedPrepareAction) return;\n\n                        let found = Object.entries(resp).find(([, possiblyPrepareAction]) =>\n                          possiblyPrepareAction\n                            ?.toString?.()\n                            ?.includes?.(`new Error(\"prepareAction did not return an object\");`),\n                        );\n\n                        if (!found) return;\n\n                        patchedPrepareAction = true;\n                        patcher.after(found[0], resp, ([type], resp) => {\n                          if (!interceptors[type]) interceptors[type] = [];\n\n                          const [parent, child] = type\n                            .split(\"/\")\n                            .map((n) =>\n                              n.toUpperCase() == n\n                                ? n.toLowerCase().replace(/_([a-z])/g, (_, i) => i.toUpperCase())\n                                : n,\n                            );\n\n                          const builtAction = (...args) => {\n                            const act = resp(...args);\n\n                            if (!(act.__proto__.toString() == \"[object Promise]\"))\n                              return windowObject.store.dispatch(act);\n\n                            return new Promise(async (res, rej) => {\n                              try {\n                                res(windowObject.store.dispatch(await act));\n                              } catch (e) {\n                                rej(e);\n                              }\n                            });\n                          };\n\n                          if (child) {\n                            if (!actions[parent]) actions[parent] = {};\n\n                            actions[parent][child] = builtAction;\n                          } else {\n                            actions[parent] = builtAction;\n                          }\n\n                          return new Proxy(resp, {\n                            apply(orig, ctxt, args) {\n                              let shouldDispatch = true;\n\n                              for (let interceptor of interceptors[type]) {\n                                try {\n                                  const resp = interceptor(args);\n\n                                  if (typeof resp == \"boolean\") shouldDispatch = !shouldDispatch;\n                                } catch (e) {\n                                  console.error(\"Failed to run interceptor!\\n\", e);\n                                }\n                              }\n\n                              return shouldDispatch ? orig.apply(ctxt, args) : { type: \"NOOP\" };\n                            },\n                          });\n                        });\n                      } catch {}\n                    } catch (e) {\n                      console.error(e);\n                    }\n                  });\n                });\n              }\n            }\n          });\n        }\n\n        return obj[prop];\n      },\n    });\n\n    return true;\n  },\n});\n","import { appendStyle } from \"./api/utils.js\";\n\nexport default function loadStyles() {\n  appendStyle(`\n  .__NEPTUNE_PAGE {\n    margin: 0px auto;\n    max-width: 870px;\n    width: calc(100% - var(--defaultPadding)*2);\n  }\n\n  .neptune-plugin-card {\n    background-color: var(--wave-color-solid-base-brighter, var(--wave-color-opacity-contrast-fill-ultra-thick));\n    border: 1px solid var(--wave-color-opacity-contrast-fill-ultra-thin);\n    border-radius: 12px;\n    min-height: 70px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n  }\n\n  .neptune-plugin-card-content {\n    display: flex;\n    justify-content: space-between;\n    padding: 0 15px 0px 15px;\n  }\n  \n  .neptune-active-tab {\n    color: var(--wave-color-solid-accent-fill);\n    box-shadow: 0px 2px var(--cyan-blue);\n  }\n  \n  .neptune-plugin-title {\n    font-weight: 600;\n    font-size: medium;\n  }\n\n  .neptune-switch-checkbox {\n    cursor: pointer;\n    margin-left: 0.8rem;\n    opacity: 0;\n    position: absolute;\n    z-index: 1;\n  }\n\n  .neptune-switch {\n    cursor: pointer;\n    background-color: var(--glass-white-5);\n    border-radius: 28px;\n    display: block;\n    height: 28px;\n    margin-left: 0.8rem;\n    min-width: 48px;\n    position: relative;\n    transition: background-color .25s ease,border-color .25s ease;\n    -webkit-user-select: none;\n    user-select: none;\n  }\n\n  .neptune-switch:after {\n    background-color: var(--snow-white);\n    border-radius: 50%;\n    box-shadow: 0 1px 2px rgb(0 0 0 / 30%);\n    content: \"\";\n    display: block;\n    height: 24px;\n    left: 2px;\n    position: absolute;\n    top: 2px;\n    transition: all .25s ease;\n    width: 24px;\n  }\n\n  .neptune-switch-checkbox:checked + .neptune-switch:after {\n    left: calc(100% - 0.1em);\n    transform: translateX(-100%);\n  }\n\n  .neptune-switch-checkbox:checked + .neptune-switch {\n    background-color: var(--cyan-blue);\n    border-color: var(--cyan-blue);\n  }\n\n  .neptune-text-input {\n    background: transparent;\n    border: 0;\n    border-bottom: 1px solid var(--glass-white-5);\n    color: var(--glass-white-2);\n    display: block;\n    width: 100%;\n  }\n\n  .neptune-text-input:not([readonly]):focus {\n    border-bottom-color: var(--cyan-blue);\n    color: var(--snow-white);\n  }\n\n  .neptune-button {\n    align-items: center;\n    background-color: var(--glass-white-1);\n    border-radius: 12px;\n    display: inline-flex;\n    height: 48px;\n    justify-content: center;\n    line-height: 49px;\n    min-height: 48px;\n    min-width: 0;\n    overflow: hidden;\n    padding: 0 24px;\n    text-align: center;\n    text-overflow: ellipsis;\n    transition: background .35s ease;\n    white-space: nowrap;\n  }\n\n  .neptune-round-button {\n    color: var(--wave-color-opacity-contrast-fill-thick);\n    background-color: var(--wave-color-solid-base-brighter);\n    border: 1px solid var(--wave-color-opacity-contrast-fill-ultra-thin);\n    transition: background-color 0.35s ease 0s;\n    transition-property: background-color;\n    transition-duration: 0.35s;\n    transition-timing-function: ease;\n    transition-delay: 0s;\n    position: relative;\n    border-radius: 100%;\n    height: 40px;\n    width: 40px;\n    display: grid;\n    place-items: center;\n  }\n\n  .neptune-round-button:active {\n    background-color: rgba(255, 255, 255, 0.2);\n  }\n`);\n}\n","import { store } from \"voby\";\nimport { createPersistentObject } from \"./utils.js\";\nimport quartz from \"@uwu/quartz\";\nimport urlImport from \"quartz-plugin-url-import\";\nimport { actions } from \"../handleExfiltrations.js\";\n\nexport const pluginStore = createPersistentObject(\"NEPTUNE_PLUGINS\");\nexport const enabled = {};\n\nconst quartzConfig = {\n  plugins: [\n    {\n      resolve({ name }) {\n        if (!name.startsWith(\"@neptune\")) return;\n\n        return `window${name\n          .slice(1)\n          .split(\"/\")\n          .map((i) => `[${JSON.stringify(i)}]`)\n          .join(\"\")}`;\n      },\n    },\n    urlImport(),\n  ],\n};\n\nexport function disablePlugin(id) {\n  pluginStore[id].enabled = false;\n\n  try {\n    enabled[id]?.onUnload?.();\n  } catch (e) {\n    console.error(\"Failed to completely clean up neptune plugin!\\n\", e);\n  }\n\n  delete enabled[id];\n}\n\nexport function togglePlugin(id) {\n  return pluginStore[id].enabled ? disablePlugin(id) : enablePlugin(id);\n}\n\nexport async function enablePlugin(id) {\n  pluginStore[id].enabled = true;\n  await runPlugin(id, pluginStore[id].code);\n}\n\nasync function runPlugin(id, code) {\n  try {\n    // TODO: fix this quartz bug. no fucking clue what causes this shit.\n    const { onUnload } = await quartz(\" \" + code, quartzConfig);\n\n    enabled[id] = { onUnload: onUnload ?? (() => {}) };\n  } catch (e) {\n    await disablePlugin(id);\n\n    console.error(\"Failed to load neptune plugin!\\n\", e);\n  }\n}\n\nexport async function installPlugin(id, code, manifest, enabled = true) {\n  pluginStore[id] = {\n    code,\n    manifest,\n    enabled,\n  };\n\n  if (enabled) await runPlugin(id, code);\n}\n\nexport function removePlugin(id) {\n  delete pluginStore[id];\n}\n\n// This handles caching too!\nexport async function fetchPluginFromURL(url) {\n  let parsedURL = url;\n\n  if (!parsedURL.endsWith(\"/\")) parsedURL += \"/\";\n\n  const manifest = await (await fetch(parsedURL + \"manifest.json\")).json();\n  if (![\"name\", \"author\", \"description\", \"hash\"].every((i) => typeof manifest[i] === \"string\"))\n    throw \"Manifest doesn't contain required properties!\";\n\n  let code = pluginStore?.[url]?.code;\n  if (pluginStore?.[url]?.manifest?.hash != manifest.hash)\n    code = await (await fetch(parsedURL + (manifest.main ?? \"index.js\"))).text();\n\n  return [\n    code,\n    {\n      name: manifest.name,\n      author: manifest.author,\n      description: manifest.description,\n      hash: manifest.hash,\n    },\n  ];\n}\n\nexport async function installPluginFromURL(url, enabled = true) {\n  if (pluginStore[url])\n    return actions.message.messageError({ message: \"Plugin is already imported!\" });\n\n  try {\n    const [code, manifest] = await fetchPluginFromURL(url);\n\n    pluginStore[url] = {\n      code,\n      manifest,\n      enabled,\n      update: true,\n    };\n\n    if (enabled) runPlugin(url, code);\n  } catch {\n    actions.message.messageError({ message: \"Failed to import neptune plugin!\" });\n  }\n}\n\n// The callback gets called once idb responds and the plugins are loaded into memory.\nconst doneWaitingForIdb = store.on(pluginStore, async () => {\n  doneWaitingForIdb();\n\n  // We don't attempt to load plugins if CSP exists because loading every plugin will fail and automatically disable the plugin.\n  if (document.querySelector(`[http-equiv=\"Content-Security-Policy\"]`)) return;\n\n  for (const [id, plugin] of Object.entries(pluginStore)) {\n    if (plugin.update) {\n      try {\n        const [code, manifest] = await fetchPluginFromURL(id);\n\n        pluginId[manifest] = manifest;\n        pluginId[id].code = code;\n      } catch {\n        console.log(\"[neptune] failed to update plugin\");\n      }\n    }\n\n    // We do not currently account for plugin updates, but this will be handled once\n    // remote plugin installation is handled.\n    if (plugin.enabled) runPlugin(id, plugin.code);\n  }\n});\n","export default ({baseUrl = \"https://esm.sh/\", existingUrls = true} = {}) => {\n  return {\n    resolve({ name }) {\n      if (name.startsWith(\".\") || name.startsWith(\"/\")) return; // local url\n\n      // npm package\n      if (!/^\\w+:/.test(name) && baseUrl) {\n        name = baseUrl + name;\n      }\n      else if (!existingUrls) return;\n\n      return `await import(\"${name}\")`;\n    },\n  };\n};\n","import { Switch, TextInput } from \"./components.js\";\nimport registerRoute from \"../api/registerRoute.js\";\nimport {\n  pluginStore,\n  togglePlugin,\n  removePlugin,\n  installPluginFromURL,\n  installPlugin,\n} from \"../api/plugins.js\";\nimport { $, html, For } from \"voby\";\nimport hookContextMenu from \"../api/hookContextMenu.js\";\nimport { actions } from \"../handleExfiltrations.js\";\n\nconst parseManifest = (manifest) =>\n  JSON.parse(manifest.slice(manifest.indexOf(\"/*\") + 2, manifest.indexOf(\"*/\")));\n\nasync function importLocalPlugin() {\n  const [fileHandle] = await showOpenFilePicker({\n    types: [{ description: \"A neptune plugin file\", accept: { \"text/javascript\": [\".js\"] } }],\n  });\n\n  const file = await fileHandle.getFile();\n  const content = await file.text();\n\n  let manifest;\n  try {\n    manifest = parseManifest(content);\n\n    if (![\"name\", \"author\", \"description\"].every((m) => typeof manifest[m] === \"string\"))\n      throw \"invalid manifest\";\n  } catch {\n    return actions.message.messageError({ message: \"Invalid plugin manifest!\" });\n  }\n\n  try {\n  await installPlugin(\n    manifest.name + \"-\" + (Math.random() + 1).toString(36).substring(7),\n    content,\n    {\n      name: manifest.name,\n      author: manifest.author,\n      description: manifest.description,\n    },\n  );\n  } catch {\n    actions.message.messageError({ message: \"Failed to install plugin!\" });\n  }\n}\n\nlet selectedTab = $(0);\nconst tabs = [\n  {\n    name: \"Plugins\",\n    component: () => {\n      const pluginToImport = $(\"\");\n\n      return html`\n      <div style=\"display: flex; gap: 10px; flex-direction: column\">\n        <div style=\"padding-top: 10px; display: flex; gap:10px\">\n          <!-- This text input *needs* to be able to have an onEnter event. -->\n          <${TextInput} value=${pluginToImport} onEnter=${() => {\n            installPluginFromURL(pluginToImport());\n            pluginToImport(\"\");\n          }} placeholder=\"Import from URL\" />\n          <!-- This button will be used for importing from local files. -->\n          <button onClick=${importLocalPlugin} class=\"neptune-round-button\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path><polyline points=\"17 8 12 3 7 8\"></polyline><line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\"></line></svg>\n          </button>\n        </div>\n        <${For} values=${() => Object.entries(pluginStore)}>\n          ${([id, plugin]) => html`<${PluginCard} plugin=${plugin} id=${id} />`}\n        </${For}>\n      </div>`;\n    },\n  },\n  {\n    name: \"Themes\",\n    component: () => html`[WIP]`,\n  },\n];\n\nfunction PluginCard({ id, plugin }) {\n  return html`<div class=\"neptune-plugin-card\">\n    <div class=\"neptune-plugin-card-content\">\n      <div>\n        <div style=\"display: flex; gap: 15px\">\n          <div style=\"display: grid; place-items: center\">\n            <!-- This is the delete button, we'll extract it to a component later. -->\n            <button class=\"neptune-round-button\" onClick=${() => removePlugin(id)}>\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke-width=\"1.5\"\n                stroke=\"currentColor\">\n                <path\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                  d=\"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0\"></path>\n              </svg>\n            </button>\n          </div>\n          <div class=\"padding-top: 10px; padding-bottom: 10px\">\n            <div>\n              <span class=\"neptune-plugin-title\">${plugin.manifest.name}</span>\n              <span> by </span>\n              <span class=\"neptune-plugin-title\">${plugin.manifest.author}</span>\n            </div>\n            <div style=\"font-size: medium\">${plugin.manifest.description}</div>\n          </div>\n        </div>\n      </div>\n      <div style=\"margin-top: auto; margin-bottom: auto;\">\n        <${Switch}\n          checked=${() => plugin.enabled}\n          onClick=${() => {\n            togglePlugin(id);\n          }} />\n      </div>\n    </div>\n  </div>`;\n}\n\nfunction TabButton({ className = \"\", onClick = () => {}, children }) {\n  return html`<button\n    onClick=${onClick}\n    style=\"font-weight: 500; font-size: 1.14286rem; padding-bottom: 6px\"\n    class=\"${className}\">\n    ${children}\n  </button>`;\n}\n\nregisterRoute(\n  \"settings\",\n  html`<div style=\"width: 675px\">\n    <div>\n      <div style=\"display: flex; gap: 25px; padding-bottom: 10px\">\n        ${tabs.map(\n          (tab, idx) =>\n            html`<${TabButton} onClick=${() => selectedTab(idx)} className=${() =>\n              idx == selectedTab() ? \"neptune-active-tab\" : \"\"}>${tab.name}</${TabButton}>`,\n        )}\n      </div>\n      <div>${() => tabs[selectedTab()].component}</div>\n    </div>\n  </div>`,\n);\n\nhookContextMenu(\"USER_PROFILE\", \"neptune settings\", () =>\n  neptune.actions.router.push({ pathname: \"/neptune/settings\", replace: true }),\n);\n","import \"./ui/settings.js\";\nimport \"./handleExfiltrations.js\";\nimport windowObject from \"./windowObject.js\";\n\n// Restore the console\nfor (let key in console) {\n  const orig = console[key];\n\n  Object.defineProperty(console, key, {\n    set() {\n      return true;\n    },\n    get() {\n      return orig;\n    },\n  });\n}\n\n// Force properties to be writable for patching\nconst originalDefineProperty = Object.defineProperty;\n\nObject.defineProperty = function (...args) {\n  args[2].configurable = true;\n\n  try {\n    return originalDefineProperty.apply(this, args);\n  } catch {}\n};\n\nObject.freeze = (arg) => arg;\n\n// If the app fails to load for any reason we simply reload the page.\nsetTimeout(() => {\n  if (document.getElementById(\"skeleton-logged-out\")) window.location.reload();\n}, 3000);\n\nwindow.neptune = windowObject;\n"],"names":["IS_BROWSER","globalThis","CDATASection","toString","match","isServer$1","SYMBOL_CACHED","Symbol","SYMBOL_OBSERVABLE","SYMBOL_OBSERVABLE_FROZEN","SYMBOL_OBSERVABLE_READABLE","SYMBOL_OBSERVABLE_WRITABLE","SYMBOL_STORE","SYMBOL_STORE_KEYS","SYMBOL_STORE_OBSERVABLE","SYMBOL_STORE_TARGET","SYMBOL_STORE_VALUES","SYMBOL_STORE_UNTRACKED","SYMBOL_SUSPENSE","SYMBOL_UNCACHED","SYMBOL_UNTRACKED","SYMBOL_UNTRACKED_UNWRAPPED","is","Object","isArray","Array","isEqual","a","b","length","i","l","valueA","valueB","isFunction","value","isObject","isSymbol","noop","nope","frozenFunction","arguments","Error","this","readableFunction","get","writableFunction","fn","C","set","frozen","bind","readable","writable","OBSERVABLE_FALSE","OBSERVABLE_TRUE","UNAVAILABLE","Proxy","UNINITIALIZED","lazyArrayEach","arr","lazyArrayEachRight","lazyArrayPush","obj","key","push","lazySetAdd","Set","add","s","lazySetDelete","delete","undefined","lazySetEach","onCleanup","cleanup","call","onDispose","owner","Q","Owner$1","constructor","disposed","B","S","D","K","T","U","catch","error","silent","parent","deep","symbol","context","E","observer","ownerPrev","OWNER","observerPrev","OBSERVER","setOwner","setObserver","castError","SuperRoot$1","Owner","super","BATCH","SUPER_OWNER","SuperRoot","setBatch","M","resolve","batch$1","async","Promise","r","isObservableFrozen$1","isUntracked$2","SchedulerSync","A1","A2","N","queue","F","ObservableClass","options","equals","A","L","Scheduler","I","J","has","sync","Math","max","ObservablesArray","P","R","observablesLength","empty","observable","index","indexOf","ObservablesSet","size","sizePrev","Observer$1","H","run","Memo$1","Observer","Observable","G","statusPrev","memo$1","isObservableFrozen","isUntracked","memo","Memo","boolean$1","cleanup$1","Context$1","symbolOrContext","Context","disposed$1","Scheduler$1","A3","queueMicrotask","finally","effect","Effect$1","suspense","init","suspended","effect$1","Effect","resolved","Root$1","V","A0","DUMMY_INDEX","Root","CacheKeyed$1","A5","Map","A6","A7","A8","A9","forEach","mapped","AA","O","values","map","AB","results","resultsCached","resultsUncached","cached","MappedRoot","from","isObservable$1","getFunction","isObservable","Suspense$3","SYMBOL_SUSPENSE$1","A4","force","suspendedPrev","suspendedNext","notifyOwner","notifyObserver","notifySuspense","notifyRoot","root","suspense$1","when","Suspense","condition","boolean","CacheUnkeyed$1","pooled","AC","AD","poolable","cacheNext","leftovers","outer","isDuplicate","entries","pop","$index","$value","isStore$1","untrack","warmup$1","fallback","_switch","warmup","ternary$1","valueTrue","valueFalse","isBatching$1","SchedulerAsync","isObservableWritable$1","target$1","readonly$1","isObservableWritable","target","root$1","DisposableMap","SelectedObservable","AE","AF","AG","selector$1","sourceValue","selectedValue","valuePrev","valueNext","selected","StoreMap","AH","StoreCleanable","listen","StoreKeys","keys","StoreValues","StoreHas","StoreProperty","AI","AJ","StoreListenersRegular","AK","AL","AM","AN","traversed","traverse","AO","AP","listener","StoreScheduler","reset","StoreListenersRoots","rootsSet","store","AQ","AR","current","flushRegular","flushRoots","AS","isBatching","setTimeout","NODES","WeakMap","SPECIAL_SYMBOLS","UNREACTIVE_KEYS","STORE_TRAPS","isListenable","getNodeExisting","getNodeKeys","getNodeValues","String","getter","AT","property","getNodeProperty","getNodeObservable","listenable","proxiable","isProxiable","prototype","apply","getTarget","setter","AU","hadProperty","getNode","deleteProperty","Reflect","defineProperty","descriptor","descriptorPrev","getOwnPropertyDescriptor","isEqualDescriptor","enumerable","getNodeHas","ownKeys","STORE_UNTRACK_TRAPS","gettersAndSetters","getGettersAndSetters","getNodeFromStore","propertyNode","isStore","configurable","getPrototypeOf","getStore","on","targets","selectors","filter","disposers","selector","inited","disposer","_onRoots","reconcile","getType","reconcileInner","prev","next","uprev","unext","prevKeys","nextKeys","prevValue","nextValue","prevType","nextType","reconcileOuter","getUntracked","unwrap","store$1","suspended$1","tick$1","tryCatch$1","$","untracked","args","_with$1","CONTEXTS_DATA","DIRECTIVES","SYMBOL_TEMPLATE_ACCESSOR","SYMBOLS_DIRECTIVES","wrapElement$1","element","createComment","document","createHTMLNode","createElement","createSVGNode","createElementNS","createText","createTextNode","assign","castArray","_indexOf","isError","isFunctionReactive","isNil","isString","isSVG","isSVGElement","svgRe","svgCache","includes","test","isTruthy","useResolved","callback","resolveFunction","isResolvable","useEventListener","event","handler","useEffect","$$","addEventListener","removeEventListener","useAbortController$1","signals","controller","AbortController","abort","some","signal","aborted","useCleanup","useAbortSignal$1","useAbortController","useScheduler$1","loop","once","cancel","schedule","tickId","executed","useSuspended","work","tick","dispose","useAnimationFrame$1","useScheduler","cancelAnimationFrame","requestAnimationFrame","useAnimationLoop$1","SuspenseContext","create","count","active","useMemo","increment","nr","decrement","wrap","data","SuspenseContext$1","SuspenseManager$1","suspenses","change","counter","counterNext","suspend","unsuspend","useRenderEffect$1","useResource$1","fetcher","pending","latest","SuspenseManager","resourcePending","resourceRejected","resourceResolved","resourceFunction","resource","useRenderEffect","useCheapDisposed","onPending","onResolve","result","onReject","exception","isPromise","then","fetch","useReadonly","useFetch$1","request","useResource","useAbortSignal","useIdleCallback$1","cancelIdleCallback","requestIdleCallback","useIdleLoop$1","useInterval$1","ms","clearInterval","setInterval","usePromise$1","promise","useTimeout$1","clearTimeout","useCheapDisposed$1","useMicrotask$1","runWithOwner","_with","dummyNode","beforeDummyWrapper","afterDummyWrapper","diff$1","before","after","nextSibling","Node","bLength","removable","aEnd","bEnd","aStart","bStart","node","slice","append","removeChild","insertBefore","sequence","replaceChild","NOOP_CHILDREN","FragmentUtils","make","makeWithNode","makeWithFragment","fragment","fragmented","getChildrenFragmented","thiz","children","getChildren","pushFragment","pushValue","pushNode","replaceWithNode","replaceWithFragment","FragmentUtils$1","resolveChild","_dynamic","hasObservables","resolveArraysAndStatics","resolveClass","classes","split","Boolean","cls","DUMMY_RESOLVED","resolveArraysAndStaticsInner","type","setAttributeStatic","attributesBoolean","attributeCamelCasedRe","attributesCache","uppercaseRe","replace","char","toLowerCase","normalizeKeySvg","removeAttribute","setAttribute","setChildReplacementText","child","childPrev","nodeType","nodeValue","parentElement","textNode","setChildReplacement","setChildStatic","setChildReplacementFunction","setChild","fragmentOnly","dynamic","prevIsArray","prevLength","prevFirst","prevLast","prevSibling","appendChild","fragmentNext","childFragmentOnly","nextLength","childNodes","textContent","placeholder","diff","setClassStatic","className","classList","toggle","setClass","setClassBooleanStatic","keyPrev","setClassBoolean","keyNext","setClassesStatic","object","objectPrev","setClasses","objectNext","setEventStatic","delegatedEvents","onauxclick","onbeforeinput","onclick","ondblclick","onfocusin","onfocusout","oninput","onkeydown","onkeyup","onmousedown","onmouseup","startsWith","_value","delegated","composedPath","cancelBubble","delegate","endsWith","isCapture","capture","passive","setEvent","setHTML","innerHTML","setHTMLStatic","__html","setPropertyStatic","isBoolean","tagName","setProperty","setRef","flat","Infinity","flatten","useMicrotask","setStyleStatic","propertyNonDimensionalRe","propertyNonDimensionalCache","charCodeAt","style","removeProperty","setStyle","setStylesStatic","cssText","setStyles","setProp","isTemplateAccessor","setTemplateAccessor","directive","immediate","setDirective","creatElement","component","props","_children","__children","ref","rest","wrapElement","createNode","setProps","isNode","Dynamic$1","ErrorBoundary$1","tryCatch","For","unkeyed","CacheUnkeyed","CacheKeyed","array","_for","Fragment$1","useGuarded$1","guard","valueLast","guarded","If$1","ternary","truthy","useGuarded","useUntracked","cache","runWithSuperRoot","lockId","KeepAlive$1","id","ttl","lock","item","useRoot","useSuspense","hasLock","timeoutId","render$1","HTMLElement","Portal$1","mount","wrapper","portal","useBoolean","body","Element","render","metadata","Suspense$1","childrenSuspended","Switch","Switch$1","Case","Default","Switch$2","Ternary$1","jsx","createDirective$1","name","Provider","register","COMPONENT_RE","SYMBOL_COLD_COMPONENT","SYMBOL_HOT_COMPONENT","SYMBOL_HOT_ID","SOURCES","hmr$1","accept","createHotComponent","path","reduce","source","createHotComponentDeep","hot","onAccept","module","default","console","cold","n","t","e","u","h","p","registry","html","components","html$1","lazy$1","fetcherOnce","called","preload","reject","renderToString$1","Portal","template$1","safePropertyRe","checkValidProperty","makeActionsWithNodesAndTemplate","actionsWithNodes","accessor","prop","method","targetNode","makeAccessor","makeNodePath","prevPath","prevNode","parentNode","previousSibling","makeNodePathProperties","properties","parts","reverse","part","nsi","makeReviverVariables","actionsWithPaths","paths","action","nodePath","targetNodePath","makeReviverPaths","makeReviverVariablesData","assignments","variableId","datum","find","variable","assignment","otherCurrent","otherNext","splice","makeActionsWithPaths","reviver","actions","variables","makeReviverActions","Function","join","apis","makeReviver","clone","cloneNode","makeComponent","defaultValue","valueContext","checked","onClick","c","TextInput","onEnter","interceptors","intercept","types","cb","uninterceptors","unintercept","handleIntercept","observations","MutationObserver","records","changedElems","record","removedNodes","SVGElement","elem","obs","matches","querySelectorAll","startObserving","observe","subtree","childList","attributes","stopObserving","disconnect","sel","entry","unobs","now","pageNotFoundSelector","replacePage","page","display","neptunePage","insertAdjacentElement","ReactiveRoot","registerRoute","payload","pathname","pageNotFound","querySelector","unob","promisifyRequest","oncomplete","onsuccess","onabort","onerror","createStore","dbName","storeName","indexedDB","open","onupgradeneeded","createObjectStore","dbp","txMode","db","transaction","objectStore","defaultGetStoreFunc","defaultGetStore","appendStyle","styleTag","head","newStyle","getElementsByClassName","idbStore","createIdbStore","createPersistentObject","persistentObject","customStore","idbGet","put","idbSet","Uint8Array","Uint16Array","buffer","parse","g","o","__heap_base","memory","byteLength","grow","ceil","sa","lastIndexOf","idx","k","ri","ie","ai","ss","se","ip","d","re","es","ee","els","ele","ls","le","ln","eval","f","WebAssembly","compile","Buffer","atob","instantiate","exports","separatorRegex","skipSeparators","imported","skipNonSeparators","parseDefaultImport","importClauseString","startIndex","defaultImport","parseNamedImports","namedImports","namedImport","trim","specifier","binding","parseNamespaceImport","namespaceImport","parseImportClause","newNamedImports","namespace","named","getUnescapedAny","code","fromCodePoint","removeSlashes","getUnescaped","rx","exec","unicode","unicodePoint","hex","octal","literal","Number","parseInt","unescaped","_error","isConstantStringLiteral","stringLiteral","quote","quoteCandidate","builtinModules","require","createRequire","to","dirname","parseModuleSpecifier","moduleSpecifierString","isDynamicImport","resolveFrom","assert","isConstant","moduleSpecifier","parseImports","imports","iterator","dynamicImportStartIndex","statementStartIndex","moduleSpecifierStartIndex","moduleSpecifierEndIndexExclusive","importClause","endIndex","removeFromString","string","start","end","insertIntoString","newString","quartz","config","plugins","moduleId","generatedImports","plugin","transform","isExport","betterParseImports","offset","exp","newExport","fromIndex","quartzStore","imp","random","substring","generatedImport","addImport","globalStoreID","mod","import","btoa","patchTypes","patchedObjects","unpatch","funcParent","funcName","hookId","patchedObject","patch","every","getPatchFunc","patchType","oneTime","parentInjections","origFunc","runHook","ctxt","construct","ret","funcArgs","isConstruct","hook","maybefuncArgs","workingRetVal","unpatchThisPatch","replaceProxy","_","receiver","instead","parentObject","hookType","getTabs","hookContextMenu","menuType","contextMenuItem","contextMenuLabel","innerText","parentClasses","contextMenuWrapper","keyCode","click","tab","color","windowObject","patcher","utils","registerTab","unobservers","addTab","tabs","remove","makeInactive","preventDefault","router","removeRouteHandler","voby","webpackObject","exfiltratedStore","patchedPush","patchedPrepareAction","getModulesFromWpRequire","wpRequire","fromEntries","m","loaded","window","val","patcher.before","arg","hasOwnProperty","patcher.after","resp","found","possiblyPrepareAction","toUpperCase","builtAction","act","__proto__","dispatch","res","rej","orig","shouldDispatch","interceptor","pluginStore","enabled","quartzConfig","JSON","stringify","baseUrl","existingUrls","urlImport","disablePlugin","onUnload","togglePlugin","enablePlugin","runPlugin","installPlugin","manifest","removePlugin","fetchPluginFromURL","url","parsedURL","json","hash","main","text","author","description","installPluginFromURL","message","messageError","update","doneWaitingForIdb","pluginId","log","importLocalPlugin","fileHandle","showOpenFilePicker","file","getFile","content","parseManifest","selectedTab","pluginToImport","PluginCard","TabButton","neptune","originalDefineProperty","freeze","getElementById","location","reload"],"mappings":"4VACA,MAAMA,IAAeC,WAAWC,cAAcC,aAAaC,MAAM,yEAMjE,IAAAC,EAJiB,KACLL,ECHZ,MAAMM,EAAgBC,OAAO,UACvBC,EAAoBD,OAAO,cAC3BE,EAA2BF,OAAO,qBAClCG,EAA6BH,OAAO,uBACpCI,EAA6BJ,OAAO,uBACpCK,EAAeL,OAAO,SACtBM,EAAoBN,OAAO,cAC3BO,EAA0BP,OAAO,oBACjCQ,EAAsBR,OAAO,gBAC7BS,EAAsBT,OAAO,gBAC7BU,EAAyBV,OAAO,mBAChCW,EAAkBX,OAAO,YACzBY,EAAkBZ,OAAO,YACzBa,EAAmBb,OAAO,aAC1Bc,EAA6Bd,OAAO,wBCJpCe,GAAEA,GAAOC,QACPC,QAAAA,GAAYC,MACdC,EAAU,CAACC,EAAGC,KAChB,GAAID,EAAEE,SAAWD,EAAEC,OACf,OAAO,EACX,IAAK,IAAIC,EAAI,EAAGC,EAAIJ,EAAEE,OAAQC,EAAIC,EAAGD,IAAK,CACtC,MAAME,EAASL,EAAEG,GACXG,EAASL,EAAEE,GACjB,IAAKR,EAAGU,EAAQC,GACZ,OAAO,CACd,CACD,OAAO,CAAI,EAETC,EAAcC,GACQ,mBAAVA,EAEZC,EAAYD,GACI,OAAVA,GAAqC,iBAAVA,EAEjCE,EAAYF,GACU,iBAAVA,EAEZG,EAAO,KACF,EAELC,EAAO,KACF,ECjCX,SAASC,IACL,GAAIC,UAAUZ,OACV,MAAM,IAAIa,MAAM,4CAGhB,OAAOC,IAEf,CACA,SAASC,IACL,GAAIH,UAAUZ,OACV,MAAM,IAAIa,MAAM,4CAGhB,OAAOC,KAAKE,KAEpB,CACA,SAASC,EAAiBC,GACtB,OAAIN,UAAUZ,OACNK,EAAWa,GACJJ,KAAKK,EAAED,GAGPJ,KAAKM,IAAIF,GAIbJ,KAAKE,KAEpB,CAEA,MAAMK,EAAUf,IACZ,MAAMY,EAAKP,EAAeW,KAAKhB,GAG/B,OAFAY,EAAGvC,IAAqB,EACxBuC,EAAGtC,IAA4B,EACxBsC,CAAE,EAEPK,EAAYjB,IAEd,MAAMY,EAAKH,EAAiBO,KAAKhB,GAGjC,OAFAY,EAAGvC,IAAqB,EACxBuC,EAAGrC,GAA8ByB,EAC1BY,CAAE,EAEPM,EAAYlB,IACd,MAAMY,EAAKD,EAAiBK,KAAKhB,GAGjC,OAFAY,EAAGvC,IAAqB,EACxBuC,EAAGpC,GAA8BwB,EAC1BY,CAAE,EC5CPO,EAAmBJ,GAAO,GAC1BK,EAAkBL,GAAO,GACzBM,EAAc,IAAIC,MAAM,CAAE,EAAE,IAAIA,MAAM,CAAA,EAAI,CAAEZ,MAAQ,MAAM,IAAIH,MAAM,oBAAuB,KAC3FgB,EAAgB,WAAY,ECR5BC,EAAgB,CAACC,EAAKb,KACxB,GAAIa,aAAenC,MACf,IAAK,IAAIK,EAAI,EAAGC,EAAI6B,EAAI/B,OAAQC,EAAIC,EAAGD,IACnCiB,EAAGa,EAAI9B,SAGN8B,GACLb,EAAGa,EACN,EAECC,EAAqB,CAACD,EAAKb,KAC7B,GAAIa,aAAenC,MACf,IAAK,IAAIK,EAAI8B,EAAI/B,OAAS,EAAGC,GAAK,EAAGA,IACjCiB,EAAGa,EAAI9B,SAGN8B,GACLb,EAAGa,EACN,EAECE,EAAgB,CAACC,EAAKC,EAAK7B,KAC7B,MAAMyB,EAAMG,EAAIC,GACZJ,aAAenC,MACfmC,EAAIK,KAAK9B,GAGT4B,EAAIC,GADCJ,EACM,CAACA,EAAKzB,GAGNA,CACd,EAEC+B,EAAa,CAACH,EAAKC,EAAK7B,KAC1B,MAAMc,EAAMc,EAAIC,GAChB,GAAIf,aAAekB,IACflB,EAAImB,IAAIjC,QAEP,GAAIc,GACL,GAAId,IAAUc,EAAK,CACf,MAAMoB,EAAI,IAAIF,IACdE,EAAED,IAAInB,GACNoB,EAAED,IAAIjC,GACN4B,EAAIC,GAAOK,CACd,OAGDN,EAAIC,GAAO7B,CACd,EAECmC,EAAgB,CAACP,EAAKC,EAAK7B,KAC7B,MAAMc,EAAMc,EAAIC,GACZf,aAAekB,IACflB,EAAIsB,OAAOpC,GAENc,IAAQd,IACb4B,EAAIC,QAAOQ,EACd,EAECC,EAAc,CAACxB,EAAKF,KACtB,GAAIE,aAAekB,IACf,IAAK,MAAMhC,KAASc,EAChBF,EAAGZ,QAGFc,GACLF,EAAGE,EACN,EC9DCyB,EAAaC,GAAYA,EAAQC,KAAKD,GACtCE,EAAaC,GAAUA,EAAMC,GAAE,GA+DrC,IAAAC,EA5DA,MACIC,cAEItC,KAAKuC,UAAW,EAChBvC,KAAKwC,OAAIX,EACT7B,KAAKyC,OAAIZ,EACT7B,KAAK0C,OAAIb,EACT7B,KAAK2C,OAAId,EACT7B,KAAK4C,OAAIf,EACT7B,KAAK6C,OAAIhB,CACZ,CAEDiB,MAAMC,EAAOC,GACT,MAAMP,EAAEA,GAAMzC,KACd,GAAIyC,EAEA,OADAA,EAAEM,IACK,EAGP,GAAI/C,KAAKiD,QAAQH,MAAMC,GAAO,GAC1B,OAAO,EACX,GAAIC,EACA,OAAO,EAEX,MAAMD,CAEb,CACDX,EAAEc,GACEhC,EAAmBlB,KAAK0C,EAAGR,GAC3BhB,EAAmBlB,KAAK2C,EAAGT,GAC3BhB,EAAmBlB,KAAK6C,EAAGX,GAC3BhB,EAAmBlB,KAAKwC,EAAGT,GAC3B/B,KAAKwC,OAAIX,EACT7B,KAAKuC,SAAWW,EAChBlD,KAAKyC,OAAIZ,EACT7B,KAAK2C,OAAId,EACT7B,KAAK6C,OAAIhB,CACZ,CACD3B,IAAIiD,GACA,OAAOnD,KAAKoD,UAAUD,EACzB,CACDE,EAAEjD,EAAI+B,EAAOmB,GACT,MAAMC,EAAYC,EACZC,EAAeC,EACrBC,GAASxB,GACTyB,GAAYN,GACZ,IACI,OAAOlD,GACV,CACD,MAAO2C,GAEH,OADA/C,KAAK8C,MJxDC,CAACC,GACXA,aAAiBhD,MACVgD,EACU,iBAAVA,EACA,IAAIhD,MAAMgD,GACd,IAAIhD,MAAM,iBImDE8D,CAAUd,IAAQ,GACtBlC,CACV,CACO,QACJ8C,GAASJ,GACTK,GAAYH,EACf,CACJ,GCxDL,IAAAK,EARA,cAAwBC,EACpBzB,cAEI0B,SAASlE,WACTE,KAAKoD,QAAU,EAClB,GCJL,IAAIa,EAEAP,EADAQ,EAAc,IAAIC,EAElBX,EAAQU,EAGZ,MAAME,EAAY5E,GAAUyE,EAAQzE,EAC9BoE,GAAepE,GAAUkE,EAAWlE,EACpCmE,GAAYnE,GAAUgE,EAAQhE,ECRpC,IAAI6E,GAAI,EACJC,GAAU3E,EAmBd,IAAA4E,GAjBcC,MAAOpE,IACZiE,IACDD,EAAS,IAAIK,SAAQC,GAAKJ,GAAUI,KAExC,IAEI,OADAL,IAAK,QACQjE,GAChB,CACO,QACJiE,IAAK,EACAA,KACDD,OAASvC,GACTyC,KAEP,GCbL,IAAAK,GAJ4BnF,GACjBD,EAAWC,KAAY1B,KAA4B0B,KAAYA,EAAMzB,IAA6BkF,QAAQV,UCGrH,IAAAqC,GAJqBpF,GACVD,EAAWC,KAAYf,KAAoBe,GAAWd,KAA8Bc,GCyChF,IAAAqF,GAAA,IA3Cf,MACIvC,cAEItC,KAAK8E,GAAK,GACV9E,KAAKqE,EAAI,EACTrE,KAAK+E,IAAK,EAEV/E,KAAKgF,EAAI,KACL,IAAIhF,KAAK+E,KAEL/E,KAAKqE,GAEJrE,KAAK8E,GAAG5F,OAEb,IAEI,IADAc,KAAK+E,IAAK,IACG,CACT,MAAME,EAAQjF,KAAK8E,GACnB,IAAKG,EAAM/F,OACP,MACJc,KAAK8E,GAAK,GACV,IAAK,IAAI3F,EAAI,EAAGC,EAAI6F,EAAM/F,OAAQC,EAAIC,EAAGD,IACrC8F,EAAM9F,GAAGkB,GAEhB,CACJ,CACO,QACJL,KAAK+E,IAAK,CACb,GAEL/E,KAAKqD,EAAKjD,IACNJ,KAAKqE,GAAK,EACVjE,IACAJ,KAAKqE,GAAK,EACVrE,KAAKgF,GAAG,EAGZhF,KAAKkF,EAAK5B,IACNtD,KAAK8E,GAAGxD,KAAKgC,EAAS,CAE7B,GCcL,IAAA6B,GAnDA,MAEI7C,YAAY9C,EAAO4F,EAASnC,GACxBjD,KAAK2C,EAAI,IAAInB,IACbxB,KAAKR,MAAQA,EACTyD,IACAjD,KAAKiD,OAASA,QAEMpB,IAApBuD,GAASC,SACTrF,KAAKqF,OAASD,EAAQC,QAAUzF,EAEvC,CAEDM,MAKI,OAJKF,KAAKiD,QAAQV,WACdvC,KAAKiD,QAAQ5C,IACbqD,GAAU4B,EAAEC,EAAEvF,OAEXA,KAAKR,KACf,CACDc,IAAId,GACA,MAAM6F,EAASrF,KAAKqF,QAAU1G,EAE9B,OADeqB,KAAKR,QAAUuB,GAAmBsE,EAAO7F,EAAOQ,KAAKR,SAGpEQ,KAAKR,MAAQA,EACbgG,GAAUnB,GAAK,EACfrE,KAAKyF,ET3BK,GS4BVD,GAAUnB,GAAK,EACfmB,GAAUR,KALCxF,CAOd,CACDiG,EAAEC,GACE,IAAK,MAAMpC,KAAYtD,KAAK2C,GTnCb,ISoCPW,EAASoC,GAAwBpC,EAASgC,EAAEK,IAAI3F,SAC5CsD,EAASsC,MACTtC,EAASoC,EAAIG,KAAKC,IAAIxC,EAASoC,EAAGA,GAClCF,GAAUN,EAAE5B,IAGZA,EAASmC,EAAEC,GAI1B,CACDrF,EAAED,GACE,MAAMZ,EAAQY,EAAGJ,KAAKR,OACtB,OAAOQ,KAAKM,IAAId,EACnB,GClDL,MAAMuG,GAEFzD,YAAYgB,GACRtD,KAAKsD,SAAWA,EAChBtD,KAAKsF,EAAI,GACTtF,KAAKgG,EAAI,CACZ,CAED5D,EAAEc,GACE,GAAIA,EAAM,CACN,MAAMI,SAAEA,EAAQgC,EAAEA,GAAMtF,KACxB,IAAK,IAAIb,EAAI,EAAGA,EAAImG,EAAEpG,OAAQC,IAC1BmG,EAAEnG,GAAGwD,EAAEf,OAAO0B,EAErB,CACDtD,KAAKgG,EAAI,CACZ,CACDC,IACI,MAAM3C,SAAEA,EAAQgC,EAAEA,EAACU,EAAEA,GAAMhG,KACrBkG,EAAoBZ,EAAEpG,OAC5B,GAAI8G,EAAIE,EAAmB,CACvB,IAAK,IAAI/G,EAAI6G,EAAG7G,EAAI+G,EAAmB/G,IACnCmG,EAAEnG,GAAGwD,EAAEf,OAAO0B,GAElBgC,EAAEpG,OAAS8G,CACd,CACJ,CACDG,QACI,OAAQnG,KAAKsF,EAAEpG,MAClB,CACDyG,IAAIS,GACA,MAAMC,EAAQrG,KAAKsF,EAAEgB,QAAQF,GAC7B,OAAOC,GAAS,GAAKA,EAAQrG,KAAKgG,CACrC,CACDT,EAAEa,GACE,MAAM9C,SAAEA,EAAQgC,EAAEA,EAACU,EAAEA,GAAMhG,KACrBkG,EAAoBZ,EAAEpG,OAC5B,GAAIgH,EAAoB,EAAG,CACvB,GAAIZ,EAAEU,KAAOI,EAET,YADApG,KAAKgG,GAAK,GAGd,MAAMK,EAAQf,EAAEgB,QAAQF,GACxB,GAAIC,GAAS,GAAKA,EAAQL,EACtB,OAEAA,EAAIE,EAAoB,EACxBlG,KAAKiG,IAEAD,IAAME,EAAoB,GAC/BZ,EAAEU,GAAGrD,EAAEf,OAAO0B,EAErB,CACD8C,EAAWzD,EAAElB,IAAI6B,GACjBgC,EAAEtF,KAAKgG,KAAOI,EACJ,MAANJ,IACA1C,EAASgC,EAAI,IAAIiB,GAAejD,EAAUgC,GAEjD,CACDjF,IACI,MAAMiF,EAAEA,GAAMtF,KACd,IAAK,IAAIb,EAAI,EAAGC,EAAIkG,EAAEpG,OAAQC,EAAIC,EAAGD,IACjCmG,EAAEnG,GAAG8D,QAAQ5C,GAEpB,EAEL,MAAMkG,GAEFjE,YAAYgB,EAAUgC,GAClBtF,KAAKsD,SAAWA,EAChBtD,KAAKsF,EAAI,IAAI9D,IAAI8D,EACpB,CAEDlD,EAAEc,GACE,IAAK,MAAMkD,KAAcpG,KAAKsF,EAC1Bc,EAAWzD,EAAEf,OAAO5B,KAAKsD,SAEhC,CACD2C,IAEC,CACDE,QACI,OAAQnG,KAAKsF,EAAEkB,IAClB,CACDb,IAAIS,GACA,OAAOpG,KAAKsF,EAAEK,IAAIS,EACrB,CACDb,EAAEa,GACE,MAAM9C,SAAEA,EAAQgC,EAAEA,GAAMtF,KAClByG,EAAWnB,EAAEkB,KACnBJ,EAAWzD,EAAElB,IAAI6B,GAEbmD,IADanB,EAAEkB,MAGnBlB,EAAE7D,IAAI2E,EACT,CACD/F,IACI,IAAK,MAAM+F,KAAcpG,KAAKsF,EAC1Bc,EAAWnD,QAAQ5C,GAE1B,ECzCL,IAAAqG,GAxDA,cAAuB3C,EAEnBzB,cACI0B,QAEAhE,KAAKiD,OAASO,EACdxD,KAAKoD,QAAUI,EAAMJ,QACrBpD,KAAK0F,EXRK,EWSV1F,KAAKsF,EAAI,IAAIS,GAAiB/F,MAC1BwD,IAAUU,GACV/C,EAAcnB,KAAKiD,OAAQ,IAAKjD,KAEvC,CAEDoC,EAAEc,GACElD,KAAKsF,EAAElD,EAAEc,GACTc,MAAM5B,EAAEc,EACX,CACDyD,EAAEvG,GACEJ,KAAKoC,GAAE,GACPpC,KAAK0F,EXvBU,EWwBf,IACI,OAAO1F,KAAKqD,EAAEjD,EAAIJ,KAAMA,KAC3B,CACO,QACJA,KAAKsF,EAAEW,GACV,CACJ,CACDW,MACI,MAAM,IAAI7G,MAAM,kBACnB,CACD0F,EAAEC,GACE,MAAM,IAAI3F,MAAM,kBACnB,CACDM,IACQL,KAAKuC,WXrCO,IWuCZvC,KAAK0F,GACL1F,KAAKsF,EAAEjF,IXvCD,IWyCNL,KAAK0F,GACL1F,KAAK0F,EX5CM,EW6CX1F,KAAK4G,MX7CM,IW8CP5G,KAAK0F,EACL1F,KAAK0F,EXhDJ,EWmDD1F,KAAKK,KAITL,KAAK0F,EXvDA,EWyDZ,GCvBL,IAAAmB,GAhCA,cAAmBC,GAEfxE,YAAYlC,EAAIgF,GACZpB,QACAhE,KAAKI,GAAKA,EACVJ,KAAKoG,WAAa,IAAIW,GAAWhG,EAAeqE,EAASpF,OACnC,IAAlBoF,GAASQ,OACT5F,KAAK4F,MAAO,EACZ5F,KAAKK,IAEZ,CAEDuG,MACI,MAAMI,EAAIhD,MAAM2C,EAAE3G,KAAKI,KAClBJ,KAAKuC,UAAYvC,KAAKsF,EAAEa,UACzBnG,KAAKuC,UAAW,GAEhByE,IAAMnG,GACNb,KAAKoG,WAAW9F,IAAI0G,EAE3B,CACDvB,EAAEC,GACE,MAAMuB,EAAajH,KAAK0F,EACpBuB,GAAcvB,IAElB1F,KAAK0F,EAAIA,EZzBO,IY0BZuB,GAEJjH,KAAKoG,WAAWX,EZ5BA,GY6BnB,GCdL,IAAAyB,GAda,CAAC9G,EAAIgF,KACd,GAAI+B,GAAmB/G,GACnB,OAAOA,EAEN,GAAIgH,GAAYhH,GACjB,OAAOG,EAAOH,KAEb,CACD,MAAMiH,EAAO,IAAIC,GAAKlH,EAAIgF,GAE1B,OADmB3E,EAAS4G,EAAKjB,WAEpC,GCGL,IAAAmB,GAdiB/H,GACTD,EAAWC,GACP2H,GAAmB3H,IAAU4H,GAAY5H,KAChCA,IAGF6H,IAAK,MAAQ7H,QAIfA,ECRjB,IAAAgI,GAJiBpH,IACbe,EAAcqC,EAAO,IAAKpD,EAAG,ECejC,IAAAqH,GAfA,cAAsB1D,EAElBzB,YAAYc,GACRY,QAEAhE,KAAKiD,OAASO,EACdxD,KAAKoD,QAAU,IAAKI,EAAMJ,WAAYA,GACtCjC,EAAcnB,KAAKiD,OAAQ,IAAKjD,KACnC,CAEDqD,EAAEjD,GACE,OAAO4D,MAAMX,EAAEjD,EAAIJ,UAAM6B,EAC5B,GCbL,SAASuB,GAAQsE,EAAiBtH,GAC9B,OAAIV,EAASgI,GACFlE,EAAMJ,QAAQsE,GAGd,IAAIC,GAAQD,GAAiBrE,EAAEjD,GAAMT,EAEpD,CCCA,IAAAiI,GAPiB,KACb,MAAMxB,EAAa,IAAIW,IAAW,GAGlC,OADA/E,IADW,IAAMoE,EAAW9F,KAAI,KAEzBG,EAAS2F,EAAW,ECkDhB,IAAAyB,GAAA,IAvDf,MACIvF,cAEItC,KAAK8E,GAAK,GACV9E,KAAK+E,IAAK,EACV/E,KAAK8H,IAAK,EAEV9H,KAAKgF,EAAI,KACL,IAAIhF,KAAK+E,IAEJ/E,KAAK8E,GAAG5F,OAEb,IAEI,IADAc,KAAK+E,IAAK,IACG,CACT,MAAME,EAAQjF,KAAK8E,GACnB,IAAKG,EAAM/F,OACP,MACJc,KAAK8E,GAAK,GACV,IAAK,IAAI3F,EAAI,EAAGC,EAAI6F,EAAM/F,OAAQC,EAAIC,EAAGD,IACrC8F,EAAM9F,GAAGkB,GAEhB,CACJ,CACO,QACJL,KAAK+E,IAAK,CACb,GAEL/E,KAAKiF,MAAQ,KACLjF,KAAK8H,KAET9H,KAAK8H,IAAK,EACV9H,KAAKsE,UAAS,EAElBtE,KAAKsE,QAAU,KACXyD,gBAAe,KACXA,gBAAe,KACP9D,EACAA,EAAM+D,QAAQhI,KAAKsE,UAGnBtE,KAAK8H,IAAK,EACV9H,KAAKgF,IACR,GACH,GACJ,EAGNhF,KAAKkF,EAAK+C,IACNjI,KAAK8E,GAAGxD,KAAK2G,GACbjI,KAAKiF,OAAO,CAEnB,GCML,IAAAiD,GAvDA,cAAqBpB,GAEjBxE,YAAYlC,EAAIgF,GAGZ,GAFApB,QACAhE,KAAKI,GAAKA,GACgB,IAAtBgF,GAAS+C,SAAoB,CAC7B,MAAMA,EAAWnI,KAAKE,IAAI3B,GACtB4J,IACAnI,KAAKmI,SAAWA,EAEvB,EACqB,IAAlB/C,GAASQ,OACT5F,KAAK4F,MAAO,GAEM,SAAlBR,GAASQ,MACT5F,KAAKoI,MAAO,EACZpI,KAAKK,KAGLL,KAAKkF,GAEZ,CAED0B,MACI,MAAMI,EAAIhD,MAAM2C,EAAE3G,KAAKI,IACnBb,EAAWyH,IACX7F,EAAcnB,KAAM,IAAKgH,EAEhC,CACD9B,IACQlF,KAAKmI,UAAUE,YAEfrI,KAAK4F,KACL5F,KAAKK,IAGLmF,GAAUN,EAAElF,MAEnB,CACDyF,EAAEC,GACE,MAAMuB,EAAajH,KAAK0F,EACpBuB,GAAcvB,IAElB1F,KAAK0F,EAAIA,IACJ1F,KAAK4F,MAAwB,IAAfqB,GAAmC,IAAfA,IACnCjH,KAAKkF,IAEZ,CACD7E,IACQL,KAAKmI,UAAUE,WAEnBrE,MAAM3D,GACT,GClDL,IAAAiI,GANe,CAAClI,EAAIgF,KAChB,MAAM6C,EAAS,IAAIM,GAAOnI,EAAIgF,GAE9B,MADU,IAAM6C,EAAO7F,GAAE,EACjB,ECDZ,SAASkC,GAAQ9E,GACb,GAAID,EAAWC,GACX,OAAId,KAA8Bc,EACvB8E,GAAQ9E,KAEVf,KAAoBe,EAClBe,EAAO+D,GAAQ9E,MAEjB3B,KAAqB2B,EACnBA,EAGA6H,IAAK,IAAM/C,GAAQ9E,OAGlC,GAAIA,aAAiBV,MAAO,CACxB,MAAM0J,EAAW,IAAI1J,MAAMU,EAAMN,QACjC,IAAK,IAAIC,EAAI,EAAGC,EAAIoJ,EAAStJ,OAAQC,EAAIC,EAAGD,IACxCqJ,EAASrJ,GAAKmF,GAAQ9E,EAAML,IAEhC,OAAOqJ,CACV,CAEG,OAAOhJ,CAEf,CCKA,IAAAiJ,GA7BA,cAAmB1E,EAEfzB,YAAYoG,GAKR,GAJA1E,QAEAhE,KAAKiD,OAASO,EACdxD,KAAKoD,QAAUI,EAAMJ,QACjBsF,EAAG,CACc1I,KAAKE,IAAI3B,KAEtByB,KAAK2I,IAAK,EACVpH,EAAWvB,KAAKiD,OAAQ,IAAKjD,MAEpC,CACJ,CAEDoC,EAAEc,GACMlD,KAAK2I,IACLhH,EAAc3B,KAAKiD,OAAQ,IAAKjD,MAEpCgE,MAAM5B,EAAEc,EACX,CACDG,EAAEjD,GACE,MAAMgC,EAAI,IAAMpC,KAAKoC,GAAE,GAEvB,OAAO4B,MAAMX,GADS,IAAMjD,EAAGgC,IACDpC,UAAM6B,EACvC,GCtBL,MAAM+G,GAAcrI,GAAQ,UAC5B,cAAyBsI,KAqHzB,IAAAC,GAlHA,MAEIxG,YAAYlC,GAERJ,KAAKiD,OAASO,EACdxD,KAAKmI,SAAW3E,EAAMtD,IAAI3B,GAC1ByB,KAAK+I,GAAK,IAAIC,IACdhJ,KAAKiJ,IAAK,EACVjJ,KAAKkJ,GAAK,EACVlJ,KAAKmJ,GAAK,EACVnJ,KAAKoJ,GAAK,EAEVpJ,KAAKgC,QAAU,KACX,IAAKhC,KAAKkJ,GACN,OACJ,GAAIlJ,KAAKkJ,KAAOlJ,KAAKmJ,GACjB,OACJ,MAAMJ,GAAEA,EAAEE,GAAEA,GAAOjJ,KACd+I,EAAGvC,OAEJxG,KAAKoJ,GACLL,EAAGM,SAAQ,CAACC,EAAQ9J,KACZ8J,EAAOL,KAAOA,IAElBK,EAAOlH,GAAE,GACT2G,EAAGnH,OAAOpC,GAAM,KAIpBQ,KAAK+I,GAAGM,SAAQC,IACZA,EAAOlH,GAAE,EAAK,IAElBpC,KAAK+I,GAAK,IAAIC,KACjB,EAELhJ,KAAKoC,EAAI,KACDpC,KAAKmI,UACLxG,EAAc3B,KAAKiD,OAAQ,IAAKjD,KAAK4C,GAEzC5C,KAAKkJ,GAAKlJ,KAAK+I,GAAGvC,KAClBxG,KAAKmJ,GAAK,EACVnJ,KAAKoJ,GAAK,EACVpJ,KAAKgC,SAAS,EAElBhC,KAAKuJ,GAAK,KACNvJ,KAAKiJ,IAAMjJ,KAAKiJ,GAChBjJ,KAAKmJ,GAAK,EACVnJ,KAAKoJ,GAAK,CAAC,EAEfpJ,KAAKwJ,EAAKC,IACNzJ,KAAKoJ,GAAKK,EAAOvK,OACjBc,KAAKgC,UACLhC,KAAKkJ,GAAKlJ,KAAKoJ,GACfpJ,KAAKmJ,GAAK,CAAC,EAEfnJ,KAAK0J,IAAOD,IACRzJ,KAAKuJ,KACL,MAAMR,GAAEA,EAAEE,GAAEA,EAAE7I,GAAEA,EAAEuJ,GAAEA,GAAO3J,KACrB4J,EAAU,IAAI9K,MAAM2K,EAAOvK,QACjC,IAAI2K,GAAgB,EAChBC,GAAkB,EAClBX,EAAK,EACT,IAAK,IAAIhK,EAAI,EAAGC,EAAIqK,EAAOvK,OAAQC,EAAIC,EAAGD,IAAK,CAC3C,MAAMK,EAAQiK,EAAOtK,GACf4K,EAAShB,EAAG7I,IAAIV,GACtB,GAAIuK,GAAUA,EAAOd,KAAOA,EACxBa,GAAkB,EAClBX,GAAM,EACNY,EAAOd,GAAKA,EACZc,EAAO1D,OAAO/F,IAAInB,GAClByK,EAAQzK,GAAK4K,EAAO/C,MAEnB,CACD6C,GAAgB,EAChB,MAAMP,EAAS,IAAIU,IAAW,GAC1BD,GACA/H,IAAQ,IAAMsH,EAAOlH,GAAE,KAE3BkH,EAAOjG,GAAE,KACL,IAAIgD,EAAQuC,GACRe,IACAL,EAAOjD,MAAQ,IAAIU,GAAW5H,GAC9BkH,EAAQ5F,EAAS6I,EAAOjD,QAE5B,MAAMW,EAAI4C,EAAQzK,GAAKmF,GAAQlE,EAAGZ,EAAO6G,IACzCiD,EAAOL,GAAKA,EACZK,EAAOtC,EAAIA,EACN+C,GACDhB,EAAGzI,IAAId,EAAO8J,EACjB,GAER,CACJ,CASD,OARAtJ,KAAKmJ,GAAKA,EACVnJ,KAAKwJ,EAAEC,GACHI,IACAD,EAAQjM,IAAiB,GAEzBmM,IACAF,EAAQpL,IAAmB,GAExBoL,CAAO,EAElB5J,KAAK4C,EAAI,IACE9D,MAAMmL,KAAKjK,KAAK+I,GAAGU,UAE9BzJ,KAAKI,GAAKA,EACVJ,KAAK2J,GAAMvJ,EAAGlB,OAAS,EACnBc,KAAKmI,UACL5G,EAAWvB,KAAKiD,OAAQ,IAAKjD,KAAK4C,EAEzC,GCrHL,IAAAsH,GAJsB1K,GACXD,EAAWC,IAAW3B,KAAqB2B,ECFtD,SAASU,GAAIV,EAAO2K,GAAc,GAE9B,OADWA,EAAc5K,EAAa6K,IAC/B5K,GACIA,IAGAA,CAEf,CCwDA,IAAA6K,GA1DA,cAAuBtG,EAEnBzB,cACI0B,QAEAhE,KAAKiD,OAASO,EACdxD,KAAKoD,QAAU,IAAKI,EAAMJ,QAASkH,CAAC/L,GAAkByB,MACtDmB,EAAcnB,KAAKiD,OAAQ,IAAKjD,MAChCA,KAAKqI,UAAa7E,EAAMtD,IAAI3B,IAAkB8J,WAAa,CAC9D,CAEDkC,GAAGC,GACC,IAAKxK,KAAKqI,YAAcmC,EACpB,OACJ,MAAMC,EAAgBzK,KAAKqI,UACrBqC,EAAgBD,GAAiBD,EAAQ,GAAK,GAEpD,GADAxK,KAAKqI,UAAYqC,IACXD,KAAoBC,EACtB,OAEJ1K,KAAKoG,YAAY9F,MAAMoK,GACvB,MAAMC,EAAexI,IACjBnB,EAAcmB,EAAMO,EAAGiI,GACvB3J,EAAcmB,EAAMQ,EAAGiI,GACvB5J,EAAcmB,EAAMU,EAAGgI,GACvB/I,EAAYK,EAAMS,EAAGkI,EAAW,EAE9BF,EAAkBtH,IAChBA,aAAoBiF,K3BhCZ,I2BiCJjF,EAASoC,G3BhCX,I2BgCoCpC,EAASoC,IACvCpC,EAAS8E,KACT9E,EAASjD,IAGTiD,EAAS4B,MAIrByF,EAAYrH,EAAS,EAEnBwH,EAAcC,IACZxL,EAAWwL,GACXA,IAAO1B,QAAQsB,GAGfA,EAAYI,EACf,EAECF,EAAkB1C,IACpBA,EAASoC,GAAGC,EAAM,EAEtBG,EAAY3K,KACf,CACDqD,EAAEjD,GACE,OAAO4D,MAAMX,EAAEjD,EAAIJ,UAAM6B,EAC5B,GClDL,IAAAmJ,GARiB,CAACC,EAAM7K,KACpB,MAAM+H,EAAW,IAAI+C,GACfC,EAAYC,GAAQH,GAG1B,OADAhD,IADW,IAAME,EAASoC,GAAGrK,GAAIiL,KACtB,CAAEvF,MAAM,IACZuC,EAAS9E,EAAEjD,EAAG,ECEzB,MAAMwI,GAAcrI,GAAQ,GAC5B,MAAMyJ,WAAmBnB,IAwIzB,IAAAwC,GApIA,MAEI/I,YAAYlC,EAAIkL,GAEZtL,KAAKiD,OAASO,EACdxD,KAAKmI,SAAW3E,EAAMtD,IAAI3B,GAC1ByB,KAAK+I,GAAK,IAAIC,IACdhJ,KAAKuL,GAAK,GACVvL,KAAKwL,GAAK,EAEVxL,KAAKgC,QAAU,KACX,IAAIsJ,EAAS,EACTG,EAAW5F,KAAKC,IAAI,EAAG9F,KAAKsL,OAAStL,KAAKwL,GAAKxL,KAAKuL,GAAGrM,OAAS,GACpEc,KAAK+I,GAAGM,SAAQC,IACRmC,EAAW,GAAKH,IAAWG,GAC3BnC,EAAOjB,WAAW/H,KAAI,GACtBN,KAAKuL,GAAGjK,KAAKgI,IAGbA,EAAOlH,GAAE,EACZ,GACH,EAENpC,KAAKoC,EAAI,KACDpC,KAAKmI,UACLxG,EAAc3B,KAAKiD,OAAQ,IAAKjD,KAAK4C,GAEzC5C,KAAK+I,GAAGM,SAAQC,IACZA,EAAOlH,GAAE,EAAK,IAElBpC,KAAKuL,GAAGlC,SAAQC,IACZA,EAAOlH,GAAE,EAAK,GAChB,EAENpC,KAAK0J,IAAOD,IACR,MAAMV,GAAEA,EAAE3I,GAAEA,EAAEuJ,GAAEA,GAAO3J,KACjB0L,EAAY,IAAI1C,IAChBY,EAAU,IAAI9K,MAAM2K,EAAOvK,QAC3BqM,EAAKvL,KAAKuL,GACVD,EAAStL,KAAKsL,OACpB,IAAIzB,GAAgB,EAChBC,GAAkB,EAClB6B,EAAY,GAChB,GAAI5C,EAAGvC,KACH,IAAK,IAAIrH,EAAI,EAAGC,EAAIqK,EAAOvK,OAAQC,EAAIC,EAAGD,IAAK,CAC3C,MAAMK,EAAQiK,EAAOtK,GACf4K,EAAShB,EAAG7I,IAAIV,GAClBuK,GACAD,GAAkB,EAClBf,EAAGnH,OAAOpC,GACVkM,EAAUpL,IAAId,EAAOuK,GACrBA,EAAO1D,OAAO/F,IAAInB,GAClByK,EAAQzK,GAAK4K,EAAO/C,GAGpB2E,EAAUrK,KAAKnC,EAEtB,MAGDwM,EAAY,IAAI7M,MAAM8K,EAAQ1K,QAElC0M,EAAO,IAAK,IAAIzM,EAAI,EAAGC,EAAIuM,EAAUzM,OAAQC,EAAIC,EAAGD,IAAK,CACrD,MAAMkH,EAAQsF,EAAUxM,IAAMA,EACxBK,EAAQiK,EAAOpD,GACfwF,EAAcH,EAAU/F,IAAInG,GAClC,IAAKqM,EACD,IAAK,MAAOxK,EAAKiI,KAAWP,EAAG+C,UAAW,CACtC/C,EAAGnH,OAAOP,GACVqK,EAAUpL,IAAId,EAAO8J,GACrBA,EAAOjD,OAAO/F,IAAI+F,GAClBiD,EAAO9J,OAAOc,IAAId,GAClBoK,EAAQvD,GAASiD,EAAOtC,EACxB,SAAS4E,CACZ,CAGL,IAAItC,EADJO,GAAgB,EAEZyB,GAAUC,EAAGrM,QACboK,EAASiC,EAAGQ,MACZzC,EAAOjD,OAAO/F,IAAI+F,GAClBiD,EAAO9J,OAAOc,IAAId,GAClB8J,EAAOjB,WAAW/H,KAAI,GACtBsJ,EAAQvD,GAASiD,EAAOtC,IAGxBsC,EAAS,IAAIU,IAAW,GACxBV,EAAOjG,GAAE,KACL,IAAI2I,EAASpD,GACTe,IACAL,EAAOjD,MAAQ,IAAIU,GAAWV,GAC9B2F,EAASvL,EAAS6I,EAAOjD,QAE7B,MAAMD,EAAakD,EAAO9J,MAAQ,IAAIuH,GAAWvH,GAC3C6I,EAAYiD,EAAS,IAAIvE,IAAW,QAASlF,EAC7CoK,EAAS5E,IAAK,IAAMnH,GAAIkG,EAAWlG,SACnC8G,EAAI4C,EAAQvD,GAASgC,EAAYF,IAAS,IAAME,EAAUnI,QAAO,IAAMoE,GAAQlE,EAAG6L,EAAQD,MAAY1H,GAAQlE,EAAG6L,EAAQD,IAC/H1C,EAAO9J,MAAQ4G,EACfkD,EAAOtC,EAAIA,EACXsC,EAAOjB,UAAYA,CAAS,KAGhCwD,EACA7J,IAAQ,IAAMsH,EAAOlH,GAAE,KAGvBsJ,EAAUpL,IAAId,EAAO8J,EAE5B,CAUD,OATAtJ,KAAKwL,GAAK3F,KAAKC,IAAI9F,KAAKwL,GAAI5B,EAAQ1K,QACpCc,KAAKgC,UACLhC,KAAK+I,GAAK2C,EACN7B,IACAD,EAAQjM,IAAiB,GAEzBmM,IACAF,EAAQpL,IAAmB,GAExBoL,CAAO,EAElB5J,KAAK4C,EAAI,IACE,IAAI5C,KAAK+I,GAAGU,YAAazJ,KAAKuL,GAAG9B,UAE5CzJ,KAAKI,GAAKA,EACVJ,KAAK2J,GAAMvJ,EAAGlB,OAAS,EACvBc,KAAKsL,OAASA,EACVtL,KAAKmI,UACL5G,EAAWvB,KAAKiD,OAAQ,IAAKjD,KAAK4C,EAEzC,GC3IL,IAAAsJ,GAJiB1M,GACNC,EAASD,IAAWvB,KAAgBuB,ECF/C,SAAS2M,GAAQ/L,GACb,IAAIb,EAAWa,GAgBX,OAAOA,EAhBS,CAChB,MAAMqD,EAAeC,EACrB,IAAID,EAUA,OAAOrD,IATP,IAEI,OADAwD,QAAY/B,GACLzB,GACV,CACO,QACJwD,GAAYH,EACf,CAKR,CAIL,CCbA,IAAA2I,GALgB5M,IACZ2M,GAAQ3M,GACDA,GCIX,MAAM/B,GAAQ,CAAC0N,EAAW1B,EAAQ4C,KAC9B,IAAK,IAAIlN,EAAI,EAAGC,EAAIqK,EAAOvK,OAAQC,EAAIC,EAAGD,IAAK,CAC3C,MAAMK,EAAQiK,EAAOtK,GACrB,GAAqB,IAAjBK,EAAMN,OACN,OAAOM,EAAM,GACjB,GAAIb,EAAGa,EAAM,GAAI2L,GACb,OAAO3L,EAAM,EACpB,CACD,OAAO6M,CAAQ,EAEnB,SAASC,GAAQrB,EAAMxB,EAAQ4C,GAE3B,GADkB9M,EAAW0L,KAAU9D,GAAmB8D,KAAU7D,GAAY6D,GACjE,CACX,MAAMzL,EAAQ+M,GAAOlF,IAAK,IAAM5J,GAAMwN,IAAQxB,EAAQ4C,MACtD,OAAIlF,GAAmB3H,GACZe,EAAO+D,GAAQ9E,MAGf6H,IAAK,IAAM/C,GAAQpE,GAAIV,KAErC,CACI,CACD,MAAMA,EAAQ/B,GAAMyC,GAAI+K,GAAOxB,EAAQ4C,GACvC,OAAO9L,EAAO+D,GAAQ9E,GACzB,CACL,CC1BA,IAAAgN,GALgB,CAACvB,EAAMwB,EAAWC,IAEvBJ,GADWlB,GAAQH,GACA,CAAC,EAAC,EAAMwB,GAAY,CAACC,KCGnD,IAAAC,GAJmB,MACN1I,GAAS2I,GAAe9E,IAAM8E,GAAe7H,IAAMF,GAAcE,GCH9E,SAASqB,GAAW5G,EAAO4F,GACvB,OAAO1E,EAAS,IAAIyE,GAAgB3F,EAAO4F,GAC/C,CCGA,IAAAyH,GAJ8BrN,GACnBD,EAAWC,IAAWxB,KAA8BwB,ECS/D,IAAAsN,GATgB1G,GACR7G,EAAW6G,GACJA,EAAWrI,IAA+BqI,EAAWpI,IAA+B6C,EAGpFuF,ECIf,IAAA2G,GATkB3G,GACV4G,GAAqB5G,GACd3F,EAASwM,GAAO7G,IAGhBA,ECHf,IAAA8G,GAJc9M,GACH,IAAIyI,IAAK,GAAMxF,EAAEjD,GCQ5B,MAAM+M,WAAsBnE,IACxB1G,cACI0B,SAASlE,WACTE,KAAKuC,UAAW,CACnB,EAEL,MAAM6K,WAA2BrG,GAC7BzE,cACI0B,SAASlE,WACTE,KAAKqN,GAAK,CACb,CAEDpL,OACQjC,KAAKsN,GAAG/K,WAEZvC,KAAKqN,IAAM,EACPrN,KAAKqN,IAETrN,KAAKsN,GAAG1L,OAAO5B,KAAKuN,IACvB,EAkDL,IAAAC,GA/CkBD,IAId,GAFAA,EAAKhB,GAAOlF,GAAKkG,IAEbpG,GAAmBoG,GAAK,CACxB,MAAME,EAActB,GAAQoB,GAC5B,OAAQ/N,GACIA,IAAUiO,EAAe7M,EAAkBD,CAE1D,CAED,IAAI2M,EAAK,IAAIH,GACTO,EAAgBvB,GAAQoB,GAC5BtF,IAAO,KACH,MAAM0F,EAAYD,EACZE,EAAYL,IACd5O,EAAGgP,EAAWC,KAElBF,EAAgBE,EAChBN,EAAGpN,IAAIyN,IAAYrN,KAAI,GACvBgN,EAAGpN,IAAI0N,IAAYtN,KAAI,GAAK,GAC7B,CAAE6H,UAAU,EAAOvC,MAAM,IAO5B,OAFA5D,IAHmB,KACfsL,EAAG/K,UAAW,CAAI,IAId/C,IAEJ,IAAIqO,EAAWP,EAAGpN,IAAIV,GAatB,OAZIqO,EACAA,EAASR,IAAM,GAGfQ,EAAW,IAAIT,GAAmB5N,IAAUkO,GAC5CG,EAASP,GAAKA,EACdO,EAASN,GAAK/N,EACd8N,EAAGhN,IAAId,EAAOqO,IAGlB7L,GAAQ6L,GAEDpN,EAASoN,EAAS,CAC5B,ECjEL,MAAMC,WAAiB9E,IACnB+E,GAAG1M,EAAK7B,GAEJ,OADAwE,MAAM1D,IAAIe,EAAK7B,GACRA,CACV,EAEL,MAAMwO,GACF1L,cACItC,KAAKqN,GAAK,CACb,CACDY,SACIjO,KAAKqN,IAAM,EACXrL,GAAQhC,KACX,CACDiC,OACIjC,KAAKqN,IAAM,EACPrN,KAAKqN,IAETrN,KAAKoC,GACR,CACDA,IAAO,EAEX,MAAM8L,WAAkBF,GACpB1L,YAAYW,EAAQmD,GAChBpC,QACAhE,KAAKiD,OAASA,EACdjD,KAAKoG,WAAaA,CACrB,CACDhE,IACIpC,KAAKiD,OAAOkL,UAAOtM,CACtB,EAEL,MAAMuM,WAAoBJ,GACtB1L,YAAYW,EAAQmD,GAChBpC,QACAhE,KAAKiD,OAASA,EACdjD,KAAKoG,WAAaA,CACrB,CACDhE,IACIpC,KAAKiD,OAAOwG,YAAS5H,CACxB,EAEL,MAAMwM,WAAiBL,GACnB1L,YAAYW,EAAQ5B,EAAK+E,GACrBpC,QACAhE,KAAKiD,OAASA,EACdjD,KAAKqB,IAAMA,EACXrB,KAAKoG,WAAaA,CACrB,CACDhE,IACIpC,KAAKiD,OAAO0C,KAAK/D,OAAO5B,KAAKqB,IAChC,EAEL,MAAMiN,WAAsBN,GACxB1L,YAAYW,EAAQ5B,EAAK+E,EAAYmI,GACjCvK,QACAhE,KAAKiD,OAASA,EACdjD,KAAKqB,IAAMA,EACXrB,KAAKoG,WAAaA,EAClBpG,KAAKuO,GAAKA,CACb,CACDnM,IACIpC,KAAKiD,OAAOuL,IAAI5M,OAAO5B,KAAKqB,IAC/B,EAEL,MAAMoN,GAAwB,CAE1BC,GAAI,EACJC,GAAI,IAAInN,IACRoN,GAAI,IAAIpN,IAERqN,GAAI,KACA,MAAMF,GAAEA,EAAEC,GAAEA,GAAOH,GACbK,EAAY,IAAItN,IAChBuN,EAAYR,IACVO,EAAUnJ,IAAI4I,KAElBO,EAAUrN,IAAI8M,GACdzM,EAAYyM,EAAGS,GAAID,GACnBjN,EAAYyM,EAAGU,IAAIC,IACfP,EAAGlN,IAAIyN,EAAS,IAClB,EAGN,OADAN,EAAGvF,QAAQ0F,GACJ,KACHJ,EAAGtF,SAAQ6F,IACPA,GAAU,GACZ,CACL,EAELxG,EAAI6F,IACAE,GAAsBG,GAAGnN,IAAI8M,GAC7BY,GAAejK,GAAG,EAEtBkK,MAAO,KACHX,GAAsBE,GAAK,IAAInN,IAC/BiN,GAAsBG,GAAK,IAAIpN,GAAK,GAGtC6N,GAAsB,CAExBX,GAAI,EACJE,GAAI,IAAI5F,IAER6F,GAAI,KACA,MAAMD,GAAEA,GAAOS,GACf,MAAO,KACHT,EAAGvF,SAAQ,CAACiG,EAAUC,KAClB,MAAM3M,EAAI9D,MAAMmL,KAAKqF,GACrBxN,EAAYyN,EAAMC,IAAIN,IAClBA,EAAStM,EAAE,GACb,GACJ,CACL,EAEL8F,EAAG,CAAC6G,EAAOxE,KACP,MAAMnI,EAAIyM,GAAoBT,GAAG1O,IAAIqP,IAAU,IAAI/N,IACnDoB,EAAEnB,IAAIsJ,GACNsE,GAAoBT,GAAGtO,IAAIiP,EAAO3M,GAClCuM,GAAejK,GAAG,EAEtBuK,GAAI,CAACC,EAASzM,EAAQ5B,KAClB,GAAK4B,EAAO+L,GAIP,CACD,MAAMF,EAAY,IAAItN,IAChBuN,EAAYR,IACVO,EAAUnJ,IAAI4I,KAElBO,EAAUrN,IAAI8M,GACdzM,EAAYyM,EAAGS,IAAI/L,IACVA,EAAO+L,IACRK,GAAoB3G,EAAEzF,EAAQsL,EAAGgB,OAErCR,EAAS9L,EAAO,IAClB,EAEN8L,EAASW,GAAWzM,EACvB,KAlBe,CACZ,MAAM8H,EAAO2E,GAASH,OAASpD,IAAQ,IAAMlJ,EAAOsM,MAAMlO,KAC1DgO,GAAoB3G,EAAEzF,EAAQ8H,EACjC,CAeA,EAELqE,MAAO,KACHC,GAAoBT,GAAK,IAAI5F,GAAK,GAGpCmG,GAAiB,CAEnBT,IAAI,EAEJ1J,EAAG,KACC,MAAM2K,EAAelB,GAAsBI,KACrCe,EAAaP,GAAoBR,KACvCM,GAAeC,QACfO,IACAC,GAAY,EAEhBC,GAAI,KACIC,KACI7L,EACAA,EAAM+D,QAAQmH,GAAeU,IAG7BE,WAAWZ,GAAeU,GAAI,GAIlCV,GAAenK,GAClB,EAELoK,MAAO,KACHD,GAAeT,IAAK,EACpBD,GAAsBW,QACtBC,GAAoBD,OAAO,EAE/BlK,EAAG,KACKiK,GAAeT,KAEnBS,GAAeT,IAAK,EACpB3G,eAAeoH,GAAeU,IAAG,GAInCG,GAAQ,IAAIC,QACZC,GAAkB,IAAI1O,IAAI,CAACvD,EAAcC,EAAmBC,EAAyBC,EAAqBC,IAC1G8R,GAAkB,IAAI3O,IAAI,CAAC,YAAa,mBAAoB,mBAAoB,mBAAoB,mBAAoB,YAAa,cAAe,iBAAkB,gBAAiB,uBAAwB,iBAAkB,WAAY,WAAY,YACzP4O,GAAc,CAEhBlQ,IAAK,CAAC+M,EAAQ5L,KACV,GAAI6O,GAAgBvK,IAAItE,GAAM,CAC1B,GAAIA,IAAQpD,EACR,OAAO,EACX,GAAIoD,IAAQjD,EACR,OAAO6O,EACX,GAAI5L,IAAQnD,EAAmB,CAC3B,GAAImS,KAAgB,CAChB,MAAM9B,EAAK+B,GAAgBrD,GAC3BsB,EAAGJ,OAASI,EAAGJ,KAAOoC,GAAYhC,IAClCA,EAAGJ,KAAKF,SACRM,EAAGJ,KAAK/H,WAAWlG,KACtB,CACD,MACH,CACD,GAAImB,IAAQhD,EAAqB,CAC7B,GAAIgS,KAAgB,CAChB,MAAM9B,EAAK+B,GAAgBrD,GAC3BsB,EAAG9E,SAAW8E,EAAG9E,OAAS+G,GAAcjC,IACxCA,EAAG9E,OAAOwE,SACVM,EAAG9E,OAAOrD,WAAWlG,KACxB,CACD,MACH,CACD,GAAImB,IAAQlD,EACR,OAAQkD,IACJA,EAAsB,iBAARA,EAAoBoP,OAAOpP,GAAOA,EAChD,MAAMkN,EAAK+B,GAAgBrD,GACrByD,EAASnC,EAAGoC,IAAIzQ,IAAImB,GAC1B,GAAIqP,EACA,OAAOA,EAAOlQ,KAAK+N,EAAGgB,OAC1BhB,EAAGC,KAAOD,EAAGC,GAAK,IAAIV,IACtB,MAAMtO,EAAQyN,EAAO5L,GACfuP,EAAWrC,EAAGC,GAAGtO,IAAImB,IAAQkN,EAAGC,GAAGT,GAAG1M,EAAKwP,GAAgBtC,EAAIlN,EAAK7B,IACpE4F,EAAUmJ,EAAGlJ,OAAS,CAAEA,OAAQkJ,EAAGlJ,aAAWxD,EACpD+O,EAASxK,aAAewK,EAASxK,WAAa0K,GAAkBvC,EAAI/O,EAAO4F,IAE3E,OADmB3E,EAASmQ,EAASxK,WACpB,CAG5B,CACD,GAAI+J,GAAgBxK,IAAItE,GACpB,OAAO4L,EAAO5L,GAClB,MAAMkN,EAAK+B,GAAgBrD,GACrByD,EAASnC,EAAGoC,IAAIzQ,IAAImB,GACpB7B,EAAQkR,GAAUzD,EAAO5L,GAC/BkN,EAAGC,KAAOD,EAAGC,GAAK,IAAIV,IACtB,MAAMiD,EAAaV,KACbW,EAAYC,GAAYzR,GACxBoR,EAAWG,GAAcC,EAAYzC,EAAGC,GAAGtO,IAAImB,IAAQkN,EAAGC,GAAGT,GAAG1M,EAAKwP,GAAgBtC,EAAIlN,EAAK7B,SAAUqC,EAI9G,GAHI+O,GAAUrC,IACVhN,EAAWqP,EAASrC,GAAI,KAAMA,GAE9BqC,GAAYG,EAAY,CACxB,MAAM3L,EAAUmJ,EAAGlJ,OAAS,CAAEA,OAAQkJ,EAAGlJ,aAAWxD,EACpD+O,EAAS3C,SACT2C,EAASxK,aAAewK,EAASxK,WAAa0K,GAAkBvC,EAAI/O,EAAO4F,IAC3EwL,EAASxK,WAAWlG,KACvB,CACD,OAAIwQ,EACOA,EAAOzO,KAAKsM,EAAGgB,OAGD,mBAAV/P,GAAwBA,IAAUV,MAAMoS,UAAU7P,GAClD,WACH,OAAO7B,EAAM2R,MAAM5C,EAAGgB,MAAOzP,UACjD,EAEmB8Q,GAAUrC,IAAIgB,OAAS/P,CACjC,EAELc,IAAK,CAAC2M,EAAQ5L,EAAK7B,KACfA,EAAQ4R,GAAU5R,GAClB,MAAM+O,EAAK+B,GAAgBrD,GACrBoE,EAAS9C,EAAG+C,IAAIpR,IAAImB,GAC1B,GAAIgQ,EACAA,EAAOpP,KAAKsM,EAAGgB,MAAO/P,OAErB,CACD,MAAMmO,EAAYV,EAAO5L,GACnBkQ,IAAgB5D,GAActM,KAAO4L,EACrC5H,EAASkJ,EAAGlJ,QAAU1G,EAC5B,GAAI4S,GAAelM,EAAO7F,EAAOmO,KAAuB,WAARtM,IAAqBvC,MAAMD,QAAQoO,IAC/E,OAAO,EACXA,EAAO5L,GAAO7B,EACd+O,EAAG9E,QAAQrD,WAAW9F,IAAI,GACrBiR,IACDhD,EAAGJ,MAAM/H,WAAW9F,IAAI,GACxBiO,EAAG5I,KAAKzF,IAAImB,IAAM+E,WAAW9F,KAAI,IAErC,MAAMsQ,EAAWrC,EAAGC,IAAItO,IAAImB,GACxBuP,GAAUrC,IACV5M,EAAciP,EAASrC,GAAI,KAAMA,GAEjCqC,IACAA,EAASxK,YAAY9F,IAAId,GACzBoR,EAASrC,GAAK0C,GAAYzR,GAASwQ,GAAM9P,IAAIV,IAAUgS,GAAQhS,EAAO+O,QAAM1M,GAE5E+O,GAAUrC,IACVhN,EAAWqP,EAASrC,GAAI,KAAMA,GAE9Bc,GAAoBX,IACpBW,GAAoBI,GAAGmB,GAAUrC,GAAIA,EAAIlN,GAEzCoN,GAAsBC,IACtBD,GAAsB/F,EAAE6F,EAE/B,CACD,OAAO,CAAI,EAEfkD,eAAgB,CAACxE,EAAQ5L,KAErB,KADqBA,KAAO4L,GAExB,OAAO,EAEX,IADgByE,QAAQD,eAAexE,EAAQ5L,GAE3C,OAAO,EACX,MAAMkN,EAAK+B,GAAgBrD,GAC3BsB,EAAGJ,MAAM/H,WAAW9F,IAAI,GACxBiO,EAAG9E,QAAQrD,WAAW9F,IAAI,GAC1BiO,EAAG5I,KAAKzF,IAAImB,IAAM+E,WAAW9F,KAAI,GACjC,MAAMsQ,EAAWrC,EAAGC,IAAItO,IAAImB,GAc5B,OAbIgO,GAAoBX,IACpBW,GAAoBI,GAAGmB,GAAUrC,GAAIA,EAAIlN,GAEzCuP,GAAUrC,IACV5M,EAAciP,EAASrC,GAAI,KAAMA,GAEjCqC,IACAA,EAASxK,YAAY9F,SAAIuB,GACzB+O,EAASrC,QAAK1M,GAEd4M,GAAsBC,IACtBD,GAAsB/F,EAAE6F,IAErB,CAAI,EAEfoD,eAAgB,CAAC1E,EAAQ5L,EAAKuQ,KAC1B,MAAMrD,EAAK+B,GAAgBrD,GACrB5H,EAASkJ,EAAGlJ,QAAU1G,EACtB4S,EAAelQ,KAAO4L,EACtB4E,EAAiBH,QAAQI,yBAAyB7E,EAAQ5L,GAChE,GAAIwQ,GAAkBE,GAAkBF,EAAgBD,EAAYvM,GAChE,OAAO,EAEX,IADgBqM,QAAQC,eAAe1E,EAAQ5L,EAAKuQ,GAEhD,OAAO,EACNA,EAAW1R,IAGP0R,EAAW1R,MAChBqO,EAAGoC,KAAOpC,EAAGoC,GAAK,IAAI7C,IACtBS,EAAGoC,GAAGrQ,IAAIe,EAAKuQ,EAAW1R,MAJ1BqO,EAAGoC,IAAI/O,OAAOP,GAMbuQ,EAAWtR,IAGPsR,EAAWtR,MAChBiO,EAAG+C,KAAO/C,EAAG+C,GAAK,IAAIxD,IACtBS,EAAG+C,GAAGhR,IAAIe,EAAKuQ,EAAWtR,MAJ1BiO,EAAG+C,IAAI1P,OAAOP,GAMdkQ,MAAkBK,EAAWI,aAC7BzD,EAAGJ,MAAM/H,WAAW9F,IAAI,GACxBiO,EAAG5I,KAAKzF,IAAImB,IAAM+E,WAAW9F,MAAMsR,EAAWI,aAElD,MAAMpB,EAAWrC,EAAGC,IAAItO,IAAImB,GAO5B,GANIgO,GAAoBX,IACpBW,GAAoBI,GAAGmB,GAAUrC,GAAIA,EAAIlN,GAEzCuP,GAAUrC,IACV5M,EAAciP,EAASrC,GAAI,KAAMA,GAEjCqC,EACA,GAAI,QAASgB,EACThB,EAASxK,YAAY9F,IAAIsR,EAAW1R,KACpC0Q,EAASrC,QAAK1M,MAEb,CACD,MAAMrC,EAAQoS,EAAWpS,MACzBoR,EAASxK,YAAY9F,IAAId,GACzBoR,EAASrC,GAAK0C,GAAYzR,GAASwQ,GAAM9P,IAAIV,IAAUgS,GAAQhS,EAAO+O,QAAM1M,CAC/E,CAWL,OATI+O,GAAUrC,IACVhN,EAAWqP,EAASrC,GAAI,KAAMA,GAE9Bc,GAAoBX,IACpBW,GAAoBI,GAAGmB,GAAUrC,GAAIA,EAAIlN,GAEzCoN,GAAsBC,IACtBD,GAAsB/F,EAAE6F,IAErB,CAAI,EAEf5I,IAAK,CAACsH,EAAQ5L,KACV,GAAIA,IAAQpD,EACR,OAAO,EACX,GAAIoD,IAAQjD,EACR,OAAO,EACX,MAAMoB,EAAS6B,KAAO4L,EACtB,GAAIoD,KAAgB,CAChB,MAAM9B,EAAK+B,GAAgBrD,GAC3BsB,EAAG5I,MAAQ4I,EAAG5I,IAAM,IAAImI,IACxB,MAAMnI,EAAM4I,EAAG5I,IAAIzF,IAAImB,IAAQkN,EAAG5I,IAAIoI,GAAG1M,EAAK4Q,GAAW1D,EAAIlN,EAAK7B,IAClEmG,EAAIsI,SACJtI,EAAIS,WAAWlG,KAClB,CACD,OAAOV,CAAK,EAEhB0S,QAAUjF,IACN,MAAMkB,EAAOuD,QAAQQ,QAAQjF,GAC7B,GAAIoD,KAAgB,CAChB,MAAM9B,EAAK+B,GAAgBrD,GAC3BsB,EAAGJ,OAASI,EAAGJ,KAAOoC,GAAYhC,IAClCA,EAAGJ,KAAKF,SACRM,EAAGJ,KAAK/H,WAAWlG,KACtB,CACD,OAAOiO,CAAI,GAGbgE,GAAsB,CAExBxM,IAAK,CAACsH,EAAQ5L,IACNA,IAAQ/C,GAEJ+C,KAAO4L,GAIjBuE,GAAU,CAAChS,EAAOyD,EAAQoC,KAC5B,MAAMkK,EAAQ,IAAIzO,MAAMtB,EAAO4Q,IACzBgC,EAAoBC,GAAqB7S,GACzC+O,EAAK,CAAES,GAAI/L,EAAQsM,SACzB,GAAI6C,EAAmB,CACnB,MAAMzB,GAAEA,EAAEW,GAAEA,GAAOc,EACfzB,IACApC,EAAGoC,GAAKA,GACRW,IACA/C,EAAG+C,GAAKA,EACf,CAWD,OAVe,IAAXjM,EACAkJ,EAAGlJ,OAASzF,EAEPyF,EACLkJ,EAAGlJ,OAASA,EAEPpC,GAAQoC,SACbkJ,EAAGlJ,OAASpC,EAAOoC,QAEvB2K,GAAM1P,IAAId,EAAO+O,GACVA,CAAE,EAEP+B,GAAmB9Q,IACrB,MAAM+O,EAAKyB,GAAM9P,IAAIV,GACrB,IAAK+O,EACD,MAAM,IAAIxO,MAAM,cACpB,OAAOwO,CAAE,EAEP+D,GAAoB/C,GACfe,GAAgBc,GAAU7B,IAE/BgB,GAAehC,IACjB,MAAMnI,EAAa0K,GAAkBvC,EAAI,EAAG,CAAElJ,QAAQ,IAEtD,OADa,IAAI6I,GAAUK,EAAInI,EACpB,EAEToK,GAAiBjC,IACnB,MAAMnI,EAAa0K,GAAkBvC,EAAI,EAAG,CAAElJ,QAAQ,IAEtD,OADe,IAAI+I,GAAYG,EAAInI,EACtB,EAEX6L,GAAa,CAAC1D,EAAIlN,EAAK7B,KACzB,MAAM4G,EAAa0K,GAAkBvC,EAAI/O,GAEzC,OADY,IAAI6O,GAASE,EAAIlN,EAAK+E,EACxB,EAER0K,GAAoB,CAACvC,EAAI/O,EAAO4F,IAC3B,IAAID,GAAgB3F,EAAO4F,GAEhCyL,GAAkB,CAACtC,EAAIlN,EAAK7B,KAC9B,MACM+S,EAAetB,GAAYzR,GAASwQ,GAAM9P,IAAIV,IAAUgS,GAAQhS,EAAO+O,QAAM1M,EAC7E+O,EAAW,IAAItC,GAAcC,EAAIlN,EAFpBQ,UAEqC0Q,GAGxD,OAFAhE,EAAGC,KAAOD,EAAGC,GAAK,IAAIV,IACtBS,EAAGC,GAAGlO,IAAIe,EAAKuP,GACRA,CAAQ,EAEbyB,GAAwB7S,IAC1B,GAAIX,EAAQW,GACR,OACJ,IAAImR,EACAW,EACJ,MAAMnD,EAAOvP,OAAOuP,KAAK3O,GACzB,IAAK,IAAIL,EAAI,EAAGC,EAAI+O,EAAKjP,OAAQC,EAAIC,EAAGD,IAAK,CACzC,MAAMkC,EAAM8M,EAAKhP,GACXyS,EAAahT,OAAOkT,yBAAyBtS,EAAO6B,GAC1D,IAAKuQ,EACD,SACJ,MAAM1R,IAAEA,EAAGI,IAAEA,GAAQsR,EACjB1R,IACAyQ,IAAOA,EAAK,IAAI7C,IAChB6C,EAAGrQ,IAAIe,EAAKnB,IAEZI,IACAgR,IAAOA,EAAK,IAAIxD,IAChBwD,EAAGhR,IAAIe,EAAKf,GAEnB,CACD,OAAKqQ,GAAOW,EAEL,CAAEX,KAAIW,WAFb,CAEiB,EAQfF,GAAa5R,GACXgT,GAAQhT,GACDA,EAAMpB,GACVoB,EASLuS,GAAoB,CAAC/S,EAAGC,EAAGoG,MACnBrG,EAAEyT,gBAAmBxT,EAAEwT,gBAAkBzT,EAAEgT,cAAiB/S,EAAE+S,cAAgBhT,EAAE0B,YAAezB,EAAEyB,UAAY2E,EAAOrG,EAAEQ,MAAOP,EAAEO,QAAUR,EAAEkB,MAAQjB,EAAEiB,KAAOlB,EAAEsB,MAAQrB,EAAEqB,IAEhL+P,GAAe,MACR3M,EAEPuN,GAAezR,IACjB,GAAc,OAAVA,GAAmC,iBAAVA,EACzB,OAAO,EACX,GAAIvB,KAAgBuB,EAChB,OAAO,EACX,GAAIlB,KAA0BkB,EAC1B,OAAO,EACX,GAAIX,EAAQW,GACR,OAAO,EACX,MAAM0R,EAAYtS,OAAO8T,eAAelT,GACxC,OAAkB,OAAd0R,GAEyC,OAArCtS,OAAO8T,eAAexB,EAAqB,EAEjD9J,GAAe5H,GACH,OAAVA,GAAmC,iBAAVA,GAErBlB,KAA0BkB,EAMhC+P,GAAQ,CAAC/P,EAAO4F,IACb3F,EAASD,GAEV4H,GAAY5H,GACLA,EAnDE,EAACA,EAAO4F,IACjBoN,GAAQhT,GACDA,GACAwQ,GAAM9P,IAAIV,IAAUgS,GAAQhS,OAAOqC,EAAWuD,GAASC,SACxDkK,MAgDHoD,CAASnT,EAAO4F,GAHZ5F,EAMf+P,GAAMqD,GAAK,CAAC3F,EAAQiC,KAEhB,MAAM2D,E5CxjBChU,EADQW,E4CyjBWyN,G5CxjBFzN,EAAQ,CAACA,GADnB,IAACA,E4C0jBf,MAAMsT,EAAYD,EAAQE,OAAOxT,GAC3BqP,EAAKiE,EAAQE,OAAOP,IAAS9I,IAAI4I,IAEvC7D,GAAsBC,IAAM,EAC5B,MAAMsE,EAAYF,EAAUpJ,KAAIuJ,IAC5B,IAAIC,GAAS,EACb,OAAOjL,IAAO,KACNiL,IACAzE,GAAsBE,GAAGlN,IAAIyN,GAC7BC,GAAejK,KAEnBgO,GAAS,EACTD,GAAU,GACX,CAAE9K,UAAU,EAAOvC,MAAM,GAAO,IAMvC,OAJAgJ,EAAGvF,SAAQkF,IACPhN,EAAWgN,EAAI,KAAMW,EAAS,IAG3B,KACHT,GAAsBC,IAAM,EAC5BsE,EAAU3J,SAAQ8J,IACdA,GAAU,IAEdvE,EAAGvF,SAAQkF,IACP5M,EAAc4M,EAAI,KAAMW,EAAS,GACnC,CACL,EAELK,GAAM6D,SAAW,CAACnG,EAAQiC,KACtB,IAAKsD,GAAQvF,GACT,OAAOtN,EACX,MAAM4O,EAAK+D,GAAiBrF,GAC5B,GAAIsB,EAAGS,GACH,MAAM,IAAIjP,MAAM,uCAKpB,OAHAsP,GAAoBX,IAAM,EAC1BnN,EAAWgN,EAAI,KAAMW,GAEd,KACHG,GAAoBX,IAAM,EAC1B/M,EAAc4M,EAAI,KAAMW,EAAS,CACpC,EAELK,GAAM8D,UAAY,MAEd,MAAMC,EAAW9T,GACTX,EAAQW,GACD,EACPyR,GAAYzR,GACL,EACJ,EAaL+T,EAAiB,CAACC,EAAMC,KAC1B,MAAMC,EAAQtC,GAAUoC,GAClBG,EAAQvC,GAAUqC,GAClBG,EAAWhV,OAAOuP,KAAKuF,GACvBG,EAAWjV,OAAOuP,KAAKwF,GAC7B,IAAK,IAAIxU,EAAI,EAAGC,EAAIyU,EAAS3U,OAAQC,EAAIC,EAAGD,IAAK,CAC7C,MAAMkC,EAAMwS,EAAS1U,GACf2U,EAAYJ,EAAMrS,GAClB0S,EAAYJ,EAAMtS,GACxB,GAAK1C,EAAGmV,EAAWC,QAaIlS,IAAdiS,GAA6BzS,KAAOqS,IACzCF,EAAKnS,QAAOQ,OAde,CAC3B,MAAMmS,EAAWV,EAAQQ,GACnBG,EAAWX,EAAQS,GACrBC,GAAYA,IAAaC,GACzBV,EAAeC,EAAKnS,GAAM0S,GACT,IAAbC,IACAR,EAAKnS,GAAKnC,OAAS6U,EAAU7U,SAIjCsU,EAAKnS,GAAO0S,CAEnB,CAIJ,CACD,IAAK,IAAI5U,EAAI,EAAGC,EAAIwU,EAAS1U,OAAQC,EAAIC,EAAGD,IAAK,CAC7C,MAAMkC,EAAMuS,EAASzU,GACfkC,KAAOsS,UACFH,EAAKnS,EAEnB,CACD,OAAOmS,CAAI,EAOf,MALkB,CAACA,EAAMC,IACdtH,IAAQ,IA9CI,EAACqH,EAAMC,KAC1B,MAAMC,EAAQtC,GAAUoC,GAClBG,EAAQvC,GAAUqC,GACxBF,EAAeC,EAAMC,GACrB,MAAMO,EAAWV,EAAQI,GACnBO,EAAWX,EAAQK,GAIzB,OAHiB,IAAbK,GAA+B,IAAbC,IAClBT,EAAKtU,OAASuU,EAAKvU,QAEhBsU,CAAI,EAsCAU,CAAeV,EAAMC,IAIvC,EA5DiB,GA6DlBlE,GAAMpD,QAAW3M,GAxJI,CAACA,GACbC,EAASD,GAEV4H,GAAY5H,GACLA,EACJ,IAAIsB,MAAMtB,EAAO2S,IAHb3S,EAuJJ2U,CAAa3U,GAExB+P,GAAM6E,OAAU5U,GACL4R,GAAU5R,GAGrB,IAAA6U,GAAe9E,GC5pBf,IAAA+E,GARkB,KACd,MAAMnM,EAAW3E,EAAMtD,IAAI3B,GAC3B,IAAK4J,EACD,OAAOxH,EACX,MAAMyF,EAAc+B,EAAS/B,aAAe+B,EAAS/B,WAAa,IAAIW,KAAaoB,EAASE,YAC5F,OAAO5H,EAAS2F,EAAW,ECL/B,IAAAmO,GAJa,KACT/O,GAAUR,GAAG,ECkBjB,IAAAwP,GAhBiB,CAAChV,EAAOY,KACrB,MAAMgG,EAAaqO,KACnB,OAAOpN,IAAK,KACR,MAAMtE,EAAQqD,IACd,GAAIrD,EAAO,CAGP,OAAOuB,GAAQlE,EADC,CAAE2C,QAAOqM,MADX,IAAMhJ,OAAWvE,KAGlC,CAGG,OADA2B,EAAMf,EAAI2D,EACH9B,GAAQ9E,EAClB,GACH,ECfN,SAASkV,GAAUtU,GACf,MAAMsU,EAAYnV,EAAWa,GAAM,IAAIuU,IAASxI,IAAQ,IAAM/L,KAAMuU,KAAS,IAAMvU,EAEnF,OADAsU,EAAUjW,IAAoB,EACvBiW,CACX,CCGA,IAAAE,GARc,KACV,MAAMzS,EAAQqB,EACRF,EAAWI,EACjB,OAAQtD,GACG+B,EAAMkB,GAAE,IAAMjD,KAAM+B,EAAOmB,EACrC,ECLL,MAAMuR,GAAgB,IAAI5E,QACpB6E,GAAa,CAAA,EACbvW,GAAkBX,OAAO,YACzBmX,GAA2BnX,OAAO,qBAClCoX,GAAqB,CAAE,ECC7B,IAAAC,GALqBC,IACjBA,EAAQxW,IAA8B,EAC/BwW,GCHX,MAAMC,GAAgBC,SAASD,cAAc3U,KAAK4U,SAAU,IACtDC,GAAiBD,SAASE,cAAc9U,KAAK4U,UAC7CG,GAAgBH,SAASI,gBAAgBhV,KAAK4U,SAAU,8BACxDK,GAAaL,SAASM,eAAelV,KAAK4U,WCF1CO,OAAEA,IAAW/W,OACbgX,GAAapW,GACRX,GAAQW,GAASA,EAAQ,CAACA,GAiB/B8G,GAAU,MACZ,MAAMuP,EAAW/W,MAAMoS,UAAU5K,QACjC,MAAO,CAACrF,EAAKzB,IACFqW,EAAS5T,KAAKhB,EAAKzB,EAEjC,EALe,IAMVX,QAAEA,IAAYC,MAOdgX,GAAWtW,GACNA,aAAiBO,MAKtBR,GAAcC,GACQ,mBAAVA,EAEZuW,GAAsBvW,KACff,KAAoBe,GAASd,KAA8Bc,GAAS1B,KAA4B0B,GAASA,EAAMzB,IAA6BkF,QAAQV,UAE3JyT,GAASxW,GACJA,QAWLyW,GAAYzW,GACU,iBAAVA,EAEZ0W,GAAS1W,KACFA,EAAa,MAEpB2W,GAAe,MACjB,MAAMC,EAAQ,wGACRC,EAAW,CAAA,EACjB,OAAQnB,IACJ,MAAMnL,EAASsM,EAASnB,GACxB,YAAmBrT,IAAXkI,EAAwBA,EAAUsM,EAASnB,IAAYA,EAAQoB,SAAS,MAAQF,EAAMG,KAAKrB,EAAS,CAEnH,EAPoB,GAWfsB,GAAYhX,KACLA,EC1Eb,SAASiX,GAAYhN,EAAQiN,EAAUC,GACnC,MAAMC,GAAoC,IAApBD,IAA0C,IAAbD,EAAsBnX,GAAa6K,GAChF9F,EAAW9E,GAAUoX,EAAapX,GAASA,IAAUA,EAC3D,GAAIX,GAAQ4K,GAAS,CACjB,MAAMjB,EAAWiB,EAAOC,IAAIpF,GAC5B,OAAI/E,GAAWmX,GACJA,EAASvF,WAAMtP,EAAW2G,GAG1BA,CAEd,CACI,CACD,MAAMA,EAAWlE,EAAQmF,GACzB,OAAIlK,GAAWmX,GACJA,EAASlO,GAGTA,CAEd,CACL,CCnBA,SAASqO,GAAiB5J,EAAQ6J,EAAOC,EAAS3R,GAC9C,OAAO4R,IAAU,KACb,MAAM5W,EAAK6W,GAAGF,GAAS,GACvB,OAAON,GAAY,CAACxJ,EAAQ6J,EAAO1R,IAAU,CAAC6H,EAAQ6J,EAAO1R,KACzD,MAAMyN,EAAU+C,GAAU3I,GAI1B,OAHA4F,EAAQxJ,SAAQ4D,IACZA,GAAQiK,iBAAiBJ,EAAO1W,EAAIgF,EAAQ,IAEzC,KACHyN,EAAQxJ,SAAQ4D,IACZA,GAAQkK,oBAAoBL,EAAO1W,EAAIgF,EAAQ,GACjD,CACL,GACH,GACH,CAAEQ,KAAM,QACf,CCAA,IAAAwR,GAf2B,CAACC,EAAU,MAClCA,EAAUzB,GAAUyB,GACpB,MAAMC,EAAa,IAAIC,gBACjBC,EAAQF,EAAWE,MAAMhX,KAAK8W,GASpC,OARgBD,EAAQI,MAAKC,GAAUA,EAAOC,UAE1CH,KAGAH,EAAQhO,SAAQqO,GAAUb,GAAiBa,EAAQ,QAASF,KAC5DI,GAAWJ,IAERF,CAAU,ECVrB,IAAAO,GAJuB,CAACR,EAAU,KACvBS,GAAmBT,GAASK,OC6BvC,IAAAK,GA3BqB,EAAGC,OAAMC,OAAMvB,WAAUwB,SAAQC,eAClD,IAEIC,EAFAC,GAAW,EACXhQ,EAAYiQ,KAEhB,MAAMC,EAAQ/Y,IACV6Y,GAAW,EACPpB,GAAGe,IACHQ,IACJvB,GAAGP,GAAU,EAAbO,CAAoBzX,EAAM,EAExBgZ,EAAO,KACTJ,EAASjM,IAAQ,IAAMgM,EAASI,IAAM,EAEpCE,EAAU,KACZtM,IAAQ,IAAM+L,EAAOE,IAAQ,EAUjC,OARApB,IAAU,KACN,KAAIiB,GAAQI,GAERhQ,KAGJ,OADAmQ,IACOC,CAAO,GACf,CAAEtQ,UAAU,IACRsQ,CAAO,EClBlB,IAAAC,GAT2BhC,GAChBiC,GAAa,CAChBjC,WACAuB,MAAM,EACNC,OAAQU,qBACRT,SAAUU,wBCIlB,IAAAC,GAT0BpC,GACfiC,GAAa,CAChBjC,WACAsB,MAAM,EACNE,OAAQU,qBACRT,SAAUU,wBCFlB,MAAME,GAAkB,CACpBC,OAAQ,KACJ,MAAM/V,EAAS8V,GAAgB7Y,MACzB+Y,EAAQxE,GAAE,GAKhB,MADa,CAAEyE,OAHAC,IAAQ,MAAQF,MAGRG,UAFL,CAACC,EAAK,KAAQpW,GAAQmW,UAAUC,GAAKJ,GAAMzF,GAAQA,EAAO6F,GAAG,EAE7CC,UADhB,CAACD,GAAK,IAAOtR,gBAAe,KAAQ9E,GAAQqW,UAAUD,GAAKJ,GAAMzF,GAAQA,EAAO6F,GAAG,IAE1F,EAEfnZ,IAAK,IACMkD,GAAQ7E,IAEnBgb,KAAOnZ,IACH,MAAMoZ,EAAOT,GAAgBC,SAC7B,OAAO5V,GAAQ,CAAE7E,CAACA,IAAkBib,IAAQ,IACjClV,IAAQ,IAAMlE,EAAGoZ,MAC1B,GAIV,IAAAC,GAAeV,GCkBf,IAAAW,GAzCA,MACIpX,cAEItC,KAAK2Z,UAAY,IAAI3Q,IAErBhJ,KAAK4Z,OAAS,CAACzR,EAAUkR,KACrB,MAAMQ,EAAU7Z,KAAK2Z,UAAUzZ,IAAIiI,IAAa,EAC1C2R,EAAcjU,KAAKC,IAAI,EAAG+T,EAAUR,GACtCQ,IAAYC,IAEZA,EACA9Z,KAAK2Z,UAAUrZ,IAAI6H,EAAU2R,GAG7B9Z,KAAK2Z,UAAU/X,OAAOuG,GAEtBkR,EAAK,EACLlR,EAASiR,UAAUC,GAGnBlR,EAASmR,UAAUD,GACtB,EAELrZ,KAAK+Z,QAAU,KACX,MAAM5R,EAAW4Q,GAAgB7Y,MAC5BiI,IAELnI,KAAK4Z,OAAOzR,EAAU,GACtByP,IAAW,KACP5X,KAAK4Z,OAAOzR,GAAW,EAAE,IAC3B,EAENnI,KAAKga,UAAY,KACbha,KAAK2Z,UAAUtQ,SAAQ,CAACwQ,EAAS1R,KAC7BnI,KAAK4Z,OAAOzR,GAAW0R,EAAQ,GACjC,CAET,GCtCL,MAAMzU,GAAU,CACZQ,KAAM,QAQV,IAAAqU,GAJyB7Z,GACd4W,GAAU5W,EAAIgF,IC6DzB,IAAA8U,GA1DqBC,IACjB,MAAMC,EAAU3F,IAAE,GACZ1R,EAAQ0R,KACRjV,EAAQiV,KACR4F,EAAS5F,MACTsF,QAAEA,EAAOC,UAAEA,GAAc,IAAIM,GAC7BC,EAAkB,CAAEH,SAAS,EAAU5a,YAAsBua,GAAU,EAAQM,aAAW,OAAOA,UAAiBN,GAAU,GAC5HS,EAAmB,CAAEJ,SAAS,EAAWrX,YAAU,OAAOA,KAAgBvD,YAAU,MAAMuD,KAAgBsX,aAAW,MAAMtX,GAAQ,GACnI0X,EAAmB,CAAEL,SAAS,EAAW5a,YAAU,OAAOA,GAAU,EAAM6a,aAAW,OAAO7a,GAAU,GACtGkb,EAAmB,CAAEN,QAAS,IAAMA,IAAWrX,MAAO,IAAMA,IAASvD,MAAO,IAAMmb,IAAWnb,MAAO6a,OAAQ,IAAMM,IAAWN,QAC7HM,EAAWlG,GAAE8F,GA6CnB,OA5CAK,IAAgB,KACZ,MAAMrY,EAAWsY,KACXC,EAAY,KACdV,GAAQ,GACRrX,OAAMlB,GACNrC,OAAMqC,GACN8Y,EAASJ,EAAgB,EAEvBQ,EAAaC,IACXzY,MAEJ6X,GAAQ,GACRrX,OAAMlB,GACNrC,GAAM,IAAMwb,IACZX,GAAO,IAAMW,IACbL,EAASF,GAAiB,EAExBQ,EAAYC,IACV3Y,MAEJ6X,GAAQ,GACRrX,EXrCM,CAACmY,GACXpF,GAAQoF,GACDA,EACPjF,GAASiF,GACF,IAAInb,MAAMmb,GACd,IAAInb,MAAM,iBWgCH8D,CAAUqX,IAChB1b,OAAMqC,GACNwY,OAAOxY,GACP8Y,EAASH,GAAiB,EAEhB,MACV,IACI,MAAMhb,EAAQyX,GAAGkD,KXKf,CAAC3a,GACRA,aAAiBiF,QWLR0W,CAAU3b,IACVsb,IACAtb,EAAM4b,KAAKL,EAAWE,GACtBzb,EAAM4b,KAAKpB,EAAWA,IAGtBe,EAAUvb,EAEjB,CACD,MAAOuD,GACHkY,EAASlY,EACZ,GAELsY,EAAO,IAEJ1F,GAAO2F,GAAYX,GAAWD,EAAiB,ECpD1D,IAAAa,GAViB,CAACC,EAASpT,IAChBqT,IAAY,IACRhF,GAAY,CAAC+E,EAASpT,IAAO,CAACoT,EAASpT,EAAO,MACjD,MAAMsP,EAASgE,GAAetT,EAAKsP,QAAU,IAE7C,OADAtP,EAAKsP,OAASA,EACP2D,MAAMG,EAASpT,EAAK,MCGvC,IAAAuT,GATwB,CAACjF,EAAUtR,IACxBuT,GAAa,CAChBjC,WACAuB,MAAM,EACNC,OAAQ0D,mBACRzD,SAAUzB,GAAYmF,oBAAoBnF,EAAUO,GAAG7R,MCI/D,IAAA0W,GAToB,CAACpF,EAAUtR,IACpBuT,GAAa,CAChBjC,WACAsB,MAAM,EACNE,OAAQ0D,mBACRzD,SAAUzB,GAAYmF,oBAAoBnF,EAAUO,GAAG7R,MCG/D,IAAA2W,GARoB,CAACrF,EAAUsF,IACpBrD,GAAa,CAChBjC,WACAwB,OAAQ+D,cACR9D,SAAUzB,GAAYwF,YAAYxF,EAAUO,GAAG+E,MCAvD,IAAAG,GAJoBC,GACTX,IAAY,IAAMxE,GAAGmF,KCQhC,IAAAC,GATmB,CAAC3F,EAAUsF,IACnBrD,GAAa,CAChBjC,WACAuB,MAAM,EACNC,OAAQoE,aACRnE,SAAUzB,GAAY3G,WAAW2G,EAAUO,GAAG+E,MCEtD,IAAAO,GARyB,KACrB,IAAIha,GAAW,EAIf,OADAqV,IADY,IAAMrV,GAAW,IADjB,IAAMA,CAGR,ECOd,IAAAia,GAVsBpc,IAClB,MAAMmC,EAAWsY,KACX4B,EAAeC,KACrB3U,gBAAe,KACPxF,KAEJka,EAAarc,EAAG,GAClB,ECRN,MCeMuc,GAAYvH,SAASD,cAAc,IACnCyH,GAAqB,CAACD,IACtBE,GAAoB,CAACF,IAsK3B,IAAAG,GArKa,CAAC7Z,EAAQ8Z,EAAQC,EAAOC,KACjC,GAAIF,IAAWC,EACX,OACAD,aAAkBG,OAClBN,GAAmB,GAAKG,EACxBA,EAASH,IAETI,aAAiBE,OACjBL,GAAkB,GAAKG,EACvBA,EAAQH,IAEZ,MAAMM,EAAUH,EAAM9d,OACtB,IAKIke,EALAC,EAAON,EAAO7d,OACdoe,EAAOH,EACPI,EAAS,EACTC,EAAS,EACT9T,EAAM,KAEV,KAAO6T,EAASF,GAAQG,EAASF,GAE7B,GAAID,IAASE,EAAQ,CAKjB,MAAME,EAAOH,EAAOH,EACfK,EACIR,EAAMQ,EAAS,GAAc,YAC9BR,EAAMM,EAAOE,GACjBP,EACAO,EAASF,IAELG,EACAA,EAAKV,OAAO5L,MAAMsM,EAAMT,EAAMU,MAAMF,EAAQF,IAG5Cra,EAAO0a,OAAOxM,MAAMlO,EAAQ+Z,EAAMU,MAAMF,EAAQF,IAEpDE,EAASF,EAEhB,MAEI,GAAIA,IAASE,EACd,KAAOD,EAASF,GAAM,CAElB,IAAK3T,IAAQA,EAAI/D,IAAIoX,EAAOQ,IAAU,CAClCH,EAAYL,EAAOQ,GACnB,IACIta,EAAO2a,YAAYR,EACtB,CACD,MAEC,CACJ,CACDG,GACH,MAGA,GAAIR,EAAOQ,KAAYP,EAAMQ,GAC9BD,IACAC,SAGC,GAAIT,EAAOM,EAAO,KAAOL,EAAMM,EAAO,GACvCD,IACAC,SAKC,GAAIP,EAAOQ,KAAYP,EAAMM,EAAO,IACrCN,EAAMQ,KAAYT,EAAOM,EAAO,GAAI,CAOpC,MAAMI,EAAOV,IAASM,GAAMJ,YAC5Bha,EAAO4a,aAAab,EAAMQ,KAAWT,EAAOQ,KAAUN,aACtDha,EAAO4a,aAAab,IAAQM,GAAOG,GAOnCV,EAAOM,GAAQL,EAAMM,EACxB,KAEI,CAMD,IAAK5T,EAAK,CACNA,EAAM,IAAIV,IACV,IAAI7J,EAAIqe,EACR,KAAOre,EAAIme,GACP5T,EAAIpJ,IAAI0c,EAAM7d,GAAIA,IACzB,CAED,GAAIuK,EAAI/D,IAAIoX,EAAOQ,IAAU,CAEzB,MAAMlX,EAAQqD,EAAIxJ,IAAI6c,EAAOQ,IAE7B,GAAIC,EAASnX,GAASA,EAAQiX,EAAM,CAChC,IAAIne,EAAIoe,EAEJO,EAAW,EACf,OAAS3e,EAAIke,GAAQle,EAAIme,GAAQ5T,EAAIxJ,IAAI6c,EAAO5d,MAASkH,EAAQyX,GAC7DA,IAWJ,GAAIA,EAAYzX,EAAQmX,EAAS,CAC7B,MAAMC,EAAOV,EAAOQ,GAChBC,EAASnX,IAELoX,EACAA,EAAKV,OAAO5L,MAAMsM,EAAMT,EAAMU,MAAMF,EAAQnX,IAG5CpD,EAAO0a,OAAOxM,MAAMlO,EAAQ+Z,EAAMU,MAAMF,EAAQnX,IAEpDmX,EAASnX,EAEhB,MAKGpD,EAAO8a,aAAaf,EAAMQ,KAAWT,EAAOQ,KAEnD,MAGGA,GACP,KAII,CACDH,EAAYL,EAAOQ,KACnB,IACIta,EAAO2a,YAAYR,EACtB,CACD,MAEC,CACJ,CACJ,CAELR,GAAmB,GAAKD,GACxBE,GAAkB,GAAKF,EAAS,ECtLpC,MAAMqB,GAAgB,GAEhBC,GAAgB,CAClBC,KAAM,KACK,CACHzU,YAAQ5H,EACR3C,OAAQ,IAGhBif,aAAeV,IACJ,CACHhU,OAAQgU,EACRve,OAAQ,IAGhBkf,iBAAmBC,IACR,CACH5U,OAAQ4U,EACRC,YAAY,EACZpf,OAAQ,IAGhBqf,sBAAuB,CAACC,EAAMC,EAAW,MACrC,MAAMhV,OAAEA,EAAMvK,OAAEA,GAAWsf,EAC3B,IAAKtf,EACD,OAAOuf,EACX,GAAIhV,aAAkB3K,MAClB,IAAK,IAAIK,EAAI,EAAGC,EAAIqK,EAAOvK,OAAQC,EAAIC,EAAGD,IAAK,CAC3C,MAAMK,EAAQiK,EAAOtK,GACjBK,aAAiB0d,KACjBuB,EAASnd,KAAK9B,GAGdye,GAAcM,sBAAsB/e,EAAOif,EAElD,MAGGhV,aAAkByT,KAClBuB,EAASnd,KAAKmI,GAGdwU,GAAcM,sBAAsB9U,EAAQgV,GAGpD,OAAOA,CAAQ,EAEnBC,YAAcF,GACLA,EAAKtf,OAELsf,EAAKF,WAEU,IAAhBE,EAAKtf,OACE+e,GAAcS,YAAYF,EAAK/U,QACnCwU,GAAcM,sBAAsBC,GAHhCA,EAAK/U,OAFLuU,GAOfW,aAAc,CAACH,EAAMH,KACjBJ,GAAcW,UAAUJ,EAAMH,GAC9BG,EAAKF,YAAa,CAAI,EAE1BO,SAAU,CAACL,EAAMf,KACbQ,GAAcW,UAAUJ,EAAMf,EAAK,EAEvCmB,UAAW,CAACJ,EAAMhf,KACd,MAAMiK,OAAEA,EAAMvK,OAAEA,GAAWsf,EACZ,IAAXtf,EACAsf,EAAK/U,OAASjK,EAEE,IAAXN,EACLsf,EAAK/U,OAAS,CAACA,EAAQjK,GAGvBiK,EAAOnI,KAAK9B,GAEhBgf,EAAKtf,QAAU,CAAC,EAEpB4f,gBAAiB,CAACN,EAAMf,KACpBe,EAAK/U,OAASgU,SACPe,EAAKF,WACZE,EAAKtf,OAAS,CAAC,EAEnB6f,oBAAqB,CAACP,EAAMH,KACxBG,EAAK/U,OAAS4U,EAAS5U,OACvB+U,EAAKF,WAAaD,EAASC,WAC3BE,EAAKtf,OAASmf,EAASnf,MAAM,GAIrC,IAAA8f,GAAef,GClFf,MAAMgB,GAAe,CAACzf,EAAO6R,EAAQ6N,GAAW,KAC5C,GAAI3f,GAAWC,GACNuW,GAAmBvW,GAIpBob,IAAgB,KACZqE,GAAazf,IAAS6R,GAAQ,EAAK,IAJvC4N,GAAazf,IAAS6R,EAAQ6N,QAQjC,GAAIrgB,GAAQW,GAAQ,CACrB,MAAOiK,EAAQ0V,GAAkBC,GAAwB5f,GACzDiK,EAAOjL,GAAmBgB,EAAMhB,GAChC6S,EAAO5H,EAAQ0V,GAAkBD,EACpC,MAEG7N,EAAO7R,EAAO0f,EACjB,EAECG,GAAe,CAACC,EAAS9W,EAAW,MACtC,GAAIyN,GAASqJ,GACTA,EAAQC,MAAM,QAAQxM,OAAOyM,SAASzM,QAAO0M,IACzCjX,EAASiX,IAAO,CAAI,SAGvB,GAAIlgB,GAAW+f,GAChBD,GAAaC,IAAW9W,QAEvB,GAAI3J,GAAQygB,GACbA,EAAQjW,SAAQoW,IACZJ,GAAaI,EAAKjX,EAAS,SAG9B,GAAI8W,EACL,IAAK,MAAMje,KAAOie,EAAS,GAEJrI,GADLqI,EAAQje,MAItBmH,EAASnH,IAAO,EACnB,CAEL,OAAOmH,CAAQ,EAEb4W,GAA0B,MAK5B,MAAMM,EAAiB,GACjBC,EAA+B,CAAClW,EAAQjB,EAAU2W,KACpD,IAAK,IAAIhgB,EAAI,EAAGC,EAAIqK,EAAOvK,OAAQC,EAAIC,EAAGD,IAAK,CAC3C,MAAMK,EAAQiK,EAAOtK,GACfygB,SAAcpgB,EACP,WAATogB,GAA8B,WAATA,GAA8B,WAATA,GACtCpX,IAAakX,IACblX,EAAWiB,EAAOiU,MAAM,EAAGve,IAC/BqJ,EAASlH,KAAKmU,GAAWjW,KAEX,WAATogB,GAAqB/gB,GAAQW,IAC9BgJ,IAAakX,IACblX,EAAWiB,EAAOiU,MAAM,EAAGve,IAC/BggB,EAAiBQ,EAA6BngB,EAAOgJ,EAAU2W,GAAgB,IAEjE,aAATS,GAAuBxV,GAAa5K,IACrCgJ,IAAakX,GACblX,EAASlH,KAAK9B,GAClB2f,GAAiB,GAGb3W,IAAakX,GACblX,EAASlH,KAAK9B,EAEzB,CAGD,OAFIgJ,IAAakX,IACblX,EAAWiB,GACR,CAACjB,EAAU2W,EAAe,EAErC,OAAQ1V,GACGkW,EAA6BlW,EAAQiW,GAAgB,EAEnE,EArC+B,GCpC1BG,GAAqB,MACvB,MAAMC,EAAoB,IAAIte,IAAI,CAAC,kBAAmB,QAAS,YAAa,WAAY,UAAW,WAAY,UAAW,WAAY,iBAAkB,SAAU,gBAAiB,QAAS,OAAQ,WAAY,QAAS,WAAY,aAAc,OAAQ,cAAe,WAAY,WAAY,WAAY,WAAY,aACpTue,EAAwB,iGACxBC,EAAkB,CAAA,EAClBC,EAAc,SAIpB,MAAO,CAAC/K,EAAS7T,EAAK7B,KACd0W,GAAMhB,IACN7T,EAAe,cAARA,GAA+B,eAARA,EAAwB,OALtC,CAACA,GACd2e,EAAgB3e,KAAS2e,EAAgB3e,GAAO0e,EAAsBxJ,KAAKlV,GAAOA,EAAMA,EAAI6e,QAAQD,GAAaE,GAAQ,IAAIA,EAAKC,mBAItEC,CAAgBhf,GAC3E2U,GAAMxW,KAAqB,IAAVA,GAAmBsgB,EAAkBna,IAAItE,GAC1D6T,EAAQoL,gBAAgBjf,GAGxB6T,EAAQqL,aAAalf,EAAKoP,OAAOjR,KAIjCwW,GAAMxW,KAAqB,IAAVA,GAAmBsgB,EAAkBna,IAAItE,GAC1D6T,EAAQoL,gBAAgBjf,IAGxB7B,GAAmB,IAAVA,EAAkB,GAAKiR,OAAOjR,GACvC0V,EAAQqL,aAAalf,EAAK7B,GAEjC,CAER,EA5B0B,GA6BrB+gB,GAAe,CAACrL,EAAS7T,EAAK7B,KAC5BD,GAAWC,IAAUuW,GAAmBvW,GACxCob,IAAgB,KACZiF,GAAmB3K,EAAS7T,EAAK7B,IAAQ,IAI7CqgB,GAAmB3K,EAAS7T,EAAK4V,GAAGzX,GACvC,EAWCghB,GAA0B,CAACC,EAAOC,KACpC,GAA2B,IAAvBA,EAAUC,SAEV,OADAD,EAAUE,UAAYH,EACfC,EAEN,CACD,MAAMzd,EAASyd,EAAUG,cACzB,IAAK5d,EACD,MAAM,IAAIlD,MAAM,6BACpB,MAAM+gB,EAAWrL,GAAWgL,GAE5B,OADAxd,EAAO8a,aAAa+C,EAAUJ,GACvBI,CACV,GAECC,GAAsB,CAACN,EAAOC,KAChC,MAAMd,SAAca,EACpB,GAAa,WAATb,GAA8B,WAATA,GAA8B,WAATA,EAC1CY,GAAwB/P,OAAOgQ,GAAQC,OAEtC,CACD,MAAMzd,EAASyd,EAAUG,cACzB,IAAK5d,EACD,MAAM,IAAIlD,MAAM,6BACpB,MAAMse,EAAWJ,GAAcE,aAAauC,GAC/B,aAATd,EAjCwB,EAAC3c,EAAQob,EAAUoC,KACnD7F,IAAgB,KACZ,IAAIhN,EAAY6S,IAChB,KAAOlhB,GAAWqO,IACdA,EAAYA,IAEhBoT,GAAe/d,EAAQob,GAAU,EAAOzQ,GAAW,EAAK,GAC1D,EA2BMqT,CAA4Bhe,EAAQob,EAAUoC,GAG9CS,GAASje,EAAQwd,EAAOpC,EAE/B,GAEC2C,GAAiB,CAAC/d,EAAQob,EAAU8C,EAAcV,EAAOW,KAC3D,IAAKA,QAAqBvf,IAAV4e,EACZ,OACJ,MAAMjN,EAAOyK,GAAcS,YAAYL,GACjCgD,EAAe7N,aAAgB1U,MAC/BwiB,EAAaD,EAAc7N,EAAKtU,OAAS,EACzCqiB,EAAYF,EAAc7N,EAAK,GAAKA,EACpCgO,EAAWH,EAAc7N,EAAK8N,EAAa,GAAK9N,EAChDiO,EAAcD,GAAUvE,aAAe,KAC7C,GAAmB,IAAfqE,EAAkB,CAClB,MAAM1B,SAAca,EACpB,GAAa,WAATb,GAA8B,WAATA,GAA8B,WAATA,EAAmB,CAC7D,MAAMkB,EAAWrL,GAAWgL,GAK5B,OAJKU,GACDle,EAAOye,YAAYZ,QAEvB7C,GAAca,gBAAgBT,EAAUyC,EAE3C,CACI,GAAa,WAATlB,GAA+B,OAAVa,GAA4C,iBAAnBA,EAAME,SAAuB,CAChF,MAAMlD,EAAOgD,EAKb,OAJKU,GACDle,EAAO4a,aAAaJ,EAAM,WAE9BQ,GAAca,gBAAgBT,EAAUZ,EAE3C,CACJ,CACD,GAAmB,IAAf6D,EAAkB,CAClB,MAAM1B,SAAca,EACpB,GAAa,WAATb,GAA8B,WAATA,GAA8B,WAATA,EAAmB,CAC7D,MAAMnC,EAAO+C,GAAwB/P,OAAOgQ,GAAQc,GAEpD,YADAtD,GAAca,gBAAgBT,EAAUZ,EAE3C,CACJ,CACD,MAAMkE,EAAe1D,GAAcC,OAC7BO,EAAY3f,MAAMD,QAAQ4hB,GAASA,EAAQ,CAACA,GAClD,IAAK,IAAIthB,EAAI,EAAGC,EAAIqf,EAASvf,OAAQC,EAAIC,EAAGD,IAAK,CAC7C,MAAMshB,EAAQhC,EAAStf,GACjBygB,SAAca,EACpB,GAAa,WAATb,GAA8B,WAATA,GAA8B,WAATA,EAC1C3B,GAAcY,SAAS8C,EAAclM,GAAWgL,SAE/C,GAAa,WAATb,GAA+B,OAAVa,GAA4C,iBAAnBA,EAAME,SACzD1C,GAAcY,SAAS8C,EAAclB,QAEpC,GAAa,aAATb,EAAqB,CAC1B,MAAMvB,EAAWJ,GAAcC,OAC/B,IAAI0D,GAAqBT,EACzBlD,GAAcU,aAAagD,EAActD,GACzCY,GAAawB,GAAO,CAACA,EAAOW,KACxB,MAAMD,EAAeS,EACrBA,GAAoB,EACpBZ,GAAe/d,EAAQob,EAAU8C,EAAcV,EAAOW,EAAQ,GAErE,CACJ,CACD,IAAI3N,EAAOwK,GAAcS,YAAYiD,GACjCE,EAAaF,EAAaziB,OAC9B,GAAmB,IAAf2iB,GAAmC,IAAfP,GAA2C,IAAvBC,EAAUZ,SAAtD,CAGA,IAAKQ,IAAgC,IAAfU,GAAoC,IAAfP,GAA2C,IAAvBC,EAAUZ,UAAmBlC,EAASjgB,IAAmB,CACpH,MAAMsjB,WAAEA,GAAe7e,EACvB,GAAI6e,EAAW5iB,SAAWoiB,EAAY,CAElC,GADAre,EAAO8e,YAAc,GACF,IAAfF,EAAkB,CAClB,MAAMG,EAAc7M,KACpB8I,GAAcY,SAAS8C,EAAcK,GACjCvO,IAASkO,EAAalY,SACtBgK,EAAOuO,EACPH,GAAc,EAErB,CAkBD,OAjBIJ,EACIhO,aAAgB3U,MAChB2iB,EAAY1E,OAAO5L,MAAMsQ,EAAahO,GAGtCxQ,EAAO4a,aAAapK,EAAMgO,GAI1BhO,aAAgB3U,MAChBmE,EAAO0a,OAAOxM,MAAMlO,EAAQwQ,GAG5BxQ,EAAO0a,OAAOlK,QAGtBwK,GAAcc,oBAAoBV,EAAUsD,EAE/C,CACJ,CACD,GAAmB,IAAfE,EAAkB,CAClB,MAAMG,EAAc7M,KACpB8I,GAAcY,SAAS8C,EAAcK,GACjCvO,IAASkO,EAAalY,SACtBgK,EAAOuO,EACPH,GAAc,EAErB,CACIV,GACDc,GAAKhf,EAAQuQ,EAAMC,EAAMgO,GAE7BxD,GAAcc,oBAAoBV,EAAUsD,EA5C3C,CA4CwD,EAEvDT,GAAW,CAACje,EAAQwd,EAAOpC,EAAWJ,GAAcC,UACtDe,GAAawB,EAAOO,GAAexgB,UAAKqB,EAAWoB,EAAQob,GAAU,GAAO,EAE1E6D,GJ5MgB,CAAChN,EAASoK,EAAS9U,KACrC,MAAM2X,UAAEA,GAAcjN,EAEtB,GAAIe,GAASkM,GAAY,CACrB,IAAKA,EACD,OAAI3X,OACA0K,EAAQiN,UAAY7C,QAIpB,EAGH,IAAK9U,GAAS2X,IAAc7C,EAE7B,YADApK,EAAQiN,UAAY,GAG3B,CAEG7C,EAAQhJ,SAAS,KACjBgJ,EAAQC,MAAM,KAAKlW,SAAQoW,IAClBA,EAAIvgB,QAETgW,EAAQkN,UAAUC,OAAO5C,IAAOjV,EAAM,IAI1C0K,EAAQkN,UAAUC,OAAO/C,IAAW9U,EACvC,EIiLC8X,GAAW,CAACpN,EAAS7T,EAAK7B,KACxBD,GAAWC,IAAUuW,GAAmBvW,GACxCob,IAAgB,KACZsH,GAAehN,EAAS7T,EAAK7B,IAAQ,IAIzC0iB,GAAehN,EAAS7T,EAAK4V,GAAGzX,GACnC,EAEC+iB,GAAwB,CAACrN,EAAS1V,EAAO6B,EAAKmhB,KAC5CA,IAAuB,IAAZA,GACXN,GAAehN,EAASsN,GAAS,GAEjCnhB,IAAe,IAARA,GACP6gB,GAAehN,EAAS7T,EAAK7B,EAChC,EAECijB,GAAkB,CAACvN,EAAS1V,EAAO6B,KACrC,GAAI9B,GAAW8B,IAAQ0U,GAAmB1U,GAAM,CAC5C,IAAImhB,EACJ5H,IAAgB,KACZ,MAAM8H,EAAUrhB,IAChBkhB,GAAsBrN,EAAS1V,EAAOkjB,EAASF,GAC/CA,EAAUE,CAAO,GAExB,MAEGH,GAAsBrN,EAAS1V,EAAOyX,GAAG5V,GAC5C,EAECshB,GAAmB,CAACzN,EAAS0N,EAAQC,KACvC,GAAI5M,GAAS2M,GACL1M,GAAMhB,GACNA,EAAQqL,aAAa,QAASqC,GAG9B1N,EAAQiN,UAAYS,MAGvB,CACD,GAAIC,EACA,GAAI5M,GAAS4M,GACLA,IACI3M,GAAMhB,GACNA,EAAQqL,aAAa,QAAS,IAG9BrL,EAAQiN,UAAY,SAI3B,GAAItjB,GAAQgkB,GAEb,IAAK,IAAI1jB,EAAI,EAAGC,GADhByjB,EAAatT,GAAM6E,OAAOyO,IACK3jB,OAAQC,EAAIC,EAAGD,IACrC0jB,EAAW1jB,IAEhBsjB,GAAgBvN,GAAS,EAAO2N,EAAW1jB,QAG9C,CACD0jB,EAAatT,GAAM6E,OAAOyO,GAC1B,IAAK,MAAMxhB,KAAOwhB,EACVD,GAAUvhB,KAAOuhB,GAErBN,GAASpN,EAAS7T,GAAK,EAE9B,CAEL,GAAIxC,GAAQ+jB,GACR,GAAIpQ,GAAQoQ,GACR,IAAK,IAAIzjB,EAAI,EAAGC,EAAIwjB,EAAO1jB,OAAQC,EAAIC,EAAGD,IAAK,CAC3C,MAAMiB,EAAK+L,IAAQ,IAAM5M,GAAWqjB,EAAOzjB,IAAMyjB,EAAOzjB,GAAKyjB,EAAOzkB,GAAyBsS,OAAOtR,MACpGsjB,GAAgBvN,GAAS,EAAM9U,EAClC,MAGD,IAAK,IAAIjB,EAAI,EAAGC,EAAIwjB,EAAO1jB,OAAQC,EAAIC,EAAGD,IACjCyjB,EAAOzjB,IAEZsjB,GAAgBvN,GAAS,EAAM0N,EAAOzjB,SAK9C,GAAIqT,GAAQoQ,GACR,IAAK,MAAMvhB,KAAOuhB,EAAQ,CACtB,MAAMxiB,EAAK+L,IAAQ,IAAM5M,GAAWqjB,EAAOvhB,IAAQuhB,EAAOvhB,GAAOuhB,EAAOzkB,GAAyBkD,KACjGihB,GAASpN,EAAS7T,EAAKjB,EAC1B,MAGD,IAAK,MAAMiB,KAAOuhB,EACdN,GAASpN,EAAS7T,EAAKuhB,EAAOvhB,GAI7C,GAECyhB,GAAa,CAAC5N,EAAS0N,KACzB,GAAIrjB,GAAWqjB,IAAW/jB,GAAQ+jB,GAAS,CACvC,IAAIC,EACJjI,IAAgB,KACZ,MAAMmI,EAAa1D,GAAauD,GAChCD,GAAiBzN,EAAS6N,EAAYF,GACtCA,EAAaE,CAAU,GAE9B,MAEGJ,GAAiBzN,EAAS0N,EAC7B,EAeCI,GAAiB,MAGnB,MAAMC,EAAkB,CACpBC,WAAY,CAAC,eAAe,GAC5BC,cAAe,CAAC,kBAAkB,GAClCC,QAAS,CAAC,YAAY,GACtBC,WAAY,CAAC,eAAe,GAC5BC,UAAW,CAAC,cAAc,GAC1BC,WAAY,CAAC,eAAe,GAC5BC,QAAS,CAAC,YAAY,GACtBC,UAAW,CAAC,cAAc,GAC1BC,QAAS,CAAC,YAAY,GACtBC,YAAa,CAAC,gBAAgB,GAC9BC,UAAW,CAAC,cAAc,IAyB9B,MAAO,CAAC1O,EAAS4B,EAAOtX,KACpB,GAAIsX,EAAM+M,WAAW,iBAAkB,CACnC,MAAMC,EAAStkB,EACfsX,EAAQ,aAAaA,EAAM4G,MAAM,MACjCle,EAAQskB,IAAYhN,GAA8B,IAApBA,EAAc,QAAWgN,EAAOhN,GACjE,CACD,MAAMiN,EAAYd,EAAgBnM,GAClC,GAAIiN,EACKA,EAAU,KACXA,EAAU,IAAK,EAhCV,CAACjN,IACd,MAAMzV,EAAM,IAAIyV,IAChB1B,SAAS8B,iBAAiBJ,EAAM4G,MAAM,IAAI5G,IACtC,MAAMjE,EAAUiE,EAAMkN,eACtB,IAAI/W,EAAS,KACbrO,OAAO+S,eAAemF,EAAO,gBAAiB,CAC1CrE,cAAc,EACdvS,IAAG,IACQ+M,IAGf,IAAK,IAAI9N,EAAI,EAAGC,EAAIyT,EAAQ3T,OAAQC,EAAIC,EAAGD,IAAK,CAC5C8N,EAAS4F,EAAQ1T,GACjB,MAAM4X,EAAU9J,EAAO5L,GACvB,GAAK0V,IAELA,EAAQD,GACJA,EAAMmN,cACN,KACP,CACDhX,EAAS,IAAI,GACf,EAYMiX,CAASpN,IAEb5B,EAAQ6O,EAAU,IAAMvkB,OAEvB,GAAIsX,EAAMqN,SAAS,WAAY,CAChC,MAAMC,EAAYtN,EAAMqN,SAAS,kBAC3BvE,EAAO9I,EAAM4G,MAAM,GAAI,GAAK0G,EAAY,EAAI,IAC5C/iB,EAAM,IAAIyV,IACVnJ,EAAYuH,EAAQ7T,GACtBsM,GACAuH,EAAQiC,oBAAoByI,EAAMjS,EAAW,CAAE0W,QAASD,IACxD5kB,GACA0V,EAAQgC,iBAAiB0I,EAAMpgB,EAAO,CAAE8kB,SAAS,EAAMD,QAASD,IACpElP,EAAQ7T,GAAO7B,CAClB,MACI,GAAIsX,EAAMqN,SAAS,WAAY,CAChC,MAAMvE,EAAO9I,EAAM4G,MAAM,GAAI,GACvBrc,EAAM,IAAIyV,IACVnJ,EAAYuH,EAAQ7T,GACtBsM,GACAuH,EAAQiC,oBAAoByI,EAAMjS,EAAW,CAAE0W,SAAS,IACxD7kB,GACA0V,EAAQgC,iBAAiB0I,EAAMpgB,EAAO,CAAE6kB,SAAS,IACrDnP,EAAQ7T,GAAO7B,CAClB,MAEG0V,EAAQ4B,GAAStX,CACpB,CAER,EA9EsB,GA+EjB+kB,GAAW,CAACrP,EAAS4B,EAAOtX,KAC9BwjB,GAAe9N,EAAS4B,EAAOtX,EAAM,EAKnCglB,GAAU,CAACtP,EAAS1V,KACtBob,IAAgB,KAJE,EAAC1F,EAAS1V,KAC5B0V,EAAQuP,UAAYhU,OAAOuF,GAAMxW,GAAS,GAAKA,EAAM,EAIjDklB,CAAcxP,EAAS+B,GAAGA,GAAGzX,GAAOmlB,QAAQ,GAC9C,EAEAC,GAAoB,CAAC1P,EAAS7T,EAAK7B,KACzB,aAAR6B,GxB5YU,CAAC7B,GACS,kBAAVA,EwB2YYqlB,CAAUrlB,KAChCA,EAAQA,EAAQ,OAAIqC,GAEZ,UAARR,GAAuC,WAApB6T,EAAQ4P,SAAyB5P,EAAkB,WACtEA,EAAkB,UAAI,EACtBnN,gBAAe,IAAMmN,EAAQ7T,GAAO7B,KAExC0V,EAAQ7T,GAAO7B,EACXwW,GAAMxW,IACNqgB,GAAmB3K,EAAS7T,EAAK,KACpC,EAEC0jB,GAAc,CAAC7P,EAAS7T,EAAK7B,KAC3BD,GAAWC,IAAUuW,GAAmBvW,GACxCob,IAAgB,KACZgK,GAAkB1P,EAAS7T,EAAK7B,IAAQ,IAI5ColB,GAAkB1P,EAAS7T,EAAK4V,GAAGzX,GACtC,EAECwlB,GAAS,CAAC9P,EAAS1V,KACrB,GAAIwW,GAAMxW,GACN,OACJ,MAAMiK,ExBpbM,CAACxI,IACb,IAAK,IAAI9B,EAAI,EAAGC,EAAI6B,EAAI/B,OAAQC,EAAIC,EAAGD,IACnC,GAAKN,GAAQoC,EAAI9B,IAEjB,OAAO8B,EAAIgkB,KAAKC,KAEpB,OAAOjkB,CAAG,EwB8aKkkB,CAAQvP,GAAUpW,IAAQuT,OAAOyM,SAC3C/V,EAAOvK,QAEZkmB,IAAa,IAAMjZ,IAAQ,IAAM1C,EAAOJ,SAAQ7J,GAASA,IAAQ0V,QAAW,EAE1EmQ,GAAiB,MAInB,MAAMC,EAA2B,qHAC3BC,EAA8B,CAAA,EACpC,MAAO,CAACrQ,EAAS7T,EAAK7B,KACQ,KAAtB6B,EAAImkB,WAAW,GACXxP,GAAMxW,GACN0V,EAAQuQ,MAAMC,eAAerkB,GAG7B6T,EAAQuQ,MAAMV,YAAY1jB,EAAKoP,OAAOjR,IAGrCwW,GAAMxW,GACX0V,EAAQuQ,MAAMpkB,GAAO,KAGrB6T,EAAQuQ,MAAMpkB,GAAQ4U,GAASzW,IAAW+lB,EAA4BlkB,KAASkkB,EAA4BlkB,GAAOikB,EAAyB/O,KAAKlV,IAAS7B,EAAQ,GAAGA,KACvK,CAER,EAtBsB,GAuBjBmmB,GAAW,CAACzQ,EAAS7T,EAAK7B,KACxBD,GAAWC,IAAUuW,GAAmBvW,GACxCob,IAAgB,KACZyK,GAAenQ,EAAS7T,EAAK7B,IAAQ,IAIzC6lB,GAAenQ,EAAS7T,EAAK4V,GAAGzX,GACnC,EAEComB,GAAkB,CAAC1Q,EAAS0N,EAAQC,KACtC,GAAI5M,GAAS2M,GACT1N,EAAQqL,aAAa,QAASqC,OAE7B,CACD,GAAIC,EACA,GAAI5M,GAAS4M,GACLA,IACA3N,EAAQuQ,MAAMI,QAAU,QAG3B,CACDhD,EAAatT,GAAM6E,OAAOyO,GAC1B,IAAK,MAAMxhB,KAAOwhB,EACVD,GAAUvhB,KAAOuhB,GAErByC,GAAenQ,EAAS7T,EAAK,KAEpC,CAEL,GAAImR,GAAQoQ,GACR,IAAK,MAAMvhB,KAAOuhB,EAAQ,CACtB,MAAMxiB,EAAK+L,IAAQ,IAAM5M,GAAWqjB,EAAOvhB,IAAQuhB,EAAOvhB,GAAOuhB,EAAOzkB,GAAyBkD,KACjGskB,GAASzQ,EAAS7T,EAAKjB,EAC1B,MAGD,IAAK,MAAMiB,KAAOuhB,EACd+C,GAASzQ,EAAS7T,EAAKuhB,EAAOvhB,GAGzC,GAECykB,GAAY,CAAC5Q,EAAS0N,KACxB,GAAIrjB,GAAWqjB,IAAW7M,GAAmB6M,GAAS,CAClD,IAAIC,EACJjI,IAAgB,KACZ,MAAMmI,EAAaH,IACnBgD,GAAgB1Q,EAAS6N,EAAYF,GACrCA,EAAaE,CAAU,GAE9B,MAEG6C,GAAgB1Q,EAAS+B,GAAG2L,GAC/B,EAwCCmD,GAAU,CAAC7Q,EAAS7T,EAAK7B,KxBnfJ,CAACA,GACjBD,GAAWC,IAAWuV,MAA4BvV,EwBmfrDwmB,CAAmBxmB,GAvCC,EAAC0V,EAAS7T,EAAK7B,KACvC,GAAY,aAAR6B,EAAoB,CACpB,MAAM2gB,EAAcvM,GAAW,IAC/BP,EAAQ2I,aAAamE,EAAa,MAClCxiB,EAAM0V,EAAS,2BAAuBrT,EAAWmgB,EACpD,KACgB,QAAR3gB,EACL7B,EAAM0V,EAAS,UAEF,UAAR7T,EACL7B,EAAM0V,EAAS,aAEF,UAAR7T,GACA6U,GAAMhB,KACPA,EAAQiN,UAAY,IAExB3iB,EAAM0V,EAAS,eAEF,4BAAR7T,EACL7B,EAAM0V,EAAS,WAEY,MAAtB7T,EAAImkB,WAAW,IAAoC,MAAtBnkB,EAAImkB,WAAW,GACjDhmB,EAAM0V,EAAS,WAAY7T,EAAI+e,eAEJ,MAAtB/e,EAAImkB,WAAW,IAAoC,KAAtBnkB,EAAImkB,WAAW,GACjDhmB,EAAM0V,EAAS,eAAgB7T,EAAIqc,MAAM,IAE5B,cAARrc,GAA+B,cAARA,GAA+B,gBAARA,GAAiC,cAARA,IAGvEA,KAAO6T,IAAYgB,GAAMhB,GAC9B1V,EAAM0V,EAAS,cAAe7T,IAG9B6T,EAAQqL,aAAalf,EAAK,IAC1B7B,EAAM0V,EAAS,eAAgB7T,IAClC,EAIG4kB,CAAoB/Q,EAAS7T,EAAK7B,GAErB,aAAR6B,EACL6f,GAAShM,EAAS1V,GAEL,QAAR6B,EACL2jB,GAAO9P,EAAS1V,GAEH,UAAR6B,EACLykB,GAAU5Q,EAAS1V,GAEN,UAAR6B,EACLyhB,GAAW5N,EAAS1V,GAEP,4BAAR6B,EACLmjB,GAAQtP,EAAS1V,GAEU,MAAtB6B,EAAImkB,WAAW,IAAoC,MAAtBnkB,EAAImkB,WAAW,GACjDjB,GAASrP,EAAS7T,EAAI+e,cAAe5gB,GAEV,MAAtB6B,EAAImkB,WAAW,IAAoC,KAAtBnkB,EAAImkB,WAAW,GAjRpC,EAACtQ,EAASgR,EAAWvR,KACtC,MAAMxR,EAAS6R,GAAmBkR,IAActoB,SAC1C4b,EAAOpW,GAAQD,IAAW2R,GAAW3R,GAC3C,IAAKqW,EACD,MAAM,IAAIzZ,MAAM,cAAcmmB,gBAClC,MAAMjkB,EAAO,IAAMuX,EAAKpZ,GAAG8U,KAAYU,GAAUjB,IAC7C6E,EAAK2M,UACLlkB,IAGAmjB,GAAanjB,EAChB,EAuQGmkB,CAAalR,EAAS7T,EAAIqc,MAAM,GAAIle,GAEvB,cAAR6B,GAA+B,cAARA,GAA+B,gBAARA,GAAiC,cAARA,IAGvEA,KAAO6T,IAAYgB,GAAMhB,GAC9B6P,GAAY7P,EAAS7T,EAAK7B,GAG1B+gB,GAAarL,EAAS7T,EAAK7B,GAC9B,EChjBL,IAAA6mB,GArCsB,CAACC,EAAWC,KAAUC,KACxC,MAAQ/H,SAAUgI,EAAUplB,IAAEA,EAAGqlB,IAAEA,KAAQC,GAAUJ,GAAS,CAAA,EACxD9H,EAAiC,IAArB+H,EAAUtnB,OAAgBsnB,EAAU,GAA2B,IAArBA,EAAUtnB,OAAgBunB,EAAaD,EACnG,GAAIjnB,GAAW+mB,GAAY,CACvB,MAAMC,EAAQI,EAKd,OAJK3Q,GAAMyI,KACP8H,EAAM9H,SAAWA,GAChBzI,GAAM0Q,KACPH,EAAMG,IAAMA,GACTE,IAAY,IACRza,IAAQ,IAAMma,EAAUrkB,KAAKqkB,EAAWC,MAEtD,CACI,GAAItQ,GAASqQ,GAAY,CAC1B,MAAMC,EAAQI,EACRzQ,EAAQC,GAAamQ,GACrBO,EAAa3Q,EAAQX,GAAgBF,GAK3C,OzBmDG7V,OADUA,EyBtDIif,IzBuD4C,kBAAVjf,GAAwC,iBAAVA,IyBtD7E+mB,EAAM9H,SAAWA,GAChBzI,GAAM0Q,KACPH,EAAMG,IAAMA,GACTE,IAAY,KACf,MAAMnG,EAAQoG,EAAWP,GAIzB,OAHIpQ,IACAuK,EAAa,OAAI,GACrBtU,IAAQ,ID8jBH,EAAC+I,EAAS0N,KACvB,IAAK,MAAMvhB,KAAOuhB,EACdmD,GAAQ7Q,EAAS7T,EAAKuhB,EAAOvhB,GAChC,ECjkBqBylB,CAASrG,EAAO8F,KACvB9F,CAAK,GAEnB,CACI,GzBaM,CAACjhB,GACLA,aAAiB0d,KyBdf6J,CAAOT,GACZ,OAAOM,IAAY,IAAMN,IAGzB,MAAM,IAAIvmB,MAAM,qBzBsCJ,IAACP,CyBrChB,EC9BL,IAAAwnB,GANgB,EAAGV,YAAWC,QAAO9H,cAC1BtF,IAAQ,IACJ7U,GAAQgR,GAAc2B,GAAGqP,GAAW,GAAQrP,GAAGsP,GAAQ9H,MCCtE,IAAAwI,GAJsB,EAAG5a,WAAUoS,cACxByI,GAASzI,GAAU8H,GAASpa,IAAQ,IAAM5M,GAAW8M,GAAYA,EAASka,GAASla,MCJ9F,SAAS8a,IAAI1d,OAAEA,EAAM4C,SAAEA,EAAQf,OAAEA,EAAM8b,QAAEA,EAAO3I,SAAEA,IAC9C,OCQJ,SAAchV,EAAQrJ,EAAIiM,EAAW,GAAIjH,GACrC,MAAMhD,EAAEA,EAACsH,IAAEA,GAAQtE,GAASgiB,QAAU,IAAIC,GAAajnB,IAAMgF,EAAQkG,QAAU,IAAIgc,GAAWlnB,GAC9F4B,GAAQI,GACR,MAAM5C,EAAQ6H,IAAK,IACRnH,GAAIuJ,IACZ,CACCpE,OAAQ,CAACoO,EAAMD,OACFC,IAAUD,GAASC,EAAKvU,QAAWsU,EAAKtU,QAAWsT,GAAQiB,IAAUjB,GAAQgB,MAG9F,OAAOnM,IAAK,KACR,MAAMkgB,EAAQ/nB,IAId,OAHIgT,GAAQ+U,IACRA,EAAMlpB,GAEH8N,IAAQ,KACX,MAAMvC,EAAUF,EAAI6d,GACpB,OAAO3d,GAAS1K,OAAS0K,EAAUtF,GAAQ+H,EAAS,GACtD,GACH,CACChH,OAAQ,CAACoO,EAAMD,IACJ3U,EAAQ4U,MAAWA,EAAK9V,IAAkBkB,EAAQ2U,IAASzU,EAAQ0U,EAAMD,IAG5F,CDhCWgU,CAAK/d,EAAQgV,EAAUpS,EAAU,CAAEf,SAAQ8b,WACtD,CEEA,IAAAK,GAJiB,EAAGhJ,cACTA,ECoBX,IAAAiJ,GAhBmB,CAACloB,EAAOmoB,KACvB,IAAIC,EACJ,MAAMC,EAAU1O,IAAQ,KACpB,MAAMzJ,EAAUuH,GAAGzX,GACnB,OAAKmoB,EAAMjY,GAEJkY,EAAYlY,EADRkY,CACe,IAE9B,MAAO,KACH,MAAMlY,EAAUmY,IAChB,GAAI7R,GAAMtG,GACN,MAAM,IAAI3P,MAAM,yCACpB,OAAO2P,CAAO,CACjB,ECFL,IAAAoY,GAVW,EAAG7c,OAAMoB,WAAUoS,eAC1B,IAAIlf,GAAWkf,IAAcrU,GAAaqU,IhCwBnClf,GADUC,EgCvBmDif,IhCwBvC/f,KAA8Bc,EgCnBvD,OAAOuoB,GAAQ9c,EAAMwT,EAAUpS,GAL4C,CAC3E,MAAM2b,EAASC,GAAWhd,EAAMuL,IAChC,OAAOuR,GAAQ9c,EAAMid,IAAa,IAAMzJ,EAASuJ,KAAU3b,EAC9D,ChCoBe,IAAC7M,CgCjBhB,ECLL,MAAM2oB,GAAQ,CAAA,EACRC,GAAmB1L,KACzB,IAAI2L,GAAS,EA0Cb,IAAAC,GAvCkB,EAAGC,KAAIC,MAAK/J,cACnBtF,IAAQ,IACJ1C,GAAY,CAAC8R,EAAIC,IAAM,CAACD,EAAIC,KAC/B,MAAMC,EAAOJ,KACPK,EAAOP,GAAMI,KAAQJ,GAAMI,GAAM,CAAEA,KAAIE,SA8B7C,OA7BAC,EAAKD,KAAOA,EACZC,EAAKtZ,UACLsZ,EAAKrgB,YAAcqgB,EAAKrgB,UAAYoM,IAAE,IACtCiU,EAAKrgB,WAAU,GACVqgB,EAAKjQ,SAAYiQ,EAAK1N,QACvBoN,IAAiB,KACbO,IAAQlQ,IACJiQ,EAAKjQ,QAAU,YACJ0P,GAAMI,GACb9P,GAAS,EAEbmQ,GAAYF,EAAKrgB,WAAW,KACxBqgB,EAAK1N,OAAS1W,GAAQma,EAAS,GACjC,GACJ,IAGV7G,IAAW,KACP,MAAMiR,EAAU,IAAMJ,IAASC,EAAKD,KACpC,IAAKI,IACD,OAEJ,GADAH,EAAKrgB,aAAY,IACZmgB,GAAOA,GAAO,GAAKA,GAAOtD,IAC3B,OACJ,MACM4D,EAAY/Y,YADF,IAAM8Y,KAAaH,EAAKjQ,aACF+P,GAEtCE,EAAKtZ,MADS,IAAMkN,aAAawM,EACf,IAEfJ,EAAK1N,MAAM,MChC9B,IAAA+N,GAbe,CAACtI,EAAOxd,KACnB,KAAKA,GAAYA,aAAkB+lB,aAC/B,MAAM,IAAIjpB,MAAM,uBAEpB,OADAkD,EAAO8e,YAAc,GACd4G,IAAQlQ,IACXyI,GAASje,EAAQwd,GACV,KACHhI,IACAxV,EAAO8e,YAAc,EAAE,IAE7B,ECkBN,IAAAkH,GAxBe,EAAGhe,QAAO,EAAMie,QAAOC,UAAS1K,eAC3C,MAAM2K,EAASnS,GAAGkS,IAAY9T,GAAe,OAC7C,KAAM+T,aAAkBJ,aACpB,MAAM,IAAIjpB,MAAM,wBACpB,MAAMoL,EAAYke,GAAWpe,GAiB7B,OAhBA2P,IAAgB,KACZ,IAAK3D,GAAG9L,GACJ,OACJ,MAAMlI,EAASgU,GAAGiS,IAAU9T,SAASkU,KACrC,KAAMrmB,aAAkBsmB,SACpB,MAAM,IAAIxpB,MAAM,sBAEpB,OADAkD,EAAO4a,aAAauL,EAAQ,MACrB,KACHnmB,EAAO2a,YAAYwL,EAAO,CAC7B,IAELxO,IAAgB,KACZ,GAAK3D,GAAG9L,GAER,OAAOqe,GAAO/K,EAAU2K,EAAO,IAE5BzT,IAAO,IAAMsB,GAAG9L,IAAcsT,GAAU,CAAEgL,SAAU,CAAEL,WAAW,ECb5E,IAAAM,GARiB,EAAGze,OAAMoB,WAAUoS,cACzB1F,GAAgBQ,MAAKpR,IACxB,MAAMgD,EAAYgO,IAAQ,MAAQlC,GAAGhM,IAAS9C,EAAS+Q,WACjDyQ,EAAoBf,GAAYzd,GAAW,IAAM7G,GAAQma,KAC/D,OAAOsJ,GAAQ5c,EAAWkB,EAAUsd,EAAkB,ICP9D,MAAMC,GAAS,EAAG3e,OAAMoB,WAAUoS,cAGvBnS,GAAQrB,EAFY2K,GAAU6I,GACH/U,KAAI+W,GAASA,IAAQgJ,WAC1Bpd,GAG3Bwd,GAACC,KAAO,EAAG7e,OAAMwT,cAEZ9I,IAAO,IAAM8I,GADH,CAAEgL,SAAU,CAACxe,EAAMwT,KAGxCmL,GAAOG,QAAU,EAAGtL,cAET9I,IAAO,IAAM8I,GADH,CAAEgL,SAAU,CAAChL,KAIlC,IAAAuL,GAAeJ,GCbf,IAAAK,GAJgB,EAAGhf,OAAMwT,cACdsJ,GAAQ9c,EAAMwT,EAAS,GAAIA,EAAS,ICC/C,MAAMyL,GAAM,CAAC5D,EAAWC,IACbjR,GAAcgR,EAAWC,GCqBpC,IAAA4D,GAtBwB,CAACC,EAAMhqB,EAAIgF,KAC/B,MACMoU,EAAO,CAAEpZ,KAAI+lB,YADC/gB,GAAS+gB,WAEvBhjB,EAAU6R,GAAmBoV,KAAUpV,GAAmBoV,GAAQxsB,UAgBxE,MAAO,CAAEysB,SAfQ,EAAG5L,cACTrb,GAAQ,CAAED,CAACA,GAASqW,IAAQ,IACxBlV,GAAQma,KAaJiI,IAVP,IAAI/R,IACJO,IACJ9U,EAAG8U,KAAYP,EAAK,EAQJ2V,SALP,KACb,GAAInnB,KAAU2R,GACV,MAAM,IAAI/U,MAAM,0CACpB+U,GAAW3R,GAAUqW,CAAI,EAEK,ECjBtC,MAAM+Q,GAAe,2BAEfC,GAAwB5sB,OAAO,YAC/B6sB,GAAuB7sB,OAAO,WAC9B8sB,GAAgB9sB,OAAO,UACvB+sB,GAAU,IAAI1a,QAkEpB,IAAA2a,GA9DY,CAACC,EAAQvE,KACjB,GAAIuE,EAAQ,CAER,MAAM9gB,EAASuc,EAAUmE,IACzB,GAAI1gB,EACA,OAAOA,EAEX,IADoBxK,GAAW+mB,IAAe,aAAcA,EAExD,OAAOA,EAEX,MAAMwE,EAAsBC,GACjB,IAAIpW,IACAwE,IAAQ,KACX,MAAMmN,EAAYyE,EAAKC,QAAO,CAAC1E,EAAWjlB,IAAQilB,EAAUjlB,IAAMspB,GAAQzqB,IAAIqoB,IAAZoC,MAAyBM,KAE3F,OADe3mB,GAAQ6H,IAAQ,IAAMma,KAAa3R,KACrC,IAInBuW,EAAyB,CAAC5E,EAAWyE,KACvC,MAAMhhB,EAASuc,EAAUmE,IACzB,GAAI1gB,EACA,OAAOA,EACX,MAAMohB,EAAM7E,EAAUmE,IAAwBK,EAAmBC,GACjE,IAAK,MAAM1pB,KAAOilB,EAAW,CACzB,MAAM9mB,EAAQ8mB,EAAUjlB,GACpB9B,GAAWC,IAAU+qB,GAAahU,KAAKlV,GACvC8pB,EAAI9pB,GAAO6pB,EAAuB1rB,EAAO,IAAIurB,EAAM1pB,IAGnD8pB,EAAI9pB,GAAO7B,CAElB,CACD,OAAO2rB,CAAG,EAERC,EAAYC,IACd,MAAMF,EAAME,EAAO/E,EAAmB,aAAM+E,EAAO/E,EAAU8D,OAASiB,EAAOC,QAC7E,IAAKH,EACD,OAAOI,QAAQxoB,MAAM,sCAAsCujB,EAAU8D,uBAAwB9D,GACjG,MAAMkF,EAAOL,EAAIX,KAA0BW,EAC3CA,EAAIT,MAAiBnC,KACrBoC,GAAQzqB,IAAIqoB,IAAZoC,IAAoB,IAAMa,GAAK,EAG7BjD,EAAK9T,GAAE,CAAA,GACPwW,EAASxW,GAAE6R,GACjBqE,GAAQrqB,IAAIioB,IAAM0C,GAClB,MAAMO,EAAOlF,EAAUkE,KAA0BlE,EAC3C6E,EAAMD,EAAuB5E,EAAW,IAO9C,OANAkF,EAAKf,IAAwBU,EAC7BA,EAAIX,IAAyBgB,EAC7BL,EAAIV,IAAwBU,EAC5BA,EAAIT,IAAiBnC,EACrBsC,EAAOO,GAEAD,CACV,CAEG,OAAO7E,CACV,EC3EDmF,GAAE,SAASC,EAAEhqB,EAAEgD,EAAEinB,GAAG,IAAIC,EAAElqB,EAAE,GAAG,EAAE,IAAI,IAAImqB,EAAE,EAAEA,EAAEnqB,EAAExC,OAAO2sB,IAAI,CAAC,IAAIC,EAAEpqB,EAAEmqB,KAAK7sB,EAAE0C,EAAEmqB,IAAInqB,EAAE,IAAIoqB,EAAE,EAAE,EAAEpnB,EAAEhD,EAAEmqB,OAAOnqB,IAAImqB,GAAG,IAAIC,EAAEH,EAAE,GAAG3sB,EAAE,IAAI8sB,EAAEH,EAAE,GAAG/sB,OAAO+W,OAAOgW,EAAE,IAAI,CAAE,EAAC3sB,GAAG,IAAI8sB,GAAGH,EAAE,GAAGA,EAAE,IAAI,IAAIjqB,IAAImqB,IAAI7sB,EAAE,IAAI8sB,EAAEH,EAAE,GAAGjqB,IAAImqB,KAAK7sB,EAAE,GAAG8sB,GAAGF,EAAEF,EAAEva,MAAMnS,EAAEysB,GAAEC,EAAE1sB,EAAE0F,EAAE,CAAC,GAAG,QAAQinB,EAAErqB,KAAKsqB,GAAG5sB,EAAE,GAAG0C,EAAE,IAAI,GAAGA,EAAEmqB,EAAE,GAAG,EAAEnqB,EAAEmqB,GAAGD,IAAID,EAAErqB,KAAKtC,EAAE,CAAC,OAAO2sB,CAAC,EAAED,GAAE,IAAI1iB,ICKtU,MAAM+iB,GAAW,CAAA,EAIXC,GAAOrW,GDT4U,SAASjU,GAAG,IAAIgD,EAAEgnB,GAAExrB,IAAIF,MAAM,OAAO0E,IAAIA,EAAE,IAAIsE,IAAI0iB,GAAEprB,IAAIN,KAAK0E,KAAKA,EAAE+mB,GAAEzrB,KAAK0E,EAAExE,IAAIwB,KAAKgD,EAAEpE,IAAIoB,EAAEgD,EAAE,SAAS+mB,GAAG,IAAI,IAAIC,EAAEhqB,EAAEgD,EAAE,EAAEinB,EAAE,GAAGC,EAAE,GAAGC,EAAE,CAAC,GAAGC,EAAE,SAASL,GAAG,IAAI/mB,IAAI+mB,IAAIE,EAAEA,EAAEzL,QAAQ,uBAAuB,MAAM2L,EAAEvqB,KAAK,EAAEmqB,EAAEE,GAAG,IAAIjnB,IAAI+mB,GAAGE,IAAIE,EAAEvqB,KAAK,EAAEmqB,EAAEE,GAAGjnB,EAAE,GAAG,IAAIA,GAAG,QAAQinB,GAAGF,EAAEI,EAAEvqB,KAAK,EAAEmqB,EAAE,GAAG,IAAI/mB,GAAGinB,IAAIF,EAAEI,EAAEvqB,KAAK,EAAE,GAAE,EAAGqqB,GAAGjnB,GAAG,KAAKinB,IAAIF,GAAG,IAAI/mB,KAAKmnB,EAAEvqB,KAAKoD,EAAE,EAAEinB,EAAEjqB,GAAGgD,EAAE,GAAG+mB,IAAII,EAAEvqB,KAAKoD,EAAE+mB,EAAE,EAAE/pB,GAAGgD,EAAE,IAAIinB,EAAE,EAAE,EAAE3sB,EAAE,EAAEA,EAAEysB,EAAEvsB,OAAOF,IAAI,CAACA,IAAI,IAAI0F,GAAGonB,IAAIA,EAAE9sB,IAAI,IAAI,IAAII,EAAE,EAAEA,EAAEqsB,EAAEzsB,GAAGE,OAAOE,IAAIssB,EAAED,EAAEzsB,GAAGI,GAAG,IAAIsF,EAAE,MAAMgnB,GAAGI,IAAID,EAAE,CAACA,GAAGnnB,EAAE,GAAGinB,GAAGD,EAAE,IAAIhnB,EAAE,OAAOinB,GAAG,MAAMD,GAAGhnB,EAAE,EAAEinB,EAAE,IAAIA,EAAED,EAAEC,EAAE,GAAGC,EAAEF,IAAIE,EAAEA,EAAE,GAAGD,GAAGD,EAAE,MAAMA,GAAG,MAAMA,EAAEE,EAAEF,EAAE,MAAMA,GAAGI,IAAIpnB,EAAE,GAAGA,IAAI,MAAMgnB,GAAGhnB,EAAE,EAAEhD,EAAEiqB,EAAEA,EAAE,IAAI,MAAMD,IAAIhnB,EAAE,GAAG,MAAM+mB,EAAEzsB,GAAGI,EAAE,KAAK0sB,IAAI,IAAIpnB,IAAImnB,EAAEA,EAAE,IAAInnB,EAAEmnB,GAAGA,EAAEA,EAAE,IAAIvqB,KAAK,EAAE,EAAEoD,GAAGA,EAAE,GAAG,MAAMgnB,GAAG,OAAOA,GAAG,OAAOA,GAAG,OAAOA,GAAGI,IAAIpnB,EAAE,GAAGinB,GAAGD,GAAG,IAAIhnB,GAAG,QAAQinB,IAAIjnB,EAAE,EAAEmnB,EAAEA,EAAE,GAAG,CAAC,OAAOC,IAAID,CAAC,CAAptB,CAAstBnqB,IAAIgD,GAAG5E,UAAU,KAAKZ,OAAO,EAAEwF,EAAEA,EAAE,EAAE,ECS7pClE,MAHd,CAACof,EAAM2G,KAAU9H,IAAanJ,GAAcyW,GAASnM,IAASA,EAAM2G,KAAU9H,KAGvD,CAAE6L,SAFjB2B,IAAoBtW,GAAOoW,GAAUE,EAAW,IAIlE,IAAAC,GAAeF,GC2Bf,IAAAG,GA9BchS,IACV,MAAMiS,E5C4EG,CAAChsB,IACV,IACI4a,EADAqR,GAAS,EAEb,MAAO,KACEA,IACDA,GAAS,EACTrR,EAAS5a,KAEN4a,EACV,E4CrFmB/C,CAAKkC,GACnBmM,EAAaC,IACf,MAAM5L,EAAWc,GAAY2Q,GAC7B,OAAOjT,IAAQ,IACJ1C,GAAYkE,GAAU,EAAGP,UAASrX,QAAOvD,YAC5C,GAAI4a,EACA,OACJ,GAAIrX,EACA,MAAMA,EACV,MAAMujB,EAAa,YAAa9mB,EAASA,EAAM8rB,QAAU9rB,EACzD,OAAO8E,GAAQ+hB,GAAaC,EAAWC,GAAO,KAEpD,EAcN,OAZAD,EAAUgG,QAAU,IACT,IAAI7nB,SAAQ,CAACH,EAASioB,KAEzB9V,GADiBgF,GAAY2Q,IACP,EAAGhS,UAASrX,YAC9B,IAAIqX,EAEJ,OAAIrX,EACOwpB,EAAOxpB,GACXuB,GAAS,GAClB,IAGHgiB,CAAS,ECPpB,IAAAkG,GAlBwB/L,GACb,IAAIhc,SAAQH,IACfqkB,IAAQlQ,IACJrV,GAAQ,CAAE7E,CAACA,SAAkBsD,IAAa,KACtCkX,GAAgBQ,MAAKpR,IACjB,MAAMihB,OAAEA,GAAWqD,GAAO,CAAEhO,SAAUvT,GAAS,CAAEuT,SAAUgC,MAAYgJ,SACvEzS,IAAU,KACF7O,EAAS+Q,WAEb5U,EAAQ8kB,EAAO3E,WACfhM,IAAS,GACX,GACJ,GACJ,GACJ,IC4JV,IAAAiU,GA5KkBtsB,IACd,MAAMusB,EAAiB,iBACjBC,EAAsBhc,IACxB,GAAIqF,GAASrF,IAAa+b,EAAepW,KAAK3F,GAC1C,OAAO,EACX,MAAM,IAAI7Q,MAAM,2FAA2F6Q,KAAY,EAgBrHic,EAAkC,KACpC,MAAMC,EAAmB,GACnBC,EAhBW,CAACD,GACX,IAAIhsB,MAAM,GAAI,CACjBZ,IAAG,CAAC+M,EAAQ+f,KACRJ,EAAmBI,GAOZrX,IANU,CAAC8H,EAAMwP,EAAQ5rB,EAAK6rB,KAC7B7rB,GACAurB,EAAmBvrB,GACvByrB,EAAiBxrB,KAAK,CAACmc,EAAMwP,EAAQD,EAAM3rB,EAAK6rB,GAAY,GAE/C,CAAEnY,CAACA,KAA2B,OAOtCoY,CAAaL,GACxBxG,EAAYlmB,EAAG2sB,GACrB,GAAIxtB,GAAW+mB,GAAY,CACvB,MAAMvb,EAAOub,IACb,GAAIvb,aAAgBwe,QAChB,MAAO,CAAEuD,mBAAkB/hB,OAElC,CACD,MAAM,IAAIhL,MAAM,sEAAsE,EAYpFqtB,EAAe,MACjB,IACIC,EADAC,EAAW,KAEf,OAAQ7P,IACJ,GAAIA,IAAS6P,EACT,OAAOD,EACX,MAAMtC,EAAO,GACb,IAAItK,EAAQhD,EACRxa,EAASwd,EAAM8M,WACnB,KAAOtqB,GAAQ,CACX,MAAMoD,EAASoa,EAAM+M,gBAAuB/M,EAAMxD,YAAmB3W,GAAQrD,EAAO6e,WAAYrB,IAA/B,EAA1B,EACvCsK,EAAKzpB,KAAK+E,GACVoa,EAAQxd,EACRA,EAASA,EAAOsqB,UACnB,CAGD,OAFAD,EAAW7P,EACX4P,EAAWtC,EACJA,CAAI,CAElB,EAnBoB,GAoBf0C,EAA0B1C,IAC5B,MAAM2C,EAAa,CAAC,QACdC,EAAQ5C,EAAKrN,QAAQkQ,UAC3B,IAAK,IAAIzuB,EAAI,EAAGC,EAAIuuB,EAAMzuB,OAAQC,EAAIC,EAAGD,IAAK,CAC1C,MAAM0uB,EAAOF,EAAMxuB,GACnB,GAAIP,OAAOD,GAAG,EAAGkvB,GACbH,EAAWpsB,KAAK,mBAEf,GAAI1C,OAAOD,IAAI,EAAGkvB,GACnBH,EAAWpsB,KAAK,iBAEf,CACDosB,EAAWpsB,KAAK,cAChB,IAAK,IAAIwsB,EAAM,EAAGA,EAAMD,EAAMC,IAC1BJ,EAAWpsB,KAAK,cAEvB,CACJ,CACD,OAAOosB,CAAU,EAyBfK,EAAwBC,IAC1B,MAAMC,EAxBe,CAACD,IACtB,MAAMC,EAAQ,GACd,IAAK,IAAI9uB,EAAI,EAAGC,EAAI4uB,EAAiB9uB,OAAQC,EAAIC,EAAGD,IAAK,CACrD,MAAM+uB,EAASF,EAAiB7uB,GAC1BgvB,EAAWD,EAAO,GAClBE,EAAiBF,EAAO,GAC9BD,EAAM3sB,KAAK6sB,GACPC,GACAH,EAAM3sB,KAAK8sB,EAElB,CACD,OAAOH,CAAK,EAaEI,CAAiBL,GACzBN,EAAaO,EAAMvkB,IAAI+jB,GACvBjU,EAbuB,EAACyU,EAAOP,KACrC,MAAMlU,EAAO,IAAI1a,MAAMmvB,EAAM/uB,QAC7B,IAAK,IAAIC,EAAI,EAAGC,EAAI6uB,EAAM/uB,OAAQC,EAAIC,EAAGD,IACrCqa,EAAKra,GAAK,CACN4rB,KAAMkD,EAAM9uB,GACZuuB,WAAYA,EAAWvuB,IAG/B,OAAOqa,CAAI,EAKE8U,CAAyBL,EAAOP,GACvCa,EAAc,GACd7kB,EAAM,IAAIV,IAChB,IAAIwlB,EAAa,EACjB,OAAa,CACT,MAAMC,EAAQjV,EAAKkV,MAAKD,GAASA,EAAMf,WAAWxuB,OAAS,IAC3D,IAAKuvB,EACD,MACJ,MAAO/e,EAAS+D,GAAQgb,EAAMf,WACxBiB,EAAW,IAAIH,IACfI,EAAa,SAASD,OAAcjf,KAAW+D,KACrD8a,EAAYjtB,KAAKstB,GACjB,IAAK,IAAIzvB,EAAI,EAAGC,EAAIoa,EAAKta,OAAQC,EAAIC,EAAGD,IAAK,CACzC,MAAMsvB,EAAQjV,EAAKra,IACZ0vB,EAAcC,GAAaL,EAAMf,WACpCmB,IAAiBnf,GAAWof,IAAcrb,IAE9Cgb,EAAMf,WAAW,GAAKiB,EACtBF,EAAMf,WAAWqB,OAAO,EAAG,GAC9B,CACJ,CACD,IAAK,IAAI5vB,EAAI,EAAGC,EAAIoa,EAAKta,OAAQC,EAAIC,EAAGD,IAAK,CACzC,MAAMsvB,EAAQjV,EAAKra,GACnBuK,EAAIpJ,IAAImuB,EAAM1D,KAAM0D,EAAMf,WAAW,GACxC,CACD,MAAO,CAAEa,cAAa7kB,MAAK,EAmC/B,MATsB,MAClB,MAAMojB,iBAAEA,EAAgB/hB,KAAEA,GAAS8hB,IAC7BmB,EAjImB,CAAClB,IAC1B,MAAMkB,EAAmB,GACzB,IAAK,IAAI7uB,EAAI,EAAGC,EAAI0tB,EAAiB5tB,OAAQC,EAAIC,EAAGD,IAAK,CACrD,MAAOse,EAAMwP,EAAQD,EAAM3rB,EAAK6rB,GAAcJ,EAAiB3tB,GACzDgvB,EAAWf,EAAa3P,GACxB2Q,EAAiBlB,EAAaE,EAAaF,QAAcrrB,EAC/DmsB,EAAiB1sB,KAAK,CAAC6sB,EAAUlB,EAAQD,EAAM3rB,EAAK+sB,GACvD,CACD,OAAOJ,CAAgB,EAyHEgB,CAAqBlC,GACxCmC,EAXU,CAACjB,IACjB,MAAMO,YAAEA,EAAW7kB,IAAEA,GAAQqkB,EAAqBC,GAC5CkB,EAlBiB,EAAClB,EAAkBmB,KAC1C,MAAMD,EAAU,GAChB,IAAK,IAAI/vB,EAAI,EAAGC,EAAI4uB,EAAiB9uB,OAAQC,EAAIC,EAAGD,IAAK,CACrD,MAAOgvB,EAAUlB,EAAQD,EAAM3rB,EAAK+sB,GAAkBJ,EAAiB7uB,GACnEivB,EACAc,EAAQ5tB,KAAK,QAAQ2rB,cAAmBD,QAAWmC,EAAUjvB,IAAIkuB,SAE5D/sB,EACL6tB,EAAQ5tB,KAAK,QAAQ2rB,OAAYkC,EAAUjvB,IAAIiuB,QAAe9sB,cAAgB2rB,UAG9EkC,EAAQ5tB,KAAK,QAAQ2rB,OAAYkC,EAAUjvB,IAAIiuB,cAAqBnB,SAE3E,CACD,OAAOkC,CAAO,EAIEE,CAAmBpB,EAAkBtkB,GAC/CtJ,EAAK,IAAIivB,SAAS,OAAQ,QAAS,GAAGd,EAAYe,KAAK,MAAMJ,EAAQI,KAAK,mBAC1EC,EAAO,CAAEhP,gBAAcQ,uBAAqB+B,cAAYyB,YAAUC,WAASO,eAAaC,UAAQc,cAEtG,OADgB1lB,EAAGI,KAAK+uB,EACV,EAKEC,CAAYxB,GAC5B,OAAQzH,IACJ,MAAMkJ,EAAQ1kB,EAAK2kB,WAAU,GAC7B,OAAO9I,GAAYqI,EAAQzuB,UAAKqB,EAAW4tB,EAAOlJ,GAAO,CAC5D,EAEEoJ,EAAe,kLC7K1B,SAAuBC,GACnB,MAAMzsB,EAASvF,SAMT+J,EAAU,CAAE0iB,SALD,EAAG7qB,QAAOif,cAChBrb,GAAQ,CAAED,CAACA,GAAS3D,IAAS,IACzB8E,GAAQma,MAKvB,OADA5J,GAAcvU,IAAIqH,EAAS,CAAExE,SAAQysB,iBAC9BjoB,CACX,wCCXA,SAAW2e,EAAWC,KAAU9H,GAC5B,OAAIA,EAASvf,QhDkDW,iBADVM,EgDjDmB+mB,IhDkDa,OAAV/mB,IgDlDQX,GAAQ0nB,GACzCjR,GAAcgR,EAAWC,KAAU9H,GAGnCnJ,GAAcgR,EAAW,KAAMC,GhD6C7B,IAAC/mB,CgD3ClB,6SCNA,SAAoBmI,GAChB,MAAMxE,OAAEA,EAAMysB,aAAEA,GAAiB/a,GAAc3U,IAAIyH,IAAY,CAAExE,OAAQvF,UACnEiyB,EAAezsB,GAAQD,GAE7B,OADc6S,GAAM6Z,GAAgBD,EAAeC,CAEvD,+QCAO,SAASjG,GAAOrD,GACrB,IAAIuJ,EAAUvJ,EAAMuJ,UAAW,EAO/B,OALKvJ,EAAMwJ,UACTD,EAAUrb,KAAIqb,GACdvJ,EAAMwJ,QAAU,IAAMD,GAASE,IAAOA,KAGjChE,EAAI;;uEAE0D8D;sBACjDvJ,EAAMwJ;;GAG5B,CAEO,SAASE,IAAUjO,YAAEA,EAAc,GAAEpC,KAAEA,EAAO,OAAMpgB,MAAEA,EAAQ,GAAE0wB,QAAEA,EAAU,WAGjF,OAFK9lB,GAAa5K,KAAQA,EAAQiV,GAAEjV,IAE7BwsB,EAAI;;;cAGCxsB;gBACGmsB,IACI,SAATA,EAAEtqB,KACN6uB,EAAQvE,EAAE;gBAEDA,GAAMnsB,EAAMmsB,EAAE1e,OAAOzN;oBAClBwiB;aACPpC;GAEb,CCxCO,MAAMuQ,GAAe,CAAA,EAEb,SAASC,GAAUC,EAAOC,EAAIrY,GAAO,GAC9B,iBAAToY,IAAmBA,EAAQ,CAACA,IAEvC,MAAME,EAAiB,GACjBC,EAAc,IAAMD,EAAelnB,SAASuiB,GAAMA,MAExD,IAAK,IAAIhM,KAAQyQ,EAAO,CACjBF,GAAavQ,KAAOuQ,GAAavQ,GAAQ,IAE9C,MAAM6Q,EAAkBxY,EACpB,IAAItD,KACF2b,KAAM3b,GACN6b,GAAa,EAEfF,EACJH,GAAavQ,GAAMte,KAAKmvB,GAExBF,EAAejvB,MAAK,IAClB6uB,GAAavQ,GAAMmP,OAAOoB,GAAavQ,GAAMtZ,QAAQmqB,GAAkB,IAE1E,CAED,OAAOD,CACT,CCvBA,MAAME,GAAe,IAAIlvB,IACnB8B,GAAW,IAAIqtB,kBAAkBC,IAErC,MAAMC,EAAe,IAAIrvB,IAEzB,IAAK,MAAMsvB,KAAUF,EAAS,CAC5BC,EAAapvB,IAAIqvB,EAAO7jB,QAExB,IAAK,MAAM0e,KAAKmF,EAAOC,cACjBpF,aAAa3C,aAAe2C,aAAaqF,aAAYH,EAAapvB,IAAIkqB,EAC7E,CAED,IAAK,MAAMsF,KAAQJ,EACjB,IAAK,MAAMK,KAAOR,GACZO,EAAKE,QAAQD,EAAI,KAAKA,EAAI,GAAGD,GAEjCA,EACGG,iBAAiBF,EAAI,IACrB7nB,SACEsiB,IAAOuF,EAAI,KAAOvF,aAAa3C,aAAe2C,aAAaqF,aAAeE,EAAI,GAAGvF,IAEvF,IAGC0F,GAAiB,IACrB/tB,GAASguB,QAAQlc,SAASkU,KAAM,CAC9BiI,SAAS,EACTC,WAAW,EACXC,YAAY,IAGVC,GAAgB,IAAMpuB,GAASquB,aAE9B,SAASL,GAAQM,EAAKtB,GACD,IAAtBI,GAAalqB,MAAY6qB,KAC7B,MAAMQ,EAAQ,CAACD,EAAKtB,GAAI,GACxBI,GAAajvB,IAAIowB,GAEjB,MAAMC,EAAQ,KACZpB,GAAa9uB,OAAOiwB,GACM,IAAtBnB,GAAalqB,MAAYkrB,IAAe,EAQ9C,OALAI,EAAMC,IAAM,KACVF,EAAM,IAAK,EACXC,GAAO,EAGFA,CACT,CC/CA,MAAME,GAAuB,0DAEvBC,GAAc,CAACC,EAAM5L,KACzB4L,EAAKzM,MAAM0M,QAAU,OAErB,MAAMC,EAAchd,SAASE,cAAc,OAC3C8c,EAAYjQ,UAAY,iBAExB+P,EAAKG,sBAAsB,WAAYD,GACvCA,EAAY1Q,YHXP,UAAsBjD,SAAEA,IAC7B,MAAM1T,EAAOihB,EAAI,qCAGjB,OAFAjhB,EAAKmM,iBAAiB,6BAA8BsS,GAAOwC,EAAI,GAAGvN,IAAY1T,IAEvEA,CACT,CGM0BunB,CAAa,CAAE7T,SAAU6H,IAAa,EAQjD,SAASiM,GAAcxH,EAAMzE,GAC1C,OAAO8J,GAAU,2BAA2B,EAAEoC,MAC5C,GAAIA,EAAQC,UAAY,YAAY1H,IAAQ,OAE5C,MAAM2H,EAAetd,SAASud,cAAcX,IAC5C,GAAIU,EAAc,OAAOT,GAAYS,EAAcpM,GAEnD,MAAMsM,EAAOtB,GAAQU,IAAuBE,IAC1CU,EAAKb,MACLE,GAAYC,EAAM5L,EAAU,GAC5B,GAEN,CCjCA,SAASuM,GAAiBrX,GACtB,OAAO,IAAI/W,SAAQ,CAACH,EAASioB,KAEzB/Q,EAAQsX,WAAatX,EAAQuX,UAAY,IAAMzuB,EAAQkX,EAAQR,QAE/DQ,EAAQwX,QAAUxX,EAAQyX,QAAU,IAAM1G,EAAO/Q,EAAQzY,MAAM,GAEvE,CACA,SAASmwB,GAAYC,EAAQC,GACzB,MAAM5X,EAAU6X,UAAUC,KAAKH,GAC/B3X,EAAQ+X,gBAAkB,IAAM/X,EAAQR,OAAOwY,kBAAkBJ,GACjE,MAAMK,EAAMZ,GAAiBrX,GAC7B,MAAO,CAACkY,EAAQhd,IAAa+c,EAAIrY,MAAMuY,GAAOjd,EAASid,EAAGC,YAAYR,EAAWM,GAAQG,YAAYT,KACzG,CACA,IAAIU,GACJ,SAASC,KAIL,OAHKD,KACDA,GAAsBZ,GAAY,eAAgB,WAE/CY,EACX,CCjBO,SAASE,GAAYvO,GAC1B,MAAMwO,EAAW7e,SAASE,cAAc,SAKxC,OAJA2e,EAASxP,UAAYgB,EAErBrQ,SAAS8e,KAAKxS,YAAYuS,GAElBE,IACN,GAAgBtyB,MAAZsyB,EAAuB,OAAO/e,SAAS8e,KAAKtW,YAAYqW,GAE5DA,EAASxP,UAAY0P,CAAQ,CAEjC,CFEA/D,GAAU,2BAA2B,KACnC,IAAK,MAAM8B,KAAQ9c,SAASgf,uBAAuB,kBACjDlC,EAAKrR,cAAcjD,YAAYsU,EAAK,IEFxC,MAAMmC,GAAWC,GAAe,wBAAyB,yBAElD,SAASC,GAAuBhM,GACrC,MAAMiM,EAAmBjlB,GAAM,CAAA,GAQ/B,ODAF,SAAalO,EAAKozB,EAAcV,MAC5B,OAAOU,EAAY,YAAallB,GAAUsjB,GAAiBtjB,EAAMrP,IAAImB,KACzE,CCREqzB,CAAOnM,EAAI8L,IAAUjZ,MAAMha,GAAQmO,GAAM8D,UAAUmhB,EAAkBpzB,GAAO,CAAA,KAE5EmO,GAAMqD,GAAG4hB,GAAkB,MDc7B,SAAanzB,EAAK7B,EAAOi1B,EAAcV,MAC5BU,EAAY,aAAcllB,IAC7BA,EAAMolB,IAAIn1B,EAAO6B,GACVwxB,GAAiBtjB,EAAMqkB,eAEtC,CClBIgB,CAAOrM,EAAIhZ,GAAM6E,OAAOogB,GAAmBH,GAAS,IAG/CG,CACT,iFC3BA,MAAMlvB,GAAE,IAAI,IAAIuvB,WAAW,IAAIC,YAAY,CAAC,IAAIC,QAAQ,GAAU,SAASC,GAAM3xB,EAAE4xB,EAAE,KAAK,IAAI50B,GAAE,OAAO+H,GAAKgT,MAAM,IAAI4Z,GAAM3xB,KAAK,MAAMoC,EAAEpC,EAAEnE,OAAO,EAAEg2B,GAAG70B,GAAE80B,YAAY31B,OAAOa,GAAE80B,aAAa,EAAE1vB,EAAEpF,GAAE+0B,OAAOL,OAAOM,WAAWH,EAAE,GAAG70B,GAAE+0B,OAAOE,KAAKzvB,KAAK0vB,KAAKL,EAAE,QAAQ,MAAMxyB,EAAErC,GAAEm1B,GAAG/vB,EAAE,GAAG,IAAIH,GAAE9C,GAAEJ,IAAGiB,EAAE,IAAIyxB,YAAYz0B,GAAE+0B,OAAOL,OAAOryB,EAAE+C,KAAKpF,GAAE20B,QAAQ,MAAMp2B,OAAO+W,OAAO,IAAI5V,MAAM,eAAek1B,KAAK5xB,EAAEqa,MAAM,EAAErd,GAAEsrB,KAAKpM,MAAM,MAAMrgB,UAAUmB,GAAEsrB,IAAItoB,EAAEoyB,YAAY,KAAKp1B,GAAEsrB,IAAI,MAAM,CAAC+J,IAAIr1B,GAAEsrB,MAAM,MAAMhpB,EAAE,GAAGgzB,EAAE,GAAG,KAAKt1B,GAAEu1B,MAAM,CAAC,MAAMtwB,EAAEjF,GAAE1B,KAAKyD,EAAE/B,GAAEw1B,KAAKrzB,EAAEnC,GAAEy1B,KAAKb,EAAE50B,GAAEkoB,KAAK9iB,EAAEpF,GAAE01B,KAAKb,EAAE70B,GAAE21B,KAAK,IAAItzB,EAAErC,GAAE41B,OAAOvzB,EAAEgD,EAAErC,EAAEqa,OAAO,IAAIuX,EAAE3vB,EAAE,EAAEA,GAAG,IAAI2vB,EAAE7yB,EAAE,EAAEA,KAAKO,EAAErB,KAAK,CAACmqB,EAAE/oB,EAAEhB,EAAE4D,EAAEqmB,EAAEvpB,EAAE2zB,GAAGtwB,EAAEuwB,GAAGd,EAAEgB,EAAEjB,EAAEj2B,EAAEwD,GAAG,CAAC,KAAKnC,GAAE81B,MAAM,CAAC,MAAM7wB,EAAEjF,GAAE+1B,KAAKh0B,EAAE/B,GAAEg2B,KAAK7zB,EAAEnC,GAAEi2B,MAAMrB,EAAE50B,GAAEk2B,MAAM9wB,EAAEpC,EAAEqa,MAAMpY,EAAElD,GAAG8yB,EAAEzvB,EAAE,GAAG/C,EAAEF,EAAE,OAAE,EAAOa,EAAEqa,MAAMlb,EAAEyyB,GAAGtyB,EAAED,EAAEA,EAAE,GAAG,GAAGizB,EAAEr0B,KAAK,CAACI,EAAE4D,EAAEqmB,EAAEvpB,EAAEo0B,GAAGh0B,EAAEi0B,GAAGxB,EAAExJ,EAAE,MAAMyJ,GAAG,MAAMA,EAAExvB,EAAED,GAAGA,EAAEixB,GAAG,MAAM/zB,GAAG,MAAMA,EAAE+C,EAAEhD,GAAGA,GAAG,CAAC,SAASgD,EAAEJ,GAAG,IAAI,OAAM,EAAGqxB,MAAMrxB,EAAE,CAAC,MAAMA,IAAI,CAAC,MAAM,CAAC3C,EAAEgzB,IAAIt1B,GAAEu2B,IAAI,CAAC,SAASx0B,GAAEkD,EAAElD,GAAG,MAAMI,EAAE8C,EAAEpG,OAAO,IAAImB,EAAE,EAAE,KAAKA,EAAEmC,GAAG,CAAC,MAAMA,EAAE8C,EAAEkgB,WAAWnlB,GAAG+B,EAAE/B,MAAM,IAAImC,IAAI,EAAEA,IAAI,CAAC,CAAC,CAAC,SAASA,GAAE8C,EAAElD,GAAG,MAAMI,EAAE8C,EAAEpG,OAAO,IAAImB,EAAE,EAAE,KAAKA,EAAEmC,GAAGJ,EAAE/B,GAAGiF,EAAEkgB,WAAWnlB,IAAI,CAAC,IAAIA,GAAS,MAAM+H,GAAKyuB,YAAYC,SAASzzB,GAAE,m2VAAm2V,oBAAoB0zB,OAAOA,OAAO9sB,KAAK5G,GAAE,UAAUwxB,WAAW5qB,KAAK+sB,KAAK3zB,KAAIiC,GAAGA,EAAEkgB,WAAW,OAAOpK,KAAKyb,YAAYI,aAAa7b,MAAI,EAAI8b,QAAQ5xB,MAAMjF,GAAEiF,CAAE,IAAG,IAAIjC,GCe5nY,MAAM8zB,GAAiB,eAEjBC,GAAiB,CAACC,EAAUl4B,KACvC,KAAOA,EAAIk4B,EAASn4B,QAAUi4B,GAAe5gB,KAAK8gB,EAASl4B,KACzDA,IAGF,OAAOA,GAGIm4B,GAAoB,CAACD,EAAUl4B,KAC1C,KAAOA,EAAIk4B,EAASn4B,SAAWi4B,GAAe5gB,KAAK8gB,EAASl4B,KAC1DA,IAGF,OAAOA,GCdHo4B,GAAqB,CAACC,EAAoBr4B,KAC9C,MAAMs4B,EAAat4B,EAGnB,OAFAA,EAAIm4B,GAAkBE,EAAoBr4B,GAEnC,CAAEu4B,cAAeF,EAAmB9Z,MAAM+Z,EAAYt4B,GAAIA,IAAG,ECLhEw4B,GAAoB,CAACH,EAAoBr4B,KAC7C,MAAMs4B,IAAet4B,EAErB,KAAOA,EAAIq4B,EAAmBt4B,QAAoC,MAA1Bs4B,EAAmBr4B,IACzDA,IAmBF,MAAO,CAAEy4B,aAhBYJ,EAClB9Z,MAAM+Z,EAAYt4B,KAClBogB,MAAM,KACN7V,KAAImuB,IAEH,IADAA,EAAcA,EAAYC,QACVxhB,SAAS,KAAM,CAC7B,MAAM2V,EAAa4L,EAAYtY,MAAM,KACrC,MAAO,CACLwY,UAAW9L,EAAW,GACtB+L,QAAS/L,EAAWA,EAAW/sB,OAAS,GAE3C,CACD,MAAO,CAAE64B,UAAWF,EAAaG,QAASH,EAAa,IAExD9kB,QAAO,EAAGglB,eAAgBA,EAAU74B,OAAS,IAEzBC,IAAG,ECtBtB84B,GAAuB,CAACT,EAAoBr4B,KAChDA,IACAA,EAAIi4B,GAAeI,EAAoBr4B,GAIvC,MAAMs4B,EAFNt4B,EAAIi4B,GAAeI,EADnBr4B,GAAK,GAML,OAFAA,EAAIm4B,GAAkBE,EAAoBr4B,GAEnC,CACL+4B,gBAAiBV,EAAmB9Z,MAAM+Z,EAAYt4B,GACtDA,IACD,ECRGg5B,GAAoBX,IACxB,IAAIE,EACAQ,EACJ,MAAMN,EAAe,GAErB,IAAK,IAAIz4B,EAAI,EAAGA,EAAIq4B,EAAmBt4B,OAAQC,IAC7C,IAAIg4B,GAAe5gB,KAAKihB,EAAmBr4B,IAI3C,GAA8B,MAA1Bq4B,EAAmBr4B,GAAY,CACjC,IAAIi5B,IACAR,aAAcQ,EAAiBj5B,KAAMw4B,GACvCH,EACAr4B,IAEFy4B,EAAat2B,QAAQ82B,EACtB,KAAoC,MAA1BZ,EAAmBr4B,KACxB+4B,kBAAiB/4B,KAAM84B,GAAqBT,EAAoBr4B,MAEhEu4B,gBAAev4B,KAAMo4B,GAAmBC,EAAoBr4B,IAIpE,MAAO,CACLmsB,QAASoM,EACTW,UAAWH,EACXI,MAAOV,EACR,ECjDGW,GAAkB,CAACza,EAAU0a,KAC/B,GAAY,MAARA,EACA,OAAO/nB,OAAOgoB,cAAcD,GAEhC,OAAQ1a,GACJ,IAAK,MACD,MAAO,KACX,IAAK,MACD,MAAO,KACX,IAAK,MACD,MAAO,KACX,IAAK,MACD,MAAO,KACX,IAAK,MACD,MAAO,KACX,IAAK,MACD,MAAO,KAEf,OAAO,CAAK,ECjBV4a,GAAgB,CAACzN,EAAQ7lB,EAAU,MACrC,MAAMuzB,aAAEA,EAAeJ,IAAoBnzB,EACrCwzB,EAAK,4FACX,IAAIn7B,EACAud,EAAS,GACb,KAAO,OAASvd,EAAQm7B,EAAGC,KAAK5N,KAAU,CACtC,OAASnN,EAAUzR,EAAUysB,EAASC,EAAcC,EAAKC,EAAO9Y,EAAM+Y,GAAWz7B,EACjF,GAAIy7B,EAAS,CACTle,GAAUke,EACV,QACH,CACD,IAAIV,EAEAA,EADQ,MAARrY,EACO,KAEF8Y,EACEE,OAAOC,SAASH,EAAO,GAGvBE,OAAOC,SAAUL,GAAgBD,GAAWE,EAAM,IAE7D,IACI,MAAMK,EAAYV,EAAa7a,EAAU0a,GAKrCxd,GAJCqe,GAGkB,IAAdA,EACKd,GAAgBza,EAAU0a,IAASnsB,EAGnCgtB,EANAhtB,CAQjB,CACD,MAAOitB,GACHte,GAAU3O,CACb,CACJ,CACD,OAAO2O,CAAM,ECrBXue,GAA0BC,IAC9B,MAAMC,EAAQ,CAAC,IAAK,IAAK,KAAM/K,MAC7BgL,GACEF,EAAc3V,WAAW6V,IACzBF,EAAcrV,SAASuV,KAG3B,GAAa,MAATD,EACF,OAAO,EAGT,IAAK,IAAIt6B,EAAI,EAAGA,EAAIq6B,EAAct6B,OAAS,EAAGC,IAAK,CAEjD,GAAIq6B,EAAcr6B,KAAOs6B,GAAkC,OAAzBD,EAAcr6B,EAAI,GAClD,OAAO,EAIT,GACY,MAAVs6B,GACkC,OAAlCD,EAAc9b,MAAMve,EAAGA,EAAI,IACF,OAAzBq6B,EAAcr6B,EAAI,GAElB,OAAO,CAEV,CAED,OAAO,GC3BHw6B,GAAiB,IAAIn4B,IAAI6pB,EAAOsO,gBCChCC,GAAUC,EAAaA,+GAEvBv1B,GAAU,CAAC2F,EAAM6vB,KACrB,IACE,OAAOF,GAAQt1B,QAAQw1B,EAAI,CAAE7L,MAAO,CAAC8L,EAAOA,QAAC9vB,KACjD,CAAI,MACA,MACD,GCJG+vB,GAAuB,CAC3BC,GACEC,kBAAiBC,kBAEnBC,EAAOF,GAAmBX,GAAwBU,IAElD,MAAMI,WAAEA,EAAU76B,MAAEA,IACjB06B,GAAmBX,GAAwBU,GACxC,CACEI,YAAY,EACZ76B,MAAOk5B,GAAcuB,EAAsBvc,MAAM,GAAI,KAEvD,CAAE2c,YAAY,EAAO76B,WAAOqC,GAElC,MAAO,CACL+d,KAAMya,GFjBQC,EEiBe96B,EFhBA,IAA3B86B,EAAgBp7B,OACX,UAGLo7B,EAAgBzW,WAAW,KACtB,WAGLyW,EAAgBzW,WAAW,KACtB,WAGL8V,GAAeh0B,IAAI20B,GACd,UAGF,WEAiC,UACtCD,aACA7B,KAAMyB,EACNz6B,QACAgJ,SACyB,iBAAhB2xB,GAA4BE,EAC/B/1B,GAAQ61B,EAAa36B,QACrBqC,GFxBQy4B,KEyBf,ECzBGC,GAAe/1B,MAAOg0B,GAAQ2B,eAAgB,CAAA,KAClD,MAAOK,SAAiBxF,GACtBwD,EACe,MAAf2B,OAAsBt4B,EAAYs4B,GAGpC,MAAO,CACL,EAAEv8B,OAAO68B,YACP,IAAK,IACHvE,EAAGwE,EACH3E,GAAI4E,EACJj5B,EAAGk5B,EACHjP,EAAGkP,KACAL,EAAS,CAEZ,IADkD,IAA7BE,EAEnB,SAGF,MAAMR,EAAkBQ,GAA2B,EAG9CR,IACHU,IACAC,KAGF,MAAMZ,EAAwBzB,EAAK9a,MACjCkd,EACAC,GAEIP,EAAkBN,GAAqBC,EAAuB,CAClEC,kBACAC,gBAGF,IAAIW,EACJ,IAAKZ,EAAiB,CACpB,IAAI1C,EAAqBgB,EACtB9a,MACCid,EAAsB,EACtBC,GAED9C,OACCN,EAAmBrT,SAAS,UAC9BqT,EAAqBA,EAAmB9Z,MACtC,EACA7X,KAAKC,IAAI,EAAG0xB,EAAmBt4B,OAAS,KAG5C47B,EAAe3C,GAAkBX,EAClC,MAEK,CACJC,WAAYkD,EAEZI,SAAUb,EACNW,EAAmC,EACnCA,EACJX,kBACAI,kBACAQ,eAEH,CACF,EACF,ECnEH,MAAME,GAAmB,CAACC,EAAQC,EAAOC,IACvCF,EAAOvd,MAAM,EAAGwd,GAASD,EAAOvd,MAAMyd,GAElCC,GAAmB,CAACH,EAAQC,EAAOG,IACvCJ,EAAOvd,MAAM,EAAGwd,GAASG,EAAYJ,EAAOvd,MAAMwd,GAYrC12B,eAAe82B,GAC5B9C,EACA+C,EAAS,CAAEC,QAAS,IACpBC,GAAW,GAEX,IAAIC,EAAmB,GAEvB,IAAK,MAAMC,KAAUJ,EAAOC,QACtBG,EAAOC,YAAWpD,EAAOmD,EAAOC,UAAU,CAAEpD,UAElD,MAAOgC,EAAStD,SAzClB1yB,eAAkCg0B,GAChC,MAAMtB,EAAU,GAWhB,MAAO,CARS,UAAWqD,GAAa/B,IAAQzlB,QAAQ5T,IACtD,IAAIA,EAAE+6B,gBAAN,CACA,GAAkD,UAA9C1B,EAAK9a,MAAMve,EAAEs4B,WAAYt4B,EAAEs4B,WAAa,GAAgB,OAAO,EAEnEt4B,EAAE08B,UAAW,EACb3E,EAAQ51B,KAAKnC,EAJiB,CAIf,IAGA+3B,EACnB,CA4BmC4E,CAAmBtD,GAGpD,IAAIuD,EAAS,EAEb,IAAK,MAAMC,KAAO9E,EAAS,CACzBsD,EAAQl5B,KAAK06B,GAEb,MAAMvE,EAAauE,EAAIvE,WAAasE,EAC9BhB,EAAWiB,EAAIjB,SAAWgB,EAE1B1D,EAAY2D,EAAIlB,aAAazC,UACnC,GAAiBx2B,MAAbw2B,EAAwB,CAM1B,GAAiB,IAAbA,EAAiB,CACnBG,EAAOwC,GAAiBxC,EAAMf,EAAYsD,GAC1C,MAAMkB,EAAY,YAAY5D,OAC9BG,EAAO4C,GAAiB5C,EAAMf,EAAYwE,GAE1CF,GAAUhB,EAAWtD,EAAawE,EAAU/8B,MAC7C,CAED,QACD,CAED,MAAMg9B,EACJzE,EAAae,EAAK9a,MAAM+Z,EAAYsD,GAAUtF,YAAY,QAC5D+C,EAAOwC,GAAiBxC,EAAM0D,EAAWnB,GACzCgB,GAAUhB,EAAWmB,CACtB,CAED,IAAIC,EAAc,CAAA,EAElB,IAAK,MAAMC,KAAO5B,EAAS,CACpB4B,EAAIP,WACPrD,EAAOwC,GACLxC,EACA4D,EAAI3E,WAAasE,EACjBK,EAAIrB,SAAWgB,GAGjBA,GAAUK,EAAIrB,SAAWgB,GAAUK,EAAI3E,WAAasE,IAGtD,IAAIxT,GAAM1iB,KAAKw2B,SAAW,GAAG7+B,SAAS,IAAI8+B,UAAU,GAEhD/sB,EAAS4sB,EAAY5T,GAAM,CAAE,EAC7BwE,EAAW,oBAAoBxE,MAEnC,IAAK,MAAMoT,KAAUJ,EAAOC,QAAS,CACnC,IAAKG,EAAOr3B,QAAS,SAErB,MAAMi4B,QAAwBZ,EAAOr3B,QAAQ,CAC3Ci3B,SACAxO,WACAxd,QACA6a,KAAMgS,EAAI9B,gBAAgB96B,MAC1Bi8B,aAGF,IAAKc,EAAiB,SAEtB,MAAMC,EAAapS,GAChBsR,GAAoB,SAAStR,OAAUmS,MAEpCzB,aAAEA,GAAiBsB,EAIzB,GAFItB,EAAaxP,SAASkR,EAAU,YAAY1B,EAAaxP,YACzDwP,EAAazC,WAAWmE,EAAU1B,EAAazC,WAC/CyC,EAAaxC,MAAMp5B,OAAS,EAC9B,IAAK,MAAMkrB,KAAQ0Q,EAAaxC,MAC9BkE,EAAU,IAAIpS,EAAK2N,aAAa3N,EAAK4N,WAG1C,CACF,CAGD,MAAMyE,GAAiB52B,KAAKw2B,SAAW,GAAG7+B,SAAS,IAAI8+B,UAAU,GACjEh/B,WAAWm/B,GAAiBN,EAI5B,MAAMO,QAAYC,OAAO,+BAA+BC,KAAK,uCAAuCH,OAAqBf,EAAmBlD,MAG5I,cAFOl7B,WAAWm/B,GAEXC,CACT,CCrIO,MAAMG,GAAa,CAAC,IAAK,IAAK,KACxBC,GAAiB,IAAI9zB,ICD3B,SAAS+zB,GAAQC,EAAYC,EAAUC,EAAQtd,GAClD,MAAMud,EAAgBL,GAAe58B,IAAI88B,GACnCI,EAAQD,IAAgBF,GAC9B,IAAKG,IAAQxd,GAAMja,IAAIu3B,GACnB,OAAO,EAGX,GAFAE,EAAMxd,GAAMhe,OAAOs7B,GAEfL,GAAWQ,OAAO3R,GAAwB,IAAlB0R,EAAM1R,GAAGllB,OAAa,CAI9BkL,QAAQC,eAAeqrB,EAAYC,EAAU,CACzDz9B,MAAO49B,EAAMlI,EACbx0B,UAAU,EACV+R,cAAc,MAGduqB,EAAWC,GAAYG,EAAMlI,UAC1BiI,EAAcF,EACxB,CAGD,OAFyC,GAArCr+B,OAAOuP,KAAKgvB,GAAej+B,QAC3B49B,GAAel7B,OAAOo7B,IACnB,CACX,CCjBA,IAAAM,GAAgBC,GAAc,CAACN,EAAUD,EAAYtmB,EAAU8mB,GAAU,KACrE,GAAoC,mBAAzBR,EAAWC,GAClB,MAAM,IAAIl9B,MAAM,GAAGk9B,0BAAiCD,EAAW16B,YAAY8nB,QAC1E0S,GAAen3B,IAAIq3B,IACpBF,GAAex8B,IAAI08B,EAAY,CAAA,GACnC,MAAMS,EAAmBX,GAAe58B,IAAI88B,GAC5C,IAAKS,EAAiBR,GAAW,CAC7B,MAAMS,EAAWV,EAAWC,GAE5BQ,EAAiBR,GAAY,CACzB/H,EAAGwI,EACHz+B,EAAG,IAAI+J,IACP7J,EAAG,IAAI6J,IACPhK,EAAG,IAAIgK,KAEX,MAAM20B,EAAU,CAACC,EAAMjpB,EAAMkpB,KACzB,MAAMC,ECrBH,SAAUb,EAAUD,EAAYe,EAE/CH,EAEAI,GACI,MAAMZ,EAAQN,GAAe58B,IAAI88B,KAAcC,GAE/C,IAAKG,EACD,OAAOY,EACDtsB,QAAQmsB,UAAUb,EAAWC,GAAWc,EAAUH,GAClDZ,EAAWC,GAAU9rB,MAAMysB,EAAMG,GAE3C,IAAK,MAAME,KAAQb,EAAMn+B,EAAEwK,SAAU,CACjC,MAAMy0B,EAAgBD,EAAKh8B,KAAK27B,EAAMG,GAClCj/B,MAAMD,QAAQq/B,KACdH,EAAWG,EAClB,CAED,IAAIC,EAAgB,IAAIf,EAAMj+B,EAAEsK,UAAUuhB,QAAO,CAACxX,EAAM9D,IAAY,IAAIiF,IAASjF,EAAQzN,KAAK27B,EAAMjpB,EAAMnB,KAE1G,IAAImB,IAASqpB,EACPtsB,QAAQmsB,UAAUT,EAAMlI,EAAGvgB,EAAMipB,GACjCR,EAAMlI,EAAE/jB,MAAMysB,EAAMjpB,IAJN,IAIgBopB,GAEpC,IAAK,MAAME,KAAQb,EAAMp+B,EAAEyK,SACvB00B,EAAgBF,EAAKh8B,KAAK27B,EAAMG,EAAUI,IAAkBA,EAChE,OAAOA,CACX,CDNwBF,CAAKhB,EAAUD,EAAYroB,EAAMipB,EAAMC,GAGnD,OAFIL,GACAY,IACGN,CAAG,EAERO,EAAe,IAAIv9B,MAAM48B,EAAU,CACrCvsB,MAAO,CAACmtB,EAAGV,EAAMjpB,IAASgpB,EAAQC,EAAMjpB,GAAM,GAC9CkpB,UAAW,CAACS,EAAG3pB,IAASgpB,EAAQD,EAAU/oB,GAAM,GAChDzU,IAAK,CAAC+M,EAAQ+f,EAAMuR,IAAqB,YAARvR,EAC3B0Q,EAASlgC,SAASgD,KAAKk9B,GACvBhsB,QAAQxR,IAAI+M,EAAQ+f,EAAMuR,KAIpB7sB,QAAQC,eAAeqrB,EAAYC,EAAU,CACzDz9B,MAAO6+B,EACP5rB,cAAc,EACd/R,UAAU,MAGVs8B,EAAWC,GAAYoB,EAC9B,CACD,MAAMnB,EAASt/B,SACTwgC,EAAmB,IAAMrB,GAAQC,EAAYC,EAAUC,EAAQK,GAErE,OADAE,EAAiBR,GAAUM,GAAWj9B,IAAI48B,EAAQxmB,GAC3C0nB,CAAgB,EE9C3B,MAAMrhB,GAASugB,GAAa,KACtBkB,GAAUlB,GAAa,KACvBtgB,GAAQsgB,GAAa,mFHqBpB,WACH,IAAK,MAAOmB,EAActB,KAAkBL,GAAehxB,UACvD,IAAK,MAAMmxB,KAAYE,EACnB,IAAK,MAAMuB,KAAY7B,GACnB,IAAK,MAAMK,KAAUC,EAAcF,KAAYyB,GAAUvwB,QAAU,GAC/D4uB,GAAQ0B,EAAcxB,EAAUC,EAAQwB,EAC5D,IIxBA,MAAMC,GAAU,IAAMvpB,SAASud,cAAc,+CCJ9B,SAASiM,GAAgBC,EAAUzU,EAAMrT,GACtD,OAAOqZ,GAAU,oBAAoB,EAAEoC,MAGrC,GAAIA,GAAS5S,MAAQif,EAAU,OAE/B,MAAMjM,EAAOtB,GAAQ,kCAAmCL,IACtD2B,EAAKb,MAEL,MAAM+M,EAAkB7N,EAAKvB,WAAU,GACjCqP,EAAmBD,EAAgBnM,cAAc,gCACvDoM,EAAiBC,UAAY5U,EAE7B,MAAM6U,EAAgBF,EAAiBle,cAAcuB,UAErD0c,EAAgBra,UAAY,GAE5B,MAAMya,EAAqB9pB,SAASE,cAAc,OAClD4pB,EAAmB3e,aAAa,WAAY,KAC5C2e,EAAmB9c,UAAU3gB,OAAOw9B,GACpCC,EAAmBxd,YAAYqd,GAE/BD,EAAgB5nB,iBAAiB,SAAUJ,IACpB,IAAjBA,EAAMqoB,SAEVroB,EAAM7J,OAAOmyB,OAAO,IAGtBN,EAAgBpd,YAAYwd,GAE5BJ,EAAgB5nB,iBAAiB,SAAUJ,IACzCC,EAAQD,EAAM,IAGhBma,EAAKpQ,cAAca,YAAYod,EAAgB,GAC/C,GAEN,CD9BA1O,GAAU,2BAA2B,KACnC,IAAK,MAAMiP,KAAOjqB,SAASgf,uBAAuB,iBAAkBiL,EAAI5Z,MAAM6Z,MAAQ,EAAE,IED3E,IAAAC,GAAA,CACbC,WACAC,SACArP,aACAkB,WACAoO,YFGa,SAAqBtV,EAAMW,EAAMzE,EAAY,UAC1D,MAAMqZ,EAAc,GAEdC,EAAUC,IACd,MAAMR,EAAMQ,EAAKphB,SAAS,GAAGiR,WAAU,IAnB3C,SAAsB2P,GACpBA,EAAIjd,UAAU0d,OAAOhhC,MAAMmL,KAAKo1B,EAAIjd,WAAWsM,MAAMsB,GAAMA,EAAEnM,WAAW,kBAC1E,CAkBIkc,CAAaV,GAEbA,EAAI1M,cAAc,+BAA+B5Q,YAAcqI,EAE/DiV,EAAIjd,UAAU3gB,IAAI,iBAElB49B,EAAInoB,iBAAiB,SAAUyU,IAC7BA,EAAEqU,iBAEF9Q,GAAQ+Q,OAAO3+B,KAAK,CAClBmxB,SAAU,YAAY1H,IACtB7K,SAAS,GACT,IAGJ,MAAMggB,EAAqB3N,GAAcxH,GAAM,KAC7CsU,EAAI5Z,MAAM6Z,MAAQ,sCAEXhZ,KAGTuZ,EAAKne,YAAY2d,GACjBM,EAAYr+B,KAAK4+B,GAAoB,IAAML,EAAKjiB,YAAYyhB,IAAK,EAG7DQ,EAAOlB,KAeb,OAbKkB,EAWED,EAAOC,GATZF,EAAYr+B,KACV8uB,GACE,8BACA,KACEwP,EAAOjB,KAAU,IAEnB,IAKC,IAAMgB,EAAYt2B,SAASuiB,GAAMA,KAC1C,EEhDE2G,iBACAqM,mBACAuB,QACA3E,WCLF,IACI4E,GAIAC,GALAC,IAAc,EAIdC,IAAuB,EAIpB,MAAMrR,GAAU,CAAA,EACvBqQ,GAAarQ,QAAUA,GAEvB,MAAMsR,GAA2BC,GAC/B7hC,OAAO8hC,YACL9hC,OAAOkN,QAAQ20B,EAAUE,GAAGj3B,KAAI,EAAEisB,KAAO,CAACA,EAAG,CAAEpN,GAAIoN,EAAGiL,QAAQ,EAAM1J,QAASuJ,EAAU9K,QAG3F/2B,OAAO+S,eAAekvB,OAAQ,yBAA0B,CACtD3gC,IAAK,IAAMkgC,GACX9/B,IAAIwgC,IACEV,KC9BNpM,GAAY,mvGDsCVoM,GAAgB,IAAIt/B,MAAMggC,EAAK,CAC7B5gC,IAAG,CAACkB,EAAK4rB,KACK,QAARA,GAAmBsT,KACrBA,IAAc,EAGdS,GAAe/T,EAAM5rB,GAAMuT,IAEzB,IAAK,IAAIqsB,KAAOrsB,EACd,GAAKqsB,EAAI,GAGT,IAAK,IAAIzY,KAAMyY,EAAI,GAEjBD,GAAexY,EAAIyY,EAAI,IAAKrsB,IAC1B,MAAM8rB,EAAY9rB,EAAK,GAElB4qB,GAAa0B,eAAe,YAC/BriC,OAAO+S,eAAe4tB,GAAc,UAAW,CAC7Cr/B,IAAK,IAAMtB,OAAO6K,OAAO+2B,GAAwBC,MAIrDS,GAAc,EAAGvsB,GAAM,CAAC2pB,EAAG6C,KACzB,IAKE,GAAmB,iBAARA,EAAkB,OAE7B,IACE,IAAKd,GAAkB,CAErB,MAAOh/B,GAAOzC,OAAOkN,QAAQq1B,GAAMzS,MAAK,EAAC,CAAG/C,KAC1CA,GAAGnuB,aAAa8Y,WAAW,iCAGzBjV,IAAKg/B,IAAmB,GAM5Ba,GAAc7/B,EAAK8/B,GAAM,CAAC7C,EAAG6C,KAG3B5B,GAAahwB,MAAQ4xB,CAAI,GAE5B,CACF,CAAC,MAAQ,CAEV,IACE,GAAIZ,GAAsB,OAE1B,IAAIa,EAAQxiC,OAAOkN,QAAQq1B,GAAMzS,MAAK,EAAC,CAAG2S,KACxCA,GACI7jC,cACA8Y,WAAW,0DAGjB,IAAK8qB,EAAO,OAEZb,IAAuB,EACvBW,GAAcE,EAAM,GAAID,GAAM,EAAEvhB,GAAOuhB,KAChChR,GAAavQ,KAAOuQ,GAAavQ,GAAQ,IAE9C,MAAO3c,EAAQwd,GAASb,EACrBL,MAAM,KACN7V,KAAK+hB,GACJA,EAAE6V,eAAiB7V,EACfA,EAAErL,cAAcF,QAAQ,aAAa,CAACoe,EAAGn/B,IAAMA,EAAEmiC,gBACjD7V,IAGF8V,EAAc,IAAI5sB,KACtB,MAAM6sB,EAAML,KAAQxsB,GAEpB,MAAkC,oBAA5B6sB,EAAIC,UAAUjkC,WACX+hC,GAAahwB,MAAMmyB,SAASF,GAE9B,IAAI/8B,SAAQD,MAAOm9B,EAAKC,KAC7B,IACED,EAAIpC,GAAahwB,MAAMmyB,eAAeF,GACvC,CAAC,MAAO7V,GACPiW,EAAIjW,EACL,IACD,EAWJ,OARIlL,GACGyO,GAAQjsB,KAASisB,GAAQjsB,GAAU,IAExCisB,GAAQjsB,GAAQwd,GAAS8gB,GAEzBrS,GAAQjsB,GAAUs+B,EAGb,IAAIzgC,MAAMqgC,EAAM,CACrBhwB,MAAM0wB,EAAMjE,EAAMjpB,GAChB,IAAImtB,GAAiB,EAErB,IAAK,IAAIC,KAAe5R,GAAavQ,GACnC,IAGqB,kBAFNmiB,EAAYptB,KAEKmtB,GAAkBA,EACjD,CAAC,MAAOnW,GACPJ,QAAQxoB,MAAM,+BAAgC4oB,EAC/C,CAGH,OAAOmW,EAAiBD,EAAK1wB,MAAMysB,EAAMjpB,GAAQ,CAAEiL,KAAM,OAC1D,GACD,GAEL,CAAC,MAAQ,CACX,CAAC,MAAO+L,GACPJ,QAAQxoB,MAAM4oB,EACf,IACD,GAGP,KAIEvqB,EAAI4rB,QAvIW,KE3BvB,MAAMgV,GAAczN,GAAuB,mBACrC0N,GAAU,CAAA,EAEjBC,GAAe,CACnB1G,QAAS,CACP,CACEl3B,SAAQ8lB,KAAEA,IACR,GAAKA,EAAKvG,WAAW,YAErB,MAAO,SAASuG,EACb1M,MAAM,GACN6B,MAAM,KACN7V,KAAKvK,GAAM,IAAIgjC,KAAKC,UAAUjjC,QAC9BmwB,KAAK,KACT,GCpBQ,GAAE+S,UAAU,kBAAmBC,gBAAe,GAAQ,CAAA,KAC5D,CACLh+B,SAAQ8lB,KAAEA,IACR,IAAIA,EAAKvG,WAAW,OAAQuG,EAAKvG,WAAW,KAA5C,CAGA,IAAK,QAAQtN,KAAK6T,IAASiY,EACzBjY,EAAOiY,EAAUjY,OAEd,IAAKkY,EAAc,OAExB,MAAO,iBAAiBlY,KARiC,CAS1D,IDUDmY,KAIG,SAASC,GAAcja,GAC5ByZ,GAAYzZ,GAAI0Z,SAAU,EAE1B,IACEA,GAAQ1Z,IAAKka,YACd,CAAC,MAAO9W,GACPJ,QAAQxoB,MAAM,kDAAmD4oB,EAClE,QAEMsW,GAAQ1Z,EACjB,CAEO,SAASma,GAAana,GAC3B,OAAOyZ,GAAYzZ,GAAI0Z,QAAUO,GAAcja,GAAMoa,GAAapa,EACpE,CAEO/jB,eAAem+B,GAAapa,GACjCyZ,GAAYzZ,GAAI0Z,SAAU,QACpBW,GAAUra,EAAIyZ,GAAYzZ,GAAIiQ,KACtC,CAEAh0B,eAAeo+B,GAAUra,EAAIiQ,GAC3B,IAEE,MAAMiK,SAAEA,SAAmBnH,GAAO,IAAM9C,EAAM0J,IAE9CD,GAAQ1Z,GAAM,CAAEka,SAAUA,GAAa,MAAQ,GAChD,CAAC,MAAO9W,SACD6W,GAAcja,GAEpBgD,QAAQxoB,MAAM,mCAAoC4oB,EACnD,CACH,CAEOnnB,eAAeq+B,GAActa,EAAIiQ,EAAMsK,EAAUb,GAAU,GAChED,GAAYzZ,GAAM,CAChBiQ,OACAsK,WACAb,WAGEA,SAAeW,GAAUra,EAAIiQ,EACnC,CAEO,SAASuK,GAAaxa,UACpByZ,GAAYzZ,EACrB,CAGO/jB,eAAew+B,GAAmBC,GACvC,IAAIC,EAAYD,EAEXC,EAAU/e,SAAS,OAAM+e,GAAa,KAE3C,MAAMJ,cAAwBznB,MAAM6nB,EAAY,kBAAkBC,OAClE,IAAK,CAAC,OAAQ,SAAU,cAAe,QAAQ9F,OAAOl+B,GAA6B,iBAAhB2jC,EAAS3jC,KAC1E,KAAM,gDAER,IAAIq5B,EAAOwJ,KAAciB,IAAMzK,KAI/B,OAHIwJ,KAAciB,IAAMH,UAAUM,MAAQN,EAASM,OACjD5K,cAAoBnd,MAAM6nB,GAAaJ,EAASO,MAAQ,cAAcC,QAEjE,CACL9K,EACA,CACEpO,KAAM0Y,EAAS1Y,KACfmZ,OAAQT,EAASS,OACjBC,YAAaV,EAASU,YACtBJ,KAAMN,EAASM,MAGrB,CAEO5+B,eAAei/B,GAAqBR,EAAKhB,GAAU,GACxD,GAAID,GAAYiB,GACd,OAAO/T,GAAQwU,QAAQC,aAAa,CAAED,QAAS,gCAEjD,IACE,MAAOlL,EAAMsK,SAAkBE,GAAmBC,GAElDjB,GAAYiB,GAAO,CACjBzK,OACAsK,WACAb,UACA2B,QAAQ,GAGN3B,GAASW,GAAUK,EAAKzK,EAChC,CAAI,MACAtJ,GAAQwU,QAAQC,aAAa,CAAED,QAAS,oCACzC,CACH,CAGA,MAAMG,GAAoBt0B,GAAMqD,GAAGovB,IAAax9B,UAI9C,GAHAq/B,MAGIzuB,SAASud,cAAc,0CAE3B,IAAK,MAAOpK,EAAIoT,KAAW/8B,OAAOkN,QAAQk2B,IAAc,CACtD,GAAIrG,EAAOiI,OACT,IACE,MAAOpL,EAAMsK,SAAkBE,GAAmBza,GAElDub,SAAShB,GAAYA,EACrBgB,SAASvb,GAAIiQ,KAAOA,CAC5B,CAAQ,MACAjN,QAAQwY,IAAI,oCACb,CAKCpI,EAAOsG,SAASW,GAAUra,EAAIoT,EAAOnD,KAC1C,KE7HHh0B,eAAew/B,KACb,MAAOC,SAAoBC,mBAAmB,CAC5C7T,MAAO,CAAC,CAAEmT,YAAa,wBAAyB3Y,OAAQ,CAAE,kBAAmB,CAAC,YAG1EsZ,QAAaF,EAAWG,UACxBC,QAAgBF,EAAKb,OAE3B,IAAIR,EACJ,IAGE,GAFAA,EAbkB,CAACA,GACrBX,KAAKnN,MAAM8N,EAASplB,MAAMolB,EAASx8B,QAAQ,MAAQ,EAAGw8B,EAASx8B,QAAQ,QAY1Dg+B,CAAcD,IAEpB,CAAC,OAAQ,SAAU,eAAehH,OAAOsD,GAA6B,iBAAhBmC,EAASnC,KAClE,KAAM,kBACZ,CAAI,MACA,OAAOzR,GAAQwU,QAAQC,aAAa,CAAED,QAAS,4BAChD,CAED,UACMb,GACJC,EAAS1Y,KAAO,KAAOvkB,KAAKw2B,SAAW,GAAG7+B,SAAS,IAAI8+B,UAAU,GACjE+H,EACA,CACEja,KAAM0Y,EAAS1Y,KACfmZ,OAAQT,EAASS,OACjBC,YAAaV,EAASU,aAG5B,CAAI,MACAtU,GAAQwU,QAAQC,aAAa,CAAED,QAAS,6BACzC,CACH,CAEA,IAAIa,GAAc9vB,GAAE,GACpB,MAAMorB,GAAO,CACX,CACEzV,KAAM,UACN9D,UAAW,KACT,MAAMke,EAAiB/vB,GAAE,IAEzB,OAAOuX,EAAI;;;;aAIJiE,YAAmBuU,aAA0B,KAC9Cf,GAAqBe,KACrBA,EAAe,GAAG;;4BAGFR;;;;WAIjB7c,aAAc,IAAMvoB,OAAOkN,QAAQk2B;YAClC,EAAEzZ,EAAIoT,KAAY3P,EAAI,IAAIyY,aAAqB9I,QAAapT;YAC5DpB;aACC,GAGX,CACEiD,KAAM,SACN9D,UAAW,IAAM0F,EAAI,UAIzB,SAASyY,IAAWlc,GAAEA,EAAEoT,OAAEA,IACxB,OAAO3P,EAAI;;;;;;2DAM8C,IAAM+W,GAAaxa;;;;;;;;;;;;;;;;mDAgB3BoT,EAAOmH,SAAS1Y;;mDAEhBuR,EAAOmH,SAASS;;6CAEtB5H,EAAOmH,SAASU;;;;;WAKlD5Z;oBACS,IAAM+R,EAAOsG;oBACb,KACRS,GAAana,EAAG;;;SAK5B,CAEA,SAASmc,IAAUviB,UAAEA,EAAY,GAAE4N,QAAEA,EAAU,SAAQtR,SAAEA,IACvD,OAAOuN,EAAI;cACC+D;;aAED5N;MACP1D;YAEN,CAEA8T,GACE,WACAvG,EAAI;;;UAGI6T,GAAKn2B,KACL,CAAC21B,EAAK3J,IACJ1J,EAAI,IAAI0Y,cAAqB,IAAMH,GAAY7O,gBAAkB,IAC/DA,GAAO6O,KAAgB,qBAAuB,MAAMlF,EAAIjV,SAASsa;;aAGlE,IAAM7E,GAAK0E,MAAeje;;WAKvCsY,GAAgB,eAAgB,oBAAoB,IAClD+F,QAAQzV,QAAQ+Q,OAAO3+B,KAAK,CAAEmxB,SAAU,oBAAqBvS,SAAS,MChJxE,IAAK,IAAI7e,KAAOkqB,QAAS,CACvB,MAAMsW,EAAOtW,QAAQlqB,GAErBzC,OAAO+S,eAAe4Z,QAASlqB,EAAK,CAClCf,IAAG,KACM,EAETJ,IAAG,IACM2hC,GAGb,CAGA,MAAM+C,GAAyBhmC,OAAO+S,eAEtC/S,OAAO+S,eAAiB,YAAagD,GACnCA,EAAK,GAAGlC,cAAe,EAEvB,IACE,OAAOmyB,GAAuBzzB,MAAMnR,KAAM2U,EAC3C,CAAC,MAAQ,CACZ,EAEA/V,OAAOimC,OAAU7D,GAAQA,EAGzBjxB,YAAW,KACLqF,SAAS0vB,eAAe,wBAAwBjE,OAAOkE,SAASC,QAAQ,GAC3E,KAEHnE,OAAO8D,QAAUpF","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,109,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,136]}