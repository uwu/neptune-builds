{"version":3,"file":"neptune.js","sources":["../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/methods/is_server.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/symbols.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/utils.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/callable.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/constants.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/lazy.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/owner.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/superroot.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/context.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/batch.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/is_observable_boolean.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/is_observable_frozen.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/is_untracked.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/scheduler.sync.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/observable.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/observables.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/observer.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/memo.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/memo.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/boolean.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/cleanup.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/context.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/context.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/disposed.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/scheduler.async.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/effect.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/effect.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/resolve.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/root.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/for.cache.keyed.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/is_observable.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/get.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/suspense.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/suspense.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/for.cache.unkeyed.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/is_store.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/untrack.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/warmup.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/switch.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/ternary.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/is_batching.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/observable.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/is_observable_writable.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/target.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/readonly.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/root.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/selector.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/store.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/suspended.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/tick.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/try_catch.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/untracked.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/with.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/constants.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/methods/wrap_element.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/utils/creators.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/utils/lang.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_resolved.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_event_listener.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_abort_controller.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_abort_signal.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_scheduler.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_animation_frame.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_animation_loop.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/suspense.context.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/suspense.manager.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_render_effect.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_resource.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_fetch.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_idle_callback.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_idle_loop.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_interval.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_promise.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_timeout.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_cheap_disposed.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_microtask.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/utils/classlist.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/utils/diff.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/utils/fragment.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/utils/resolvers.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/utils/setters.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/methods/create_element.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/dynamic.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/error_boundary.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/for.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/for.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/fragment.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_guarded.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/if.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/keep_alive.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/methods/render.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/portal.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/suspense.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/switch.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/ternary.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/jsx/runtime.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/methods/create_directive.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/methods/hmr.js","../node_modules/.pnpm/htm@3.1.1/node_modules/htm/dist/htm.module.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/methods/html.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/methods/lazy.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/suspense.collector.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/methods/render_to_string.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/methods/template.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/methods/create_context.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/methods/h.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_context.js","../src/ui/components.js","../node_modules/.pnpm/spitroast@1.4.3/node_modules/spitroast/dist/esm/shared.js","../node_modules/.pnpm/spitroast@1.4.3/node_modules/spitroast/dist/esm/unpatch.js","../node_modules/.pnpm/spitroast@1.4.3/node_modules/spitroast/dist/esm/getPatchFunc.js","../node_modules/.pnpm/spitroast@1.4.3/node_modules/spitroast/dist/esm/hook.js","../node_modules/.pnpm/spitroast@1.4.3/node_modules/spitroast/dist/esm/index.js","../node_modules/.pnpm/idb-keyval@6.2.1/node_modules/idb-keyval/dist/index.js","../src/api/utils.js","../node_modules/.pnpm/es-module-lexer@1.3.0/node_modules/es-module-lexer/dist/lexer.js","../node_modules/.pnpm/@uwu+quartz@1.3.7/node_modules/@uwu/quartz/index.js","../node_modules/.pnpm/quartz-plugin-url-import@1.0.1/node_modules/quartz-plugin-url-import/index.js","../src/api/intercept.js","../src/api/plugins.js","../src/api/themes.js","../src/api/observe.js","../src/api/registerRoute.js","../src/api/registerTab.js","../src/api/hookContextMenu.js","../src/api/showModal.js","../src/windowObject.js","../src/handleExfiltrations.js","../src/ui/pluginsTab.js","../src/ui/themesTab.js","../src/styles.js","../src/ui/settings.js","../src/index.js"],"sourcesContent":["/* HELPERS */\nconst IS_BROWSER = !!globalThis.CDATASection?.toString?.().match(/^\\s*function\\s+CDATASection\\s*\\(\\s*\\)\\s*\\{\\s*\\[native code\\]\\s*\\}\\s*$/);\n/* MAIN */\nconst isServer = () => {\n    return !IS_BROWSER;\n};\n/* EXPORT */\nexport default isServer;\n","/* MAIN */\nconst SYMBOL_CACHED = Symbol('Cached');\nconst SYMBOL_OBSERVABLE = Symbol('Observable');\nconst SYMBOL_OBSERVABLE_BOOLEAN = Symbol('Observable.Boolean');\nconst SYMBOL_OBSERVABLE_FROZEN = Symbol('Observable.Frozen');\nconst SYMBOL_OBSERVABLE_READABLE = Symbol('Observable.Readable');\nconst SYMBOL_OBSERVABLE_WRITABLE = Symbol('Observable.Writable');\nconst SYMBOL_STORE = Symbol('Store');\nconst SYMBOL_STORE_KEYS = Symbol('Store.Keys');\nconst SYMBOL_STORE_OBSERVABLE = Symbol('Store.Observable');\nconst SYMBOL_STORE_TARGET = Symbol('Store.Target');\nconst SYMBOL_STORE_VALUES = Symbol('Store.Values');\nconst SYMBOL_STORE_UNTRACKED = Symbol('Store.Untracked');\nconst SYMBOL_SUSPENSE = Symbol('Suspense');\nconst SYMBOL_UNCACHED = Symbol('Uncached');\nconst SYMBOL_UNTRACKED = Symbol('Untracked');\nconst SYMBOL_UNTRACKED_UNWRAPPED = Symbol('Untracked.Unwrapped');\n/* EXPORT */\nexport { SYMBOL_CACHED, SYMBOL_OBSERVABLE, SYMBOL_OBSERVABLE_BOOLEAN, SYMBOL_OBSERVABLE_FROZEN, SYMBOL_OBSERVABLE_READABLE, SYMBOL_OBSERVABLE_WRITABLE, SYMBOL_STORE, SYMBOL_STORE_KEYS, SYMBOL_STORE_OBSERVABLE, SYMBOL_STORE_TARGET, SYMBOL_STORE_VALUES, SYMBOL_STORE_UNTRACKED, SYMBOL_SUSPENSE, SYMBOL_UNCACHED, SYMBOL_UNTRACKED, SYMBOL_UNTRACKED_UNWRAPPED };\n","/* MAIN */\nconst castArray = (value) => {\n    return isArray(value) ? value : [value];\n};\nconst castError = (error) => {\n    if (error instanceof Error)\n        return error;\n    if (typeof error === 'string')\n        return new Error(error);\n    return new Error('Unknown error');\n};\nconst { is } = Object;\nconst { isArray } = Array;\nconst isEqual = (a, b) => {\n    if (a.length !== b.length)\n        return false;\n    for (let i = 0, l = a.length; i < l; i++) {\n        const valueA = a[i];\n        const valueB = b[i];\n        if (!is(valueA, valueB))\n            return false;\n    }\n    return true;\n};\nconst isFunction = (value) => {\n    return typeof value === 'function';\n};\nconst isObject = (value) => {\n    return (value !== null) && (typeof value === 'object');\n};\nconst isSymbol = (value) => {\n    return typeof value === 'symbol';\n};\nconst noop = () => {\n    return;\n};\nconst nope = () => {\n    return false;\n};\n/* EXPORT */\nexport { castArray, castError, is, isArray, isEqual, isFunction, isObject, isSymbol, noop, nope };\n","/* IMPORT */\nimport { SYMBOL_OBSERVABLE, SYMBOL_OBSERVABLE_FROZEN, SYMBOL_OBSERVABLE_READABLE, SYMBOL_OBSERVABLE_WRITABLE } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN - FUNCTIONS */\nfunction frozenFunction() {\n    if (arguments.length) {\n        throw new Error('A readonly Observable can not be updated');\n    }\n    else {\n        return this;\n    }\n}\nfunction readableFunction() {\n    if (arguments.length) {\n        throw new Error('A readonly Observable can not be updated');\n    }\n    else {\n        return this.get();\n    }\n}\nfunction writableFunction(fn) {\n    if (arguments.length) {\n        if (isFunction(fn)) {\n            return this.C(fn);\n        }\n        else {\n            return this.set(fn); //TSC\n        }\n    }\n    else {\n        return this.get();\n    }\n}\n/* MAIN - GENERATORS */\nconst frozen = (value) => {\n    const fn = frozenFunction.bind(value); //TSC\n    fn[SYMBOL_OBSERVABLE] = true;\n    fn[SYMBOL_OBSERVABLE_FROZEN] = true;\n    return fn;\n};\nconst readable = (value) => {\n    //TODO: Make a frozen one instead if disposed\n    const fn = readableFunction.bind(value); //TSC\n    fn[SYMBOL_OBSERVABLE] = true;\n    fn[SYMBOL_OBSERVABLE_READABLE] = value;\n    return fn;\n};\nconst writable = (value) => {\n    const fn = writableFunction.bind(value); //TSC\n    fn[SYMBOL_OBSERVABLE] = true;\n    fn[SYMBOL_OBSERVABLE_WRITABLE] = value;\n    return fn;\n};\n/* EXPORT */\nexport { frozen, readable, writable };\n","/* IMPORT */\nimport { frozen } from './objects/callable.js';\n/* MAIN */\nconst DIRTY_NO = 0; // The observer is not dirty, for sure\nconst DIRTY_MAYBE_NO = 1; // The observer is not dirty, possibly\nconst DIRTY_MAYBE_YES = 2; // The observer is dirty, possibly\nconst DIRTY_YES = 3; // The observer is dirty, for sure\nconst OBSERVABLE_FALSE = frozen(false);\nconst OBSERVABLE_TRUE = frozen(true);\nconst UNAVAILABLE = new Proxy({}, new Proxy({}, { get() { throw new Error('Unavailable value'); } })); //TSC\nconst UNINITIALIZED = function () { }; //TSC\n/* EXPORT */\nexport { DIRTY_NO, DIRTY_MAYBE_NO, DIRTY_MAYBE_YES, DIRTY_YES };\nexport { OBSERVABLE_FALSE, OBSERVABLE_TRUE };\nexport { UNAVAILABLE, UNINITIALIZED };\n","/* IMPORT */\n/* MAIN */\nconst lazyArrayEach = (arr, fn) => {\n    if (arr instanceof Array) {\n        for (let i = 0, l = arr.length; i < l; i++) {\n            fn(arr[i]);\n        }\n    }\n    else if (arr) {\n        fn(arr);\n    }\n};\nconst lazyArrayEachRight = (arr, fn) => {\n    if (arr instanceof Array) {\n        for (let i = arr.length - 1; i >= 0; i--) {\n            fn(arr[i]);\n        }\n    }\n    else if (arr) {\n        fn(arr);\n    }\n};\nconst lazyArrayPush = (obj, key, value) => {\n    const arr = obj[key];\n    if (arr instanceof Array) {\n        arr.push(value);\n    }\n    else if (arr) {\n        obj[key] = [arr, value];\n    }\n    else {\n        obj[key] = value;\n    }\n};\nconst lazySetAdd = (obj, key, value) => {\n    const set = obj[key];\n    if (set instanceof Set) {\n        set.add(value);\n    }\n    else if (set) {\n        if (value !== set) {\n            const s = new Set();\n            s.add(set);\n            s.add(value);\n            obj[key] = s;\n        }\n    }\n    else {\n        obj[key] = value;\n    }\n};\nconst lazySetDelete = (obj, key, value) => {\n    const set = obj[key];\n    if (set instanceof Set) {\n        set.delete(value);\n    }\n    else if (set === value) {\n        obj[key] = undefined;\n    }\n};\nconst lazySetEach = (set, fn) => {\n    if (set instanceof Set) {\n        for (const value of set) {\n            fn(value);\n        }\n    }\n    else if (set) {\n        fn(set);\n    }\n};\n/* EXPORT */\nexport { lazyArrayEach, lazyArrayEachRight, lazyArrayPush };\nexport { lazySetAdd, lazySetDelete, lazySetEach };\n","/* IMPORT */\nimport { UNAVAILABLE } from '../constants.js';\nimport { OBSERVER, OWNER, setObserver, setOwner } from '../context.js';\nimport { lazyArrayEachRight } from '../lazy.js';\nimport { castError } from '../utils.js';\n/* HELPERS */\nconst onCleanup = (cleanup) => cleanup.call(cleanup);\nconst onDispose = (owner) => owner.Q(true);\n/* MAIN */\n//TODO: Throw when registering stuff O disposing, maybe\nclass Owner {\n    constructor() {\n        /* VARIABLES */\n        this.disposed = false;\n        this.B = undefined;\n        this.S = undefined;\n        this.D = undefined;\n        this.K = undefined;\n        this.T = undefined;\n        this.U = undefined;\n    }\n    /* API */\n    catch(error, silent) {\n        const { S } = this;\n        if (S) {\n            S(error); //TODO: This assumes that the error handler won't throw immediately, which we know, but Owner shouldn't know\n            return true;\n        }\n        else {\n            if (this.parent?.catch(error, true))\n                return true;\n            if (silent)\n                return false;\n            // console.error ( error.stack ); // <-- Log \"error.stack\" to better understand where the error happened\n            throw error;\n        }\n    }\n    Q(deep) {\n        lazyArrayEachRight(this.D, onDispose);\n        lazyArrayEachRight(this.K, onDispose);\n        lazyArrayEachRight(this.U, onDispose);\n        lazyArrayEachRight(this.B, onCleanup);\n        this.B = undefined;\n        this.disposed = deep;\n        this.S = undefined;\n        this.K = undefined;\n        this.U = undefined;\n    }\n    get(symbol) {\n        return this.context?.[symbol];\n    }\n    E(fn, owner, observer) {\n        const ownerPrev = OWNER;\n        const observerPrev = OBSERVER;\n        setOwner(owner);\n        setObserver(observer);\n        try {\n            return fn();\n        }\n        catch (error) {\n            this.catch(castError(error), false); // Bubbling the error up\n            return UNAVAILABLE; // Returning a value that is the least likely to cause bugs\n        }\n        finally {\n            setOwner(ownerPrev);\n            setObserver(observerPrev);\n        }\n    }\n}\n/* EXPORT */\nexport default Owner;\n","/* IMPORT */\nimport Owner from './owner.js';\n/* MAIN */\nclass SuperRoot extends Owner {\n    constructor() {\n        /* VARIABLES */\n        super(...arguments);\n        this.context = {};\n    }\n}\n/* EXPORT */\nexport default SuperRoot;\n","/* IMPORT */\nimport SuperRoot from './objects/superroot.js';\n/* MAIN - READ */\n// This module relies on live-binding of exported variables to avoid a bunch of property accesses\nlet BATCH;\nlet SUPER_OWNER = new SuperRoot();\nlet OBSERVER;\nlet OWNER = SUPER_OWNER;\n/* MAIN - WRITE */\n// Unfortunately live-bounded exports can't just be overridden, so we need these functions\nconst setBatch = (value) => BATCH = value;\nconst setObserver = (value) => OBSERVER = value;\nconst setOwner = (value) => OWNER = value;\n/* EXPORT */\nexport { BATCH, OBSERVER, OWNER, SUPER_OWNER };\nexport { setBatch, setObserver, setOwner };\n","/* IMPORT */\nimport { setBatch } from '../context.js';\nimport { noop } from '../utils.js';\n/* HELPERS */\nlet M = 0;\nlet resolve = noop;\n/* MAIN */\nconst batch = async (fn) => {\n    if (!M) {\n        setBatch(new Promise(r => resolve = r));\n    }\n    try {\n        M += 1;\n        return await fn();\n    }\n    finally {\n        M -= 1;\n        if (!M) {\n            setBatch(undefined);\n            resolve();\n        }\n    }\n};\n/* MAIN */\nexport default batch;\n","/* IMPORT */\nimport { SYMBOL_OBSERVABLE_BOOLEAN } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nconst isObservableBoolean = (value) => {\n    return isFunction(value) && (SYMBOL_OBSERVABLE_BOOLEAN in value);\n};\n/* EXPORT */\nexport default isObservableBoolean;\n","/* IMPORT */\nimport { SYMBOL_OBSERVABLE_FROZEN, SYMBOL_OBSERVABLE_READABLE } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nconst isObservableFrozen = (value) => {\n    return isFunction(value) && ((SYMBOL_OBSERVABLE_FROZEN in value) || !!value[SYMBOL_OBSERVABLE_READABLE]?.parent?.disposed);\n};\n/* EXPORT */\nexport default isObservableFrozen;\n","/* IMPORT */\nimport { SYMBOL_UNTRACKED, SYMBOL_UNTRACKED_UNWRAPPED } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nconst isUntracked = (value) => {\n    return isFunction(value) && ((SYMBOL_UNTRACKED in value) || (SYMBOL_UNTRACKED_UNWRAPPED in value));\n};\n/* EXPORT */\nexport default isUntracked;\n","/* IMPORT */\n/* MAIN */\n// This ensures that there's only one flushing of the queue happening at the same time\nclass Scheduler {\n    constructor() {\n        /* VARIABLES */\n        this.A1 = [];\n        this.M = 0;\n        this.A2 = false;\n        /* QUEING API */\n        this.N = () => {\n            if (this.A2)\n                return;\n            if (this.M)\n                return;\n            if (!this.A1.length)\n                return;\n            try {\n                this.A2 = true;\n                while (true) {\n                    const queue = this.A1;\n                    if (!queue.length)\n                        break;\n                    this.A1 = [];\n                    for (let i = 0, l = queue.length; i < l; i++) {\n                        queue[i].C();\n                    }\n                }\n            }\n            finally {\n                this.A2 = false;\n            }\n        };\n        this.E = (fn) => {\n            this.M += 1;\n            fn();\n            this.M -= 1;\n            this.N();\n        };\n        /* SCHEDULING API */\n        this.F = (observer) => {\n            this.A1.push(observer);\n        };\n    }\n}\n/* EXPORT */\nexport default new Scheduler();\n","/* IMPORT */\nimport { DIRTY_MAYBE_NO, DIRTY_YES, UNINITIALIZED } from '../constants.js';\nimport { OBSERVER } from '../context.js';\nimport Scheduler from './scheduler.sync.js';\nimport { is, nope } from '../utils.js';\n/* MAIN */\nclass Observable {\n    /* CONSTRUCTOR */\n    constructor(value, options, parent) {\n        this.K = new Set();\n        this.value = value;\n        if (parent) {\n            this.parent = parent;\n        }\n        if (options?.equals !== undefined) {\n            this.equals = options.equals || nope;\n        }\n    }\n    /* API */\n    get() {\n        if (!this.parent?.disposed) {\n            this.parent?.C();\n            OBSERVER?.A.L(this);\n        }\n        return this.value;\n    }\n    set(value) {\n        const equals = this.equals || is;\n        const fresh = (this.value === UNINITIALIZED) || !equals(value, this.value);\n        if (!fresh)\n            return value;\n        this.value = value;\n        Scheduler.M += 1;\n        this.I(DIRTY_YES);\n        Scheduler.M -= 1;\n        Scheduler.N();\n        return value;\n    }\n    I(J) {\n        for (const observer of this.K) {\n            if (observer.J !== DIRTY_MAYBE_NO || observer.A.has(this)) { // Maybe this is a potential future dependency we haven't re-read yet\n                if (observer.sync) {\n                    observer.J = Math.max(observer.J, J);\n                    Scheduler.F(observer);\n                }\n                else {\n                    observer.I(J);\n                }\n            }\n        }\n    }\n    C(fn) {\n        const value = fn(this.value);\n        return this.set(value);\n    }\n}\n/* EXPORT */\nexport default Observable;\n","/* IMPORT */\n/* MAIN */\n// Dedicated data structures for managing A efficiently\n// We use an array if the list is small enough, as that's faster than a Set, and only switch to Sets O that\nclass ObservablesArray {\n    /* CONSTRUCTOR */\n    constructor(observer) {\n        this.observer = observer;\n        this.A = [];\n        this.P = 0;\n    }\n    /* API */\n    Q(deep) {\n        if (deep) {\n            const { observer, A } = this;\n            for (let i = 0; i < A.length; i++) {\n                A[i].K.delete(observer);\n            }\n        }\n        this.P = 0;\n    }\n    R() {\n        const { observer, A, P } = this;\n        const observablesLength = A.length;\n        if (P < observablesLength) {\n            for (let i = P; i < observablesLength; i++) {\n                A[i].K.delete(observer);\n            }\n            A.length = P;\n        }\n    }\n    empty() {\n        return !this.A.length;\n    }\n    has(observable) {\n        const index = this.A.indexOf(observable);\n        return index >= 0 && index < this.P;\n    }\n    L(observable) {\n        const { observer, A, P } = this;\n        const observablesLength = A.length;\n        if (observablesLength > 0) {\n            if (A[P] === observable) {\n                this.P += 1;\n                return;\n            }\n            const index = A.indexOf(observable);\n            if (index >= 0 && index < P) {\n                return;\n            }\n            if (P < observablesLength - 1) {\n                this.R();\n            }\n            else if (P === observablesLength - 1) {\n                A[P].K.delete(observer);\n            }\n        }\n        observable.K.add(observer);\n        A[this.P++] = observable;\n        if (P === 128) { // Switching to a Set, as indexOf checks may get artbirarily expensive otherwise\n            observer.A = new ObservablesSet(observer, A);\n        }\n    }\n    C() {\n        const { A } = this;\n        for (let i = 0, l = A.length; i < l; i++) {\n            A[i].parent?.C();\n        }\n    }\n}\nclass ObservablesSet {\n    /* CONSTRUCTOR */\n    constructor(observer, A) {\n        this.observer = observer;\n        this.A = new Set(A);\n    }\n    /* API */\n    Q(deep) {\n        for (const observable of this.A) {\n            observable.K.delete(this.observer);\n        }\n    }\n    R() {\n        return;\n    }\n    empty() {\n        return !this.A.size;\n    }\n    has(observable) {\n        return this.A.has(observable);\n    }\n    L(observable) {\n        const { observer, A } = this;\n        const sizePrev = A.size;\n        observable.K.add(observer);\n        const sizeNext = A.size;\n        if (sizePrev === sizeNext)\n            return; // Cheaper than Set.has+Set.add\n        A.add(observable);\n    }\n    C() {\n        for (const observable of this.A) {\n            observable.parent?.C();\n        }\n    }\n}\n/* EXPORT */\nexport { ObservablesArray, ObservablesSet };\n","/* IMPORT */\nimport { DIRTY_NO, DIRTY_MAYBE_NO, DIRTY_MAYBE_YES, DIRTY_YES } from '../constants.js';\nimport { OWNER, SUPER_OWNER } from '../context.js';\nimport { lazyArrayPush } from '../lazy.js';\nimport { ObservablesArray, ObservablesSet } from './observables.js';\nimport Owner from './owner.js';\n/* MAIN */\nclass Observer extends Owner {\n    /* CONSTRUCTOR */\n    constructor() {\n        super();\n        /* VARIABLES */\n        this.parent = OWNER;\n        this.context = OWNER.context;\n        this.J = DIRTY_YES;\n        this.A = new ObservablesArray(this);\n        if (OWNER !== SUPER_OWNER) {\n            lazyArrayPush(this.parent, 'K', this);\n        }\n    }\n    /* API */\n    Q(deep) {\n        this.A.Q(deep);\n        super.Q(deep);\n    }\n    H(fn) {\n        this.Q(false);\n        this.J = DIRTY_MAYBE_NO; // Resetting the trip flag, we didn't re-execute just yet\n        try {\n            return this.E(fn, this, this);\n        }\n        finally {\n            this.A.R();\n        }\n    }\n    run() {\n        throw new Error('Abstract method');\n    }\n    I(J) {\n        throw new Error('Abstract method');\n    }\n    C() {\n        if (this.disposed)\n            return; // Disposed, it shouldn't be updated again\n        if (this.J === DIRTY_MAYBE_YES) { // Maybe we are dirty, let's check with our A, to be sure\n            this.A.C();\n        }\n        if (this.J === DIRTY_YES) { // We are dirty, let's H\n            this.J = DIRTY_MAYBE_NO; // Trip flag, to be able to tell if we caused ourselves to be dirty again\n            this.run();\n            if (this.J === DIRTY_MAYBE_NO) { // Not dirty anymore\n                this.J = DIRTY_NO;\n            }\n            else { // Maybe we are still dirty, let's check again\n                this.C();\n            }\n        }\n        else { // Not dirty\n            this.J = DIRTY_NO;\n        }\n    }\n}\n/* EXPORT */\nexport default Observer;\n","/* IMPORT */\nimport { DIRTY_MAYBE_YES, UNAVAILABLE, UNINITIALIZED } from '../constants.js';\nimport Observable from './observable.js';\nimport Observer from './observer.js';\n/* MAIN */\nclass Memo extends Observer {\n    /* CONSTRUCTOR */\n    constructor(fn, options) {\n        super();\n        this.fn = fn;\n        this.observable = new Observable(UNINITIALIZED, options, this);\n        if (options?.sync === true) {\n            this.sync = true;\n            this.C();\n        }\n    }\n    /* API */\n    run() {\n        const G = super.H(this.fn);\n        if (!this.disposed && this.A.empty()) {\n            this.disposed = true;\n        }\n        if (G !== UNAVAILABLE) {\n            this.observable.set(G);\n        }\n    }\n    I(J) {\n        const statusPrev = this.J;\n        if (statusPrev >= J)\n            return;\n        this.J = J;\n        if (statusPrev === DIRTY_MAYBE_YES)\n            return;\n        this.observable.I(DIRTY_MAYBE_YES);\n    }\n}\n/* EXPORT */\nexport default Memo;\n","/* IMPORT */\nimport isObservableFrozen from './is_observable_frozen.js';\nimport isUntracked from './is_untracked.js';\nimport { frozen, readable } from '../objects/callable.js';\nimport Memo from '../objects/memo.js';\n/* MAIN */\nconst memo = (fn, options) => {\n    if (isObservableFrozen(fn)) {\n        return fn;\n    }\n    else if (isUntracked(fn)) {\n        return frozen(fn());\n    }\n    else {\n        const memo = new Memo(fn, options);\n        const observable = readable(memo.observable);\n        return observable;\n    }\n};\n/* EXPORT */\nexport default memo;\n","/* IMPORT */\nimport isObservableBoolean from './is_observable_boolean.js';\nimport isObservableFrozen from './is_observable_frozen.js';\nimport isUntracked from './is_untracked.js';\nimport memo from './memo.js';\nimport { SYMBOL_OBSERVABLE_BOOLEAN } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nconst boolean = (value) => {\n    if (isFunction(value)) {\n        if (isObservableFrozen(value) || isUntracked(value)) {\n            return !!value();\n        }\n        else if (isObservableBoolean(value)) {\n            return value;\n        }\n        else {\n            const boolean = memo(() => !!value());\n            boolean[SYMBOL_OBSERVABLE_BOOLEAN] = true;\n            return boolean;\n        }\n    }\n    else {\n        return !!value;\n    }\n};\n/* EXPORT */\nexport default boolean;\n","/* IMPORT */\nimport { OWNER } from '../context.js';\nimport { lazyArrayPush } from '../lazy.js';\n/* MAIN */\nconst cleanup = (fn) => {\n    lazyArrayPush(OWNER, 'B', fn);\n};\n/* EXPORT */\nexport default cleanup;\n","/* IMPORT */\nimport { OWNER } from '../context.js';\nimport { lazyArrayPush } from '../lazy.js';\nimport Owner from './owner.js';\n/* MAIN */\nclass Context extends Owner {\n    /* CONSTRUCTOR */\n    constructor(context) {\n        super();\n        /* VARIABLES */\n        this.parent = OWNER;\n        this.context = { ...OWNER.context, ...context };\n        lazyArrayPush(this.parent, 'D', this);\n    }\n    /* API */\n    E(fn) {\n        return super.E(fn, this, undefined);\n    }\n}\n/* EXPORT */\nexport default Context;\n","/* IMPORT */\nimport { OWNER } from '../context.js';\nimport Context from '../objects/context.js';\nimport { isSymbol, noop } from '../utils.js';\nfunction context(symbolOrContext, fn) {\n    if (isSymbol(symbolOrContext)) {\n        return OWNER.context[symbolOrContext];\n    }\n    else {\n        return new Context(symbolOrContext).E(fn || noop);\n    }\n}\n/* EXPORT */\nexport default context;\n","/* IMPORT */\nimport cleanup from './cleanup.js';\nimport { readable } from '../objects/callable.js';\nimport Observable from '../objects/observable.js';\n/* MAIN */\nconst disposed = () => {\n    const observable = new Observable(false);\n    const A4 = () => observable.set(true);\n    cleanup(A4);\n    return readable(observable);\n};\n/* EXPORT */\nexport default disposed;\n","/* IMPORT */\nimport { BATCH } from '../context.js';\n/* MAIN */\n// Using 2 microtasks to give a chance to things using 1 microtask (like refs in Voby) to run first\nclass Scheduler {\n    constructor() {\n        /* VARIABLES */\n        this.A1 = [];\n        this.A2 = false;\n        this.A3 = false;\n        /* QUEUING API */\n        this.N = () => {\n            if (this.A2)\n                return;\n            if (!this.A1.length)\n                return;\n            try {\n                this.A2 = true;\n                while (true) {\n                    const queue = this.A1;\n                    if (!queue.length)\n                        break;\n                    this.A1 = [];\n                    for (let i = 0, l = queue.length; i < l; i++) {\n                        queue[i].C();\n                    }\n                }\n            }\n            finally {\n                this.A2 = false;\n            }\n        };\n        this.queue = () => {\n            if (this.A3)\n                return;\n            this.A3 = true;\n            this.resolve();\n        };\n        this.resolve = () => {\n            queueMicrotask(() => {\n                queueMicrotask(() => {\n                    if (BATCH) {\n                        BATCH.finally(this.resolve);\n                    }\n                    else {\n                        this.A3 = false;\n                        this.N();\n                    }\n                });\n            });\n        };\n        /* SCHEDULING API */\n        this.F = (effect) => {\n            this.A1.push(effect);\n            this.queue();\n        };\n    }\n}\n/* EXPORT */\nexport default new Scheduler();\n","/* IMPORT */\nimport { lazyArrayPush } from '../lazy.js';\nimport Observer from './observer.js';\nimport Scheduler from './scheduler.async.js';\nimport { SYMBOL_SUSPENSE } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nclass Effect extends Observer {\n    /* CONSTRUCTOR */\n    constructor(fn, options) {\n        super();\n        this.fn = fn;\n        if (options?.suspense !== false) {\n            const suspense = this.get(SYMBOL_SUSPENSE);\n            if (suspense) {\n                this.suspense = suspense;\n            }\n        }\n        if (options?.sync === true) {\n            this.sync = true;\n        }\n        if (options?.sync === 'init') {\n            this.init = true;\n            this.C();\n        }\n        else {\n            this.F();\n        }\n    }\n    /* API */\n    run() {\n        const G = super.H(this.fn);\n        if (isFunction(G)) {\n            lazyArrayPush(this, 'B', G);\n        }\n    }\n    F() {\n        if (this.suspense?.suspended)\n            return;\n        if (this.sync) {\n            this.C();\n        }\n        else {\n            Scheduler.F(this);\n        }\n    }\n    I(J) {\n        const statusPrev = this.J;\n        if (statusPrev >= J)\n            return;\n        this.J = J;\n        if (!this.sync || (statusPrev !== 2 && statusPrev !== 3)) { // It isn't currently executing, so let's F it\n            this.F();\n        }\n    }\n    C() {\n        if (this.suspense?.suspended)\n            return;\n        super.C();\n    }\n}\n/* EXPORT */\nexport default Effect;\n","/* IMPORT */\nimport Effect from '../objects/effect.js';\n/* MAIN */\nconst effect = (fn, options) => {\n    const effect = new Effect(fn, options);\n    const Q = () => effect.Q(true);\n    return Q;\n};\n/* EXPORT */\nexport default effect;\n","/* IMPORT */\nimport memo from './memo.js';\nimport { frozen } from '../objects/callable.js';\nimport { SYMBOL_OBSERVABLE, SYMBOL_UNTRACKED, SYMBOL_UNTRACKED_UNWRAPPED } from '../symbols.js';\nimport { isFunction } from '../utils.js';\nfunction resolve(value) {\n    if (isFunction(value)) {\n        if (SYMBOL_UNTRACKED_UNWRAPPED in value) {\n            return resolve(value());\n        }\n        else if (SYMBOL_UNTRACKED in value) {\n            return frozen(resolve(value()));\n        }\n        else if (SYMBOL_OBSERVABLE in value) {\n            return value;\n        }\n        else {\n            return memo(() => resolve(value()));\n        }\n    }\n    if (value instanceof Array) {\n        const resolved = new Array(value.length);\n        for (let i = 0, l = resolved.length; i < l; i++) {\n            resolved[i] = resolve(value[i]);\n        }\n        return resolved;\n    }\n    else {\n        return value;\n    }\n}\n/* EXPORT */\nexport default resolve;\n","/* IMPORT */\nimport { OWNER } from '../context.js';\nimport { lazySetAdd, lazySetDelete } from '../lazy.js';\nimport Owner from './owner.js';\nimport { SYMBOL_SUSPENSE } from '../symbols.js';\n/* MAIN */\nclass Root extends Owner {\n    /* CONSTRUCTOR */\n    constructor(V) {\n        super();\n        /* VARIABLES */\n        this.parent = OWNER;\n        this.context = OWNER.context;\n        if (V) {\n            const suspense = this.get(SYMBOL_SUSPENSE);\n            if (suspense) {\n                this.A0 = true;\n                lazySetAdd(this.parent, 'T', this);\n            }\n        }\n    }\n    /* API */\n    Q(deep) {\n        if (this.A0) {\n            lazySetDelete(this.parent, 'T', this);\n        }\n        super.Q(deep);\n    }\n    E(fn) {\n        const Q = () => this.Q(true);\n        const fnWithDispose = () => fn(Q);\n        return super.E(fnWithDispose, this, undefined);\n    }\n}\n/* EXPORT */\nexport default Root;\n","/* IMPORT */\nimport { OWNER } from '../context.js';\nimport { lazySetAdd, lazySetDelete } from '../lazy.js';\nimport cleanup from './cleanup.js';\nimport resolve from './resolve.js';\nimport { frozen, readable } from '../objects/callable.js';\nimport Observable from '../objects/observable.js';\nimport Root from '../objects/root.js';\nimport { SYMBOL_CACHED, SYMBOL_SUSPENSE, SYMBOL_UNCACHED } from '../symbols.js';\n/* HELPERS */\nconst DUMMY_INDEX = frozen(-1);\nclass MappedRoot extends Root {\n}\n/* MAIN */\nclass CacheKeyed {\n    /* CONSTRUCTOR */\n    constructor(fn) {\n        /* VARIABLES */\n        this.parent = OWNER;\n        this.suspense = OWNER.get(SYMBOL_SUSPENSE);\n        this.A5 = new Map();\n        this.A6 = false; // The A6 is flipped with each iteration, the T that don't have the updated one are disposed, it's like a cheap M basically\n        this.A7 = 0; // Number of previous items\n        this.A8 = 0; // Number of previous items that got reused\n        this.A9 = 0; // Number of next items\n        /* API */\n        this.cleanup = () => {\n            if (!this.A7)\n                return; // There was nothing AA, no need to cleanup\n            if (this.A7 === this.A8)\n                return; // All the previous items were reused, no need to cleanup\n            const { A5, A6 } = this;\n            if (!A5.size)\n                return; // Nothing to Q of\n            if (this.A9) { // Regular cleanup\n                A5.forEach((mapped, value) => {\n                    if (mapped.A6 === A6)\n                        return;\n                    mapped.Q(true);\n                    A5.delete(value);\n                });\n            }\n            else { // There is nothing O, disposing quickly\n                this.A5.forEach(mapped => {\n                    mapped.Q(true);\n                });\n                this.A5 = new Map();\n            }\n        };\n        this.Q = () => {\n            if (this.suspense) {\n                lazySetDelete(this.parent, 'T', this.T);\n            }\n            this.A7 = this.A5.size;\n            this.A8 = 0;\n            this.A9 = 0;\n            this.cleanup();\n        };\n        this.AA = () => {\n            this.A6 = !this.A6;\n            this.A8 = 0;\n            this.A9 = 0;\n        };\n        this.O = (values) => {\n            this.A9 = values.length;\n            this.cleanup();\n            this.A7 = this.A9;\n            this.A8 = 0;\n        };\n        this.map = (values) => {\n            this.AA();\n            const { A5, A6, fn, AB } = this;\n            const results = new Array(values.length);\n            let resultsCached = true; // Whether all results are cached, if so this enables an optimization\n            let resultsUncached = true; // Whether all results are anew, if so this enables an optimization in Voby\n            let A8 = 0;\n            for (let i = 0, l = values.length; i < l; i++) {\n                const value = values[i];\n                const cached = A5.get(value);\n                if (cached && cached.A6 !== A6) {\n                    resultsUncached = false;\n                    A8 += 1;\n                    cached.A6 = A6;\n                    cached.index?.set(i);\n                    results[i] = cached.G; //TSC\n                }\n                else {\n                    resultsCached = false;\n                    const mapped = new MappedRoot(false);\n                    if (cached) {\n                        cleanup(() => mapped.Q(true));\n                    }\n                    mapped.E(() => {\n                        let index = DUMMY_INDEX;\n                        if (AB) {\n                            mapped.index = new Observable(i);\n                            index = readable(mapped.index);\n                        }\n                        const G = results[i] = resolve(fn(value, index));\n                        mapped.A6 = A6;\n                        mapped.G = G;\n                        if (!cached) {\n                            A5.set(value, mapped);\n                        }\n                    });\n                }\n            }\n            this.A8 = A8;\n            this.O(values);\n            if (resultsCached) {\n                results[SYMBOL_CACHED] = true;\n            }\n            if (resultsUncached) {\n                results[SYMBOL_UNCACHED] = true;\n            }\n            return results;\n        };\n        this.T = () => {\n            return Array.from(this.A5.values());\n        };\n        this.fn = fn;\n        this.AB = (fn.length > 1);\n        if (this.suspense) {\n            lazySetAdd(this.parent, 'T', this.T);\n        }\n    }\n}\n/* EXPORT */\nexport default CacheKeyed;\n","/* IMPORT */\nimport { SYMBOL_OBSERVABLE } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nconst isObservable = (value) => {\n    return isFunction(value) && (SYMBOL_OBSERVABLE in value);\n};\n/* EXPORT */\nexport default isObservable;\n","/* IMPORT */\nimport isObservable from './is_observable.js';\nimport { isFunction } from '../utils.js';\nfunction get(value, getFunction = true) {\n    const is = getFunction ? isFunction : isObservable;\n    if (is(value)) {\n        return value();\n    }\n    else {\n        return value;\n    }\n}\n/* EXPORT */\nexport default get;\n","/* IMPORT */\nimport { DIRTY_MAYBE_YES, DIRTY_YES } from '../constants.js';\nimport { OWNER } from '../context.js';\nimport { lazyArrayEach, lazyArrayPush, lazySetEach } from '../lazy.js';\nimport Effect from './effect.js';\nimport Owner from './owner.js';\nimport { SYMBOL_SUSPENSE } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nclass Suspense extends Owner {\n    /* CONSTRUCTOR */\n    constructor() {\n        super();\n        /* VARIABLES */\n        this.parent = OWNER;\n        this.context = { ...OWNER.context, [SYMBOL_SUSPENSE]: this };\n        lazyArrayPush(this.parent, 'U', this);\n        this.suspended = (OWNER.get(SYMBOL_SUSPENSE)?.suspended || 0);\n    }\n    /* API */\n    A4(force) {\n        if (!this.suspended && !force)\n            return; // Already suspended, this can happen at instantion time\n        const suspendedPrev = this.suspended;\n        const suspendedNext = suspendedPrev + (force ? 1 : -1);\n        this.suspended = suspendedNext;\n        if (!!suspendedPrev === !!suspendedNext)\n            return; // Same state, nothing to pause or resume\n        /* NOTIFYING OBSERVERS, ROOTS AND SUSPENSES */\n        this.observable?.set(!!suspendedNext);\n        const notifyOwner = (owner) => {\n            lazyArrayEach(owner.D, notifyOwner);\n            lazyArrayEach(owner.K, notifyObserver);\n            lazyArrayEach(owner.U, notifySuspense);\n            lazySetEach(owner.T, notifyRoot);\n        };\n        const notifyObserver = (observer) => {\n            if (observer instanceof Effect) {\n                if (observer.J === DIRTY_MAYBE_YES || observer.J === DIRTY_YES) {\n                    if (observer.init) {\n                        observer.C();\n                    }\n                    else {\n                        observer.F();\n                    }\n                }\n            }\n            notifyOwner(observer);\n        };\n        const notifyRoot = (root) => {\n            if (isFunction(root)) {\n                root().forEach(notifyOwner);\n            }\n            else {\n                notifyOwner(root);\n            }\n        };\n        const notifySuspense = (suspense) => {\n            suspense.A4(force);\n        };\n        notifyOwner(this);\n    }\n    E(fn) {\n        return super.E(fn, this, undefined);\n    }\n}\n/* EXPORT */\nexport default Suspense;\n","/* IMPORT */\nimport boolean from './boolean.js';\nimport effect from './effect.js';\nimport get from './get.js';\nimport Suspense from '../objects/suspense.js';\n/* MAIN */\nconst suspense = (when, fn) => {\n    const suspense = new Suspense();\n    const condition = boolean(when);\n    const A4 = () => suspense.A4(get(condition));\n    effect(A4, { sync: true });\n    return suspense.E(fn);\n};\n/* EXPORT */\nexport default suspense;\n","/* IMPORT */\nimport { OWNER } from '../context.js';\nimport { lazySetAdd, lazySetDelete } from '../lazy.js';\nimport cleanup from './cleanup.js';\nimport get from './get.js';\nimport memo from './memo.js';\nimport resolve from './resolve.js';\nimport suspense from './suspense.js';\nimport { frozen, readable } from '../objects/callable.js';\nimport Observable from '../objects/observable.js';\nimport Root from '../objects/root.js';\nimport { SYMBOL_CACHED, SYMBOL_SUSPENSE, SYMBOL_UNCACHED } from '../symbols.js';\n/* HELPERS */\nconst DUMMY_INDEX = frozen(-1);\nclass MappedRoot extends Root {\n}\n/* MAIN */\n//TODO: Optimize this more\nclass CacheUnkeyed {\n    /* CONSTRUCTOR */\n    constructor(fn, pooled) {\n        /* VARIABLES */\n        this.parent = OWNER;\n        this.suspense = OWNER.get(SYMBOL_SUSPENSE);\n        this.A5 = new Map();\n        this.AC = [];\n        this.AD = 0;\n        /* API */\n        this.cleanup = () => {\n            let pooled = 0;\n            let poolable = Math.max(0, this.pooled ? this.AD - this.AC.length : 0);\n            this.A5.forEach(mapped => {\n                if (poolable > 0 && pooled++ < poolable) {\n                    mapped.suspended?.set(true);\n                    this.AC.push(mapped);\n                }\n                else {\n                    mapped.Q(true);\n                }\n            });\n        };\n        this.Q = () => {\n            if (this.suspense) {\n                lazySetDelete(this.parent, 'T', this.T);\n            }\n            this.A5.forEach(mapped => {\n                mapped.Q(true);\n            });\n            this.AC.forEach(mapped => {\n                mapped.Q(true);\n            });\n        };\n        this.map = (values) => {\n            const { A5, fn, AB } = this;\n            const cacheNext = new Map();\n            const results = new Array(values.length);\n            const AC = this.AC;\n            const pooled = this.pooled;\n            let resultsCached = true; // Whether all results are cached, if so this enables an optimization\n            let resultsUncached = true; // Whether all results are anew, if so this enables an optimization in Voby\n            let leftovers = [];\n            if (A5.size) {\n                for (let i = 0, l = values.length; i < l; i++) {\n                    const value = values[i];\n                    const cached = A5.get(value);\n                    if (cached) {\n                        resultsUncached = false;\n                        A5.delete(value);\n                        cacheNext.set(value, cached);\n                        cached.index?.set(i);\n                        results[i] = cached.G; //TSC\n                    }\n                    else {\n                        leftovers.push(i);\n                    }\n                }\n            }\n            else {\n                leftovers = new Array(results.length);\n            }\n            outer: for (let i = 0, l = leftovers.length; i < l; i++) {\n                const index = leftovers[i] || i;\n                const value = values[index];\n                const isDuplicate = cacheNext.has(value);\n                if (!isDuplicate) {\n                    for (const [key, mapped] of A5.entries()) {\n                        A5.delete(key);\n                        cacheNext.set(value, mapped);\n                        mapped.index?.set(index);\n                        mapped.value?.set(value);\n                        results[index] = mapped.G; //TSC\n                        continue outer;\n                    }\n                }\n                resultsCached = false;\n                let mapped;\n                if (pooled && AC.length) {\n                    mapped = AC.pop(); //TSC\n                    mapped.index?.set(index);\n                    mapped.value?.set(value);\n                    mapped.suspended?.set(false);\n                    results[index] = mapped.G; //TSC\n                }\n                else {\n                    mapped = new MappedRoot(false);\n                    mapped.E(() => {\n                        let $index = DUMMY_INDEX;\n                        if (AB) {\n                            mapped.index = new Observable(index);\n                            $index = readable(mapped.index);\n                        }\n                        const observable = mapped.value = new Observable(value);\n                        const suspended = pooled ? new Observable(false) : undefined;\n                        const $value = memo(() => get(observable.get())); //TSC\n                        const G = results[index] = suspended ? suspense(() => suspended.get(), () => resolve(fn($value, $index))) : resolve(fn($value, $index));\n                        mapped.value = observable;\n                        mapped.G = G;\n                        mapped.suspended = suspended;\n                    });\n                }\n                if (isDuplicate) { // Expensive, not reusable\n                    cleanup(() => mapped.Q(true));\n                }\n                else { // Cheap, reusable\n                    cacheNext.set(value, mapped);\n                }\n            }\n            this.AD = Math.max(this.AD, results.length);\n            this.cleanup();\n            this.A5 = cacheNext;\n            if (resultsCached) {\n                results[SYMBOL_CACHED] = true;\n            }\n            if (resultsUncached) {\n                results[SYMBOL_UNCACHED] = true;\n            }\n            return results;\n        };\n        this.T = () => {\n            return [...this.A5.values(), ...this.AC.values()];\n        };\n        this.fn = fn;\n        this.AB = (fn.length > 1);\n        this.pooled = pooled;\n        if (this.suspense) {\n            lazySetAdd(this.parent, 'T', this.T);\n        }\n    }\n}\n/* EXPORT */\nexport default CacheUnkeyed;\n","/* IMPORT */\nimport { SYMBOL_STORE } from '../symbols.js';\nimport { isObject } from '../utils.js';\n/* MAIN */\nconst isStore = (value) => {\n    return isObject(value) && (SYMBOL_STORE in value);\n};\n/* EXPORT */\nexport default isStore;\n","/* IMPORT */\nimport { OBSERVER, setObserver } from '../context.js';\nimport { isFunction } from '../utils.js';\nfunction untrack(fn) {\n    if (isFunction(fn)) {\n        const observerPrev = OBSERVER;\n        if (observerPrev) {\n            try {\n                setObserver(undefined);\n                return fn();\n            }\n            finally {\n                setObserver(observerPrev);\n            }\n        }\n        else {\n            return fn();\n        }\n    }\n    else {\n        return fn;\n    }\n}\n/* EXPORT */\nexport default untrack;\n","/* IMPORT */\nimport untrack from './untrack.js';\n/* MAIN */\n// This function ensures an Observable contains a fresh value, mainly to try to push it into a frozen state, if possible\nconst warmup = (value) => {\n    untrack(value);\n    return value;\n};\n/* EXPORT */\nexport default warmup;\n","/* IMPORT */\nimport get from './get.js';\nimport isObservableBoolean from './is_observable_boolean.js';\nimport isObservableFrozen from './is_observable_frozen.js';\nimport isUntracked from './is_untracked.js';\nimport memo from './memo.js';\nimport resolve from './resolve.js';\nimport warmup from './warmup.js';\nimport { frozen } from '../objects/callable.js';\nimport { is, isFunction } from '../utils.js';\n/* HELPERS */\nconst match = (condition, values, fallback) => {\n    for (let i = 0, l = values.length; i < l; i++) {\n        const value = values[i];\n        if (value.length === 1)\n            return value[0];\n        if (is(value[0], condition))\n            return value[1];\n    }\n    return fallback;\n};\nfunction _switch(when, values, fallback) {\n    const isDynamic = isFunction(when) && !isObservableFrozen(when) && !isUntracked(when);\n    if (isDynamic) {\n        if (isObservableBoolean(when)) {\n            return memo(() => resolve(match(when(), values, fallback)));\n        }\n        const value = warmup(memo(() => match(when(), values, fallback)));\n        if (isObservableFrozen(value)) {\n            return frozen(resolve(value()));\n        }\n        else {\n            return memo(() => resolve(get(value)));\n        }\n    }\n    else {\n        const value = match(get(when), values, fallback);\n        return frozen(resolve(value));\n    }\n}\n/* EXPORT */\nexport default _switch;\n","/* IMPORT */\nimport boolean from './boolean.js';\nimport _switch from './switch.js';\n/* MAIN */\nconst ternary = (when, valueTrue, valueFalse) => {\n    const condition = boolean(when);\n    return _switch(condition, [[true, valueTrue], [valueFalse]]);\n};\n/* EXPORT */\nexport default ternary;\n","/* IMPORT */\nimport { BATCH } from '../context.js';\nimport SchedulerAsync from '../objects/scheduler.async.js';\nimport SchedulerSync from '../objects/scheduler.sync.js';\n/* MAIN */\nconst isBatching = () => {\n    return !!BATCH || SchedulerAsync.A3 || SchedulerAsync.A2 || SchedulerSync.A2;\n};\n/* EXPORT */\nexport default isBatching;\n","/* IMPORT */\nimport { writable } from '../objects/callable.js';\nimport ObservableClass from '../objects/observable.js';\nfunction observable(value, options) {\n    return writable(new ObservableClass(value, options));\n}\n/* EXPORT */\nexport default observable;\n","/* IMPORT */\nimport { SYMBOL_OBSERVABLE_WRITABLE } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nconst isObservableWritable = (value) => {\n    return isFunction(value) && (SYMBOL_OBSERVABLE_WRITABLE in value);\n};\n/* EXPORT */\nexport default isObservableWritable;\n","/* IMPORT */\nimport { UNAVAILABLE } from '../constants.js';\nimport { SYMBOL_OBSERVABLE_READABLE, SYMBOL_OBSERVABLE_WRITABLE } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nconst target = (observable) => {\n    if (isFunction(observable)) {\n        return observable[SYMBOL_OBSERVABLE_READABLE] || observable[SYMBOL_OBSERVABLE_WRITABLE] || UNAVAILABLE;\n    }\n    else {\n        return observable;\n    }\n};\n/* EXPORT */\nexport default target;\n","/* IMPORT */\nimport isObservableWritable from './is_observable_writable.js';\nimport target from './target.js';\nimport { readable } from '../objects/callable.js';\n/* MAIN */\nconst readonly = (observable) => {\n    if (isObservableWritable(observable)) {\n        return readable(target(observable));\n    }\n    else {\n        return observable;\n    }\n};\n/* EXPORT */\nexport default readonly;\n","/* IMPORT */\nimport Root from '../objects/root.js';\n/* MAIN */\nconst root = (fn) => {\n    return new Root(true).E(fn);\n};\n/* EXPORT */\nexport default root;\n","/* IMPORT */\nimport { OBSERVABLE_FALSE, OBSERVABLE_TRUE } from '../constants.js';\nimport cleanup from './cleanup.js';\nimport effect from './effect.js';\nimport isObservableFrozen from './is_observable_frozen.js';\nimport memo from './memo.js';\nimport untrack from './untrack.js';\nimport warmup from './warmup.js';\nimport { readable } from '../objects/callable.js';\nimport Observable from '../objects/observable.js';\nimport { is } from '../utils.js';\n/* HELPERS */\nclass DisposableMap extends Map {\n    constructor() {\n        super(...arguments);\n        this.disposed = false;\n    }\n}\nclass SelectedObservable extends Observable {\n    constructor() {\n        super(...arguments);\n        this.AE = 1;\n    }\n    /* API */\n    call() {\n        if (this.AF.disposed)\n            return;\n        this.AE -= 1;\n        if (this.AE)\n            return;\n        this.AF.delete(this.AG);\n    }\n}\n/* MAIN */\nconst selector = (AG) => {\n    /* NORMALIZING SOURCE */\n    AG = warmup(memo(AG));\n    /* FROZEN SOURCE */\n    if (isObservableFrozen(AG)) {\n        const sourceValue = untrack(AG);\n        return (value) => {\n            return (value === sourceValue) ? OBSERVABLE_TRUE : OBSERVABLE_FALSE;\n        };\n    }\n    /* SELECTEDS */\n    let AF = new DisposableMap();\n    let selectedValue = untrack(AG);\n    effect(() => {\n        const valuePrev = selectedValue;\n        const valueNext = AG();\n        if (is(valuePrev, valueNext))\n            return;\n        selectedValue = valueNext;\n        AF.get(valuePrev)?.set(false);\n        AF.get(valueNext)?.set(true);\n    }, { suspense: false, sync: true });\n    /* CLEANUP ALL */\n    const cleanupAll = () => {\n        AF.disposed = true;\n    };\n    cleanup(cleanupAll);\n    /* SELECTOR */\n    return (value) => {\n        /* INIT */\n        let selected = AF.get(value);\n        if (selected) {\n            selected.AE += 1;\n        }\n        else {\n            selected = new SelectedObservable(value === selectedValue);\n            selected.AF = AF;\n            selected.AG = value;\n            AF.set(value, selected);\n        }\n        /* CLEANUP */\n        cleanup(selected);\n        /* RETURN */\n        return readable(selected);\n    };\n};\n/* EXPORT */\nexport default selector;\n","/* IMPORT */\nimport { BATCH, OBSERVER } from '../context.js';\nimport { lazySetAdd, lazySetDelete, lazySetEach } from '../lazy.js';\nimport cleanup from './cleanup.js';\nimport effect from './effect.js';\nimport isBatching from './is_batching.js';\nimport isStore from './is_store.js';\nimport untrack from './untrack.js';\nimport { readable } from '../objects/callable.js';\nimport ObservableClass from '../objects/observable.js';\nimport { SYMBOL_STORE, SYMBOL_STORE_KEYS, SYMBOL_STORE_OBSERVABLE, SYMBOL_STORE_TARGET, SYMBOL_STORE_VALUES, SYMBOL_STORE_UNTRACKED } from '../symbols.js';\nimport { castArray, is, isArray, isFunction, isObject, noop, nope } from '../utils.js';\n/* CLASSES */\nclass StoreMap extends Map {\n    AH(key, value) {\n        super.set(key, value);\n        return value;\n    }\n}\nclass StoreCleanable {\n    constructor() {\n        this.AE = 0;\n    }\n    listen() {\n        this.AE += 1;\n        cleanup(this);\n    }\n    call() {\n        this.AE -= 1;\n        if (this.AE)\n            return;\n        this.Q();\n    }\n    Q() { }\n}\nclass StoreKeys extends StoreCleanable {\n    constructor(parent, observable) {\n        super();\n        this.parent = parent;\n        this.observable = observable;\n    }\n    Q() {\n        this.parent.keys = undefined;\n    }\n}\nclass StoreValues extends StoreCleanable {\n    constructor(parent, observable) {\n        super();\n        this.parent = parent;\n        this.observable = observable;\n    }\n    Q() {\n        this.parent.values = undefined;\n    }\n}\nclass StoreHas extends StoreCleanable {\n    constructor(parent, key, observable) {\n        super();\n        this.parent = parent;\n        this.key = key;\n        this.observable = observable;\n    }\n    Q() {\n        this.parent.has?.delete(this.key);\n    }\n}\nclass StoreProperty extends StoreCleanable {\n    constructor(parent, key, observable, AI) {\n        super();\n        this.parent = parent;\n        this.key = key;\n        this.observable = observable;\n        this.AI = AI;\n    }\n    Q() {\n        this.parent.AJ?.delete(this.key);\n    }\n}\nconst StoreListenersRegular = {\n    /* VARIABLES */\n    AK: 0,\n    AL: new Set(),\n    AM: new Set(),\n    /* API */\n    AN: () => {\n        const { AL, AM } = StoreListenersRegular;\n        const traversed = new Set();\n        const traverse = (AI) => {\n            if (traversed.has(AI))\n                return;\n            traversed.add(AI);\n            lazySetEach(AI.AO, traverse);\n            lazySetEach(AI.AP, listener => {\n                AL.add(listener);\n            });\n        };\n        AM.forEach(traverse);\n        return () => {\n            AL.forEach(listener => {\n                listener();\n            });\n        };\n    },\n    V: (AI) => {\n        StoreListenersRegular.AM.add(AI);\n        StoreScheduler.F();\n    },\n    reset: () => {\n        StoreListenersRegular.AL = new Set();\n        StoreListenersRegular.AM = new Set();\n    }\n};\nconst StoreListenersRoots = {\n    /* VARIABLES */\n    AK: 0,\n    AM: new Map(),\n    /* API */\n    AN: () => {\n        const { AM } = StoreListenersRoots;\n        return () => {\n            AM.forEach((rootsSet, store) => {\n                const T = Array.from(rootsSet);\n                lazySetEach(store.AQ, listener => {\n                    listener(T);\n                });\n            });\n        };\n    },\n    V: (store, root) => {\n        const T = StoreListenersRoots.AM.get(store) || new Set();\n        T.add(root);\n        StoreListenersRoots.AM.set(store, T);\n        StoreScheduler.F();\n    },\n    AR: (current, parent, key) => {\n        if (!parent.AO) {\n            const root = current?.store || untrack(() => parent.store[key]);\n            StoreListenersRoots.V(parent, root);\n        }\n        else {\n            const traversed = new Set();\n            const traverse = (AI) => {\n                if (traversed.has(AI))\n                    return;\n                traversed.add(AI);\n                lazySetEach(AI.AO, parent => {\n                    if (!parent.AO) {\n                        StoreListenersRoots.V(parent, AI.store);\n                    }\n                    traverse(parent);\n                });\n            };\n            traverse(current || parent);\n        }\n    },\n    reset: () => {\n        StoreListenersRoots.AM = new Map();\n    }\n};\nconst StoreScheduler = {\n    /* VARIABLES */\n    AK: false,\n    /* API */\n    N: () => {\n        const flushRegular = StoreListenersRegular.AN();\n        const flushRoots = StoreListenersRoots.AN();\n        StoreScheduler.reset();\n        flushRegular();\n        flushRoots();\n    },\n    AS: () => {\n        if (isBatching()) {\n            if (BATCH) {\n                BATCH.finally(StoreScheduler.AS);\n            }\n            else {\n                setTimeout(StoreScheduler.AS, 0);\n            }\n        }\n        else {\n            StoreScheduler.N();\n        }\n    },\n    reset: () => {\n        StoreScheduler.AK = false;\n        StoreListenersRegular.reset();\n        StoreListenersRoots.reset();\n    },\n    F: () => {\n        if (StoreScheduler.AK)\n            return;\n        StoreScheduler.AK = true;\n        queueMicrotask(StoreScheduler.AS);\n    }\n};\n/* CONSTANTS */\nconst NODES = new WeakMap();\nconst SPECIAL_SYMBOLS = new Set([SYMBOL_STORE, SYMBOL_STORE_KEYS, SYMBOL_STORE_OBSERVABLE, SYMBOL_STORE_TARGET, SYMBOL_STORE_VALUES]);\nconst UNREACTIVE_KEYS = new Set(['__proto__', '__defineGetter__', '__defineSetter__', '__lookupGetter__', '__lookupSetter__', 'prototype', 'constructor', 'hasOwnProperty', 'isPrototypeOf', 'propertyIsEnumerable', 'toLocaleString', 'toSource', 'toString', 'valueOf']);\nconst STORE_TRAPS = {\n    /* API */\n    get: (target, key) => {\n        if (SPECIAL_SYMBOLS.has(key)) {\n            if (key === SYMBOL_STORE)\n                return true;\n            if (key === SYMBOL_STORE_TARGET)\n                return target;\n            if (key === SYMBOL_STORE_KEYS) {\n                if (isListenable()) {\n                    const AI = getNodeExisting(target);\n                    AI.keys || (AI.keys = getNodeKeys(AI));\n                    AI.keys.listen();\n                    AI.keys.observable.get();\n                }\n                return;\n            }\n            if (key === SYMBOL_STORE_VALUES) {\n                if (isListenable()) {\n                    const AI = getNodeExisting(target);\n                    AI.values || (AI.values = getNodeValues(AI));\n                    AI.values.listen();\n                    AI.values.observable.get();\n                }\n                return;\n            }\n            if (key === SYMBOL_STORE_OBSERVABLE) {\n                return (key) => {\n                    key = (typeof key === 'number') ? String(key) : key;\n                    const AI = getNodeExisting(target);\n                    const getter = AI.AT?.get(key);\n                    if (getter)\n                        return getter.bind(AI.store);\n                    AI.AJ || (AI.AJ = new StoreMap());\n                    const value = target[key];\n                    const property = AI.AJ.get(key) || AI.AJ.AH(key, getNodeProperty(AI, key, value));\n                    const options = AI.equals ? { equals: AI.equals } : undefined;\n                    property.observable || (property.observable = getNodeObservable(AI, value, options));\n                    const observable = readable(property.observable);\n                    return observable;\n                };\n            }\n        }\n        if (UNREACTIVE_KEYS.has(key))\n            return target[key];\n        const AI = getNodeExisting(target);\n        const getter = AI.AT?.get(key);\n        const value = getter || target[key];\n        AI.AJ || (AI.AJ = new StoreMap());\n        const listenable = isListenable();\n        const proxiable = isProxiable(value);\n        const property = listenable || proxiable ? AI.AJ.get(key) || AI.AJ.AH(key, getNodeProperty(AI, key, value)) : undefined;\n        if (property?.AI) {\n            lazySetAdd(property.AI, 'AO', AI);\n        }\n        if (property && listenable) {\n            const options = AI.equals ? { equals: AI.equals } : undefined;\n            property.listen();\n            property.observable || (property.observable = getNodeObservable(AI, value, options));\n            property.observable.get();\n        }\n        if (getter) {\n            return getter.call(AI.store);\n        }\n        else {\n            if (typeof value === 'function' && value === Array.prototype[key]) {\n                return function () {\n                    return value.apply(AI.store, arguments);\n                };\n            }\n            return property?.AI?.store || value;\n        }\n    },\n    set: (target, key, value) => {\n        value = getTarget(value);\n        const AI = getNodeExisting(target);\n        const setter = AI.AU?.get(key);\n        if (setter) {\n            setter.call(AI.store, value);\n        }\n        else {\n            const valuePrev = target[key];\n            const hadProperty = !!valuePrev || (key in target);\n            const equals = AI.equals || is;\n            if (hadProperty && equals(value, valuePrev) && (key !== 'length' || !Array.isArray(target)))\n                return true; // Array.prototype.length is special, it gets updated AA this trap is called, we need to special-case it...\n            target[key] = value;\n            AI.values?.observable.set(0);\n            if (!hadProperty) {\n                AI.keys?.observable.set(0);\n                AI.has?.get(key)?.observable.set(true);\n            }\n            const property = AI.AJ?.get(key);\n            if (property?.AI) {\n                lazySetDelete(property.AI, 'AO', AI);\n            }\n            if (property) {\n                property.observable?.set(value);\n                property.AI = isProxiable(value) ? NODES.get(value) || getNode(value, AI) : undefined;\n            }\n            if (property?.AI) {\n                lazySetAdd(property.AI, 'AO', AI);\n            }\n            if (StoreListenersRoots.AK) {\n                StoreListenersRoots.AR(property?.AI, AI, key);\n            }\n            if (StoreListenersRegular.AK) {\n                StoreListenersRegular.V(AI);\n            }\n        }\n        return true;\n    },\n    deleteProperty: (target, key) => {\n        const hasProperty = (key in target);\n        if (!hasProperty)\n            return true;\n        const deleted = Reflect.deleteProperty(target, key);\n        if (!deleted)\n            return false;\n        const AI = getNodeExisting(target);\n        AI.keys?.observable.set(0);\n        AI.values?.observable.set(0);\n        AI.has?.get(key)?.observable.set(false);\n        const property = AI.AJ?.get(key);\n        if (StoreListenersRoots.AK) {\n            StoreListenersRoots.AR(property?.AI, AI, key);\n        }\n        if (property?.AI) {\n            lazySetDelete(property.AI, 'AO', AI);\n        }\n        if (property) {\n            property.observable?.set(undefined);\n            property.AI = undefined;\n        }\n        if (StoreListenersRegular.AK) {\n            StoreListenersRegular.V(AI);\n        }\n        return true;\n    },\n    defineProperty: (target, key, descriptor) => {\n        const AI = getNodeExisting(target);\n        const equals = AI.equals || is;\n        const hadProperty = (key in target);\n        const descriptorPrev = Reflect.getOwnPropertyDescriptor(target, key);\n        if ('value' in descriptor && isStore(descriptor.value)) {\n            descriptor = { ...descriptor, value: getTarget(descriptor.value) };\n        }\n        if (descriptorPrev && isEqualDescriptor(descriptorPrev, descriptor, equals))\n            return true;\n        const defined = Reflect.defineProperty(target, key, descriptor);\n        if (!defined)\n            return false;\n        if (!descriptor.get) {\n            AI.AT?.delete(key);\n        }\n        else if (descriptor.get) {\n            AI.AT || (AI.AT = new StoreMap());\n            AI.AT.set(key, descriptor.get);\n        }\n        if (!descriptor.set) {\n            AI.AU?.delete(key);\n        }\n        else if (descriptor.set) {\n            AI.AU || (AI.AU = new StoreMap());\n            AI.AU.set(key, descriptor.set);\n        }\n        if (hadProperty !== !!descriptor.enumerable) {\n            AI.keys?.observable.set(0);\n        }\n        AI.has?.get(key)?.observable.set(true);\n        const property = AI.AJ?.get(key);\n        if (StoreListenersRoots.AK) {\n            StoreListenersRoots.AR(property?.AI, AI, key);\n        }\n        if (property?.AI) {\n            lazySetDelete(property.AI, 'AO', AI);\n        }\n        if (property) {\n            if ('get' in descriptor) {\n                property.observable?.set(descriptor.get);\n                property.AI = undefined;\n            }\n            else {\n                const value = descriptor.value;\n                property.observable?.set(value);\n                property.AI = isProxiable(value) ? NODES.get(value) || getNode(value, AI) : undefined;\n            }\n        }\n        if (property?.AI) {\n            lazySetAdd(property.AI, 'AO', AI);\n        }\n        if (StoreListenersRoots.AK) {\n            StoreListenersRoots.AR(property?.AI, AI, key);\n        }\n        if (StoreListenersRegular.AK) {\n            StoreListenersRegular.V(AI);\n        }\n        return true;\n    },\n    has: (target, key) => {\n        if (key === SYMBOL_STORE)\n            return true;\n        if (key === SYMBOL_STORE_TARGET)\n            return true;\n        const value = (key in target);\n        if (isListenable()) {\n            const AI = getNodeExisting(target);\n            AI.has || (AI.has = new StoreMap());\n            const has = AI.has.get(key) || AI.has.AH(key, getNodeHas(AI, key, value));\n            has.listen();\n            has.observable.get();\n        }\n        return value;\n    },\n    ownKeys: (target) => {\n        const keys = Reflect.ownKeys(target);\n        if (isListenable()) {\n            const AI = getNodeExisting(target);\n            AI.keys || (AI.keys = getNodeKeys(AI));\n            AI.keys.listen();\n            AI.keys.observable.get();\n        }\n        return keys;\n    }\n};\nconst STORE_UNTRACK_TRAPS = {\n    /* API */\n    has: (target, key) => {\n        if (key === SYMBOL_STORE_UNTRACKED)\n            return true;\n        return (key in target);\n    }\n};\n/* HELPERS */\nconst getNode = (value, parent, equals) => {\n    const store = new Proxy(value, STORE_TRAPS);\n    const gettersAndSetters = getGettersAndSetters(value);\n    const AI = { AO: parent, store };\n    if (gettersAndSetters) {\n        const { AT, AU } = gettersAndSetters;\n        if (AT)\n            AI.AT = AT;\n        if (AU)\n            AI.AU = AU;\n    }\n    if (equals === false) {\n        AI.equals = nope;\n    }\n    else if (equals) {\n        AI.equals = equals;\n    }\n    else if (parent?.equals) {\n        AI.equals = parent.equals;\n    }\n    NODES.set(value, AI);\n    return AI;\n};\nconst getNodeExisting = (value) => {\n    const AI = NODES.get(value);\n    if (!AI)\n        throw new Error('Impossible');\n    return AI;\n};\nconst getNodeFromStore = (store) => {\n    return getNodeExisting(getTarget(store));\n};\nconst getNodeKeys = (AI) => {\n    const observable = getNodeObservable(AI, 0, { equals: false });\n    const keys = new StoreKeys(AI, observable);\n    return keys;\n};\nconst getNodeValues = (AI) => {\n    const observable = getNodeObservable(AI, 0, { equals: false });\n    const values = new StoreValues(AI, observable);\n    return values;\n};\nconst getNodeHas = (AI, key, value) => {\n    const observable = getNodeObservable(AI, value);\n    const has = new StoreHas(AI, key, observable);\n    return has;\n};\nconst getNodeObservable = (AI, value, options) => {\n    return new ObservableClass(value, options);\n};\nconst getNodeProperty = (AI, key, value) => {\n    const observable = undefined;\n    const propertyNode = isProxiable(value) ? NODES.get(value) || getNode(value, AI) : undefined;\n    const property = new StoreProperty(AI, key, observable, propertyNode);\n    AI.AJ || (AI.AJ = new StoreMap());\n    AI.AJ.set(key, property);\n    return property;\n};\nconst getGettersAndSetters = (value) => {\n    if (isArray(value))\n        return;\n    let AT;\n    let AU;\n    const keys = Object.keys(value);\n    for (let i = 0, l = keys.length; i < l; i++) {\n        const key = keys[i];\n        const descriptor = Object.getOwnPropertyDescriptor(value, key);\n        if (!descriptor)\n            continue;\n        const { get, set } = descriptor;\n        if (get) {\n            AT || (AT = new StoreMap());\n            AT.set(key, get);\n        }\n        if (set) {\n            AU || (AU = new StoreMap());\n            AU.set(key, set);\n        }\n    }\n    if (!AT && !AU)\n        return;\n    return { AT, AU };\n};\nconst getStore = (value, options) => {\n    if (isStore(value))\n        return value;\n    const AI = NODES.get(value) || getNode(value, undefined, options?.equals);\n    return AI.store;\n};\nconst getTarget = (value) => {\n    if (isStore(value))\n        return value[SYMBOL_STORE_TARGET];\n    return value;\n};\nconst getUntracked = (value) => {\n    if (!isObject(value))\n        return value;\n    if (isUntracked(value))\n        return value;\n    return new Proxy(value, STORE_UNTRACK_TRAPS);\n};\nconst isEqualDescriptor = (a, b, equals) => {\n    return (!!a.configurable === !!b.configurable && !!a.enumerable === !!b.enumerable && !!a.writable === !!b.writable && equals(a.value, b.value) && a.get === b.get && a.set === b.set);\n};\nconst isListenable = () => {\n    return !!OBSERVER;\n};\nconst isProxiable = (value) => {\n    if (value === null || typeof value !== 'object')\n        return false;\n    if (SYMBOL_STORE in value)\n        return true;\n    if (SYMBOL_STORE_UNTRACKED in value)\n        return false;\n    if (isArray(value))\n        return true;\n    const prototype = Object.getPrototypeOf(value);\n    if (prototype === null)\n        return true;\n    return (Object.getPrototypeOf(prototype) === null);\n};\nconst isUntracked = (value) => {\n    if (value === null || typeof value !== 'object')\n        return false;\n    return (SYMBOL_STORE_UNTRACKED in value);\n};\n/* MAIN */\n//TODO: Maybe have the \"on\" method trigger immediately too like \"$.on\", or maybe the other way around, which seems more flexible\n//TODO: Explore converting target values back to numbers (the Proxy always receives strings) whenever possible, to save memory\n//TODO: Implement \"_onRoots\" better, perhaps provding string paths instead, which should be more powerful\nconst store = (value, options) => {\n    if (!isObject(value))\n        return value;\n    if (isUntracked(value))\n        return value;\n    return getStore(value, options);\n};\n/* UTILITIES */\nstore.on = (target, listener) => {\n    /* VARIABLES */\n    const targets = isStore(target) ? [target] : castArray(target);\n    const selectors = targets.filter(isFunction);\n    const AM = targets.filter(isStore).map(getNodeFromStore);\n    /* ON */\n    StoreListenersRegular.AK += 1;\n    const disposers = selectors.map(selector => {\n        let inited = false;\n        return effect(() => {\n            if (inited) {\n                StoreListenersRegular.AL.add(listener);\n                StoreScheduler.F();\n            }\n            inited = true;\n            selector();\n        }, { suspense: false, sync: true });\n    });\n    AM.forEach(AI => {\n        lazySetAdd(AI, 'AP', listener);\n    });\n    /* OFF */\n    return () => {\n        StoreListenersRegular.AK -= 1;\n        disposers.forEach(disposer => {\n            disposer();\n        });\n        AM.forEach(AI => {\n            lazySetDelete(AI, 'AP', listener);\n        });\n    };\n};\nstore._onRoots = (target, listener) => {\n    if (!isStore(target))\n        return noop;\n    const AI = getNodeFromStore(target);\n    if (AI.AO)\n        throw new Error('Only top-level stores are supported');\n    /* ON */\n    StoreListenersRoots.AK += 1;\n    lazySetAdd(AI, 'AQ', listener);\n    /* OFF */\n    return () => {\n        StoreListenersRoots.AK -= 1;\n        lazySetDelete(AI, 'AQ', listener);\n    };\n};\nstore.reconcile = (() => {\n    //TODO: Support AT, AU and symbols (symbols could be supported with Reflect.ownKeys, but that's like 2x slower)\n    const getType = (value) => {\n        if (isArray(value))\n            return 1;\n        if (isProxiable(value))\n            return 2;\n        return 0;\n    };\n    const reconcileOuter = (prev, next) => {\n        const uprev = getTarget(prev);\n        const unext = getTarget(next);\n        reconcileInner(prev, next);\n        const prevType = getType(uprev);\n        const nextType = getType(unext);\n        if (prevType === 1 || nextType === 1) {\n            prev.length = next.length;\n        }\n        return prev;\n    };\n    const reconcileInner = (prev, next) => {\n        const uprev = getTarget(prev);\n        const unext = getTarget(next);\n        const prevKeys = Object.keys(uprev);\n        const nextKeys = Object.keys(unext);\n        for (let i = 0, l = nextKeys.length; i < l; i++) {\n            const key = nextKeys[i];\n            const prevValue = uprev[key];\n            const nextValue = unext[key];\n            if (!is(prevValue, nextValue)) {\n                const prevType = getType(prevValue);\n                const nextType = getType(nextValue);\n                if (prevType && prevType === nextType) {\n                    reconcileInner(prev[key], nextValue);\n                    if (prevType === 1) {\n                        prev[key].length = nextValue.length;\n                    }\n                }\n                else {\n                    prev[key] = nextValue;\n                }\n            }\n            else if (prevValue === undefined && !(key in uprev)) {\n                prev[key] = undefined;\n            }\n        }\n        for (let i = 0, l = prevKeys.length; i < l; i++) {\n            const key = prevKeys[i];\n            if (!(key in unext)) {\n                delete prev[key];\n            }\n        }\n        return prev;\n    };\n    const reconcile = (prev, next) => {\n        return untrack(() => {\n            return reconcileOuter(prev, next);\n        });\n    };\n    return reconcile;\n})();\nstore.untrack = (value) => {\n    return getUntracked(value);\n};\nstore.unwrap = (value) => {\n    return getTarget(value);\n};\n/* EXPORT */\nexport default store;\n","/* IMPORT */\nimport { OBSERVABLE_FALSE } from '../constants.js';\nimport { OWNER } from '../context.js';\nimport { readable } from '../objects/callable.js';\nimport Observable from '../objects/observable.js';\nimport { SYMBOL_SUSPENSE } from '../symbols.js';\n/* MAIN */\nconst suspended = () => {\n    const suspense = OWNER.get(SYMBOL_SUSPENSE);\n    if (!suspense)\n        return OBSERVABLE_FALSE;\n    const observable = (suspense.observable || (suspense.observable = new Observable(!!suspense.suspended)));\n    return readable(observable);\n};\n/* EXPORT */\nexport default suspended;\n","/* IMPORT */\nimport Scheduler from '../objects/scheduler.async.js';\n/* MAIN */\nconst tick = () => {\n    Scheduler.N();\n};\n/* EXPORT */\nexport default tick;\n","/* IMPORT */\nimport { OWNER } from '../context.js';\nimport memo from './memo.js';\nimport $ from './observable.js';\nimport resolve from './resolve.js';\n/* MAIN */\nconst tryCatch = (value, fn) => {\n    const observable = $();\n    return memo(() => {\n        const error = observable();\n        if (error) {\n            const reset = () => observable(undefined);\n            const options = { error, reset };\n            return resolve(fn(options));\n        }\n        else {\n            OWNER.S = observable;\n            return resolve(value);\n        }\n    });\n};\n/* EXPORT */\nexport default tryCatch;\n","/* IMPORT */\nimport untrack from './untrack.js';\nimport { SYMBOL_UNTRACKED } from '../symbols.js';\nimport { isFunction } from '../utils.js';\nfunction untracked(fn) {\n    const untracked = isFunction(fn) ? (...args) => untrack(() => fn(...args)) : () => fn;\n    untracked[SYMBOL_UNTRACKED] = true;\n    return untracked;\n}\n/* EXPORT */\nexport default untracked;\n","/* IMPORT */\nimport { OBSERVER, OWNER } from '../context.js';\n/* MAIN */\nconst _with = () => {\n    const owner = OWNER;\n    const observer = OBSERVER;\n    return (fn) => {\n        return owner.E(() => fn(), owner, observer);\n    };\n};\n/* EXPORT */\nexport default _with;\n","/* IMPORT */\nimport { SYMBOL_OBSERVABLE, SYMBOL_OBSERVABLE_FROZEN, SYMBOL_OBSERVABLE_READABLE, SYMBOL_UNCACHED, SYMBOL_UNTRACKED, SYMBOL_UNTRACKED_UNWRAPPED } from './oby.js';\n/* MAIN */\nconst CONTEXTS_DATA = new WeakMap();\nconst DIRECTIVES = {};\nconst SYMBOL_SUSPENSE = Symbol('Suspense');\nconst SYMBOL_SUSPENSE_COLLECTOR = Symbol('Suspense.Collector');\nconst SYMBOL_TEMPLATE_ACCESSOR = Symbol('Template.Accessor');\nconst SYMBOLS_DIRECTIVES = {};\n/* EXPORT */\nexport { SYMBOL_OBSERVABLE, SYMBOL_OBSERVABLE_FROZEN, SYMBOL_OBSERVABLE_READABLE, SYMBOL_UNCACHED, SYMBOL_UNTRACKED, SYMBOL_UNTRACKED_UNWRAPPED };\nexport { CONTEXTS_DATA, DIRECTIVES, SYMBOL_SUSPENSE, SYMBOL_SUSPENSE_COLLECTOR, SYMBOL_TEMPLATE_ACCESSOR, SYMBOLS_DIRECTIVES };\n","/* IMPORT */\nimport { SYMBOL_UNTRACKED_UNWRAPPED } from '../constants.js';\n/* MAIN */\nconst wrapElement = (element) => {\n    element[SYMBOL_UNTRACKED_UNWRAPPED] = true;\n    return element;\n};\n/* EXPORT */\nexport default wrapElement;\n","/* IMPORT */\n/* MAIN */\nconst createComment = document.createComment.bind(document, '');\nconst createHTMLNode = document.createElement.bind(document);\nconst createSVGNode = document.createElementNS.bind(document, 'http://www.w3.org/2000/svg');\nconst createText = document.createTextNode.bind(document);\n/* EXPORT */\nexport { createComment, createHTMLNode, createSVGNode, createText };\n","/* IMPORT */\nimport { SYMBOL_OBSERVABLE_FROZEN, SYMBOL_OBSERVABLE_READABLE, SYMBOL_TEMPLATE_ACCESSOR, SYMBOL_UNTRACKED, SYMBOL_UNTRACKED_UNWRAPPED } from '../constants.js';\n/* MAIN */\nconst { assign } = Object;\nconst castArray = (value) => {\n    return isArray(value) ? value : [value];\n};\nconst castError = (exception) => {\n    if (isError(exception))\n        return exception;\n    if (isString(exception))\n        return new Error(exception);\n    return new Error('Unknown error');\n};\nconst flatten = (arr) => {\n    for (let i = 0, l = arr.length; i < l; i++) {\n        if (!isArray(arr[i]))\n            continue;\n        return arr.flat(Infinity);\n    }\n    return arr;\n};\nconst indexOf = (() => {\n    const _indexOf = Array.prototype.indexOf;\n    return (arr, value) => {\n        return _indexOf.call(arr, value);\n    };\n})();\nconst { isArray } = Array;\nconst isBoolean = (value) => {\n    return typeof value === 'boolean';\n};\nconst isComponent = (value) => {\n    return isFunction(value) && (SYMBOL_UNTRACKED_UNWRAPPED in value);\n};\nconst isError = (value) => {\n    return value instanceof Error;\n};\nconst isFalsy = (value) => {\n    return !value;\n};\nconst isFunction = (value) => {\n    return typeof value === 'function';\n};\nconst isFunctionReactive = (value) => {\n    return !(SYMBOL_UNTRACKED in value || SYMBOL_UNTRACKED_UNWRAPPED in value || SYMBOL_OBSERVABLE_FROZEN in value || value[SYMBOL_OBSERVABLE_READABLE]?.parent?.disposed);\n};\nconst isNil = (value) => {\n    return value === null || value === undefined;\n};\nconst isNode = (value) => {\n    return value instanceof Node;\n};\nconst isObject = (value) => {\n    return typeof value === 'object' && value !== null;\n};\nconst isPromise = (value) => {\n    return value instanceof Promise;\n};\nconst isString = (value) => {\n    return typeof value === 'string';\n};\nconst isSVG = (value) => {\n    return !!value['isSVG'];\n};\nconst isSVGElement = (() => {\n    const svgRe = /^(t(ext$|s)|s[vwy]|g)|^set|tad|ker|p(at|s)|s(to|c$|ca|k)|r(ec|cl)|ew|us|f($|e|s)|cu|n[ei]|l[ty]|[GOP]/; //URL: https://regex101.com/r/Ck4kFp/1\n    const svgCache = {};\n    return (element) => {\n        const cached = svgCache[element];\n        return (cached !== undefined) ? cached : (svgCache[element] = !element.includes('-') && svgRe.test(element));\n    };\n})();\nconst isTemplateAccessor = (value) => {\n    return isFunction(value) && (SYMBOL_TEMPLATE_ACCESSOR in value);\n};\nconst isTruthy = (value) => {\n    return !!value;\n};\nconst isVoidChild = (value) => {\n    return value === null || value === undefined || typeof value === 'boolean' || typeof value === 'symbol';\n};\nconst noop = () => {\n    return;\n};\nconst once = (fn) => {\n    let called = false;\n    let result;\n    return () => {\n        if (!called) {\n            called = true;\n            result = fn();\n        }\n        return result;\n    };\n};\n/* EXPORT */\nexport { assign, castArray, castError, flatten, indexOf, isArray, isBoolean, isComponent, isError, isFalsy, isFunction, isFunctionReactive, isNil, isNode, isObject, isPromise, isString, isSVG, isSVGElement, isTemplateAccessor, isTruthy, isVoidChild, noop, once };\n","/* IMPORT */\nimport isObservable from '../methods/is_observable.js';\nimport { isArray, isFunction } from '../utils/lang.js';\nfunction useResolved(values, callback, resolveFunction) {\n    const isResolvable = (resolveFunction !== false && callback !== false) ? isFunction : isObservable;\n    const resolve = (value) => isResolvable(value) ? value() : value;\n    if (isArray(values)) {\n        const resolved = values.map(resolve);\n        if (isFunction(callback)) {\n            return callback.apply(undefined, resolved);\n        }\n        else {\n            return resolved;\n        }\n    }\n    else {\n        const resolved = resolve(values);\n        if (isFunction(callback)) {\n            return callback(resolved);\n        }\n        else {\n            return resolved;\n        }\n    }\n}\n/* EXPORT */\nexport default useResolved;\n","/* IMPORT */\nimport useEffect from './use_effect.js';\nimport useResolved from './use_resolved.js';\nimport $$ from '../methods/SS.js';\nimport { castArray } from '../utils/lang.js';\nfunction useEventListener(target, event, handler, options) {\n    return useEffect(() => {\n        const fn = $$(handler, false);\n        return useResolved([target, event, options], (target, event, options) => {\n            const targets = castArray(target);\n            targets.forEach(target => {\n                target?.addEventListener(event, fn, options);\n            });\n            return () => {\n                targets.forEach(target => {\n                    target?.removeEventListener(event, fn, options);\n                });\n            };\n        });\n    }, { sync: 'init' });\n}\n/* EXPORT */\nexport default useEventListener;\n","/* IMPORT */\nimport useCleanup from './use_cleanup.js';\nimport useEventListener from './use_event_listener.js';\nimport { castArray } from '../utils/lang.js';\n/* MAIN */\nconst useAbortController = (signals = []) => {\n    signals = castArray(signals);\n    const controller = new AbortController();\n    const abort = controller.abort.bind(controller);\n    const aborted = signals.some(signal => signal.aborted);\n    if (aborted) {\n        abort();\n    }\n    else {\n        signals.forEach(signal => useEventListener(signal, 'abort', abort));\n        useCleanup(abort);\n    }\n    return controller;\n};\n/* EXPORT */\nexport default useAbortController;\n","/* IMPORT */\nimport useAbortController from './use_abort_controller.js';\n/* MAIN */\nconst useAbortSignal = (signals = []) => {\n    return useAbortController(signals).signal;\n};\n/* EXPORT */\nexport default useAbortSignal;\n","/* IMPORT */\nimport useEffect from './use_effect.js';\nimport useSuspended from './use_suspended.js';\nimport $$ from '../methods/SS.js';\nimport untrack from '../methods/untrack.js';\n/* MAIN */\nconst useScheduler = ({ loop, once, callback, cancel, schedule }) => {\n    let executed = false;\n    let suspended = useSuspended();\n    let tickId;\n    const work = (value) => {\n        executed = true;\n        if ($$(loop))\n            tick();\n        $$(callback, false)(value);\n    };\n    const tick = () => {\n        tickId = untrack(() => schedule(work));\n    };\n    const dispose = () => {\n        untrack(() => cancel(tickId));\n    };\n    useEffect(() => {\n        if (once && executed)\n            return;\n        if (suspended())\n            return;\n        tick();\n        return dispose;\n    }, { suspense: false });\n    return dispose;\n};\n/* EXPORT */\nexport default useScheduler;\n","/* IMPORT */\nimport useScheduler from './use_scheduler.js';\n/* MAIN */\nconst useAnimationFrame = (callback) => {\n    return useScheduler({\n        callback,\n        once: true,\n        cancel: cancelAnimationFrame,\n        schedule: requestAnimationFrame\n    });\n};\n/* EXPORT */\nexport default useAnimationFrame;\n","/* IMPORT */\nimport useScheduler from './use_scheduler.js';\n/* MAIN */\nconst useAnimationLoop = (callback) => {\n    return useScheduler({\n        callback,\n        loop: true,\n        cancel: cancelAnimationFrame,\n        schedule: requestAnimationFrame\n    });\n};\n/* EXPORT */\nexport default useAnimationLoop;\n","/* IMPORT */\nimport { SYMBOL_SUSPENSE, SYMBOL_SUSPENSE_COLLECTOR } from '../constants.js';\nimport useCleanup from '../hooks/use_cleanup.js';\nimport useMemo from '../hooks/use_memo.js';\nimport $ from '../methods/S.js';\nimport { context, resolve } from '../oby.js';\n/* MAIN */\nconst SuspenseContext = {\n    create: () => {\n        const count = $(0);\n        const active = useMemo(() => !!count());\n        const increment = (nr = 1) => count(prev => prev + nr);\n        const decrement = (nr = -1) => queueMicrotask(() => count(prev => prev + nr));\n        const data = { active, increment, decrement };\n        const collector = context(SYMBOL_SUSPENSE_COLLECTOR);\n        if (collector) {\n            collector?.register(data);\n            useCleanup(() => collector.unregister(data));\n        }\n        return data;\n    },\n    get: () => {\n        return context(SYMBOL_SUSPENSE);\n    },\n    wrap: (fn) => {\n        const data = SuspenseContext.create();\n        return context({ [SYMBOL_SUSPENSE]: data }, () => {\n            return resolve(() => fn(data));\n        });\n    }\n};\n/* EXPORT */\nexport default SuspenseContext;\n","/* IMPORT */\nimport SuspenseContext from './suspense.context.js';\nimport useCleanup from '../hooks/use_cleanup.js';\n/* MAIN */\nclass SuspenseManager {\n    constructor() {\n        /* VARIABLES */\n        this.suspenses = new Map();\n        /* API */\n        this.change = (suspense, nr) => {\n            const counter = this.suspenses.get(suspense) || 0;\n            const counterNext = Math.max(0, counter + nr);\n            if (counter === counterNext)\n                return;\n            if (counterNext) {\n                this.suspenses.set(suspense, counterNext);\n            }\n            else {\n                this.suspenses.delete(suspense);\n            }\n            if (nr > 0) {\n                suspense.increment(nr);\n            }\n            else {\n                suspense.decrement(nr);\n            }\n        };\n        this.suspend = () => {\n            const suspense = SuspenseContext.get();\n            if (!suspense)\n                return;\n            this.change(suspense, 1);\n            useCleanup(() => {\n                this.change(suspense, -1);\n            });\n        };\n        this.unsuspend = () => {\n            this.suspenses.forEach((counter, suspense) => {\n                this.change(suspense, -counter);\n            });\n        };\n    }\n}\n;\n/* EXPORT */\nexport default SuspenseManager;\n","/* IMPORT */\nimport useEffect from './use_effect.js';\n/* HELPERS */\nconst options = {\n    sync: 'init'\n};\n/* MAIN */\n// This function exists for convenience, and to avoid creating unnecessary options objects\nconst useRenderEffect = (fn) => {\n    return useEffect(fn, options);\n};\n/* EXPORT */\nexport default useRenderEffect;\n","/* IMPORT */\nimport SuspenseManager from '../components/suspense.manager.js';\nimport useCheapDisposed from './use_cheap_disposed.js';\nimport useReadonly from './use_readonly.js';\nimport useRenderEffect from './use_render_effect.js';\nimport $ from '../methods/S.js';\nimport $$ from '../methods/SS.js';\nimport { assign, castError, isPromise } from '../utils/lang.js';\n/* MAIN */\n//TODO: Maybe port this to oby, as \"from\"\n//TODO: Option for returning the resource as a store, where also the returned value gets wrapped in a store\n//FIXME: SSR demo: toggling back and forth between /home and /loader is buggy, /loader gets loaded with no data, which is wrong\nconst useResource = (fetcher) => {\n    const pending = $(true);\n    const error = $();\n    const value = $();\n    const latest = $();\n    const { suspend, unsuspend } = new SuspenseManager();\n    const resourcePending = { pending: true, get value() { return void suspend(); }, get latest() { return latest() ?? void suspend(); } };\n    const resourceRejected = { pending: false, get error() { return error(); }, get value() { throw error(); }, get latest() { throw error(); } };\n    const resourceResolved = { pending: false, get value() { return value(); }, get latest() { return value(); } };\n    const resourceFunction = { pending: () => pending(), error: () => error(), value: () => resource().value, latest: () => resource().latest };\n    const resource = $(resourcePending);\n    useRenderEffect(() => {\n        const disposed = useCheapDisposed();\n        const onPending = () => {\n            pending(true);\n            error(undefined);\n            value(undefined);\n            resource(resourcePending);\n        };\n        const onResolve = (result) => {\n            if (disposed())\n                return;\n            pending(false);\n            error(undefined);\n            value(() => result);\n            latest(() => result);\n            resource(resourceResolved);\n        };\n        const onReject = (exception) => {\n            if (disposed())\n                return;\n            pending(false);\n            error(castError(exception));\n            value(undefined);\n            latest(undefined);\n            resource(resourceRejected);\n        };\n        const onFinally = () => {\n            if (disposed())\n                return;\n            unsuspend();\n        };\n        const fetch = () => {\n            try {\n                const value = $$(fetcher());\n                if (isPromise(value)) {\n                    onPending();\n                    value.then(onResolve, onReject).finally(onFinally);\n                }\n                else {\n                    onResolve(value);\n                    onFinally();\n                }\n            }\n            catch (error) {\n                onReject(error);\n                onFinally();\n            }\n        };\n        fetch();\n    });\n    return assign(useReadonly(resource), resourceFunction);\n};\n/* EXPORT */\nexport default useResource;\n","/* IMPORT */\nimport useAbortSignal from './use_abort_signal.js';\nimport useResolved from './use_resolved.js';\nimport useResource from './use_resource.js';\n/* MAIN */\nconst useFetch = (request, init) => {\n    return useResource(() => {\n        return useResolved([request, init], (request, init = {}) => {\n            const signal = useAbortSignal(init.signal || []);\n            init.signal = signal;\n            return fetch(request, init);\n        });\n    });\n};\n/* EXPORT */\nexport default useFetch;\n","/* IMPORT */\nimport useScheduler from './use_scheduler.js';\nimport $$ from '../methods/SS.js';\n/* MAIN */\nconst useIdleCallback = (callback, options) => {\n    return useScheduler({\n        callback,\n        once: true,\n        cancel: cancelIdleCallback,\n        schedule: callback => requestIdleCallback(callback, $$(options))\n    });\n};\n/* EXPORT */\nexport default useIdleCallback;\n","/* IMPORT */\nimport useScheduler from './use_scheduler.js';\nimport $$ from '../methods/SS.js';\n/* MAIN */\nconst useIdleLoop = (callback, options) => {\n    return useScheduler({\n        callback,\n        loop: true,\n        cancel: cancelIdleCallback,\n        schedule: callback => requestIdleCallback(callback, $$(options))\n    });\n};\n/* EXPORT */\nexport default useIdleLoop;\n","/* IMPORT */\nimport useScheduler from './use_scheduler.js';\nimport $$ from '../methods/SS.js';\n/* MAIN */\nconst useInterval = (callback, ms) => {\n    return useScheduler({\n        callback,\n        cancel: clearInterval,\n        schedule: callback => setInterval(callback, $$(ms))\n    });\n};\n/* EXPORT */\nexport default useInterval;\n","/* IMPORT */\nimport useResource from './use_resource.js';\nimport $$ from '../methods/SS.js';\n/* MAIN */\nconst usePromise = (promise) => {\n    return useResource(() => $$(promise));\n};\n/* EXPORT */\nexport default usePromise;\n","/* IMPORT */\nimport useScheduler from './use_scheduler.js';\nimport $$ from '../methods/SS.js';\n/* MAIN */\nconst useTimeout = (callback, ms) => {\n    return useScheduler({\n        callback,\n        once: true,\n        cancel: clearTimeout,\n        schedule: callback => setTimeout(callback, $$(ms))\n    });\n};\n/* EXPORT */\nexport default useTimeout;\n","/* IMPORT */\nimport { useCleanup } from './/index.js';\n/* MAIN */\nconst useCheapDisposed = () => {\n    let disposed = false;\n    const get = () => disposed;\n    const set = () => disposed = true;\n    useCleanup(set);\n    return get;\n};\n/* EXPORT */\nexport default useCheapDisposed;\n","/* IMPORT */\nimport useCheapDisposed from './use_cheap_disposed.js';\nimport { with as _with } from '../oby.js';\n/* MAIN */\n//TODO: Maybe port this to oby\n//TODO: Maybe special-case this to use one shared mirotask per microtask\nconst useMicrotask = (fn) => {\n    const disposed = useCheapDisposed();\n    const runWithOwner = _with();\n    queueMicrotask(() => {\n        if (disposed())\n            return;\n        runWithOwner(fn);\n    });\n};\n/* EXPORT */\nexport default useMicrotask;\n","/* IMPORT */\nimport { isString } from './lang.js';\n/* MAIN */\n// This function exists to optimize memory usage in some cases, where the classList API won't be touched without sacrificing performance\nconst classesToggle = (element, classes, force) => {\n    const { className } = element;\n    /* OPTIMIZED PATH */\n    if (isString(className)) {\n        if (!className) { // Optimized addition/deletion\n            if (force) { // Optimized addition\n                element.className = classes;\n                return;\n            }\n            else { // Optimized deletion, nothing to do really\n                return;\n            }\n        }\n        else if (!force && className === classes) { // Optimized deletion\n            element.className = '';\n            return;\n        }\n    }\n    /* REGULAR PATH */\n    if (classes.includes(' ')) {\n        classes.split(' ').forEach(cls => {\n            if (!cls.length)\n                return;\n            element.classList.toggle(cls, !!force);\n        });\n    }\n    else {\n        element.classList.toggle(classes, !!force);\n    }\n};\n/* EXPORT */\nexport { classesToggle };\n","/**\n * ISC License\n *\n * Copyright (c) 2020, Andrea Giammarchi, @WebReflection\n *\n * Permission to use, copy, modify, and/or distribute this software for any\n * purpose with or without fee is hereby granted, provided that the above\n * copyright notice and this permission notice appear in all copies.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n * REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n * AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n * INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n * LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE\n * OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n * PERFORMANCE OF THIS SOFTWARE.\n */\n/* MAIN */\n// This is just a slightly customized version of udomdiff: with types, no accessor function and support for diffing unwrapped nodes\nconst dummyNode = document.createComment('');\nconst beforeDummyWrapper = [dummyNode];\nconst afterDummyWrapper = [dummyNode];\nconst diff = (parent, before, after, nextSibling) => {\n    if (before === after)\n        return;\n    if (before instanceof Node) {\n        if (after instanceof Node) {\n            if (before.parentNode === parent) { // Safety check, since setChildStatic may trigger this\n                parent.replaceChild(after, before);\n                return;\n            }\n            else {\n                //TODO: Optimize this branch too\n            }\n        }\n        beforeDummyWrapper[0] = before;\n        before = beforeDummyWrapper;\n    }\n    if (after instanceof Node) {\n        afterDummyWrapper[0] = after;\n        after = afterDummyWrapper;\n    }\n    const bLength = after.length;\n    let aEnd = before.length;\n    let bEnd = bLength;\n    let aStart = 0;\n    let bStart = 0;\n    let map = null;\n    let removable;\n    while (aStart < aEnd || bStart < bEnd) {\n        // append head, tail, or nodes in between: fast path\n        if (aEnd === aStart) {\n            // we could be in a situation where the rest of nodes that\n            // need to be added are not at the end, and in such case\n            // the node to `insertBefore`, if the index is more than 0\n            // must be retrieved, otherwise it's gonna be the first item.\n            const node = bEnd < bLength ?\n                (bStart ?\n                    (after[bStart - 1].nextSibling) :\n                    after[bEnd - bStart]) :\n                nextSibling;\n            if (bStart < bEnd) {\n                // parent.insertBefore(after[bStart++], node);\n                if (node) {\n                    node.before.apply(node, after.slice(bStart, bEnd));\n                }\n                else {\n                    parent.append.apply(parent, after.slice(bStart, bEnd));\n                }\n                bStart = bEnd;\n            }\n        }\n        // remove head or tail: fast path\n        else if (bEnd === bStart) {\n            while (aStart < aEnd) {\n                // remove the node only if it's unknown or not live\n                if (!map || !map.has(before[aStart])) {\n                    removable = before[aStart];\n                    if (removable.parentNode === parent) { // Safety check, since setChildStatic may trigger this\n                        parent.removeChild(removable);\n                    }\n                }\n                aStart++;\n            }\n        }\n        // same node: fast path\n        else if (before[aStart] === after[bStart]) {\n            aStart++;\n            bStart++;\n        }\n        // same tail: fast path\n        else if (before[aEnd - 1] === after[bEnd - 1]) {\n            aEnd--;\n            bEnd--;\n        }\n        // The once here single last swap \"fast path\" has been removed in v1.1.0\n        // https://github.com/WebReflection/udomdiff/blob/single-final-swap/esm/index.js#L69-L85\n        // reverse swap: also fast path\n        else if (before[aStart] === after[bEnd - 1] &&\n            after[bStart] === before[aEnd - 1]) {\n            // this is a \"shrink\" operation that could happen in these cases:\n            // [1, 2, 3, 4, 5]\n            // [1, 4, 3, 2, 5]\n            // or asymmetric too\n            // [1, 2, 3, 4, 5]\n            // [1, 2, 3, 5, 6, 4]\n            const node = before[--aEnd].nextSibling;\n            parent.insertBefore(after[bStart++], before[aStart++].nextSibling);\n            parent.insertBefore(after[--bEnd], node);\n            // mark the future index as identical (yeah, it's dirty, but cheap 👍)\n            // The main reason to do this, is that when a[aEnd] will be reached,\n            // the loop will likely be on the fast path, as identical to b[bEnd].\n            // In the best case scenario, the next loop will skip the tail,\n            // but in the worst one, this node will be considered as already\n            // processed, bailing out pretty quickly from the map index check\n            before[aEnd] = after[bEnd];\n        }\n        // map based fallback, \"slow\" path\n        else {\n            // the map requires an O(bEnd - bStart) operation once\n            // to store all future nodes indexes for later purposes.\n            // In the worst case scenario, this is a full O(N) cost,\n            // and such scenario happens at least when all nodes are different,\n            // but also if both first and last items of the lists are different\n            if (!map) {\n                map = new Map;\n                let i = bStart;\n                while (i < bEnd)\n                    map.set(after[i], i++);\n            }\n            // if it's a future node, hence it needs some handling\n            if (map.has(before[aStart])) {\n                // grab the index of such node, 'cause it might have been processed\n                const index = map.get(before[aStart]);\n                // if it's not already processed, look on demand for the next LCS\n                if (bStart < index && index < bEnd) {\n                    let i = aStart;\n                    // counts the amount of nodes that are the same in the future\n                    let sequence = 1;\n                    while (++i < aEnd && i < bEnd && map.get(before[i]) === (index + sequence))\n                        sequence++;\n                    // effort decision here: if the sequence is longer than replaces\n                    // needed to reach such sequence, which would brings again this loop\n                    // to the fast path, prepend the difference before a sequence,\n                    // and move only the future list index forward, so that aStart\n                    // and bStart will be aligned again, hence on the fast path.\n                    // An example considering aStart and bStart are both 0:\n                    // a: [1, 2, 3, 4]\n                    // b: [7, 1, 2, 3, 6]\n                    // this would place 7 before 1 and, from that time on, 1, 2, and 3\n                    // will be processed at zero cost\n                    if (sequence > (index - bStart)) {\n                        const node = before[aStart];\n                        if (bStart < index) {\n                            // parent.insertBefore(after[bStart++], node);\n                            if (node) {\n                                node.before.apply(node, after.slice(bStart, index));\n                            }\n                            else {\n                                parent.append.apply(parent, after.slice(bStart, index));\n                            }\n                            bStart = index;\n                        }\n                    }\n                    // if the effort wasn't good enough, fallback to a replace,\n                    // moving both source and target indexes forward, hoping that some\n                    // similar node will be found later on, to go back to the fast path\n                    else {\n                        parent.replaceChild(after[bStart++], before[aStart++]);\n                    }\n                }\n                // otherwise move the source forward, 'cause there's nothing to do\n                else\n                    aStart++;\n            }\n            // this node has no meaning in the future list, so it's more than safe\n            // to remove it, and check the next live node out instead, meaning\n            // that only the live list index should be forwarded\n            else {\n                removable = before[aStart++];\n                if (removable.parentNode === parent) { // Safety check, since setChildStatic may trigger this\n                    parent.removeChild(removable);\n                }\n            }\n        }\n    }\n    beforeDummyWrapper[0] = dummyNode;\n    afterDummyWrapper[0] = dummyNode;\n};\n/* EXPORT */\nexport default diff;\n","/* IMPORT */\n/* HELPERS */\nconst NOOP_CHILDREN = [];\n/* MAIN */\nconst FragmentUtils = {\n    make: () => {\n        return {\n            values: undefined,\n            length: 0\n        };\n    },\n    makeWithNode: (node) => {\n        return {\n            values: node,\n            length: 1\n        };\n    },\n    makeWithFragment: (fragment) => {\n        return {\n            values: fragment,\n            fragmented: true,\n            length: 1\n        };\n    },\n    getChildrenFragmented: (thiz, children = []) => {\n        const { values, length } = thiz;\n        if (!length)\n            return children;\n        if (values instanceof Array) {\n            for (let i = 0, l = values.length; i < l; i++) {\n                const value = values[i];\n                if (value instanceof Node) {\n                    children.push(value);\n                }\n                else {\n                    FragmentUtils.getChildrenFragmented(value, children);\n                }\n            }\n        }\n        else {\n            if (values instanceof Node) {\n                children.push(values);\n            }\n            else {\n                FragmentUtils.getChildrenFragmented(values, children);\n            }\n        }\n        return children;\n    },\n    getChildren: (thiz) => {\n        if (!thiz.length)\n            return NOOP_CHILDREN;\n        if (!thiz.fragmented)\n            return thiz.values;\n        if (thiz.length === 1)\n            return FragmentUtils.getChildren(thiz.values);\n        return FragmentUtils.getChildrenFragmented(thiz);\n    },\n    pushFragment: (thiz, fragment) => {\n        FragmentUtils.pushValue(thiz, fragment);\n        thiz.fragmented = true;\n    },\n    pushNode: (thiz, node) => {\n        FragmentUtils.pushValue(thiz, node);\n    },\n    pushValue: (thiz, value) => {\n        const { values, length } = thiz; //TSC\n        if (length === 0) {\n            thiz.values = value;\n        }\n        else if (length === 1) {\n            thiz.values = [values, value];\n        }\n        else {\n            values.push(value);\n        }\n        thiz.length += 1;\n    },\n    replaceWithNode: (thiz, node) => {\n        thiz.values = node;\n        delete thiz.fragmented;\n        thiz.length = 1;\n    },\n    replaceWithFragment: (thiz, fragment) => {\n        thiz.values = fragment.values;\n        thiz.fragmented = fragment.fragmented;\n        thiz.length = fragment.length;\n    }\n};\n/* EXPORT */\nexport default FragmentUtils;\n","/* IMPORT */\nimport { SYMBOL_UNCACHED } from '../constants.js';\nimport isObservable from '../methods/is_observable.js';\nimport useRenderEffect from '../hooks/use_render_effect.js';\nimport $$ from '../methods/SS.js';\nimport { createText } from './creators.js';\nimport { isArray, isFunction, isFunctionReactive, isString } from './lang.js';\n/* MAIN */\nconst resolveChild = (value, setter, _dynamic = false) => {\n    if (isFunction(value)) {\n        if (!isFunctionReactive(value)) {\n            resolveChild(value(), setter, _dynamic);\n        }\n        else {\n            useRenderEffect(() => {\n                resolveChild(value(), setter, true);\n            });\n        }\n    }\n    else if (isArray(value)) {\n        const [values, hasObservables] = resolveArraysAndStatics(value);\n        values[SYMBOL_UNCACHED] = value[SYMBOL_UNCACHED]; // Preserving this special symbol\n        setter(values, hasObservables || _dynamic);\n    }\n    else {\n        setter(value, _dynamic);\n    }\n};\nconst resolveClass = (classes, resolved = {}) => {\n    if (isString(classes)) {\n        classes.split(/\\s+/g).filter(Boolean).filter(cls => {\n            resolved[cls] = true;\n        });\n    }\n    else if (isFunction(classes)) {\n        resolveClass(classes(), resolved);\n    }\n    else if (isArray(classes)) {\n        classes.forEach(cls => {\n            resolveClass(cls, resolved); //TSC\n        });\n    }\n    else if (classes) {\n        for (const key in classes) {\n            const value = classes[key];\n            const isActive = !!$$(value);\n            if (!isActive)\n                continue;\n            resolved[key] = true;\n        }\n    }\n    return resolved;\n};\nconst resolveStyle = (styles, resolved = {}) => {\n    if (isString(styles)) { //TODO: split into the individual styles, to be able to merge them with other styles\n        return styles;\n    }\n    else if (isFunction(styles)) {\n        return resolveStyle(styles(), resolved);\n    }\n    else if (isArray(styles)) {\n        styles.forEach(style => {\n            resolveStyle(style, resolved); //TSC\n        });\n    }\n    else if (styles) {\n        for (const key in styles) {\n            const value = styles[key];\n            resolved[key] = $$(value);\n        }\n    }\n    return resolved;\n};\nconst resolveArraysAndStatics = (() => {\n    // This function does 3 things:\n    // 1. It deeply flattens the array, only if actually needed though (!)\n    // 2. It resolves statics, it's important to resolve them soon enough or they will be re-created multiple times (!)\n    // 3. It checks if we found any Observables along the way, avoiding looping over the array another time in the future\n    const DUMMY_RESOLVED = [];\n    const resolveArraysAndStaticsInner = (values, resolved, hasObservables) => {\n        for (let i = 0, l = values.length; i < l; i++) {\n            const value = values[i];\n            const type = typeof value;\n            if (type === 'string' || type === 'number' || type === 'bigint') { // Static\n                if (resolved === DUMMY_RESOLVED)\n                    resolved = values.slice(0, i);\n                resolved.push(createText(value));\n            }\n            else if (type === 'object' && isArray(value)) { // Array\n                if (resolved === DUMMY_RESOLVED)\n                    resolved = values.slice(0, i);\n                hasObservables = resolveArraysAndStaticsInner(value, resolved, hasObservables)[1];\n            }\n            else if (type === 'function' && isObservable(value)) { // Observable\n                if (resolved !== DUMMY_RESOLVED)\n                    resolved.push(value);\n                hasObservables = true;\n            }\n            else { // Something else\n                if (resolved !== DUMMY_RESOLVED)\n                    resolved.push(value);\n            }\n        }\n        if (resolved === DUMMY_RESOLVED)\n            resolved = values;\n        return [resolved, hasObservables];\n    };\n    return (values) => {\n        return resolveArraysAndStaticsInner(values, DUMMY_RESOLVED, false);\n    };\n})();\n/* EXPORT */\nexport { resolveChild, resolveClass, resolveStyle, resolveArraysAndStatics };\n","/* IMPORT */\nimport { DIRECTIVES, SYMBOLS_DIRECTIVES, SYMBOL_UNCACHED } from '../constants.js';\nimport useMicrotask from '../hooks/use_microtask.js';\nimport useRenderEffect from '../hooks/use_render_effect.js';\nimport isStore from '../methods/is_store.js';\nimport $$ from '../methods/SS.js';\nimport store from '../methods/store.js';\nimport untrack from '../methods/untrack.js';\nimport { context, with as _with } from '../oby.js';\nimport { SYMBOL_STORE_OBSERVABLE } from '../oby.js';\nimport { classesToggle } from './classlist.js';\nimport { createText, createComment } from './creators.js';\nimport diff from './diff.js';\nimport FragmentUtils from './fragment.js';\nimport { castArray, flatten, isArray, isBoolean, isFunction, isFunctionReactive, isNil, isString, isSVG, isTemplateAccessor } from './lang.js';\nimport { resolveChild, resolveClass, resolveStyle } from './resolvers.js';\n/* MAIN */\nconst setAttributeStatic = (() => {\n    const attributesBoolean = new Set(['allowfullscreen', 'async', 'autofocus', 'autoplay', 'checked', 'controls', 'default', 'disabled', 'formnovalidate', 'hidden', 'indeterminate', 'ismap', 'loop', 'multiple', 'muted', 'nomodule', 'novalidate', 'open', 'playsinline', 'readonly', 'required', 'reversed', 'seamless', 'selected']);\n    const attributeCamelCasedRe = /e(r[HRWrv]|[Vawy])|Con|l(e[Tcs]|c)|s(eP|y)|a(t[rt]|u|v)|Of|Ex|f[XYa]|gt|hR|d[Pg]|t[TXYd]|[UZq]/; //URL: https://regex101.com/r/I8Wm4S/1\n    const attributesCache = {};\n    const uppercaseRe = /[A-Z]/g;\n    const normalizeKeySvg = (key) => {\n        return attributesCache[key] || (attributesCache[key] = attributeCamelCasedRe.test(key) ? key : key.replace(uppercaseRe, char => `-${char.toLowerCase()}`));\n    };\n    return (element, key, value) => {\n        if (isSVG(element)) {\n            key = (key === 'xlinkHref' || key === 'xlink:href') ? 'href' : normalizeKeySvg(key);\n            if (isNil(value) || (value === false && attributesBoolean.has(key))) {\n                element.removeAttribute(key);\n            }\n            else {\n                element.setAttribute(key, String(value));\n            }\n        }\n        else {\n            if (isNil(value) || (value === false && attributesBoolean.has(key))) {\n                element.removeAttribute(key);\n            }\n            else {\n                value = (value === true) ? '' : String(value);\n                element.setAttribute(key, value);\n            }\n        }\n    };\n})();\nconst setAttribute = (element, key, value) => {\n    if (isFunction(value) && isFunctionReactive(value)) {\n        useRenderEffect(() => {\n            setAttributeStatic(element, key, value());\n        });\n    }\n    else {\n        setAttributeStatic(element, key, $$(value));\n    }\n};\nconst setChildReplacementFunction = (parent, fragment, child) => {\n    useRenderEffect(() => {\n        let valueNext = child();\n        while (isFunction(valueNext)) {\n            valueNext = valueNext();\n        }\n        setChildStatic(parent, fragment, false, valueNext, true);\n    });\n};\nconst setChildReplacementText = (child, childPrev) => {\n    if (childPrev.nodeType === 3) {\n        childPrev.nodeValue = child;\n        return childPrev;\n    }\n    else {\n        const parent = childPrev.parentElement;\n        if (!parent)\n            throw new Error('Invalid child replacement');\n        const textNode = createText(child);\n        parent.replaceChild(textNode, childPrev);\n        return textNode;\n    }\n};\nconst setChildReplacement = (child, childPrev) => {\n    const type = typeof child;\n    if (type === 'string' || type === 'number' || type === 'bigint') {\n        setChildReplacementText(String(child), childPrev);\n    }\n    else {\n        const parent = childPrev.parentElement;\n        if (!parent)\n            throw new Error('Invalid child replacement');\n        const fragment = FragmentUtils.makeWithNode(childPrev);\n        if (type === 'function') {\n            setChildReplacementFunction(parent, fragment, child); //TSC\n        }\n        else {\n            setChild(parent, child, fragment);\n        }\n    }\n};\nconst setChildStatic = (parent, fragment, fragmentOnly, child, dynamic) => {\n    if (!dynamic && child === undefined)\n        return; // Ignoring static undefined children, avoiding inserting some useless placeholder nodes\n    const prev = FragmentUtils.getChildren(fragment);\n    const prevIsArray = (prev instanceof Array);\n    const prevLength = prevIsArray ? prev.length : 1;\n    const prevFirst = prevIsArray ? prev[0] : prev;\n    const prevLast = prevIsArray ? prev[prevLength - 1] : prev;\n    const prevSibling = prevLast?.nextSibling || null;\n    if (prevLength === 0) { // Fast path for appending a node the first time\n        const type = typeof child;\n        if (type === 'string' || type === 'number' || type === 'bigint') {\n            const textNode = createText(child);\n            if (!fragmentOnly) {\n                parent.appendChild(textNode);\n            }\n            FragmentUtils.replaceWithNode(fragment, textNode);\n            return;\n        }\n        else if (type === 'object' && child !== null && typeof child.nodeType === 'number') { //TSC\n            const node = child;\n            if (!fragmentOnly) {\n                parent.insertBefore(node, null);\n            }\n            FragmentUtils.replaceWithNode(fragment, node);\n            return;\n        }\n    }\n    if (prevLength === 1 && prevFirst.parentNode) { // Fast path for single text child replacing a mounted node\n        const type = typeof child;\n        if (type === 'string' || type === 'number' || type === 'bigint') {\n            const node = setChildReplacementText(String(child), prevFirst); //TODO: maybe \"fragmentOnly\" should be passed on here, but it seems unnecessary\n            FragmentUtils.replaceWithNode(fragment, node);\n            return;\n        }\n    }\n    const fragmentNext = FragmentUtils.make();\n    const children = (Array.isArray(child) ? child : [child]); //TSC\n    for (let i = 0, l = children.length; i < l; i++) {\n        const child = children[i];\n        const type = typeof child;\n        if (type === 'string' || type === 'number' || type === 'bigint') {\n            FragmentUtils.pushNode(fragmentNext, createText(child));\n        }\n        else if (type === 'object' && child !== null && typeof child.nodeType === 'number') {\n            FragmentUtils.pushNode(fragmentNext, child);\n        }\n        else if (type === 'function') {\n            const fragment = FragmentUtils.make();\n            let childFragmentOnly = !fragmentOnly; // Avoiding mutating the DOM immediately, letting the parent handle it\n            FragmentUtils.pushFragment(fragmentNext, fragment);\n            resolveChild(child, (child, dynamic) => {\n                const fragmentOnly = childFragmentOnly;\n                childFragmentOnly = false;\n                setChildStatic(parent, fragment, fragmentOnly, child, dynamic);\n            });\n        }\n    }\n    let next = FragmentUtils.getChildren(fragmentNext);\n    let nextLength = fragmentNext.length;\n    if (nextLength === 0 && prevLength === 1 && prevFirst.nodeType === 8) { // It's a placeholder already, no need to replace it\n        return;\n    }\n    if (!fragmentOnly && (nextLength === 0 || (prevLength === 1 && prevFirst.nodeType === 8) || children[SYMBOL_UNCACHED])) { // Fast path for removing all children and/or replacing the placeholder\n        const { childNodes } = parent;\n        if (childNodes.length === prevLength) { // Maybe this fragment doesn't handle all children but only a range of them, checking for that here\n            parent.textContent = '';\n            if (nextLength === 0) { // Placeholder, to keep the right spot in the array of children\n                const placeholder = (fragmentNext.placeholder || (fragmentNext.placeholder = fragment.placeholder || (fragment.placeholder = createComment())));\n                FragmentUtils.pushNode(fragmentNext, placeholder);\n                if (next !== fragmentNext.values) {\n                    next = placeholder;\n                    nextLength += 1;\n                }\n            }\n            if (prevSibling) {\n                if (next instanceof Array) {\n                    prevSibling.before.apply(prevSibling, next);\n                }\n                else {\n                    parent.insertBefore(next, prevSibling);\n                }\n            }\n            else {\n                if (next instanceof Array) {\n                    parent.append.apply(parent, next);\n                }\n                else {\n                    parent.append(next);\n                }\n            }\n            FragmentUtils.replaceWithFragment(fragment, fragmentNext);\n            return;\n        }\n    }\n    if (nextLength === 0) { // Placeholder, to keep the right spot in the array of children\n        const placeholder = (fragmentNext.placeholder || (fragmentNext.placeholder = fragment.placeholder || (fragment.placeholder = createComment())));\n        FragmentUtils.pushNode(fragmentNext, placeholder);\n        if (next !== fragmentNext.values) {\n            next = placeholder;\n            nextLength += 1;\n        }\n    }\n    if (!fragmentOnly) {\n        diff(parent, prev, next, prevSibling);\n    }\n    FragmentUtils.replaceWithFragment(fragment, fragmentNext);\n};\nconst setChild = (parent, child, fragment = FragmentUtils.make()) => {\n    resolveChild(child, setChildStatic.bind(undefined, parent, fragment, false));\n};\nconst setClassStatic = classesToggle;\nconst setClass = (element, key, value) => {\n    if (isFunction(value) && isFunctionReactive(value)) {\n        useRenderEffect(() => {\n            setClassStatic(element, key, value());\n        });\n    }\n    else {\n        setClassStatic(element, key, $$(value));\n    }\n};\nconst setClassBooleanStatic = (element, value, key, keyPrev) => {\n    if (keyPrev && keyPrev !== true) {\n        setClassStatic(element, keyPrev, false);\n    }\n    if (key && key !== true) {\n        setClassStatic(element, key, value);\n    }\n};\nconst setClassBoolean = (element, value, key) => {\n    if (isFunction(key) && isFunctionReactive(key)) {\n        let keyPrev;\n        useRenderEffect(() => {\n            const keyNext = key();\n            setClassBooleanStatic(element, value, keyNext, keyPrev);\n            keyPrev = keyNext;\n        });\n    }\n    else {\n        setClassBooleanStatic(element, value, $$(key));\n    }\n};\nconst setClassesStatic = (element, object, objectPrev) => {\n    if (isString(object)) {\n        if (isSVG(element)) {\n            element.setAttribute('class', object);\n        }\n        else {\n            element.className = object;\n        }\n    }\n    else {\n        if (objectPrev) {\n            if (isString(objectPrev)) {\n                if (objectPrev) {\n                    if (isSVG(element)) {\n                        element.setAttribute('class', '');\n                    }\n                    else {\n                        element.className = '';\n                    }\n                }\n            }\n            else if (isArray(objectPrev)) {\n                objectPrev = store.unwrap(objectPrev);\n                for (let i = 0, l = objectPrev.length; i < l; i++) {\n                    if (!objectPrev[i])\n                        continue;\n                    setClassBoolean(element, false, objectPrev[i]);\n                }\n            }\n            else {\n                objectPrev = store.unwrap(objectPrev);\n                for (const key in objectPrev) {\n                    if (object && key in object)\n                        continue;\n                    setClass(element, key, false);\n                }\n            }\n        }\n        if (isArray(object)) {\n            if (isStore(object)) {\n                for (let i = 0, l = object.length; i < l; i++) {\n                    const fn = untrack(() => isFunction(object[i]) ? object[i] : object[SYMBOL_STORE_OBSERVABLE](String(i))); //TSC\n                    setClassBoolean(element, true, fn);\n                }\n            }\n            else {\n                for (let i = 0, l = object.length; i < l; i++) {\n                    if (!object[i])\n                        continue;\n                    setClassBoolean(element, true, object[i]);\n                }\n            }\n        }\n        else {\n            if (isStore(object)) {\n                for (const key in object) {\n                    const fn = untrack(() => isFunction(object[key]) ? object[key] : object[SYMBOL_STORE_OBSERVABLE](key)); //TSC\n                    setClass(element, key, fn);\n                }\n            }\n            else {\n                for (const key in object) {\n                    setClass(element, key, object[key]);\n                }\n            }\n        }\n    }\n};\nconst setClasses = (element, object) => {\n    if (isFunction(object) || isArray(object)) {\n        let objectPrev;\n        useRenderEffect(() => {\n            const objectNext = resolveClass(object);\n            setClassesStatic(element, objectNext, objectPrev);\n            objectPrev = objectNext;\n        });\n    }\n    else {\n        setClassesStatic(element, object);\n    }\n};\nconst setDirective = (element, directive, args) => {\n    const symbol = SYMBOLS_DIRECTIVES[directive] || Symbol();\n    const data = context(symbol) || DIRECTIVES[symbol];\n    if (!data)\n        throw new Error(`Directive \"${directive}\" not found`);\n    const call = () => data.fn(element, ...castArray(args)); //TSC\n    if (data.immediate) {\n        call();\n    }\n    else {\n        useMicrotask(call);\n    }\n};\nconst setEventStatic = (() => {\n    //TODO: Maybe delete event delegation\n    //TODO: Maybe delegate more events: [onmousemove, onmouseout, onmouseover, onpointerdown, onpointermove, onpointerout, onpointerover, onpointerup, ontouchend, ontouchmove, ontouchstart]\n    const delegatedEvents = {\n        onauxclick: ['_onauxclick', false],\n        onbeforeinput: ['_onbeforeinput', false],\n        onclick: ['_onclick', false],\n        ondblclick: ['_ondblclick', false],\n        onfocusin: ['_onfocusin', false],\n        onfocusout: ['_onfocusout', false],\n        oninput: ['_oninput', false],\n        onkeydown: ['_onkeydown', false],\n        onkeyup: ['_onkeyup', false],\n        onmousedown: ['_onmousedown', false],\n        onmouseup: ['_onmouseup', false]\n    };\n    const delegate = (event) => {\n        const key = `_${event}`;\n        document.addEventListener(event.slice(2), event => {\n            const targets = event.composedPath();\n            let target = null;\n            Object.defineProperty(event, 'currentTarget', {\n                configurable: true,\n                get() {\n                    return target;\n                }\n            });\n            for (let i = 0, l = targets.length; i < l; i++) {\n                target = targets[i];\n                const handler = target[key];\n                if (!handler)\n                    continue;\n                handler(event);\n                if (event.cancelBubble)\n                    break;\n            }\n            target = null;\n        });\n    };\n    return (element, event, value) => {\n        if (event.startsWith('onmiddleclick')) { // Special-cased synthetic event, somewhat ugly but very convenient\n            const _value = value;\n            event = `onauxclick${event.slice(13)}`;\n            value = _value && ((event) => event['button'] === 1 && _value(event));\n        }\n        const delegated = delegatedEvents[event];\n        if (delegated) {\n            if (!delegated[1]) { // Not actually delegating yet\n                delegated[1] = true;\n                delegate(event);\n            }\n            element[delegated[0]] = value;\n        }\n        else if (event.endsWith('passive')) {\n            const isCapture = event.endsWith('capturepassive');\n            const type = event.slice(2, -7 - (isCapture ? 7 : 0));\n            const key = `_${event}`;\n            const valuePrev = element[key];\n            if (valuePrev)\n                element.removeEventListener(type, valuePrev, { capture: isCapture });\n            if (value)\n                element.addEventListener(type, value, { passive: true, capture: isCapture });\n            element[key] = value;\n        }\n        else if (event.endsWith('capture')) {\n            const type = event.slice(2, -7);\n            const key = `_${event}`;\n            const valuePrev = element[key];\n            if (valuePrev)\n                element.removeEventListener(type, valuePrev, { capture: true });\n            if (value)\n                element.addEventListener(type, value, { capture: true });\n            element[key] = value;\n        }\n        else {\n            element[event] = value;\n        }\n    };\n})();\nconst setEvent = (element, event, value) => {\n    setEventStatic(element, event, value);\n};\nconst setHTMLStatic = (element, value) => {\n    element.innerHTML = String(isNil(value) ? '' : value);\n};\nconst setHTML = (element, value) => {\n    useRenderEffect(() => {\n        setHTMLStatic(element, $$($$(value).__html));\n    });\n};\nconst setPropertyStatic = (element, key, value) => {\n    if (key === 'tabIndex' && isBoolean(value)) {\n        value = value ? 0 : undefined;\n    }\n    if (key === 'value') {\n        if (element.tagName === 'PROGRESS') {\n            value ?? (value = null);\n        }\n        else if (element.tagName === 'SELECT' && !element['_$inited']) {\n            element['_$inited'] = true;\n            queueMicrotask(() => element[key] = value);\n        }\n    }\n    try { // Trying setting the property\n        element[key] = value;\n        if (isNil(value)) {\n            setAttributeStatic(element, key, null);\n        }\n    }\n    catch { // If it fails, maybe because like HTMLInputElement.form there's only a getter, we try as an attribute instead //TODO: Figure out something better than this\n        setAttributeStatic(element, key, value);\n    }\n};\nconst setProperty = (element, key, value) => {\n    if (isFunction(value) && isFunctionReactive(value)) {\n        useRenderEffect(() => {\n            setPropertyStatic(element, key, value());\n        });\n    }\n    else {\n        setPropertyStatic(element, key, $$(value));\n    }\n};\nconst setRef = (element, value) => {\n    if (isNil(value))\n        return;\n    const values = flatten(castArray(value)).filter(Boolean); //TODO: Maybe special-case this to be faster for non-array values, or 2-values arrays\n    if (!values.length)\n        return;\n    useMicrotask(() => untrack(() => values.forEach(value => value?.(element))));\n};\nconst setStyleStatic = (() => {\n    // From Preact: https://github.com/preactjs/preact/blob/e703a62b77c9de45e886d8a7f59bd0db658318f9/src/constants.js#L3\n    // const propertyNonDimensionalRe = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n    // From this Preact issue: https://github.com/preactjs/preact/issues/2607\n    const propertyNonDimensionalRe = /^(-|f[lo].*[^se]$|g.{5,}[^ps]$|z|o[pr]|(W.{5})?[lL]i.*(t|mp)$|an|(bo|s).{4}Im|sca|m.{6}[ds]|ta|c.*[st]$|wido|ini)/i;\n    const propertyNonDimensionalCache = {};\n    return (element, key, value) => {\n        if (key.charCodeAt(0) === 45) { // /^-/\n            if (isNil(value)) {\n                element.style.removeProperty(key);\n            }\n            else {\n                element.style.setProperty(key, String(value));\n            }\n        }\n        else if (isNil(value)) {\n            element.style[key] = null;\n        }\n        else {\n            element.style[key] = (isString(value) || (propertyNonDimensionalCache[key] || (propertyNonDimensionalCache[key] = propertyNonDimensionalRe.test(key))) ? value : `${value}px`);\n        }\n    };\n})();\nconst setStyle = (element, key, value) => {\n    if (isFunction(value) && isFunctionReactive(value)) {\n        useRenderEffect(() => {\n            setStyleStatic(element, key, value());\n        });\n    }\n    else {\n        setStyleStatic(element, key, $$(value));\n    }\n};\nconst setStylesStatic = (element, object, objectPrev) => {\n    if (isString(object)) {\n        element.setAttribute('style', object);\n    }\n    else {\n        if (objectPrev) {\n            if (isString(objectPrev)) {\n                if (objectPrev) {\n                    element.style.cssText = '';\n                }\n            }\n            else {\n                objectPrev = store.unwrap(objectPrev);\n                for (const key in objectPrev) {\n                    if (object && key in object)\n                        continue;\n                    setStyleStatic(element, key, null);\n                }\n            }\n        }\n        if (isStore(object)) {\n            for (const key in object) {\n                const fn = untrack(() => isFunction(object[key]) ? object[key] : object[SYMBOL_STORE_OBSERVABLE](key)); //TSC\n                setStyle(element, key, fn);\n            }\n        }\n        else {\n            for (const key in object) {\n                setStyle(element, key, object[key]);\n            }\n        }\n    }\n};\nconst setStyles = (element, object) => {\n    if (isFunction(object) || isArray(object)) {\n        let objectPrev;\n        useRenderEffect(() => {\n            const objectNext = resolveStyle(object);\n            setStylesStatic(element, objectNext, objectPrev);\n            objectPrev = objectNext;\n        });\n    }\n    else {\n        setStylesStatic(element, $$(object));\n    }\n};\nconst setTemplateAccessor = (element, key, value) => {\n    if (key === 'children') {\n        const placeholder = createText(''); // Using a Text node rather than a Comment as the former may be what we actually want ultimately\n        element.insertBefore(placeholder, null);\n        value(element, 'setChildReplacement', undefined, placeholder);\n    }\n    else if (key === 'ref') {\n        value(element, 'setRef');\n    }\n    else if (key === 'style') {\n        value(element, 'setStyles');\n    }\n    else if (key === 'class') {\n        if (!isSVG(element)) {\n            element.className = ''; // Ensuring the attribute is present\n        }\n        value(element, 'setClasses');\n    }\n    else if (key === 'dangerouslySetInnerHTML') {\n        value(element, 'setHTML');\n    }\n    else if (key.charCodeAt(0) === 111 && key.charCodeAt(1) === 110) { // /^on/\n        value(element, 'setEvent', key.toLowerCase());\n    }\n    else if (key.charCodeAt(0) === 117 && key.charCodeAt(3) === 58) { // /^u..:/\n        value(element, 'setDirective', key.slice(4));\n    }\n    else if (key === 'innerHTML' || key === 'outerHTML' || key === 'textContent' || key === 'className') {\n        // Forbidden props\n    }\n    else if (key in element && !isSVG(element)) {\n        value(element, 'setProperty', key);\n    }\n    else {\n        element.setAttribute(key, ''); // Ensuring the attribute is present\n        value(element, 'setAttribute', key);\n    }\n};\nconst setProp = (element, key, value) => {\n    if (value === undefined)\n        return; // Ignoring undefined props, for performance\n    if (isTemplateAccessor(value)) {\n        setTemplateAccessor(element, key, value);\n    }\n    else if (key === 'children') {\n        setChild(element, value);\n    }\n    else if (key === 'ref') {\n        setRef(element, value);\n    }\n    else if (key === 'style') {\n        setStyles(element, value);\n    }\n    else if (key === 'class') {\n        setClasses(element, value);\n    }\n    else if (key === 'dangerouslySetInnerHTML') {\n        setHTML(element, value);\n    }\n    else if (key.charCodeAt(0) === 111 && key.charCodeAt(1) === 110) { // /^on/\n        setEvent(element, key.toLowerCase(), value);\n    }\n    else if (key.charCodeAt(0) === 117 && key.charCodeAt(3) === 58) { // /^u..:/\n        setDirective(element, key.slice(4), value);\n    }\n    else if (key === 'innerHTML' || key === 'outerHTML' || key === 'textContent' || key === 'className') {\n        // Forbidden props\n    }\n    else if (key in element && !isSVG(element)) {\n        setProperty(element, key, value);\n    }\n    else {\n        setAttribute(element, key, value);\n    }\n};\nconst setProps = (element, object) => {\n    for (const key in object) {\n        setProp(element, key, object[key]);\n    }\n};\n/* EXPORT */\nexport { setAttributeStatic, setAttribute, setChildReplacementFunction, setChildReplacementText, setChildReplacement, setChildStatic, setChild, setClassStatic, setClass, setClassBooleanStatic, setClassesStatic, setClasses, setEventStatic, setEvent, setHTMLStatic, setHTML, setPropertyStatic, setProperty, setRef, setStyleStatic, setStyle, setStylesStatic, setStyles, setTemplateAccessor, setProp, setProps };\n","/* IMPORT */\nimport untrack from './untrack.js';\nimport wrapElement from './wrap_element.js';\nimport { createHTMLNode, createSVGNode } from '../utils/creators.js';\nimport { isFunction, isNil, isNode, isString, isSVGElement, isVoidChild } from '../utils/lang.js';\nimport { setProps } from '../utils/setters.js';\n/* MAIN */\n// It's important to wrap components, so that they can be executed in the right order, from parent to child, rather than from child to parent in some cases\nconst createElement = (component, props, ..._children) => {\n    const { children: __children, key, ref, ...rest } = (props || {}); //TSC\n    const children = (_children.length === 1) ? _children[0] : (_children.length === 0) ? __children : _children;\n    if (isFunction(component)) {\n        const props = rest;\n        if (!isNil(children))\n            props.children = children;\n        if (!isNil(ref))\n            props.ref = ref;\n        return wrapElement(() => {\n            return untrack(() => component.call(component, props)); //TSC\n        });\n    }\n    else if (isString(component)) {\n        const props = rest;\n        const isSVG = isSVGElement(component);\n        const createNode = isSVG ? createSVGNode : createHTMLNode;\n        if (!isVoidChild(children))\n            props.children = children;\n        if (!isNil(ref))\n            props.ref = ref;\n        return wrapElement(() => {\n            const child = createNode(component); //TSC\n            if (isSVG)\n                child['isSVG'] = true;\n            untrack(() => setProps(child, props));\n            return child;\n        });\n    }\n    else if (isNode(component)) {\n        return wrapElement(() => component);\n    }\n    else {\n        throw new Error('Invalid component');\n    }\n};\n/* EXPORT */\nexport default createElement;\n","/* IMPORT */\nimport useMemo from '../hooks/use_memo.js';\nimport createElement from '../methods/create_element.js';\nimport resolve from '../methods/resolve.js';\nimport $$ from '../methods/SS.js';\n/* MAIN */\nconst Dynamic = ({ component, props, children }) => {\n    return useMemo(() => {\n        return resolve(createElement($$(component, false), $$(props), children));\n    });\n};\n/* EXPORT */\nexport default Dynamic;\n","/* IMPORT */\nimport untrack from '../methods/untrack.js';\nimport { tryCatch } from '../oby.js';\nimport { isFunction } from '../utils/lang.js';\n/* MAIN */\nconst ErrorBoundary = ({ fallback, children }) => {\n    return tryCatch(children, props => untrack(() => isFunction(fallback) ? fallback(props) : fallback));\n};\n/* EXPORT */\nexport default ErrorBoundary;\n","/* IMPORT */\nimport { for as _for } from '../oby.js';\nfunction For({ values, fallback, pooled, unkeyed, children }) {\n    return _for(values, children, fallback, { pooled, unkeyed }); //TSC\n}\n/* EXPORT */\nexport default For;\n","/* IMPORT */\nimport cleanup from './cleanup.js';\nimport CacheKeyed from './for.cache.keyed.js';\nimport CacheUnkeyed from './for.cache.unkeyed.js';\nimport get from './get.js';\nimport isObservable from './is_observable.js';\nimport isStore from './is_store.js';\nimport memo from './memo.js';\nimport resolve from './resolve.js';\nimport untrack from './untrack.js';\nimport { frozen } from '../objects/callable.js';\nimport { SYMBOL_CACHED, SYMBOL_STORE_VALUES } from '../symbols.js';\nimport { isArray, isEqual } from '../utils.js';\nfunction _for(values, fn, fallback = [], options) {\n    if (isArray(values) && !isStore(values)) { // Fast path for plain arrays\n        const isUnkeyed = !!options?.unkeyed;\n        return frozen(untrack(() => {\n            if (values.length) {\n                return values.map((value, index) => {\n                    return resolve(fn(isUnkeyed && !isObservable(value) ? frozen(value) : value, index));\n                });\n            }\n            else {\n                return resolve(fallback);\n            }\n        }));\n    }\n    else { // Regular path\n        const { Q, map } = options?.unkeyed ? new CacheUnkeyed(fn, !!options.pooled) : new CacheKeyed(fn); //TSC\n        cleanup(Q);\n        const value = memo(() => {\n            return get(values) ?? [];\n        }, {\n            equals: (next, prev) => {\n                return !!next && !!prev && !next.length && !prev.length && !isStore(next) && !isStore(prev);\n            }\n        });\n        return memo(() => {\n            const array = value();\n            if (isStore(array)) {\n                array[SYMBOL_STORE_VALUES];\n            }\n            return untrack(() => {\n                const results = map(array);\n                return results?.length ? results : resolve(fallback);\n            });\n        }, {\n            equals: (next, prev) => {\n                return isArray(next) && !!next[SYMBOL_CACHED] && isArray(prev) && isEqual(next, prev);\n            }\n        });\n    }\n}\n/* EXPORT */\nexport default _for;\n","/* IMPORT */\n/* MAIN */\nconst Fragment = ({ children }) => {\n    return children;\n};\n/* EXPORT */\nexport default Fragment;\n","/* IMPORT */\nimport useMemo from './use_memo.js';\nimport $$ from '../methods/SS.js';\nimport { isNil } from '../utils/lang.js';\n/* MAIN */\n//TODO: Maybe port this to oby, as \"when\" or \"is\" or \"guarded\"\n//TODO: Optimize this, checking if the value is actually potentially reactive\nconst useGuarded = (value, guard) => {\n    let valueLast;\n    const guarded = useMemo(() => {\n        const current = $$(value);\n        if (!guard(current))\n            return valueLast;\n        return valueLast = current;\n    });\n    return () => {\n        const current = guarded();\n        if (isNil(current))\n            throw new Error('The value never passed the type guard');\n        return current;\n    };\n};\n/* EXPORT */\nexport default useGuarded;\n","/* IMPORT */\nimport isObservable from '../methods/is_observable.js';\nimport useGuarded from '../hooks/use_guarded.js';\nimport useUntracked from '../hooks/use_untracked.js';\nimport { ternary } from '../oby.js';\nimport { isComponent, isFunction, isTruthy } from '../utils/lang.js';\n/* MAIN */\n//TODO: Support an is/guard prop, maybe\nconst If = ({ when, fallback, children }) => {\n    if (isFunction(children) && !isObservable(children) && !isComponent(children)) { // Calling the children function with an (() => Truthy<T>)\n        const truthy = useGuarded(when, isTruthy);\n        return ternary(when, useUntracked(() => children(truthy)), fallback);\n    }\n    else { // Just passing the children along\n        return ternary(when, children, fallback); //TSC\n    }\n};\n/* EXPORT */\nexport default If;\n","/* IMPORT */\nimport useCleanup from '../hooks/use_cleanup.js';\nimport useMemo from '../hooks/use_memo.js';\nimport useResolved from '../hooks/use_resolved.js';\nimport useRoot from '../hooks/use_root.js';\nimport useSuspense from '../hooks/use_suspense.js';\nimport resolve from '../methods/resolve.js';\nimport $ from '../methods/S.js';\nimport { with as _with } from '../oby.js';\n/* HELPERS */\nconst cache = {};\nconst runWithSuperRoot = _with();\nlet lockId = 1;\n/* MAIN */\n//TODO: Support hot-swapping owner and context, to make the context JustWork™\nconst KeepAlive = ({ id, ttl, children }) => {\n    return useMemo(() => {\n        return useResolved([id, ttl], (id, ttl) => {\n            const lock = lockId++;\n            const item = cache[id] || (cache[id] = { id, lock });\n            item.lock = lock;\n            item.reset?.();\n            item.suspended || (item.suspended = $(false));\n            item.suspended(false);\n            if (!item.dispose || !item.result) {\n                runWithSuperRoot(() => {\n                    useRoot(dispose => {\n                        item.dispose = () => {\n                            delete cache[id];\n                            dispose();\n                        };\n                        useSuspense(item.suspended, () => {\n                            item.result = resolve(children);\n                        });\n                    });\n                });\n            }\n            useCleanup(() => {\n                const hasLock = () => lock === item.lock;\n                if (!hasLock())\n                    return;\n                item.suspended?.(true);\n                if (!ttl || ttl <= 0 || ttl >= Infinity)\n                    return;\n                const dispose = () => hasLock() && item.dispose?.();\n                const timeoutId = setTimeout(dispose, ttl);\n                const reset = () => clearTimeout(timeoutId);\n                item.reset = reset;\n            });\n            return item.result;\n        });\n    });\n};\n/* EXPORT */\nexport default KeepAlive;\n","/* IMPORT */\nimport useRoot from '../hooks/use_root.js';\nimport { setChild } from '../utils/setters.js';\n/* MAIN */\nconst render = (child, parent) => {\n    if (!parent || !(parent instanceof HTMLElement))\n        throw new Error('Invalid parent node');\n    parent.textContent = '';\n    return useRoot(dispose => {\n        setChild(parent, child);\n        return () => {\n            dispose();\n            parent.textContent = '';\n        };\n    });\n};\n/* EXPORT */\nexport default render;\n","/* IMPORT */\nimport useBoolean from '../hooks/use_boolean.js';\nimport useRenderEffect from '../hooks/use_render_effect.js';\nimport render from '../methods/render.js';\nimport $$ from '../methods/SS.js';\nimport { createHTMLNode } from '../utils/creators.js';\nimport { assign } from '../utils/lang.js';\n/* MAIN */\nconst Portal = ({ when = true, mount, wrapper, children }) => {\n    const portal = $$(wrapper) || createHTMLNode('div');\n    if (!(portal instanceof HTMLElement))\n        throw new Error('Invalid wrapper node');\n    const condition = useBoolean(when);\n    useRenderEffect(() => {\n        if (!$$(condition))\n            return;\n        const parent = $$(mount) || document.body;\n        if (!(parent instanceof Element))\n            throw new Error('Invalid mount node');\n        parent.insertBefore(portal, null);\n        return () => {\n            parent.removeChild(portal);\n        };\n    });\n    useRenderEffect(() => {\n        if (!$$(condition))\n            return;\n        return render(children, portal);\n    });\n    return assign(() => $$(condition) || children, { metadata: { portal } });\n};\n/* EXPORT */\nexport default Portal;\n","/* IMPORT */\nimport SuspenseContext from './suspense.context.js';\nimport useMemo from '../hooks/use_memo.js';\nimport useSuspense from '../hooks/use_suspense.js';\nimport resolve from '../methods/resolve.js';\nimport $$ from '../methods/SS.js';\nimport { suspense as _suspense, ternary } from '../oby.js';\n/* MAIN */\nconst Suspense = ({ when, fallback, children }) => {\n    return SuspenseContext.wrap(suspense => {\n        const condition = useMemo(() => !!$$(when) || suspense.active());\n        const childrenSuspended = useSuspense(condition, () => resolve(children));\n        return ternary(condition, fallback, childrenSuspended);\n    });\n};\n/* EXPORT */\nexport default Suspense;\n","/* IMPORT */\nimport { switch as _switch } from '../oby.js';\nimport { assign, castArray } from '../utils/lang.js';\n/* MAIN */\n//TODO: Enforce children of Switch to be of type Switch.Case or Switch.Default\nconst Switch = ({ when, fallback, children }) => {\n    const childrenWithValues = castArray(children); //TSC\n    const values = childrenWithValues.map(child => child().metadata);\n    return _switch(when, values, fallback); //TSC\n};\n/* UTILITIES */\nSwitch.Case = ({ when, children }) => {\n    const metadata = { metadata: [when, children] };\n    return assign(() => children, metadata);\n};\nSwitch.Default = ({ children }) => {\n    const metadata = { metadata: [children] };\n    return assign(() => children, metadata);\n};\n/* EXPORT */\nexport default Switch;\n","/* IMPORT */\nimport { ternary } from '../oby.js';\n/* MAIN */\nconst Ternary = ({ when, children }) => {\n    return ternary(when, children[0], children[1]);\n};\n/* EXPORT */\nexport default Ternary;\n","/* IMPORT */\nimport './types.js';\nimport Fragment from '../components/fragment.js';\nimport createElement from '../methods/create_element.js';\n/* MAIN */\nconst jsx = (component, props) => {\n    return createElement(component, props);\n};\n/* EXPORT */\nexport { jsx, jsx as jsxs, jsx as jsxDEV, Fragment };\n","/* IMPORT */\nimport { DIRECTIVES, SYMBOLS_DIRECTIVES } from '../constants.js';\nimport resolve from './resolve.js';\nimport { context } from '../oby.js';\n/* MAIN */\nconst createDirective = (name, fn, options) => {\n    const immediate = !!options?.immediate;\n    const data = { fn, immediate };\n    const symbol = (SYMBOLS_DIRECTIVES[name] || (SYMBOLS_DIRECTIVES[name] = Symbol()));\n    const Provider = ({ children }) => {\n        return context({ [symbol]: data }, () => {\n            return resolve(children);\n        });\n    };\n    const ref = (...args) => {\n        return (element) => {\n            fn(element, ...args);\n        };\n    };\n    const register = () => {\n        if (symbol in DIRECTIVES)\n            throw new Error('Directive \"name\" is already registered');\n        DIRECTIVES[symbol] = data;\n    };\n    return { Provider, ref, register };\n};\n/* EXPORT */\nexport default createDirective;\n","/* IMPORT */\nimport useMemo from '../hooks/use_memo.js';\nimport $ from './S.js';\nimport resolve from './resolve.js';\nimport untrack from './untrack.js';\nimport { isFunction } from '../utils/lang.js';\n/* HELPERS */\nconst COMPONENT_RE = /^_?[A-Z][a-zA-Z0-9$_-]*$/;\nconst SYMBOL_AS = '__hmr_as__';\nconst SYMBOL_COLD_COMPONENT = Symbol('HMR.Cold');\nconst SYMBOL_HOT_COMPONENT = Symbol('HMR.Hot');\nconst SYMBOL_HOT_ID = Symbol('HMR.ID');\nconst SOURCES = new WeakMap();\n/* MAIN */\n//TODO: This seems excessively complicated, maybe it can be simplified somewhat?\n//TODO: Make this work better when a nested component is added/removed too\nconst hmr = (accept, component) => {\n    if (accept) { // Making the component hot\n        /* CHECK */\n        const cached = component[SYMBOL_HOT_COMPONENT];\n        if (cached)\n            return cached; // Already hot\n        const isProvider = !isFunction(component) && ('Provider' in component);\n        if (isProvider)\n            return component; // Context/Directive providers are not hot-reloadable\n        /* HELPERS */\n        const createHotComponent = (path) => {\n            return (...args) => {\n                return useMemo(() => {\n                    const component = path.reduce((component, key) => component[key], SOURCES.get(id())?.() || source());\n                    const result = resolve(untrack(() => component(...args)));\n                    return result;\n                });\n            };\n        };\n        const createHotComponentDeep = (component, path) => {\n            const cached = component[SYMBOL_HOT_COMPONENT];\n            if (cached)\n                return cached;\n            const hot = component[SYMBOL_HOT_COMPONENT] = createHotComponent(path);\n            for (const key in component) {\n                const value = component[key];\n                if (isFunction(value) && COMPONENT_RE.test(key)) { // A component\n                    hot[key] = createHotComponentDeep(value, [...path, key]);\n                }\n                else { // Something else\n                    hot[key] = value;\n                }\n            }\n            return hot;\n        };\n        const onAccept = (module) => {\n            const hot = module[component[SYMBOL_AS]] || module[component.name] || module.default;\n            if (!hot)\n                return console.error(`[hmr] Failed to handle update for \"${component.name}\" component:\\n\\n`, component);\n            const cold = hot[SYMBOL_COLD_COMPONENT] || hot;\n            hot[SYMBOL_HOT_ID]?.(id());\n            SOURCES.get(id())?.(() => cold);\n        };\n        /* MAIN */\n        const id = $({});\n        const source = $(component);\n        SOURCES.set(id(), source);\n        const cold = component[SYMBOL_COLD_COMPONENT] || component;\n        const hot = createHotComponentDeep(component, []);\n        cold[SYMBOL_HOT_COMPONENT] = hot;\n        hot[SYMBOL_COLD_COMPONENT] = cold;\n        hot[SYMBOL_HOT_COMPONENT] = hot;\n        hot[SYMBOL_HOT_ID] = id;\n        accept(onAccept);\n        /* RETURN */\n        return hot;\n    }\n    else { // Returning the component as is\n        return component;\n    }\n};\n/* EXPORT */\nexport default hmr;\n","var n=function(t,s,r,e){var u;s[0]=0;for(var h=1;h<s.length;h++){var p=s[h++],a=s[h]?(s[0]|=p?1:2,r[s[h++]]):s[++h];3===p?e[0]=a:4===p?e[1]=Object.assign(e[1]||{},a):5===p?(e[1]=e[1]||{})[s[++h]]=a:6===p?e[1][s[++h]]+=a+\"\":p?(u=t.apply(a,n(t,a,r,[\"\",null])),e.push(u),a[0]?s[0]|=2:(s[h-2]=0,s[h]=u)):e.push(a)}return e},t=new Map;export default function(s){var r=t.get(this);return r||(r=new Map,t.set(this,r)),(r=n(this,r.get(s)||(r.set(s,r=function(n){for(var t,s,r=1,e=\"\",u=\"\",h=[0],p=function(n){1===r&&(n||(e=e.replace(/^\\s*\\n\\s*|\\s*\\n\\s*$/g,\"\")))?h.push(0,n,e):3===r&&(n||e)?(h.push(3,n,e),r=2):2===r&&\"...\"===e&&n?h.push(4,n,0):2===r&&e&&!n?h.push(5,0,!0,e):r>=5&&((e||!n&&5===r)&&(h.push(r,0,e,s),r=6),n&&(h.push(r,n,0,s),r=6)),e=\"\"},a=0;a<n.length;a++){a&&(1===r&&p(),p(a));for(var l=0;l<n[a].length;l++)t=n[a][l],1===r?\"<\"===t?(p(),h=[h],r=3):e+=t:4===r?\"--\"===e&&\">\"===t?(r=1,e=\"\"):e=t+e[0]:u?t===u?u=\"\":e+=t:'\"'===t||\"'\"===t?u=t:\">\"===t?(p(),r=1):r&&(\"=\"===t?(r=5,s=e,e=\"\"):\"/\"===t&&(r<5||\">\"===n[a][l+1])?(p(),3===r&&(h=h[0]),r=h,(h=h[0]).push(2,0,r),r=0):\" \"===t||\"\\t\"===t||\"\\n\"===t||\"\\r\"===t?(p(),r=2):e+=t),3===r&&\"!--\"===e&&(r=4,h=h[0])}return p(),h}(s)),r),arguments,[])).length>1?r:r[0]}\n","/* IMPORT */\nimport htm from 'htm';\nimport createElement from './create_element.js';\nimport { assign } from '../utils/lang.js';\n/* HELPERS */\nconst registry = {};\nconst h = (type, props, ...children) => createElement(registry[type] || type, props, ...children);\nconst register = (components) => void assign(registry, components);\n/* MAIN */\nconst html = assign(htm.bind(h), { register });\n/* EXPORT */\nexport default html;\n","/* IMPORT */\nimport useMemo from '../hooks/use_memo.js';\nimport useResolved from '../hooks/use_resolved.js';\nimport useResource from '../hooks/use_resource.js';\nimport creatElement from './create_element.js';\nimport resolve from './resolve.js';\nimport { once } from '../utils/lang.js';\n/* MAIN */\nconst lazy = (fetcher) => {\n    const fetcherOnce = once(fetcher);\n    const component = (props) => {\n        const resource = useResource(fetcherOnce);\n        return useMemo(() => {\n            return useResolved(resource, ({ pending, error, value }) => {\n                if (pending)\n                    return;\n                if (error)\n                    throw error;\n                const component = ('default' in value) ? value.default : value;\n                return resolve(creatElement(component, props));\n            });\n        });\n    };\n    component.preload = () => {\n        return new Promise((resolve, reject) => {\n            const resource = useResource(fetcherOnce);\n            useResolved(resource, ({ pending, error }) => {\n                if (pending)\n                    return;\n                if (error)\n                    return reject(error);\n                return resolve();\n            });\n        });\n    };\n    return component;\n};\n/* EXPORT */\nexport default lazy;\n","/* IMPORT */\nimport { SYMBOL_SUSPENSE_COLLECTOR } from '../constants.js';\nimport useMemo from '../hooks/use_memo.js';\nimport $ from '../methods/S.js';\nimport { context, resolve } from '../oby.js';\n/* MAIN */\n// Keeping track of all Suspense instances below it, needed in some cases\nconst SuspenseCollector = {\n    create: () => {\n        const parent = SuspenseCollector.get();\n        const suspenses = $([]);\n        const active = useMemo(() => suspenses().some(suspense => suspense.active()));\n        const register = (suspense) => { parent?.register(suspense); suspenses(prev => [...prev, suspense]); };\n        const unregister = (suspense) => { parent?.unregister(suspense); suspenses(prev => prev.filter(other => other !== suspense)); };\n        const data = { suspenses, active, register, unregister };\n        return data;\n    },\n    get: () => {\n        return context(SYMBOL_SUSPENSE_COLLECTOR);\n    },\n    wrap: (fn) => {\n        const data = SuspenseCollector.create();\n        return context({ [SYMBOL_SUSPENSE_COLLECTOR]: data }, () => {\n            return resolve(() => fn(data));\n        });\n    }\n};\n/* EXPORT */\nexport default SuspenseCollector;\n","/* IMPORT */\nimport Portal from '../components/portal.js';\nimport SuspenseCollector from '../components/suspense.collector.js';\nimport useEffect from '../hooks/use_effect.js';\nimport useRoot from '../hooks/use_root.js';\nimport $$ from './SS.js';\n/* MAIN */\n//TODO: Implement this properly, without relying on JSDOM or stuff like that\nconst renderToString = (child) => {\n    return new Promise(resolve => {\n        useRoot(dispose => {\n            $$(SuspenseCollector.wrap(suspenses => {\n                const { portal } = Portal({ children: child }).metadata;\n                useEffect(() => {\n                    if (suspenses.active())\n                        return;\n                    resolve(portal.innerHTML);\n                    dispose();\n                }, { suspense: false });\n            }));\n        });\n    });\n};\n/* EXPORT */\nexport default renderToString;\n","/* IMPORT */\nimport { SYMBOL_TEMPLATE_ACCESSOR } from '../constants.js';\nimport wrapElement from './wrap_element.js';\nimport { assign, indexOf, isFunction, isString } from '../utils/lang.js';\nimport { setAttribute, setChildReplacement, setClasses, setEvent, setHTML, setProperty, setRef, setStyles } from '../utils/setters.js';\n/* MAIN */\n//TODO: Avoid using \"Function\" and \"eval\", while still keeping similar performance, if possible\n//TODO: Support complex children in the template function\n//TODO: Support argumentless calls on props, like props.foo.bar()\nconst template = (fn) => {\n    const safePropertyRe = /^[a-z0-9-_]+$/i;\n    const checkValidProperty = (property) => {\n        if (isString(property) && safePropertyRe.test(property))\n            return true;\n        throw new Error(`Invalid property, only alphanumeric properties are allowed inside templates, received: \"${property}\"`);\n    };\n    const makeAccessor = (actionsWithNodes) => {\n        return new Proxy({}, {\n            get(target, prop) {\n                checkValidProperty(prop);\n                const accessor = (node, method, key, targetNode) => {\n                    if (key)\n                        checkValidProperty(key);\n                    actionsWithNodes.push([node, method, prop, key, targetNode]);\n                };\n                const metadata = { [SYMBOL_TEMPLATE_ACCESSOR]: true };\n                return assign(accessor, metadata);\n            }\n        });\n    };\n    const makeActionsWithNodesAndTemplate = () => {\n        const actionsWithNodes = [];\n        const accessor = makeAccessor(actionsWithNodes);\n        const component = fn(accessor);\n        if (isFunction(component)) {\n            const root = component();\n            if (root instanceof Element) {\n                return { actionsWithNodes, root };\n            }\n        }\n        throw new Error('Invalid template, it must return a function that returns an Element');\n    };\n    const makeActionsWithPaths = (actionsWithNodes) => {\n        const actionsWithPaths = [];\n        for (let i = 0, l = actionsWithNodes.length; i < l; i++) {\n            const [node, method, prop, key, targetNode] = actionsWithNodes[i];\n            const nodePath = makeNodePath(node);\n            const targetNodePath = targetNode ? makeNodePath(targetNode) : undefined;\n            actionsWithPaths.push([nodePath, method, prop, key, targetNodePath]);\n        }\n        return actionsWithPaths;\n    };\n    const makeNodePath = (() => {\n        let prevNode = null;\n        let prevPath;\n        return (node) => {\n            if (node === prevNode)\n                return prevPath; // Cache hit\n            const path = [];\n            let child = node;\n            let parent = child.parentNode;\n            while (parent) {\n                const index = !child.previousSibling ? 0 : !child.nextSibling ? -0 : indexOf(parent.childNodes, child);\n                path.push(index);\n                child = parent;\n                parent = parent.parentNode;\n            }\n            prevNode = node;\n            prevPath = path;\n            return path;\n        };\n    })();\n    const makeNodePathProperties = (path) => {\n        const properties = ['root'];\n        const parts = path.slice().reverse();\n        for (let i = 0, l = parts.length; i < l; i++) {\n            const part = parts[i];\n            if (Object.is(0, part)) {\n                properties.push('firstChild');\n            }\n            else if (Object.is(-0, part)) {\n                properties.push('lastChild');\n            }\n            else {\n                properties.push('firstChild');\n                for (let nsi = 0; nsi < part; nsi++) {\n                    properties.push('nextSibling');\n                }\n            }\n        }\n        return properties;\n    };\n    const makeReviverPaths = (actionsWithPaths) => {\n        const paths = [];\n        for (let i = 0, l = actionsWithPaths.length; i < l; i++) {\n            const action = actionsWithPaths[i];\n            const nodePath = action[0];\n            const targetNodePath = action[4];\n            paths.push(nodePath);\n            if (targetNodePath) {\n                paths.push(targetNodePath);\n            }\n        }\n        return paths;\n    };\n    const makeReviverVariablesData = (paths, properties) => {\n        const data = new Array(paths.length);\n        for (let i = 0, l = paths.length; i < l; i++) {\n            data[i] = {\n                path: paths[i],\n                properties: properties[i]\n            };\n        }\n        return data;\n    };\n    const makeReviverVariables = (actionsWithPaths) => {\n        const paths = makeReviverPaths(actionsWithPaths);\n        const properties = paths.map(makeNodePathProperties);\n        const data = makeReviverVariablesData(paths, properties);\n        const assignments = [];\n        const map = new Map();\n        let variableId = 0;\n        while (true) {\n            const datum = data.find(datum => datum.properties.length > 1);\n            if (!datum)\n                break;\n            const [current, next] = datum.properties;\n            const variable = `$${variableId++}`;\n            const assignment = `const ${variable} = ${current}.${next};`;\n            assignments.push(assignment);\n            for (let i = 0, l = data.length; i < l; i++) {\n                const datum = data[i];\n                const [otherCurrent, otherNext] = datum.properties;\n                if (otherCurrent !== current || otherNext !== next)\n                    continue;\n                datum.properties[0] = variable;\n                datum.properties.splice(1, 1);\n            }\n        }\n        for (let i = 0, l = data.length; i < l; i++) {\n            const datum = data[i];\n            map.set(datum.path, datum.properties[0]);\n        }\n        return { assignments, map };\n    };\n    const makeReviverActions = (actionsWithPaths, variables) => {\n        const actions = [];\n        for (let i = 0, l = actionsWithPaths.length; i < l; i++) { //TODO: Write this more cleanly, with a single case\n            const [nodePath, method, prop, key, targetNodePath] = actionsWithPaths[i];\n            if (targetNodePath) {\n                actions.push(`this.${method} ( props[\"${prop}\"], ${variables.get(targetNodePath)} );`);\n            }\n            else if (key) {\n                actions.push(`this.${method} ( ${variables.get(nodePath)}, \"${key}\", props[\"${prop}\"] );`);\n            }\n            else {\n                actions.push(`this.${method} ( ${variables.get(nodePath)}, props[\"${prop}\"] );`);\n            }\n        }\n        return actions;\n    };\n    const makeReviver = (actionsWithPaths) => {\n        const { assignments, map } = makeReviverVariables(actionsWithPaths);\n        const actions = makeReviverActions(actionsWithPaths, map);\n        const fn = new Function('root', 'props', `${assignments.join('')}${actions.join('')}return root;`);\n        const apis = { setAttribute, setChildReplacement, setClasses, setEvent, setHTML, setProperty, setRef, setStyles };\n        const reviver = fn.bind(apis);\n        return reviver;\n    };\n    const makeComponent = () => {\n        const { actionsWithNodes, root } = makeActionsWithNodesAndTemplate();\n        const actionsWithPaths = makeActionsWithPaths(actionsWithNodes);\n        const reviver = makeReviver(actionsWithPaths);\n        return (props) => {\n            const clone = root.cloneNode(true);\n            return wrapElement(reviver.bind(undefined, clone, props));\n        };\n    };\n    return makeComponent();\n};\n/* EXPORT */\nexport default template;\n","/* IMPORT */\nimport { CONTEXTS_DATA } from '../constants.js';\nimport resolve from './resolve.js';\nimport { context } from '../oby.js';\nfunction createContext(defaultValue) {\n    const symbol = Symbol();\n    const Provider = ({ value, children }) => {\n        return context({ [symbol]: value }, () => {\n            return resolve(children);\n        });\n    };\n    const Context = { Provider };\n    CONTEXTS_DATA.set(Context, { symbol, defaultValue });\n    return Context;\n}\n/* EXPORT */\nexport default createContext;\n","/* IMPORT */\nimport createElement from './create_element.js';\nimport { isArray, isObject } from '../utils/lang.js';\nfunction h(component, props, ...children) {\n    if (children.length || (isObject(props) && !isArray(props))) {\n        return createElement(component, props, ...children); //TSC\n    }\n    else {\n        return createElement(component, null, props); //TSC\n    }\n}\n/* EXPORT */\nexport default h;\n","/* IMPORT */\nimport { CONTEXTS_DATA } from '../constants.js';\nimport { context } from '../oby.js';\nimport { isNil } from '../utils/lang.js';\nfunction useContext(Context) {\n    const { symbol, defaultValue } = CONTEXTS_DATA.get(Context) || { symbol: Symbol() };\n    const valueContext = context(symbol);\n    const value = isNil(valueContext) ? defaultValue : valueContext;\n    return value;\n}\n/* EXPORT */\nexport default useContext;\n","import { html, render, $, isObservable } from \"voby\";\n\ncustomElements.define(\n  \"neptune-reactive-root\",\n  class extends HTMLElement {\n    constructor() {\n      super();\n      this.c = () => {};\n    }\n\n    connectedCallback() {\n      this.style.display = \"contents\";\n      this.dispose?.();\n      this.dispose = render(html`${this.c()}`, this);\n    }\n\n    disconnectedCallback() {\n      this.dispose?.();\n    }\n  },\n);\n\nexport function ReactiveRoot({ children }) {\n  const root = html`<neptune-reactive-root></neptune-reactive-root>`();\n  root.c = () => children;\n\n  return root;\n}\n\nexport function Switch(props) {\n  let checked = props.checked ?? false;\n\n  if (!props.onClick) {\n    checked = $(!!checked);\n    props.onClick = () => checked((c) => !c);\n  }\n\n  return html`\n    <div>\n      <input class=\"neptune-switch-checkbox\" type=\"checkbox\" checked=${checked} />\n      <span onClick=${props.onClick} class=\"neptune-switch\"></span>\n    </div>\n  `;\n}\n\nexport function TextInput({ placeholder = \"\", type = \"text\", value = \"\", onEnter = () => {} }) {\n  if (!isObservable(value)) value = $(value);\n\n  return html`\n    <input\n      class=\"neptune-text-input\"\n      value=${value}\n      onKeyup=${(e) => {\n        if (e.key != \"Enter\") return;\n        onEnter(e);\n      }}\n      onInput=${(e) => value(e.target.value)}\n      placeholder=${placeholder}\n      type=${type} />\n  `;\n}\n\nexport function Button({ onClick = () => {}, children }) {\n  return html` <button class=\"neptune-button\" onClick=${onClick}>${children}</button> `;\n}\n\nexport function ReloadIcon() {\n  return html`<svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"22\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    stroke-width=\"1.5\"\n    stroke=\"currentColor\">\n    <path\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n      d=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99\" />\n  </svg>`;\n}\n\nexport function TrashIcon() {\n  return html`<svg\n    style=\"width: 22px;\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    stroke-width=\"1.5\"\n    stroke=\"currentColor\">\n    <path\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n      d=\"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0\"></path>\n  </svg>`;\n}\n","// we use this array multiple times\nexport const patchTypes = [\"a\", \"b\", \"i\"];\nexport const patchedObjects = new Map();\n","import { patchedObjects, patchTypes } from \"./shared.js\";\nexport function unpatch(funcParent, funcName, hookId, type) {\n    const patchedObject = patchedObjects.get(funcParent);\n    const patch = patchedObject?.[funcName];\n    if (!patch?.[type].has(hookId))\n        return false;\n    patch[type].delete(hookId);\n    // If there are no more hooks for every type, remove the patch\n    if (patchTypes.every((t) => patch[t].size === 0)) {\n        // reflect defineproperty is like object defineproperty\n        // but instead of erroring it returns if it worked or not.\n        // this is more easily minifiable, hence its use. -- sink\n        const success = Reflect.defineProperty(funcParent, funcName, {\n            value: patch.o,\n            writable: true,\n            configurable: true,\n        });\n        if (!success)\n            funcParent[funcName] = patch.o;\n        delete patchedObject[funcName];\n    }\n    if (Object.keys(patchedObject).length == 0)\n        patchedObjects.delete(funcParent);\n    return true;\n}\nexport function unpatchAll() {\n    for (const [parentObject, patchedObject] of patchedObjects.entries())\n        for (const funcName in patchedObject)\n            for (const hookType of patchTypes)\n                for (const hookId of patchedObject[funcName]?.[hookType].keys() ?? [])\n                    unpatch(parentObject, funcName, hookId, hookType);\n}\n","// curried - getPatchFunc(\"before\")(...)\n// allows us to apply an argument while leaving the rest open much cleaner.\n// functional programming strikes again! -- sink\nimport hook from \"./hook.js\";\nimport { patchedObjects } from \"./shared.js\";\nimport { unpatch } from \"./unpatch.js\";\n// creates a hook if needed, else just adds one to the patches array\nexport default (patchType) => (funcName, funcParent, callback, oneTime = false) => {\n    if (typeof funcParent[funcName] !== \"function\")\n        throw new Error(`${funcName} is not a function in ${funcParent.constructor.name}`);\n    if (!patchedObjects.has(funcParent))\n        patchedObjects.set(funcParent, {});\n    const parentInjections = patchedObjects.get(funcParent);\n    if (!parentInjections[funcName]) {\n        const origFunc = funcParent[funcName];\n        // note to future me optimising for size: extracting new Map() to a func increases size --sink\n        parentInjections[funcName] = {\n            o: origFunc,\n            b: new Map(),\n            i: new Map(),\n            a: new Map(),\n        };\n        const runHook = (ctxt, args, construct) => {\n            const ret = hook(funcName, funcParent, args, ctxt, construct);\n            if (oneTime)\n                unpatchThisPatch();\n            return ret;\n        };\n        const replaceProxy = new Proxy(origFunc, {\n            apply: (_, ctxt, args) => runHook(ctxt, args, false),\n            construct: (_, args) => runHook(origFunc, args, true),\n            get: (target, prop, receiver) => prop == \"toString\"\n                ? origFunc.toString.bind(origFunc)\n                : Reflect.get(target, prop, receiver),\n        });\n        // this works around breaking some async find implementation which listens for assigns via proxy\n        // see comment in unpatch.ts\n        const success = Reflect.defineProperty(funcParent, funcName, {\n            value: replaceProxy,\n            configurable: true,\n            writable: true,\n        });\n        if (!success)\n            funcParent[funcName] = replaceProxy;\n    }\n    const hookId = Symbol();\n    const unpatchThisPatch = () => unpatch(funcParent, funcName, hookId, patchType);\n    parentInjections[funcName][patchType].set(hookId, callback);\n    return unpatchThisPatch;\n};\n","// calls relevant patches and returns the final result\nimport { patchedObjects } from \"./shared.js\";\nexport default function (funcName, funcParent, funcArgs, \n// the value of `this` to apply\nctxt, \n// if true, the function is actually constructor\nisConstruct) {\n    const patch = patchedObjects.get(funcParent)?.[funcName];\n    // This is in the event that this function is being called after all patches are removed.\n    if (!patch)\n        return isConstruct\n            ? Reflect.construct(funcParent[funcName], funcArgs, ctxt)\n            : funcParent[funcName].apply(ctxt, funcArgs);\n    // Before patches\n    for (const hook of patch.b.values()) {\n        const maybefuncArgs = hook.call(ctxt, funcArgs);\n        if (Array.isArray(maybefuncArgs))\n            funcArgs = maybefuncArgs;\n    }\n    // Instead patches\n    let workingRetVal = [...patch.i.values()].reduce((prev, current) => (...args) => current.call(ctxt, args, prev), \n    // This calls the original function\n    (...args) => isConstruct\n        ? Reflect.construct(patch.o, args, ctxt)\n        : patch.o.apply(ctxt, args))(...funcArgs);\n    // After patches\n    for (const hook of patch.a.values())\n        workingRetVal = hook.call(ctxt, funcArgs, workingRetVal) ?? workingRetVal;\n    return workingRetVal;\n}\n","import getPatchFunc from \"./getPatchFunc.js\";\nimport { unpatchAll } from \"./unpatch.js\";\nconst before = getPatchFunc(\"b\");\nconst instead = getPatchFunc(\"i\");\nconst after = getPatchFunc(\"a\");\nexport { instead, before, after, unpatchAll };\n","function promisifyRequest(request) {\n    return new Promise((resolve, reject) => {\n        // @ts-ignore - file size hacks\n        request.oncomplete = request.onsuccess = () => resolve(request.result);\n        // @ts-ignore - file size hacks\n        request.onabort = request.onerror = () => reject(request.error);\n    });\n}\nfunction createStore(dbName, storeName) {\n    const request = indexedDB.open(dbName);\n    request.onupgradeneeded = () => request.result.createObjectStore(storeName);\n    const dbp = promisifyRequest(request);\n    return (txMode, callback) => dbp.then((db) => callback(db.transaction(storeName, txMode).objectStore(storeName)));\n}\nlet defaultGetStoreFunc;\nfunction defaultGetStore() {\n    if (!defaultGetStoreFunc) {\n        defaultGetStoreFunc = createStore('keyval-store', 'keyval');\n    }\n    return defaultGetStoreFunc;\n}\n/**\n * Get a value by its key.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction get(key, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => promisifyRequest(store.get(key)));\n}\n/**\n * Set a value with a key.\n *\n * @param key\n * @param value\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction set(key, value, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.put(value, key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Set multiple values at once. This is faster than calling set() multiple times.\n * It's also atomic – if one of the pairs can't be added, none will be added.\n *\n * @param entries Array of entries, where each entry is an array of `[key, value]`.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction setMany(entries, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        entries.forEach((entry) => store.put(entry[1], entry[0]));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Get multiple values by their keys\n *\n * @param keys\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction getMany(keys, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => Promise.all(keys.map((key) => promisifyRequest(store.get(key)))));\n}\n/**\n * Update a value. This lets you see the old value and update it as an atomic operation.\n *\n * @param key\n * @param updater A callback that takes the old value and returns a new value.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction update(key, updater, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => \n    // Need to create the promise manually.\n    // If I try to chain promises, the transaction closes in browsers\n    // that use a promise polyfill (IE10/11).\n    new Promise((resolve, reject) => {\n        store.get(key).onsuccess = function () {\n            try {\n                store.put(updater(this.result), key);\n                resolve(promisifyRequest(store.transaction));\n            }\n            catch (err) {\n                reject(err);\n            }\n        };\n    }));\n}\n/**\n * Delete a particular key from the store.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction del(key, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.delete(key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Delete multiple keys at once.\n *\n * @param keys List of keys to delete.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction delMany(keys, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        keys.forEach((key) => store.delete(key));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Clear all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction clear(customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.clear();\n        return promisifyRequest(store.transaction);\n    });\n}\nfunction eachCursor(store, callback) {\n    store.openCursor().onsuccess = function () {\n        if (!this.result)\n            return;\n        callback(this.result);\n        this.result.continue();\n    };\n    return promisifyRequest(store.transaction);\n}\n/**\n * Get all keys in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction keys(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAllKeys) {\n            return promisifyRequest(store.getAllKeys());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.key)).then(() => items);\n    });\n}\n/**\n * Get all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction values(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAll) {\n            return promisifyRequest(store.getAll());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.value)).then(() => items);\n    });\n}\n/**\n * Get all entries in the store. Each entry is an array of `[key, value]`.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction entries(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        // (although, hopefully we'll get a simpler path some day)\n        if (store.getAll && store.getAllKeys) {\n            return Promise.all([\n                promisifyRequest(store.getAllKeys()),\n                promisifyRequest(store.getAll()),\n            ]).then(([keys, values]) => keys.map((key, i) => [key, values[i]]));\n        }\n        const items = [];\n        return customStore('readonly', (store) => eachCursor(store, (cursor) => items.push([cursor.key, cursor.value])).then(() => items));\n    });\n}\n\nexport { clear, createStore, del, delMany, entries, get, getMany, keys, promisifyRequest, set, setMany, update, values };\n","import { createStore as createIdbStore, set as idbSet, get as idbGet } from \"idb-keyval\";\nimport { store } from \"voby\";\n\nexport function appendStyle(style) {\n  const styleTag = document.createElement(\"style\");\n  styleTag.innerHTML = style;\n\n  // Forgive me, for I have sinned.\n  if (document.head) {\n    document.head.appendChild(styleTag);\n  } else {\n    document.addEventListener(\"DOMContentLoaded\", () => {\n      document.head.appendChild(styleTag);\n    })\n  }\n\n  return (newStyle) => {\n    if (newStyle == undefined) return document.head.removeChild(styleTag);\n\n    styleTag.innerHTML = newStyle;\n  };\n}\n\nexport const neptuneIdbStore = createIdbStore(\"__NEPTUNE_IDB_STORAGE\", \"__NEPTUNE_IDB_STORAGE\");\n\n// store.on appears to not work upon isArray being true. This makes me a very sad toonlink.\nexport function createPersistentObject(id, isArray = false) {\n  // This is fucking moronic. But fine, we'll do this dumb shit just for you.\n  const persistentObject = store(isArray ? { value: [] } : {});\n\n  store.on(persistentObject, () => {\n    idbSet(id, store.unwrap(persistentObject), neptuneIdbStore);\n  });\n\n  return [\n    isArray ? persistentObject.value : persistentObject,\n    new Promise((res) =>\n      idbGet(id, neptuneIdbStore).then((obj) => {\n        store.reconcile(persistentObject, obj ?? (isArray ? { value: [] } : {}));\n        res();\n      }),\n    ),\n  ];\n}\n\nexport const parseManifest = (manifest) => {\n  try {\n    if (typeof manifest == \"string\")\n      manifest = JSON.parse(manifest.slice(manifest.indexOf(\"/*\") + 2, manifest.indexOf(\"*/\")));\n  } catch {\n    throw \"Failed to parse manifest!\";\n  }\n\n  if (![\"name\", \"author\", \"description\"].every((i) => typeof manifest[i] === \"string\"))\n    throw \"Manifest doesn't contain required properties!\";\n\n  return manifest;\n};\n\nexport const getMediaURLFromID = (id, path = \"/1280x1280.jpg\") =>\n  \"https://resources.tidal.com/images/\" + id.split(\"-\").join(\"/\") + path;\n\n\nexport function convertHexToRGB(h) {\n  let r = 0;\n  let g = 0;\n  let b = 0;\n\n  // 3 digits\n  if (h.length === 4) {\n    r = Number('0x' + h[1] + h[1]);\n    g = Number('0x' + h[2] + h[2]);\n    b = Number('0x' + h[3] + h[3]);\n\n    // 6 digits\n  } else if (h.length === 7) {\n    r = Number('0x' + h[1] + h[2]);\n    g = Number('0x' + h[3] + h[4]);\n    b = Number('0x' + h[5] + h[6]);\n  }\n\n  return `${r}, ${g}, ${b}`\n}\n","/* es-module-lexer 1.3.0 */\nconst A=1===new Uint8Array(new Uint16Array([1]).buffer)[0];export function parse(E,g=\"@\"){if(!C)return init.then((()=>parse(E)));const I=E.length+1,o=(C.__heap_base.value||C.__heap_base)+4*I-C.memory.buffer.byteLength;o>0&&C.memory.grow(Math.ceil(o/65536));const D=C.sa(I-1);if((A?B:Q)(E,new Uint16Array(C.memory.buffer,D,I)),!C.parse())throw Object.assign(new Error(`Parse error ${g}:${E.slice(0,C.e()).split(\"\\n\").length}:${C.e()-E.lastIndexOf(\"\\n\",C.e()-1)}`),{idx:C.e()});const K=[],k=[];for(;C.ri();){const A=C.is(),Q=C.ie(),B=C.ai(),g=C.id(),I=C.ss(),o=C.se();let D;C.ip()&&(D=J(E.slice(-1===g?A-1:A,-1===g?Q+1:Q))),K.push({n:D,s:A,e:Q,ss:I,se:o,d:g,a:B})}for(;C.re();){const A=C.es(),Q=C.ee(),B=C.els(),g=C.ele(),I=E.slice(A,Q),o=I[0],D=B<0?void 0:E.slice(B,g),K=D?D[0]:\"\";k.push({s:A,e:Q,ls:B,le:g,n:'\"'===o||\"'\"===o?J(I):I,ln:'\"'===K||\"'\"===K?J(D):D})}function J(A){try{return(0,eval)(A)}catch(A){}}return[K,k,!!C.f()]}function Q(A,Q){const B=A.length;let C=0;for(;C<B;){const B=A.charCodeAt(C);Q[C++]=(255&B)<<8|B>>>8}}function B(A,Q){const B=A.length;let C=0;for(;C<B;)Q[C]=A.charCodeAt(C++)}let C;export const init=WebAssembly.compile((E=\"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9wBGDQFBACgCoAohAQwCC0EAKAKgCiIBQQJqQbAIQQoQLQ0BQQYhAAwCC0EAKAKgCiIBLwECQekARw0AIAEvAQRB9ABHDQBBBCEAIAEvAQZB6ABGDQELQQAgAUF+ajYCoAoPC0EAIAEgAEEBdGo2AqAKAkBBARAnQfsARg0AQQAgATYCoAoPC0EAKAKgCiICIQADQEEAIABBAmo2AqAKAkACQAJAQQEQJyIAQSJGDQAgAEEnRw0BQScQGEEAQQAoAqAKQQJqNgKgCkEBECchAAwCC0EiEBhBAEEAKAKgCkECajYCoApBARAnIQAMAQsgABAqIQALAkAgAEE6Rg0AQQAgATYCoAoPC0EAQQAoAqAKQQJqNgKgCgJAQQEQJyIAQSJGDQAgAEEnRg0AQQAgATYCoAoPCyAAEBhBAEEAKAKgCkECajYCoAoCQAJAQQEQJyIAQSxGDQAgAEH9AEYNAUEAIAE2AqAKDwtBAEEAKAKgCkECajYCoApBARAnQf0ARg0AQQAoAqAKIQAMAQsLQQAoAuQJIgEgAjYCECABQQAoAqAKQQJqNgIMC20BAn8CQAJAA0ACQCAAQf//A3EiAUF3aiICQRdLDQBBASACdEGfgIAEcQ0CCyABQaABRg0BIAAhAiABECYNAkEAIQJBAEEAKAKgCiIAQQJqNgKgCiAALwECIgANAAwCCwsgACECCyACQf//A3ELqwEBBH8CQAJAQQAoAqAKIgIvAQAiA0HhAEYNACABIQQgACEFDAELQQAgAkEEajYCoApBARAnIQJBACgCoAohBQJAAkAgAkEiRg0AIAJBJ0YNACACECoaQQAoAqAKIQQMAQsgAhAYQQBBACgCoApBAmoiBDYCoAoLQQEQJyEDQQAoAqAKIQILAkAgAiAFRg0AIAUgBEEAIAAgACABRiICG0EAIAEgAhsQAgsgAwtyAQR/QQAoAqAKIQBBACgCpAohAQJAAkADQCAAQQJqIQIgACABTw0BAkACQCACLwEAIgNBpH9qDgIBBAALIAIhACADQXZqDgQCAQECAQsgAEEEaiEADAALC0EAIAI2AqAKECJBAA8LQQAgAjYCoApB3QALSQEDf0EAIQMCQCACRQ0AAkADQCAALQAAIgQgAS0AACIFRw0BIAFBAWohASAAQQFqIQAgAkF/aiICDQAMAgsLIAQgBWshAwsgAwsL4gECAEGACAvEAQAAeABwAG8AcgB0AG0AcABvAHIAdABlAHQAYQByAG8AbQB1AG4AYwB0AGkAbwBuAHMAcwBlAHIAdAB2AG8AeQBpAGUAZABlAGwAZQBjAG8AbgB0AGkAbgBpAG4AcwB0AGEAbgB0AHkAYgByAGUAYQByAGUAdAB1AHIAZABlAGIAdQBnAGcAZQBhAHcAYQBpAHQAaAByAHcAaABpAGwAZQBmAG8AcgBpAGYAYwBhAHQAYwBmAGkAbgBhAGwAbABlAGwAcwAAQcQJCxABAAAAAgAAAAAEAAAwOQAA\",\"undefined\"!=typeof Buffer?Buffer.from(E,\"base64\"):Uint8Array.from(atob(E),(A=>A.charCodeAt(0))))).then(WebAssembly.instantiate).then((({exports:A})=>{C=A}));var E;","import { parse } from \"es-module-lexer\";\n\n// This needs support for 3 things to be \"complete\":\n// 1. `import \"./module.js\"`\n// 2. `await import(\"module\")`\n// 3. `export * from \"module\"`\n// For now, it's fine.\n\nasync function betterParse(src) {\n  let [imports] = await parse(src);\n  let exports = [];\n\n  imports = imports.filter((imp) => {\n    imp.declaration = src\n      .slice(imp.ss, imp.se)\n      .replace(/\\/\\*[\\w\\W]*?\\*\\//g, \"\");\n    imp.importClause = imp.declaration\n      .slice(6, imp.declaration.lastIndexOf(\"from\"))\n      .trim();\n\n    const namedImportOpener = imp.importClause.indexOf(\"{\");\n    const namedImportCloser = imp.importClause.indexOf(\"}\") + 1;\n\n    imp.namedImport = imp.importClause.slice(\n      namedImportOpener,\n      namedImportCloser\n    );\n\n    if (imp.namedImport != \"\") {\n      imp.importClause =\n        imp.importClause.slice(0, namedImportOpener) +\n        imp.importClause.slice(namedImportCloser);\n\n      imp.namedImports = imp.namedImport\n        .slice(1, -1)\n        .trim()\n        .split(\",\")\n        .filter((i) => i.trim() != \"\")\n        .map((i) => {\n          const split = i.trim().split(\" as \");\n\n          if (!split[1]) split[1] = split[0];\n          return split;\n        })\n        .reduce((obj, c) => {\n          obj[c[0]] = c[1];\n\n          return obj;\n        }, {});\n    }\n\n    const commaIndex = imp.importClause.indexOf(\",\");\n\n    if (imp.namedImport == \"\") {\n      const namespace =\n        commaIndex == -1\n          ? imp.importClause\n          : imp.importClause.slice(commaIndex + 1).trim();\n\n      if (namespace[0] == \"*\")\n        imp.namespace = namespace.slice(namespace.indexOf(\"as\") + 2).trim();\n    }\n\n    // If there's no named imports and there's no namespaces, the default export *is* the importClause\n    if (imp.namedImport == \"\" && !imp.namespace) {\n      imp.default = imp.importClause;\n    } else if (commaIndex != -1) {\n      // Otherwise, the default export *must* come before the comma\n      imp.default = imp.importClause.slice(0, commaIndex);\n    }\n\n    if (imp.declaration.slice(0, 6) == \"import\") return true;\n\n    imp.isExport = true;\n    exports.push(imp);\n  });\n\n  return [imports, exports];\n}\n\nconst destructurifyImp = (obj) =>\n  Object.entries(obj)\n    .map(([k, v]) => `${k}:${v}`)\n    .join();\n\nconst removeFromString = (string, start, end) =>\n  string.slice(0, start) + string.slice(end);\n\nconst insertIntoString = (string, start, newString) =>\n  string.slice(0, start) + newString + string.slice(start);\n\nexport default async function quartz(\n  code,\n  config = { plugins: [] },\n  moduleId = false\n) {\n  let generatedImports = \"\";\n\n  for (const plugin of config.plugins)\n    if (plugin.transform) code = plugin.transform({ code });\n\n  const [imports, exports] = await betterParse(code);\n\n  // I don't want to have to parse any of this shit more than once.\n  let offset = 0;\n\n  for (const exp of exports) {\n    imports.push(exp);\n\n    const startIndex = exp.ss + offset;\n    const endIndex = exp.se + offset;\n\n    const namespace = exp.namespace;\n    if (namespace != undefined) {\n      // Because of how `export * from \"module\"` works, we can't dynamically export things.\n      // My proposal is that we have a $$$QUARTZ_DYNAMIC_EXPORTS object passed through,\n      // we add a randomly generated namespace, and then we convert the export into reassigning $$$QUARTZ_DYNAMIC_EXPORTS.\n      // We then spread the exports and the dynamic exports together and return that as the exports.\n\n      if (namespace != \"\") {\n        code = removeFromString(code, startIndex, endIndex);\n        const newExport = `export { ${namespace} };`;\n        code = insertIntoString(code, startIndex, newExport);\n\n        offset -= endIndex - startIndex + newExport.length;\n      }\n\n      continue;\n    }\n\n    const fromIndex =\n      startIndex + code.slice(startIndex, endIndex).lastIndexOf(\"from\");\n    code = removeFromString(code, fromIndex, endIndex);\n    offset -= endIndex - fromIndex;\n  }\n\n  let quartzStore = {};\n\n  for (const imp of imports) {\n    if (!imp.isExport) {\n      code = removeFromString(code, imp.ss + offset, imp.se + offset);\n\n      offset -= imp.se + offset - (imp.ss + offset);\n    }\n\n    let id = (Math.random() + 1).toString(36).substring(7);\n\n    let store = (quartzStore[id] = {});\n    let accessor = `$$$QUARTZ_STORE[\"${id}\"]`;\n\n    for (const plugin of config.plugins) {\n      if (!plugin.resolve) continue;\n\n      const generatedImport = await plugin.resolve({\n        config,\n        accessor,\n        store,\n        name: imp.n,\n        moduleId,\n      });\n\n      if (!generatedImport) continue;\n\n      const addImport = (name) =>\n        (generatedImports += `const ${name} = ${generatedImport};`);\n\n      if (imp.default) addImport(`{default:${imp.default}}`);\n      if (imp.namespace) addImport(imp.namespace);\n      if (imp.namedImports) {\n        addImport(\"{\" + destructurifyImp(imp.namedImports) + \"}\");\n      }\n\n      break;\n    }\n  }\n\n  // This appears to be the only way to share things between realms.\n  const globalStoreID = (Math.random() + 1).toString(36).substring(7);\n  globalThis[globalStoreID] = quartzStore;\n\n  // console.log(generatedImports + code)\n\n  const mod = await import(\n    `data:text/javascript;base64,${btoa(\n      `const $$$QUARTZ_STORE = globalThis[\"${globalStoreID}\"];` +\n        generatedImports +\n        code\n    )}`\n  );\n  delete globalThis[globalStoreID];\n\n  return mod;\n}\n","export default ({baseUrl = \"https://esm.sh/\", existingUrls = true} = {}) => {\n  return {\n    resolve({ name }) {\n      if (name.startsWith(\".\") || name.startsWith(\"/\")) return; // local url\n\n      // npm package\n      if (!/^\\w+:/.test(name) && baseUrl) {\n        name = baseUrl + name;\n      }\n      else if (!existingUrls) return;\n\n      return `await import(\"${name}\")`;\n    },\n  };\n};\n","export const interceptors = {};\n\nexport default function intercept(types, cb, once = false) {\n  if (typeof types == \"string\") types = [types];\n\n  const uninterceptors = [];\n  const unintercept = () => uninterceptors.forEach((u) => u());\n\n  for (let type of types) {\n    if (!interceptors[type]) interceptors[type] = [];\n\n    const handleIntercept = once\n      ? (...args) => {\n          unintercept();\n\n          return cb(...args);\n        }\n      : cb;\n    interceptors[type].push(handleIntercept);\n\n    uninterceptors.push(() =>\n      interceptors[type].splice(interceptors[type].indexOf(handleIntercept), 1),\n    );\n  }\n\n  return unintercept;\n}\n","import { store } from \"voby\";\nimport { createPersistentObject, neptuneIdbStore, parseManifest } from \"./utils.js\";\nimport { del } from \"idb-keyval\";\nimport quartz from \"@uwu/quartz\";\nimport urlImport from \"quartz-plugin-url-import\";\nimport { actions } from \"../handleExfiltrations.js\";\nimport intercept from \"./intercept.js\";\n\nexport const [pluginStore, pluginStoreReady] = createPersistentObject(\"NEW_NEPTUNE_PLUGINS\", true);\nexport const enabled = store({});\n\nexport const getPluginById = (id) => pluginStore.find((p) => p.id == id);\n\nexport async function disablePlugin(id) {\n  getPluginById(id).enabled = false;\n  const onUnload = enabled?.[id]?.onUnload;\n\n  delete enabled[id];\n\n  try {\n    await onUnload?.();\n  } catch (e) {\n    console.error(\"Failed to completely clean up neptune plugin!\\n\", e);\n  }\n}\n\nexport function togglePlugin(id) {\n  return getPluginById(id).enabled ? disablePlugin(id) : enablePlugin(id);\n}\n\nexport async function enablePlugin(id) {\n  const plugin = getPluginById(id);\n  plugin.enabled = true;\n\n  await runPlugin(plugin);\n}\n\nasync function runPlugin(plugin) {\n  try {\n    const [persistentStorage, persistentStorageReady] = createPersistentObject(\n      plugin.id + \"_PERSISTENT_STORAGE\",\n    );\n\n    await persistentStorageReady;\n\n    const unloadables = [];\n    const pluginData = {\n      id: plugin.id,\n      manifest: plugin.manifest,\n      storage: persistentStorage,\n      addUnloadable(callback) {\n        unloadables.push(callback);\n      },\n    };\n\n    const { onUnload, Settings } = await quartz(plugin.code, {\n      plugins: [\n        {\n          resolve({ name }) {\n            if (!name.startsWith(\"@neptune\")) return;\n\n            return `window${name\n              .slice(1)\n              .split(\"/\")\n              .map((i) => `[${JSON.stringify(i)}]`)\n              .join(\"\")}`;\n          },\n        },\n        {\n          resolve({ name, store, accessor }) {\n            if (!name.startsWith(\"@plugin\")) return;\n\n            if (!store.plugin) store.plugin = { ...pluginData, default: pluginData };\n\n            return `${accessor}${name\n              .slice(1)\n              .split(\"/\")\n              .map((i) => `[${JSON.stringify(i)}]`)\n              .join(\"\")}`;\n          },\n        },\n        urlImport(),\n      ],\n    });\n\n    enabled[plugin.id] = {\n      onUnload: () => {\n        onUnload?.();\n        for (const ul of unloadables) {\n          ul();\n        }\n      },\n    };\n    if (Settings) enabled[plugin.id].Settings = Settings;\n  } catch (e) {\n    await disablePlugin(plugin.id);\n\n    console.error(\"Failed to load neptune plugin!\\n\", e);\n  }\n}\n\nexport async function installPlugin(id, code, manifest, enabled = true) {\n  const plugin = {\n    id,\n    code,\n    manifest,\n    enabled,\n  };\n\n  pluginStore.unshift(plugin);\n\n  if (enabled) await runPlugin(plugin);\n}\n\nexport async function removePlugin(id) {\n  try {\n    if (enabled[id]) await enabled[id].onUnload();\n  } catch {\n    console.log(\"[neptune] failed to unload plugin upon removal\");\n  }\n\n  pluginStore.splice(\n    pluginStore.findIndex((p) => p.id == id),\n    1,\n  );\n\n  await del(id + \"_PERSISTENT_STORAGE\", neptuneIdbStore);\n}\n\n// This handles caching too!\nexport async function fetchPluginFromURL(url) {\n  let parsedURL = url;\n\n  if (!parsedURL.endsWith(\"/\")) parsedURL += \"/\";\n\n  const manifest = parseManifest(\n    await (await fetch(parsedURL + \"manifest.json\", { cache: \"no-store\" })).json(),\n  );\n\n  const plugin = getPluginById(url);\n  let code = plugin?.code;\n\n  if (plugin?.manifest?.hash != manifest.hash)\n    code = await (\n      await fetch(parsedURL + (manifest.main ?? \"index.js\"), { cache: \"no-store\" })\n    ).text();\n\n  return [\n    code,\n    {\n      name: manifest.name,\n      author: manifest.author,\n      description: manifest.description,\n      hash: manifest.hash,\n    },\n  ];\n}\n\nexport async function reloadPlugin(plugin) {\n  let pluginWasEnabled = plugin.enabled;\n\n  if (pluginWasEnabled) disablePlugin(plugin.id);\n\n  if (plugin.hasOwnProperty(\"update\")) {\n    try {\n      const [code, manifest] = await fetchPluginFromURL(plugin.id);\n\n      plugin.manifest = manifest;\n      plugin.code = code;\n    } catch {}\n  }\n\n  if (pluginWasEnabled) enablePlugin(plugin.id);\n}\n\nexport async function installPluginFromURL(url, enabled = true) {\n  if (getPluginById(url))\n    return actions.message.messageError({ message: \"Plugin is already imported!\" });\n\n  try {\n    const [code, manifest] = await fetchPluginFromURL(url);\n\n    const plugin = {\n      id: url,\n      code,\n      manifest,\n      enabled,\n      update: true,\n    };\n\n    pluginStore.unshift(plugin);\n\n    if (enabled) runPlugin(plugin);\n  } catch {\n    actions.message.messageError({ message: \"Failed to import neptune plugin!\" });\n  }\n}\n\n// Cleanup plugins on reload\naddEventListener(\"beforeunload\", () => {\n  Object.values(enabled).forEach(p => p.onUnload());\n});\n\n// Load as early as we possibly can.\nintercept(\n  \"session/RECEIVED_COUNTRY_CODE\",\n  async () => {\n    // We don't attempt to load plugins if CSP exists because loading every plugin will fail and automatically disable the plugin.\n    if (document.querySelector(`[http-equiv=\"Content-Security-Policy\"]`) || window.require) return;\n\n    for (const plugin of pluginStore) {\n      if (plugin.update) {\n        try {\n          const [code, manifest] = await fetchPluginFromURL(plugin.id);\n\n          plugin.manifest = manifest;\n          plugin.code = code;\n        } catch {\n          console.log(\"[neptune] failed to update plugin\");\n        }\n      }\n\n      // We do not currently account for plugin updates, but this will be handled once\n      // remote plugin installation is handled.\n      if (plugin.enabled) runPlugin(plugin);\n    }\n  },\n  true,\n);\n","import { store } from \"voby\";\nimport { appendStyle, createPersistentObject, parseManifest } from \"./utils.js\";\n\nexport const [themesStore, themesStoreReady] = createPersistentObject(\"NEPTUNE_THEMES\", true);\n\nlet updateThemeStyle = appendStyle(\"\");\n\n// Not sure why this didn't work previously?\nstore.on(themesStore, reloadThemes)\n\nfunction reloadThemes() {\n  updateThemeStyle(themesStore.filter(t => t.enabled).map((t) => `@import url(\"${t.url}\")`).join(\";\"));\n}\n\nexport function removeTheme(url) {\n  themesStore.splice(\n    themesStore.findIndex((t) => t.url == url),\n    1,\n  );\n}\n\nexport function toggleTheme(url) {\n  const theme = themesStore.find((t) => t.url == url);\n  theme.enabled = !theme.enabled;\n}\n\nexport async function importTheme(url, enabled = true) {\n  let manifest;\n\n  try {\n    manifest = parseManifest(await (await fetch(url)).text());\n  } catch {\n    throw \"Failed to parse theme manifest!\";\n  }\n\n  if (![\"name\", \"author\", \"description\"].every((i) => typeof manifest[i] === \"string\"))\n    throw \"Manifest doesn't contain required properties!\";\n\n  const { name, author, description } = manifest;\n\n  themesStore.unshift({\n    name,\n    author,\n    description,\n    enabled,\n    url,\n  });\n}\n","// code source: https://github.com/KaiHax/kaihax/blob/master/src/patcher.ts\n\nconst observations = new Set();\nconst observer = new MutationObserver((records) => {\n  // de-dupe to be sure\n  const changedElems = new Set();\n\n  for (const record of records) {\n    changedElems.add(record.target);\n\n    for (const e of record.removedNodes)\n      if (e instanceof HTMLElement || e instanceof SVGElement) changedElems.add(e);\n  }\n\n  for (const elem of changedElems)\n    for (const obs of observations) {\n      if (elem.matches(obs[0])) obs[1](elem);\n\n      elem\n        .querySelectorAll(obs[0])\n        .forEach(\n          (e) => !obs[2] && (e instanceof HTMLElement || e instanceof SVGElement) && obs[1](e),\n        );\n    }\n});\n\nconst startObserving = () =>\n  observer.observe(document.body, {\n    subtree: true,\n    childList: true,\n    attributes: true,\n  });\n\nconst stopObserving = () => observer.disconnect();\n\nexport function observe(sel, cb) {\n  if (observations.size === 0) startObserving();\n  const entry = [sel, cb, false];\n  observations.add(entry);\n\n  const unobs = () => {\n    observations.delete(entry);\n    if (observations.size === 0) stopObserving();\n  };\n\n  unobs.now = () => {\n    entry[2] = true;\n    unobs();\n  };\n\n  return unobs;\n}\nexport function unobserve() {\n  observations.clear();\n  stopObserving();\n}\n","import { ReactiveRoot } from \"../ui/components.js\";\nimport intercept from \"./intercept.js\";\nimport { observe } from \"./observe.js\";\n\nconst pageNotFoundSelector = `[class^=\"contentArea--\"] [class^=\"pageNotFoundError--\"]`;\n\nconst replacePage = (page, component) => {\n  page.style.display = \"none\";\n\n  const neptunePage = document.createElement(\"div\");\n  neptunePage.className = \"__NEPTUNE_PAGE\";\n\n  page.insertAdjacentElement(\"afterend\", neptunePage);\n  neptunePage.appendChild(ReactiveRoot({ children: component }));\n};\n\nintercept(\"ROUTER_LOCATION_CHANGED\", () => {\n  for (const page of document.getElementsByClassName(\"__NEPTUNE_PAGE\"))\n    page.parentElement.removeChild(page);\n});\n\nexport default function registerRoute(path, component) {\n  return intercept(\"ROUTER_LOCATION_CHANGED\", ([payload]) => {\n    if (payload.pathname != `/neptune/${path}`) return;\n\n    const pageNotFound = document.querySelector(pageNotFoundSelector);\n    if (pageNotFound) return replacePage(pageNotFound, component);\n\n    const unob = observe(pageNotFoundSelector, (page) => {\n      unob.now();\n      replacePage(page, component);\n    });\n  });\n}\n","import registerRoute from \"./registerRoute.js\";\nimport intercept from \"./intercept.js\";\nimport { actions } from \"../handleExfiltrations.js\";\nfunction makeInactive(tab) {\n  tab.classList.remove(Array.from(tab.classList).find((c) => c.startsWith(\"activeItem--\")));\n}\n\nconst getTabs = () => document.querySelector(`.sidebarWrapper section[class^=\"section--\"]`);\n\n// Automatically set tab to unchecked.\nintercept(\"ROUTER_LOCATION_CHANGED\", () => {\n  for (const tab of document.getElementsByClassName(\"__NEPTUNE_TAB\")) tab.style.color = \"\";\n});\n\n/*\n  This entire function abuses their router's 404 handling to insert our own tabs.\n  Because 404s count towards router history, our tabs function perfectly fine even when using the back arrows!\n*/\nexport default function registerTab(name, path, component = () => {}) {\n  const unobservers = [];\n\n  const addTab = (tabs) => {\n    const tab = tabs.children[0].cloneNode(true);\n    makeInactive(tab);\n\n    tab.querySelector(`[class^=\"responsiveText--\"]`).textContent = name;\n\n    tab.classList.add(\"__NEPTUNE_TAB\");\n\n    tab.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n\n      actions.router.push({\n        pathname: `/neptune/${path}`,\n        replace: true,\n      });\n    });\n\n    const removeRouteHandler = registerRoute(path, () => {\n      tab.style.color = \"var(--wave-color-solid-accent-fill)\";\n\n      return component;\n    });\n\n    tabs.appendChild(tab);\n    unobservers.push(removeRouteHandler, () => tabs.removeChild(tab));\n  };\n\n  const tabs = getTabs();\n\n  if (!tabs) {\n    // Instead of DOM observing we just intercept the first action that gets called after the UI shows. Maybe we can DOM observe later?\n    unobservers.push(\n      intercept(\n        \"favorites/SET_FAVORITE_IDS\",\n        () => {\n          addTab(getTabs());\n        },\n        true,\n      ),\n    );\n  } else addTab(tabs);\n\n  return () => unobservers.forEach((u) => u());\n}\n","import intercept from \"./intercept.js\";\nimport { observe } from \"./observe.js\";\n\nexport default function hookContextMenu(menuType, name, handler) {\n  return intercept(\"contextMenu/OPEN\", ([payload]) => {\n    // TODO: Change this to a switch statement.\n\n    if (payload?.type != menuType) return;\n\n    const unob = observe(`[data-type=\"contextmenu-item\"]`, (elem) => {\n      unob.now();\n\n      const contextMenuItem = elem.cloneNode(true);\n      const contextMenuLabel = contextMenuItem.querySelector(`[class^=\"actionTextInner--\"]`);\n      contextMenuLabel.innerText = name;\n\n      const parentClasses = contextMenuLabel.parentElement.classList;\n\n      contextMenuItem.innerHTML = \"\";\n\n      const contextMenuWrapper = document.createElement(\"div\");\n      contextMenuWrapper.setAttribute(\"tabindex\", \"0\");\n      contextMenuWrapper.classList.add(...parentClasses);\n      contextMenuWrapper.appendChild(contextMenuLabel);\n\n      contextMenuItem.addEventListener(\"keyup\", (event) => {\n        if (event.keyCode != 13) return;\n\n        event.target.click();\n      });\n\n      contextMenuItem.appendChild(contextMenuWrapper);\n\n      contextMenuItem.addEventListener(\"click\", (event) => {\n        handler(event);\n      });\n\n      elem.parentElement.appendChild(contextMenuItem);\n    });\n  });\n}\n","import { ReactiveRoot } from \"../ui/components.js\";\nimport { actions } from \"../handleExfiltrations.js\";\nimport { observe } from \"./observe.js\";\n\nexport default function showModal(name, component) {\n  actions.modal.showReleaseNotes();\n  const unob = observe(`[class^=\"modalHeader--\"]`, (header) => {\n    unob.now();\n\n    header.getElementsByTagName(\"h4\")[0].innerText = name;\n\n    header.nextSibling.replaceChildren(\n      ReactiveRoot({\n        children: component,\n      }),\n    );\n  });\n}\n","import * as voby from \"voby\";\nimport * as patcher from \"spitroast\";\nimport * as utils from \"./api/utils.js\";\nimport * as plugins from \"./api/plugins.js\";\nimport * as themes from \"./api/themes.js\";\nimport * as components from \"./ui/components.js\";\nimport intercept from \"./api/intercept.js\";\nimport { observe } from \"./api/observe.js\";\nimport registerTab from \"./api/registerTab.js\";\nimport registerRoute from \"./api/registerRoute.js\";\nimport hookContextMenu from \"./api/hookContextMenu.js\";\nimport showModal from \"./api/showModal.js\";\n// TODO: AWFUL VOMIT VOMIT KILL MURDER DIE KILL KILL DIE MURDER VOMIT\nimport { store } from \"./handleExfiltrations.js\";\n\nlet currentMediaItem = {};\n\ntry {\n  const vibrantColorStyle = utils.appendStyle(\"\");\n\n  intercept(\"playbackControls/MEDIA_PRODUCT_TRANSITION\", ([{ mediaProduct }]) => {\n    Object.assign(\n      currentMediaItem,\n      store.getState().content.mediaItems[mediaProduct.productId],\n    );\n    const vibrantColor = currentMediaItem?.item?.album?.vibrantColor;\n\n    if (!vibrantColor) return;\n\n    vibrantColorStyle(`:root{--track-vibrant-color:${vibrantColor};--track-vibrant-color-rgb:${utils.convertHexToRGB(vibrantColor)}}`);\n  });\n} catch {}\n\nexport default {\n  patcher,\n  utils,\n  intercept,\n  observe,\n  registerTab,\n  registerRoute,\n  hookContextMenu,\n  showModal,\n  voby,\n  plugins,\n  themes,\n  components,\n  currentMediaItem,\n};\n","import windowObject from \"./windowObject.js\";\nimport * as patcher from \"spitroast\";\nimport { interceptors } from \"./api/intercept.js\";\nimport loadStyles from \"./styles.js\";\n\n// abandon all hope, ye who enter here\n\n/*\n  This code runs before webpackChunk_tidal_web is defined.\n  Upon it being assigned to, we patch push to intercept webpackRequire and exfiltrate modules.\n  The upcoming comments will explain each step of the process.\n*/\n\n// Variables used for hooking into webpack.\nlet webpackObject;\n\n// Exfiltrations gained from hooking into webpack.\nlet patchedPrepareAction = false;\nlet exfiltratedStore;\n\n// Main store exfiltration\nexport let store;\n\n// Built action handlers\nexport const actions = {};\nwindowObject.actions = actions;\n\nconst getModulesFromWpRequire = (wpRequire) =>\n  Object.fromEntries(\n    Object.entries(wpRequire.m).map(([k]) => [k, { id: k, loaded: true, exports: wpRequire(k) }]),\n  );\n\nObject.defineProperty(window, \"webpackChunk_tidal_web\", {\n  get: () => webpackObject,\n  set(val) {\n    if (webpackObject) return true;\n\n    loadStyles();\n\n    webpackObject = val;\n\n    const originalPush = webpackObject.push;\n    let newPush;\n    Object.defineProperty(webpackObject, \"push\", {\n      set(v) {\n        if (!newPush) newPush = v;\n      },\n      get: () =>\n        newPush\n          ? function () {\n              try {\n                for (const chunk of arguments) {\n                  const [, modules] = chunk;\n                  if (!modules) continue;\n\n                  for (const moduleId in modules) {\n                    const originalModule = modules[moduleId];\n\n                    modules[moduleId] = function () {\n                      const wpRequire = arguments[2];\n\n                      if (!windowObject.hasOwnProperty(\"modules\"))\n                        Object.defineProperty(windowObject, \"modules\", {\n                          get: () => Object.values(getModulesFromWpRequire(wpRequire)),\n                        });\n\n                      // thinking i'll add a try { } catch { } finally { } to this.\n                      arguments[2] = new Proxy(wpRequire, {\n                        apply(target, thisArg, args) {\n                          const originalResponse = target.apply(thisArg, args);\n                          if (typeof originalResponse != \"object\") return originalResponse;\n\n                          // neptune.store exfiltration code\n                          try {\n                            if (!exfiltratedStore) {\n                              const [key] = Object.entries(originalResponse).find(([, e]) =>\n                                e?.toString?.().includes?.('Error(\"No global store set\"'),\n                              );\n\n                              if (key) exfiltratedStore = true;\n\n                              const unpatch = patcher.after(key, originalResponse, (_, resp) => {\n                                if (!typeof resp == \"object\" && windowObject.store) return;\n\n                                store = resp;\n                                // Hate.\n                                windowObject.store = store;\n                                unpatch();\n                              });\n                            }\n                          } catch {}\n\n                          // neptune.intercept setup code\n                          try {\n                            if (patchedPrepareAction) return originalResponse;\n\n                            let found = Object.entries(originalResponse).find(\n                              ([, possiblyPrepareAction]) =>\n                                possiblyPrepareAction\n                                  ?.toString?.()\n                                  ?.includes?.(\n                                    `.payload,...\"meta\"in `,\n                                  ),\n                            );\n\n                            if (!found) return originalResponse;\n\n                            patchedPrepareAction = true;\n\n                            patcher.after(found[0], originalResponse, ([type], resp) => {\n                              if (!interceptors[type]) interceptors[type] = [];\n\n                              const [parent, child] = type\n                                .split(\"/\")\n                                .map((n) =>\n                                  n.toUpperCase() == n\n                                    ? n\n                                        .toLowerCase()\n                                        .replace(/_([a-z])/g, (_, i) => i.toUpperCase())\n                                    : n,\n                                );\n\n                              const builtAction = (...args) => {\n                                const act = resp(...args);\n\n                                if (!(act.__proto__.toString() == \"[object Promise]\"))\n                                  return windowObject.store.dispatch(act);\n\n                                return new Promise(async (res, rej) => {\n                                  try {\n                                    res(windowObject.store.dispatch(await act));\n                                  } catch (e) {\n                                    rej(e);\n                                  }\n                                });\n                              };\n\n                              if (child) {\n                                if (!actions[parent]) actions[parent] = {};\n\n                                actions[parent][child] = builtAction;\n                              } else {\n                                actions[parent] = builtAction;\n                              }\n\n                              return new Proxy(resp, {\n                                apply(orig, ctxt, [payload]) {\n                                  try {\n                                    let shouldDispatch = true;\n\n                                    const interceptorData = [payload, type];\n\n                                    for (let interceptor of interceptors[type]) {\n                                      try {\n                                        const resp = interceptor(interceptorData);\n\n                                        if (resp === true) shouldDispatch = false;\n                                      } catch (e) {\n                                        console.error(\"Failed to run interceptor!\\n\", e);\n                                      }\n                                    }\n\n                                    return shouldDispatch\n                                      ? orig.apply(ctxt, [interceptorData[0]])\n                                      : { type: \"NOOP\" };\n                                  } catch (e) {\n                                    console.log(e);\n                                  }\n                                },\n                              });\n                            });\n                          } catch {}\n\n                          return originalResponse;\n                        },\n                      });\n\n                      return originalModule.apply(this, arguments);\n                    };\n                  }\n                }\n              } catch (e) {\n                console.error(\"[neptune] failed to hook properly\", e);\n              }\n\n              return newPush.apply(this, arguments);\n            }\n          : originalPush,\n    });\n  },\n});\n","import { Switch, TextInput, ReloadIcon, TrashIcon } from \"./components.js\";\nimport { actions } from \"../handleExfiltrations.js\";\nimport {\n  pluginStore,\n  togglePlugin,\n  removePlugin,\n  installPluginFromURL,\n  installPlugin,\n  reloadPlugin,\n  enabled as enabledPlugins,\n} from \"../api/plugins.js\";\nimport showModal from \"../api/showModal.js\";\nimport { parseManifest } from \"../api/utils.js\";\nimport { $, For, If, html } from \"voby\";\n\nasync function importLocalPlugin() {\n  const [fileHandle] = await showOpenFilePicker({\n    types: [{ description: \"A neptune plugin file\", accept: { \"text/javascript\": [\".js\"] } }],\n  });\n\n  const file = await fileHandle.getFile();\n  const content = await file.text();\n\n  let manifest;\n  try {\n    manifest = parseManifest(content);\n\n    if (![\"name\", \"author\", \"description\"].every((m) => typeof manifest[m] === \"string\"))\n      throw \"invalid manifest\";\n  } catch (e) {\n    return actions.message.messageError({ message: e });\n  }\n\n  try {\n    await installPlugin(\n      manifest.name + \"-\" + (Math.random() + 1).toString(36).substring(7),\n      content,\n      {\n        name: manifest.name,\n        author: manifest.author,\n        description: manifest.description,\n      },\n    );\n  } catch {\n    actions.message.messageError({ message: \"Failed to install plugin!\" });\n  }\n}\n\nexport function PluginTab() {\n  const pluginToImport = $(\"\");\n\n  return html`\n  <div style=\"display: flex; gap: 10px; flex-direction: column\">\n    <div style=\"padding-top: 10px; display: flex; gap:10px\">\n      <!-- This text input *needs* to be able to have an onEnter event. -->\n      <${TextInput} value=${pluginToImport} onEnter=${() => {\n        installPluginFromURL(pluginToImport());\n        pluginToImport(\"\");\n      }} placeholder=\"Import plugin from URL\" />\n      <!-- This button will be used for importing from local files. -->\n      <button onClick=${importLocalPlugin} class=\"neptune-round-button\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path><polyline points=\"17 8 12 3 7 8\"></polyline><line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\"></line></svg>\n      </button>\n    </div>\n    <${For} values=${() => pluginStore}>\n      ${(plugin) => html`<${PluginCard} plugin=${plugin} />`}\n    </${For}>\n  </div>`;\n}\n\nfunction PluginCard({ plugin }) {\n  return html`<div class=\"neptune-card\">\n    <div class=\"neptune-card-content\">\n      <div>\n        <div style=\"display: flex; gap: 15px; align-items: center\">\n          <button class=\"neptune-round-button\" onClick=${() => reloadPlugin(plugin)}>\n            <${ReloadIcon} />\n          </button>\n          <div style=\"padding-top: 10px;padding-bottom: 10px\">\n            <div>\n              <span class=\"neptune-card-title\">${plugin.manifest.name}</span>\n              <span> by </span>\n              <span class=\"neptune-card-title\">${plugin.manifest.author}</span>\n            </div>\n            <div style=\"font-size: medium\">${plugin.manifest.description}</div>\n          </div>\n        </div>\n      </div>\n      <div style=\"margin-top: auto; margin-bottom: auto; display: flex\">\n        <div style=\"display: flex; justify-content: center; align-items: center; gap: 6px\">\n          <${If} when=${() => enabledPlugins?.[plugin.id]?.Settings}>\n            <button style=\"display: grid; place-items: center; padding: 0px\" onClick=${() =>\n              showModal(plugin.manifest.name, enabledPlugins[plugin.id].Settings)}>\n              <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" style=\"width: 22px\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z\"></path>\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"></path>\n              </svg>\n            </button>\n          </${If}>\n          <button style=\"display: grid; place-items: center; padding: 0px\" onClick=${() =>\n            removePlugin(plugin.id)}>\n            <${TrashIcon} />\n          </button>\n        </div>\n        <${Switch}\n          checked=${() => plugin.enabled}\n          onClick=${() => {\n            togglePlugin(plugin.id);\n          }} />\n      </div>\n    </div>\n  </div>`;\n}\n","import { $, For, html, useCleanup } from \"voby\";\nimport { TextInput, Switch, TrashIcon } from \"./components\";\nimport { themesStore, toggleTheme, removeTheme, importTheme } from \"../api/themes\";\nimport { actions } from \"../handleExfiltrations.js\";\nimport { appendStyle } from \"../api/utils.js\";\n\nexport function ThemesTab() {\n  const themeToImport = $(\"\");\n\n  return html`\n  <div style=\"margin-top: 10px; display: flex; gap: 10px; flex-direction: column\">\n    <${TextInput} onEnter=${() => {\n      importTheme(themeToImport(), false).catch((e) => actions.message.messageError({ message: e }));\n      themeToImport(\"\");\n    }} value=${themeToImport} placeholder=\"Import theme from URL\" />\n    <${For} values=${() => themesStore}>\n      ${(theme) => html`<${ThemeCard} theme=${theme} />`}\n    </${For}>\n  </div>`;\n}\n\nfunction ThemeCard({ theme}) {\n  // TODO: i have no fucking clue why this needs a try catch to not implode in on itself lmfao\n  useCleanup(() => { try { removeStyle() } catch {} });\n\n  let removeStyle = () => {};\n\n  return html`<div class=\"neptune-card\">\n    <div class=\"neptune-card-content\">\n      <div style=\"padding-top: 10px; padding-bottom: 10px\">\n        <div>\n          <span class=\"neptune-card-title\">${theme.name}</span>\n          <span> by </span>\n          <span class=\"neptune-card-title\">${theme.author}</span>\n        </div>\n        <div style=\"font-size: medium\">${theme.description}</div>\n      </div>\n      <div style=\"margin-top: auto; margin-bottom: auto; display: flex\">\n        <button onClick=${() => removeTheme(theme.url)}>\n          <${TrashIcon} />\n        </button>\n        <div onmouseover=${() => {\n          try {\n          removeStyle();\n          } catch {}\n          removeStyle = appendStyle(`@import url(\"${theme.url}\");`)\n        }}\n        \n        onmouseout=${() => removeStyle()}\n        >\n          <${Switch} checked=${() => theme.enabled} onClick=${() => toggleTheme(theme.url)} />\n        </div>\n      </div>\n    </div>\n  </div>`\n}","import { appendStyle } from \"./api/utils.js\";\n\nexport default function loadStyles() {\n  appendStyle(`\n  .__NEPTUNE_PAGE {\n    margin: 0px auto;\n    max-width: 870px;\n    width: calc(100% - var(--defaultPadding)*2);\n  }\n\n  .neptune-card {\n    background-color: var(--wave-color-solid-base-brighter, var(--wave-color-opacity-contrast-fill-ultra-thick));\n    border: 1px solid var(--wave-color-opacity-contrast-fill-ultra-thin);\n    border-radius: 12px;\n    min-height: 70px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n  }\n\n  .neptune-card-content {\n    display: flex;\n    justify-content: space-between;\n    padding: 0 15px 0px 15px;\n  }\n  \n  .neptune-active-tab {\n    color: var(--wave-color-solid-accent-fill);\n    box-shadow: 0px 2px var(--wave-color-solid-accent-fill);\n  }\n  \n  .neptune-card-title {\n    font-weight: 600;\n    font-size: medium;\n  }\n\n  .neptune-switch-checkbox {\n    cursor: pointer;\n    margin-left: 0.8rem;\n    opacity: 0;\n    position: absolute;\n    z-index: 1;\n  }\n\n  .neptune-switch {\n    cursor: pointer;\n    background-color: var(--wave-color-opacity-contrast-fill-ultra-thin);\n    border-radius: 28px;\n    display: block;\n    height: 28px;\n    margin-left: 0.8rem;\n    min-width: 48px;\n    position: relative;\n    transition: background-color .25s ease,border-color .25s ease;\n    -webkit-user-select: none;\n    user-select: none;\n  }\n\n  .neptune-switch:after {\n    background-color: var(--wave-color-solid-contrast-fill);\n    border-radius: 50%;\n    box-shadow: 0 1px 2px rgb(0 0 0 / 30%);\n    content: \"\";\n    display: block;\n    height: 24px;\n    left: 2px;\n    position: absolute;\n    top: 2px;\n    transition: all .25s ease;\n    width: 24px;\n  }\n\n  .neptune-switch-checkbox:checked + .neptune-switch:after {\n    left: calc(100% - 0.1em);\n    transform: translateX(-100%);\n  }\n\n  .neptune-switch-checkbox:checked + .neptune-switch {\n    background-color: var(--wave-color-solid-accent-fill);\n    border-color: var(--wave-color-solid-accent-fill);\n  }\n\n  .neptune-text-input {\n    background: transparent;\n    border: 0;\n    border-bottom: 1px solid var(--wave-color-opacity-contrast-fill-ultra-thin);\n    color: var(--wave-color-opacity-contrast-fill-thick);\n    display: block;\n    width: 100%;\n    height: 40px;\n    box-sizing: border-box;\n  }\n\n  .neptune-text-input:not([readonly]):focus {\n    border-bottom-color: var(--wave-color-solid-accent-fill);\n    color: var(--wave-color-solid-contrast-fill);\n  }\n\n  .neptune-button {\n    align-items: center;\n    background-color: var(--wave-color-solid-contrast-fill);\n    border-radius: 12px;\n    display: inline-flex;\n    height: 48px;\n    justify-content: center;\n    line-height: 49px;\n    min-height: 48px;\n    min-width: 0;\n    overflow: hidden;\n    padding: 0 24px;\n    text-align: center;\n    text-overflow: ellipsis;\n    transition: background .35s ease;\n    white-space: nowrap;\n  }\n\n  .neptune-round-button {\n    color: var(--wave-color-opacity-contrast-fill-thick);\n    background-color: var(--wave-color-solid-base-brighter);\n    border: 1px solid var(--wave-color-opacity-contrast-fill-ultra-thin);\n    transition: background-color 0.35s ease 0s;\n    transition-property: background-color;\n    transition-duration: 0.35s;\n    transition-timing-function: ease;\n    transition-delay: 0s;\n    position: relative;\n    border-radius: 100%;\n    min-height: 40px;\n    min-width: 40px;\n    display: grid;\n    place-items: center;\n  }\n\n  .neptune-round-button:active {\n    background-color: rgba(255, 255, 255, 0.2);\n  }\n`);\n}\n","import { $, html } from \"voby\";\nimport { PluginTab } from \"./pluginsTab.js\";\nimport { ThemesTab } from \"./themesTab.js\";\nimport registerRoute from \"../api/registerRoute.js\";\nimport hookContextMenu from \"../api/hookContextMenu.js\";\n\nlet selectedTab = $(0);\nconst tabs = [\n  {\n    name: \"Plugins\",\n    component: PluginTab,\n  },\n  {\n    name: \"Themes\",\n    component: ThemesTab,\n  },\n  {\n    name: \"Addon Store\",\n    component: () => html`[WIP]`,\n  },\n];\n\nfunction TabButton({ className = \"\", onClick = () => {}, children }) {\n  return html`<button\n    onClick=${onClick}\n    style=\"font-weight: 500; font-size: 1.14286rem; padding-bottom: 6px\"\n    class=\"${className}\">\n    ${children}\n  </button>`;\n}\n\nregisterRoute(\n  \"settings\",\n  html`<div style=\"width: 675px\">\n    <div>\n      <div style=\"display: flex; gap: 25px; padding-bottom: 10px\">\n        ${tabs.map(\n          (tab, idx) =>\n            html`<${TabButton} onClick=${() => selectedTab(idx)} className=${() =>\n              idx == selectedTab() ? \"neptune-active-tab\" : \"\"}>${tab.name}</${TabButton}>`,\n        )}\n      </div>\n      <div>${() => tabs[selectedTab()].component}</div>\n    </div>\n  </div>`,\n);\n\nhookContextMenu(\"USER_PROFILE\", \"neptune settings\", () =>\n  neptune.actions.router.push({ pathname: \"/neptune/settings\", replace: true }),\n);\n","import \"./ui/settings.js\";\nimport \"./handleExfiltrations.js\";\nimport windowObject from \"./windowObject.js\";\n\n// TODO: Remove this in a future update.\nif (window.require) {\n  (async () => {\n    const fs = require(\"fs\");\n    const path = require(\"path\");\n\n    const indexFetch = await fetch(\n      \"https://raw.githubusercontent.com/uwu/neptune/master/injector/index.js\",\n    );\n    const preloadFetch = await fetch(\n      \"https://raw.githubusercontent.com/uwu/neptune/master/injector/preload.js\",\n    );\n    if (!(indexFetch.ok || preloadFetch.ok)) return;\n\n    fs.writeFileSync(path.join(process.resourcesPath, \"app\", \"index.js\"), await indexFetch.text());\n    fs.writeFileSync(\n      path.join(process.resourcesPath, \"app\", \"preload.js\"),\n      await preloadFetch.text(),\n    );\n\n    alert(\"neptune has been updated. Please restart TIDAL.\");\n  })();\n}\n\n// Updater 2 (LAST ONE, I SWEAR!)\n// I will implement an actual updater after this.\nif (!window.require && !window.NeptuneNative.startDebugging) {\n  (async () => {\n    const fsScope = NeptuneNative.createEvalScope(`\n      const fs = require(\"fs\");\n      const path = require(\"path\");\n      \n      var neptuneExports = {\n        updateFile(name, contents) {\n          fs.writeFileSync(path.join(process.resourcesPath, \"app\", name), contents);\n        }\n      }\n    `);\n  \n    const updateFile = NeptuneNative.getNativeValue(fsScope, \"updateFile\");\n  \n    const indexFetch = await fetch(\n      \"https://raw.githubusercontent.com/uwu/neptune/master/injector/index.js\",\n    );\n    const preloadFetch = await fetch(\n      \"https://raw.githubusercontent.com/uwu/neptune/master/injector/preload.js\",\n    );\n\n    if (!(indexFetch.ok || preloadFetch.ok)) return;\n\n    updateFile(\"index.js\", await indexFetch.text())\n    updateFile(\"preload.js\", await preloadFetch.text())\n\n    alert(\"neptune has been updated. Please restart TIDAL.\");\n  })()\n}\n\n// Restore the console\nfor (let key in console) {\n  const orig = console[key];\n\n  Object.defineProperty(console, key, {\n    set() {\n      return true;\n    },\n    get() {\n      return orig;\n    },\n  });\n}\n\n// Force properties to be writable for patching\nconst originalDefineProperty = Object.defineProperty;\n\nObject.defineProperty = function (...args) {\n  args[2].configurable = true;\n\n  try {\n    return originalDefineProperty.apply(this, args);\n  } catch {}\n};\n\nObject.freeze = (arg) => arg;\n\n// If the app fails to load for any reason we simply reload the page.\nsetTimeout(() => {\n  if (!windowObject.store) window.location.reload();\n}, 7000);\n\nwindow.neptune = windowObject;\n"],"names":["IS_BROWSER","globalThis","CDATASection","toString","match","isServer$1","SYMBOL_CACHED","Symbol","SYMBOL_OBSERVABLE","SYMBOL_OBSERVABLE_BOOLEAN","SYMBOL_OBSERVABLE_FROZEN","SYMBOL_OBSERVABLE_READABLE","SYMBOL_OBSERVABLE_WRITABLE","SYMBOL_STORE","SYMBOL_STORE_KEYS","SYMBOL_STORE_OBSERVABLE","SYMBOL_STORE_TARGET","SYMBOL_STORE_VALUES","SYMBOL_STORE_UNTRACKED","SYMBOL_SUSPENSE","SYMBOL_UNCACHED","SYMBOL_UNTRACKED","SYMBOL_UNTRACKED_UNWRAPPED","is","Object","isArray","Array","isEqual","a","b","length","i","l","valueA","valueB","isFunction","value","isObject","isSymbol","noop","nope","frozenFunction","arguments","Error","this","readableFunction","get","writableFunction","fn","C","set","frozen","bind","readable","writable","OBSERVABLE_FALSE","OBSERVABLE_TRUE","UNAVAILABLE","Proxy","UNINITIALIZED","lazyArrayEach","arr","lazyArrayEachRight","lazyArrayPush","obj","key","push","lazySetAdd","Set","add","s","lazySetDelete","delete","undefined","lazySetEach","onCleanup","cleanup","call","onDispose","owner","Q","Owner$1","constructor","disposed","B","S","D","K","T","U","catch","error","silent","parent","deep","symbol","context","E","observer","ownerPrev","OWNER","observerPrev","OBSERVER","setOwner","setObserver","castError","SuperRoot$1","Owner","super","BATCH","SUPER_OWNER","SuperRoot","setBatch","M","resolve","batch$1","async","Promise","r","isObservableBoolean$1","isObservableFrozen$1","isUntracked$2","SchedulerSync","A1","A2","N","queue","F","ObservableClass","options","equals","A","L","Scheduler","I","J","has","sync","Math","max","ObservablesArray","P","R","observablesLength","empty","observable","index","indexOf","ObservablesSet","size","sizePrev","Observer$1","H","run","Memo$1","Observer","Observable","G","statusPrev","memo$1","isObservableFrozen","isUntracked","memo","Memo","boolean$1","isObservableBoolean","boolean","cleanup$1","Context$1","symbolOrContext","Context","disposed$1","Scheduler$1","A3","queueMicrotask","finally","effect","Effect$1","suspense","init","suspended","effect$1","Effect","resolved","Root$1","V","A0","DUMMY_INDEX","Root","CacheKeyed$1","A5","Map","A6","A7","A8","A9","forEach","mapped","AA","O","values","map","AB","results","resultsCached","resultsUncached","cached","MappedRoot","from","isObservable$1","getFunction","isObservable","Suspense$3","SYMBOL_SUSPENSE$1","A4","force","suspendedPrev","suspendedNext","notifyOwner","notifyObserver","notifySuspense","notifyRoot","root","suspense$1","when","Suspense","condition","CacheUnkeyed$1","pooled","AC","AD","poolable","cacheNext","leftovers","outer","isDuplicate","entries","pop","$index","$value","isStore$1","untrack","warmup$1","fallback","_switch","warmup","ternary$1","valueTrue","valueFalse","isBatching$1","SchedulerAsync","isObservableWritable$1","target$1","readonly$1","isObservableWritable","target","root$1","DisposableMap","SelectedObservable","AE","AF","AG","selector$1","sourceValue","selectedValue","valuePrev","valueNext","selected","StoreMap","AH","StoreCleanable","listen","StoreKeys","keys","StoreValues","StoreHas","StoreProperty","AI","AJ","StoreListenersRegular","AK","AL","AM","AN","traversed","traverse","AO","AP","listener","StoreScheduler","reset","StoreListenersRoots","rootsSet","store","AQ","AR","current","flushRegular","flushRoots","AS","isBatching","setTimeout","NODES","WeakMap","SPECIAL_SYMBOLS","UNREACTIVE_KEYS","STORE_TRAPS","isListenable","getNodeExisting","getNodeKeys","getNodeValues","String","getter","AT","property","getNodeProperty","getNodeObservable","listenable","proxiable","isProxiable","prototype","apply","getTarget","setter","AU","hadProperty","getNode","deleteProperty","Reflect","defineProperty","descriptor","descriptorPrev","getOwnPropertyDescriptor","isStore","isEqualDescriptor","enumerable","getNodeHas","ownKeys","STORE_UNTRACK_TRAPS","gettersAndSetters","getGettersAndSetters","getNodeFromStore","propertyNode","configurable","getPrototypeOf","getStore","on","targets","selectors","filter","disposers","selector","inited","disposer","_onRoots","reconcile","getType","reconcileInner","prev","next","uprev","unext","prevKeys","nextKeys","prevValue","nextValue","prevType","nextType","reconcileOuter","getUntracked","unwrap","store$2","suspended$1","tick$1","tryCatch$1","$","untracked","args","_with$1","CONTEXTS_DATA","DIRECTIVES","SYMBOL_SUSPENSE_COLLECTOR","SYMBOL_TEMPLATE_ACCESSOR","SYMBOLS_DIRECTIVES","wrapElement$1","element","createComment","document","createHTMLNode","createElement","createSVGNode","createElementNS","createText","createTextNode","assign","castArray","_indexOf","isError","isFunctionReactive","isNil","isString","isSVG","isSVGElement","svgRe","svgCache","includes","test","isTruthy","useResolved","callback","resolveFunction","isResolvable","useEventListener","event","handler","useEffect","$$","addEventListener","removeEventListener","useAbortController$1","signals","controller","AbortController","abort","some","signal","aborted","useCleanup","useAbortSignal$1","useAbortController","useScheduler$1","loop","once","cancel","schedule","tickId","executed","useSuspended","work","tick","dispose","useAnimationFrame$1","useScheduler","cancelAnimationFrame","requestAnimationFrame","useAnimationLoop$1","SuspenseContext","create","count","data","active","useMemo","increment","nr","decrement","collector","register","unregister","wrap","SuspenseContext$1","SuspenseManager$1","suspenses","change","counter","counterNext","suspend","unsuspend","useRenderEffect$1","useResource$1","fetcher","pending","latest","SuspenseManager","resourcePending","resourceRejected","resourceResolved","resourceFunction","resource","useRenderEffect","useCheapDisposed","onPending","onResolve","result","onReject","exception","onFinally","isPromise","then","fetch","useReadonly","useFetch$1","request","useResource","useAbortSignal","useIdleCallback$1","cancelIdleCallback","requestIdleCallback","useIdleLoop$1","useInterval$1","ms","clearInterval","setInterval","usePromise$1","promise","useTimeout$1","clearTimeout","useCheapDisposed$1","useMicrotask$1","runWithOwner","_with","dummyNode","beforeDummyWrapper","afterDummyWrapper","diff$1","before","after","nextSibling","Node","parentNode","replaceChild","bLength","removable","aEnd","bEnd","aStart","bStart","node","slice","append","removeChild","insertBefore","sequence","NOOP_CHILDREN","FragmentUtils","make","makeWithNode","makeWithFragment","fragment","fragmented","getChildrenFragmented","thiz","children","getChildren","pushFragment","pushValue","pushNode","replaceWithNode","replaceWithFragment","FragmentUtils$1","resolveChild","_dynamic","hasObservables","resolveArraysAndStatics","resolveClass","classes","split","Boolean","cls","resolveStyle","styles","style","DUMMY_RESOLVED","resolveArraysAndStaticsInner","type","setAttributeStatic","attributesBoolean","attributeCamelCasedRe","attributesCache","uppercaseRe","replace","char","toLowerCase","normalizeKeySvg","removeAttribute","setAttribute","setChildReplacementText","child","childPrev","nodeType","nodeValue","parentElement","textNode","setChildReplacement","setChildStatic","setChildReplacementFunction","setChild","fragmentOnly","dynamic","prevIsArray","prevLength","prevFirst","prevLast","prevSibling","appendChild","fragmentNext","childFragmentOnly","nextLength","childNodes","textContent","placeholder","diff","setClassStatic","className","classList","toggle","setClass","setClassBooleanStatic","keyPrev","setClassBoolean","keyNext","setClassesStatic","object","objectPrev","setClasses","objectNext","setEventStatic","delegatedEvents","onauxclick","onbeforeinput","onclick","ondblclick","onfocusin","onfocusout","oninput","onkeydown","onkeyup","onmousedown","onmouseup","startsWith","_value","delegated","composedPath","cancelBubble","delegate","endsWith","isCapture","capture","passive","setEvent","setHTML","innerHTML","setHTMLStatic","__html","setPropertyStatic","isBoolean","tagName","setProperty","setRef","flat","Infinity","flatten","useMicrotask","setStyleStatic","propertyNonDimensionalRe","propertyNonDimensionalCache","charCodeAt","removeProperty","setStyle","setStylesStatic","cssText","setStyles","setProp","isTemplateAccessor","setTemplateAccessor","directive","immediate","setDirective","creatElement","component","props","_children","__children","ref","rest","wrapElement","createNode","setProps","isNode","Dynamic$1","ErrorBoundary$1","tryCatch","For","unkeyed","isUnkeyed","CacheUnkeyed","CacheKeyed","array","_for","Fragment$1","useGuarded$1","guard","valueLast","guarded","If$1","ternary","truthy","useGuarded","useUntracked","cache","runWithSuperRoot","lockId","KeepAlive$1","id","ttl","lock","item","useRoot","useSuspense","hasLock","timeoutId","render$1","HTMLElement","Portal$1","mount","wrapper","portal","useBoolean","body","Element","render","metadata","Suspense$1","childrenSuspended","Switch","Switch$1","Case","Default","Switch$2","Ternary$1","jsx","createDirective$1","name","Provider","COMPONENT_RE","SYMBOL_COLD_COMPONENT","SYMBOL_HOT_COMPONENT","SYMBOL_HOT_ID","SOURCES","hmr$1","accept","createHotComponent","path","reduce","source","createHotComponentDeep","hot","onAccept","module","default","console","cold","n","t","e","u","h","p","registry","html","components","html$1","lazy$1","fetcherOnce","called","preload","reject","SuspenseCollector","other","SuspenseCollector$1","renderToString$1","Portal","template$1","safePropertyRe","checkValidProperty","makeActionsWithNodesAndTemplate","actionsWithNodes","accessor","prop","method","targetNode","makeAccessor","makeNodePath","prevPath","prevNode","previousSibling","makeNodePathProperties","properties","parts","reverse","part","nsi","makeReviverVariables","actionsWithPaths","paths","action","nodePath","targetNodePath","makeReviverPaths","makeReviverVariablesData","assignments","variableId","datum","find","variable","assignment","otherCurrent","otherNext","splice","makeActionsWithPaths","reviver","actions","variables","makeReviverActions","Function","join","apis","makeReviver","clone","cloneNode","makeComponent","defaultValue","valueContext","ReactiveRoot","c","checked","onClick","TextInput","onEnter","ReloadIcon","TrashIcon","customElements","define","connectedCallback","display","disconnectedCallback","patchTypes","patchedObjects","unpatch","funcParent","funcName","hookId","patchedObject","patch","every","o","getPatchFunc","patchType","oneTime","parentInjections","origFunc","runHook","ctxt","construct","ret","funcArgs","isConstruct","hook","maybefuncArgs","workingRetVal","unpatchThisPatch","replaceProxy","_","receiver","instead","parentObject","hookType","promisifyRequest","oncomplete","onsuccess","onabort","onerror","createStore","dbName","storeName","indexedDB","open","onupgradeneeded","createObjectStore","dbp","txMode","db","transaction","objectStore","defaultGetStoreFunc","defaultGetStore","appendStyle","styleTag","head","newStyle","neptuneIdbStore","createIdbStore","createPersistentObject","persistentObject","customStore","put","idbSet","res","idbGet","parseManifest","manifest","JSON","parse","convertHexToRGB","g","Number","Uint8Array","Uint16Array","buffer","__heap_base","memory","byteLength","grow","ceil","sa","lastIndexOf","idx","k","ri","ie","ai","ss","se","ip","d","re","es","ee","els","ele","ls","le","ln","eval","f","WebAssembly","compile","Buffer","atob","instantiate","exports","betterParse","src","imports","imp","declaration","importClause","trim","namedImportOpener","namedImportCloser","namedImport","namedImports","commaIndex","namespace","isExport","destructurifyImp","v","removeFromString","string","start","end","insertIntoString","newString","urlImport","baseUrl","existingUrls","interceptors","intercept","types","cb","uninterceptors","unintercept","handleIntercept","pluginStore","pluginStoreReady","enabled","getPluginById","disablePlugin","onUnload","togglePlugin","enablePlugin","plugin","runPlugin","persistentStorage","persistentStorageReady","unloadables","pluginData","storage","addUnloadable","Settings","code","config","plugins","moduleId","generatedImports","transform","offset","exp","startIndex","endIndex","newExport","fromIndex","quartzStore","random","substring","generatedImport","addImport","globalStoreID","mod","import","btoa","quartz","stringify","ul","installPlugin","unshift","removePlugin","log","findIndex","del","fetchPluginFromURL","url","parsedURL","json","hash","main","text","author","description","reloadPlugin","pluginWasEnabled","hasOwnProperty","installPluginFromURL","message","messageError","update","querySelector","window","require","themesStore","themesStoreReady","updateThemeStyle","removeTheme","toggleTheme","theme","importTheme","observations","MutationObserver","records","changedElems","record","removedNodes","SVGElement","elem","obs","matches","querySelectorAll","startObserving","observe","subtree","childList","attributes","stopObserving","disconnect","sel","entry","unobs","now","pageNotFoundSelector","replacePage","page","neptunePage","insertAdjacentElement","registerRoute","payload","pathname","pageNotFound","unob","getElementsByClassName","getTabs","hookContextMenu","menuType","contextMenuItem","contextMenuLabel","innerText","parentClasses","contextMenuWrapper","keyCode","click","showModal","modal","showReleaseNotes","header","getElementsByTagName","replaceChildren","tab","color","currentMediaItem","vibrantColorStyle","utils.appendStyle","mediaProduct","getState","content","mediaItems","productId","vibrantColor","album","utils.convertHexToRGB","windowObject","patcher","utils","registerTab","unobservers","addTab","tabs","remove","makeInactive","preventDefault","router","removeRouteHandler","voby","themes","webpackObject","exfiltratedStore","patchedPrepareAction","getModulesFromWpRequire","wpRequire","fromEntries","m","loaded","importLocalPlugin","fileHandle","showOpenFilePicker","file","getFile","PluginCard","If","enabledPlugins","ThemeCard","removeStyle","val","originalPush","newPush","chunk","modules","originalModule","thisArg","originalResponse","patcher.after","resp","found","possiblyPrepareAction","toUpperCase","builtAction","act","__proto__","dispatch","rej","orig","shouldDispatch","interceptorData","interceptor","selectedTab","pluginToImport","themeToImport","TabButton","neptune","fs","indexFetch","preloadFetch","ok","writeFileSync","process","resourcesPath","alert","NeptuneNative","startDebugging","fsScope","createEvalScope","updateFile","getNativeValue","originalDefineProperty","freeze","arg","location","reload"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,108,109,110,111,112,113,115,116,117]}