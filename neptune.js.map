{"version":3,"file":"neptune.js","sources":["../node_modules/.pnpm/spitroast@1.4.3/node_modules/spitroast/dist/esm/shared.js","../node_modules/.pnpm/spitroast@1.4.3/node_modules/spitroast/dist/esm/unpatch.js","../node_modules/.pnpm/spitroast@1.4.3/node_modules/spitroast/dist/esm/getPatchFunc.js","../node_modules/.pnpm/spitroast@1.4.3/node_modules/spitroast/dist/esm/hook.js","../node_modules/.pnpm/spitroast@1.4.3/node_modules/spitroast/dist/esm/index.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/methods/is_server.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/symbols.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/utils.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/callable.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/constants.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/lazy.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/owner.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/superroot.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/context.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/batch.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/is_observable_boolean.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/is_observable_frozen.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/is_untracked.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/scheduler.sync.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/observable.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/observables.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/observer.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/memo.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/memo.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/boolean.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/cleanup.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/context.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/context.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/disposed.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/scheduler.async.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/effect.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/effect.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/resolve.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/root.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/for.cache.keyed.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/is_observable.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/get.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/objects/suspense.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/suspense.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/for.cache.unkeyed.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/is_store.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/untrack.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/warmup.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/switch.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/ternary.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/is_batching.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/observable.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/is_observable_writable.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/target.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/readonly.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/root.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/selector.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/store.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/suspended.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/tick.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/try_catch.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/untracked.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/with.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/constants.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/methods/wrap_element.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/utils/creators.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/utils/lang.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_resolved.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_event_listener.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_abort_controller.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_abort_signal.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_scheduler.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_animation_frame.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_animation_loop.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/suspense.context.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/suspense.manager.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_render_effect.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_resource.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_fetch.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_idle_callback.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_idle_loop.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_interval.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_promise.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_timeout.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_cheap_disposed.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_microtask.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/utils/classlist.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/utils/diff.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/utils/fragment.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/utils/resolvers.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/utils/setters.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/methods/create_element.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/dynamic.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/error_boundary.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/for.js","../node_modules/.pnpm/oby@15.1.0/node_modules/oby/dist/methods/for.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/fragment.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_guarded.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/if.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/keep_alive.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/methods/render.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/portal.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/suspense.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/switch.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/ternary.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/jsx/runtime.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/methods/create_directive.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/methods/hmr.js","../node_modules/.pnpm/htm@3.1.1/node_modules/htm/dist/htm.module.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/methods/html.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/methods/lazy.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/components/suspense.collector.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/methods/render_to_string.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/methods/template.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/methods/create_context.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/methods/h.js","../node_modules/.pnpm/voby@0.57.3/node_modules/voby/dist/hooks/use_context.js","../src/ui/components.js","../node_modules/.pnpm/idb-keyval@6.2.1/node_modules/idb-keyval/dist/index.js","../src/api/utils.js","../node_modules/.pnpm/es-module-lexer@1.3.0/node_modules/es-module-lexer/dist/lexer.js","../node_modules/.pnpm/@uwu+quartz@1.3.7/node_modules/@uwu/quartz/index.js","../node_modules/.pnpm/quartz-plugin-url-import@1.0.1/node_modules/quartz-plugin-url-import/index.js","../src/api/intercept.js","../src/api/plugins.js","../src/api/themes.js","../src/api/observe.js","../src/api/registerRoute.js","../src/api/registerTab.js","../src/api/hookContextMenu.js","../src/api/showModal.js","../src/windowObject.js","../src/handleExfiltrations.js","../src/ui/pluginsTab.js","../src/ui/themesTab.js","../src/styles.js","../src/ui/settings.js","../src/index.js"],"sourcesContent":["// we use this array multiple times\nexport const patchTypes = [\"a\", \"b\", \"i\"];\nexport const patchedObjects = new Map();\n","import { patchedObjects, patchTypes } from \"./shared.js\";\nexport function unpatch(funcParent, funcName, hookId, type) {\n    const patchedObject = patchedObjects.get(funcParent);\n    const patch = patchedObject?.[funcName];\n    if (!patch?.[type].has(hookId))\n        return false;\n    patch[type].delete(hookId);\n    // If there are no more hooks for every type, remove the patch\n    if (patchTypes.every((t) => patch[t].size === 0)) {\n        // reflect defineproperty is like object defineproperty\n        // but instead of erroring it returns if it worked or not.\n        // this is more easily minifiable, hence its use. -- sink\n        const success = Reflect.defineProperty(funcParent, funcName, {\n            value: patch.o,\n            writable: true,\n            configurable: true,\n        });\n        if (!success)\n            funcParent[funcName] = patch.o;\n        delete patchedObject[funcName];\n    }\n    if (Object.keys(patchedObject).length == 0)\n        patchedObjects.delete(funcParent);\n    return true;\n}\nexport function unpatchAll() {\n    for (const [parentObject, patchedObject] of patchedObjects.entries())\n        for (const funcName in patchedObject)\n            for (const hookType of patchTypes)\n                for (const hookId of patchedObject[funcName]?.[hookType].keys() ?? [])\n                    unpatch(parentObject, funcName, hookId, hookType);\n}\n","// curried - getPatchFunc(\"before\")(...)\n// allows us to apply an argument while leaving the rest open much cleaner.\n// functional programming strikes again! -- sink\nimport hook from \"./hook.js\";\nimport { patchedObjects } from \"./shared.js\";\nimport { unpatch } from \"./unpatch.js\";\n// creates a hook if needed, else just adds one to the patches array\nexport default (patchType) => (funcName, funcParent, callback, oneTime = false) => {\n    if (typeof funcParent[funcName] !== \"function\")\n        throw new Error(`${funcName} is not a function in ${funcParent.constructor.name}`);\n    if (!patchedObjects.has(funcParent))\n        patchedObjects.set(funcParent, {});\n    const parentInjections = patchedObjects.get(funcParent);\n    if (!parentInjections[funcName]) {\n        const origFunc = funcParent[funcName];\n        // note to future me optimising for size: extracting new Map() to a func increases size --sink\n        parentInjections[funcName] = {\n            o: origFunc,\n            b: new Map(),\n            i: new Map(),\n            a: new Map(),\n        };\n        const runHook = (ctxt, args, construct) => {\n            const ret = hook(funcName, funcParent, args, ctxt, construct);\n            if (oneTime)\n                unpatchThisPatch();\n            return ret;\n        };\n        const replaceProxy = new Proxy(origFunc, {\n            apply: (_, ctxt, args) => runHook(ctxt, args, false),\n            construct: (_, args) => runHook(origFunc, args, true),\n            get: (target, prop, receiver) => prop == \"toString\"\n                ? origFunc.toString.bind(origFunc)\n                : Reflect.get(target, prop, receiver),\n        });\n        // this works around breaking some async find implementation which listens for assigns via proxy\n        // see comment in unpatch.ts\n        const success = Reflect.defineProperty(funcParent, funcName, {\n            value: replaceProxy,\n            configurable: true,\n            writable: true,\n        });\n        if (!success)\n            funcParent[funcName] = replaceProxy;\n    }\n    const hookId = Symbol();\n    const unpatchThisPatch = () => unpatch(funcParent, funcName, hookId, patchType);\n    parentInjections[funcName][patchType].set(hookId, callback);\n    return unpatchThisPatch;\n};\n","// calls relevant patches and returns the final result\nimport { patchedObjects } from \"./shared.js\";\nexport default function (funcName, funcParent, funcArgs, \n// the value of `this` to apply\nctxt, \n// if true, the function is actually constructor\nisConstruct) {\n    const patch = patchedObjects.get(funcParent)?.[funcName];\n    // This is in the event that this function is being called after all patches are removed.\n    if (!patch)\n        return isConstruct\n            ? Reflect.construct(funcParent[funcName], funcArgs, ctxt)\n            : funcParent[funcName].apply(ctxt, funcArgs);\n    // Before patches\n    for (const hook of patch.b.values()) {\n        const maybefuncArgs = hook.call(ctxt, funcArgs);\n        if (Array.isArray(maybefuncArgs))\n            funcArgs = maybefuncArgs;\n    }\n    // Instead patches\n    let workingRetVal = [...patch.i.values()].reduce((prev, current) => (...args) => current.call(ctxt, args, prev), \n    // This calls the original function\n    (...args) => isConstruct\n        ? Reflect.construct(patch.o, args, ctxt)\n        : patch.o.apply(ctxt, args))(...funcArgs);\n    // After patches\n    for (const hook of patch.a.values())\n        workingRetVal = hook.call(ctxt, funcArgs, workingRetVal) ?? workingRetVal;\n    return workingRetVal;\n}\n","import getPatchFunc from \"./getPatchFunc.js\";\nimport { unpatchAll } from \"./unpatch.js\";\nconst before = getPatchFunc(\"b\");\nconst instead = getPatchFunc(\"i\");\nconst after = getPatchFunc(\"a\");\nexport { instead, before, after, unpatchAll };\n","/* HELPERS */\nconst IS_BROWSER = !!globalThis.CDATASection?.toString?.().match(/^\\s*function\\s+CDATASection\\s*\\(\\s*\\)\\s*\\{\\s*\\[native code\\]\\s*\\}\\s*$/);\n/* MAIN */\nconst isServer = () => {\n    return !IS_BROWSER;\n};\n/* EXPORT */\nexport default isServer;\n","/* MAIN */\nconst SYMBOL_CACHED = Symbol('Cached');\nconst SYMBOL_OBSERVABLE = Symbol('Observable');\nconst SYMBOL_OBSERVABLE_BOOLEAN = Symbol('Observable.Boolean');\nconst SYMBOL_OBSERVABLE_FROZEN = Symbol('Observable.Frozen');\nconst SYMBOL_OBSERVABLE_READABLE = Symbol('Observable.Readable');\nconst SYMBOL_OBSERVABLE_WRITABLE = Symbol('Observable.Writable');\nconst SYMBOL_STORE = Symbol('Store');\nconst SYMBOL_STORE_KEYS = Symbol('Store.Keys');\nconst SYMBOL_STORE_OBSERVABLE = Symbol('Store.Observable');\nconst SYMBOL_STORE_TARGET = Symbol('Store.Target');\nconst SYMBOL_STORE_VALUES = Symbol('Store.Values');\nconst SYMBOL_STORE_UNTRACKED = Symbol('Store.Untracked');\nconst SYMBOL_SUSPENSE = Symbol('Suspense');\nconst SYMBOL_UNCACHED = Symbol('Uncached');\nconst SYMBOL_UNTRACKED = Symbol('Untracked');\nconst SYMBOL_UNTRACKED_UNWRAPPED = Symbol('Untracked.Unwrapped');\n/* EXPORT */\nexport { SYMBOL_CACHED, SYMBOL_OBSERVABLE, SYMBOL_OBSERVABLE_BOOLEAN, SYMBOL_OBSERVABLE_FROZEN, SYMBOL_OBSERVABLE_READABLE, SYMBOL_OBSERVABLE_WRITABLE, SYMBOL_STORE, SYMBOL_STORE_KEYS, SYMBOL_STORE_OBSERVABLE, SYMBOL_STORE_TARGET, SYMBOL_STORE_VALUES, SYMBOL_STORE_UNTRACKED, SYMBOL_SUSPENSE, SYMBOL_UNCACHED, SYMBOL_UNTRACKED, SYMBOL_UNTRACKED_UNWRAPPED };\n","/* MAIN */\nconst castArray = (value) => {\n    return isArray(value) ? value : [value];\n};\nconst castError = (error) => {\n    if (error instanceof Error)\n        return error;\n    if (typeof error === 'string')\n        return new Error(error);\n    return new Error('Unknown error');\n};\nconst { is } = Object;\nconst { isArray } = Array;\nconst isEqual = (a, b) => {\n    if (a.length !== b.length)\n        return false;\n    for (let i = 0, l = a.length; i < l; i++) {\n        const valueA = a[i];\n        const valueB = b[i];\n        if (!is(valueA, valueB))\n            return false;\n    }\n    return true;\n};\nconst isFunction = (value) => {\n    return typeof value === 'function';\n};\nconst isObject = (value) => {\n    return (value !== null) && (typeof value === 'object');\n};\nconst isSymbol = (value) => {\n    return typeof value === 'symbol';\n};\nconst noop = () => {\n    return;\n};\nconst nope = () => {\n    return false;\n};\n/* EXPORT */\nexport { castArray, castError, is, isArray, isEqual, isFunction, isObject, isSymbol, noop, nope };\n","/* IMPORT */\nimport { SYMBOL_OBSERVABLE, SYMBOL_OBSERVABLE_FROZEN, SYMBOL_OBSERVABLE_READABLE, SYMBOL_OBSERVABLE_WRITABLE } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN - FUNCTIONS */\nfunction frozenFunction() {\n    if (arguments.length) {\n        throw new Error('A readonly Observable can not be updated');\n    }\n    else {\n        return this;\n    }\n}\nfunction readableFunction() {\n    if (arguments.length) {\n        throw new Error('A readonly Observable can not be updated');\n    }\n    else {\n        return this.get();\n    }\n}\nfunction writableFunction(fn) {\n    if (arguments.length) {\n        if (isFunction(fn)) {\n            return this.C(fn);\n        }\n        else {\n            return this.set(fn); //TSC\n        }\n    }\n    else {\n        return this.get();\n    }\n}\n/* MAIN - GENERATORS */\nconst frozen = (value) => {\n    const fn = frozenFunction.bind(value); //TSC\n    fn[SYMBOL_OBSERVABLE] = true;\n    fn[SYMBOL_OBSERVABLE_FROZEN] = true;\n    return fn;\n};\nconst readable = (value) => {\n    //TODO: Make a frozen one instead if disposed\n    const fn = readableFunction.bind(value); //TSC\n    fn[SYMBOL_OBSERVABLE] = true;\n    fn[SYMBOL_OBSERVABLE_READABLE] = value;\n    return fn;\n};\nconst writable = (value) => {\n    const fn = writableFunction.bind(value); //TSC\n    fn[SYMBOL_OBSERVABLE] = true;\n    fn[SYMBOL_OBSERVABLE_WRITABLE] = value;\n    return fn;\n};\n/* EXPORT */\nexport { frozen, readable, writable };\n","/* IMPORT */\nimport { frozen } from './objects/callable.js';\n/* MAIN */\nconst DIRTY_NO = 0; // The observer is not dirty, for sure\nconst DIRTY_MAYBE_NO = 1; // The observer is not dirty, possibly\nconst DIRTY_MAYBE_YES = 2; // The observer is dirty, possibly\nconst DIRTY_YES = 3; // The observer is dirty, for sure\nconst OBSERVABLE_FALSE = frozen(false);\nconst OBSERVABLE_TRUE = frozen(true);\nconst UNAVAILABLE = new Proxy({}, new Proxy({}, { get() { throw new Error('Unavailable value'); } })); //TSC\nconst UNINITIALIZED = function () { }; //TSC\n/* EXPORT */\nexport { DIRTY_NO, DIRTY_MAYBE_NO, DIRTY_MAYBE_YES, DIRTY_YES };\nexport { OBSERVABLE_FALSE, OBSERVABLE_TRUE };\nexport { UNAVAILABLE, UNINITIALIZED };\n","/* IMPORT */\n/* MAIN */\nconst lazyArrayEach = (arr, fn) => {\n    if (arr instanceof Array) {\n        for (let i = 0, l = arr.length; i < l; i++) {\n            fn(arr[i]);\n        }\n    }\n    else if (arr) {\n        fn(arr);\n    }\n};\nconst lazyArrayEachRight = (arr, fn) => {\n    if (arr instanceof Array) {\n        for (let i = arr.length - 1; i >= 0; i--) {\n            fn(arr[i]);\n        }\n    }\n    else if (arr) {\n        fn(arr);\n    }\n};\nconst lazyArrayPush = (obj, key, value) => {\n    const arr = obj[key];\n    if (arr instanceof Array) {\n        arr.push(value);\n    }\n    else if (arr) {\n        obj[key] = [arr, value];\n    }\n    else {\n        obj[key] = value;\n    }\n};\nconst lazySetAdd = (obj, key, value) => {\n    const set = obj[key];\n    if (set instanceof Set) {\n        set.add(value);\n    }\n    else if (set) {\n        if (value !== set) {\n            const s = new Set();\n            s.add(set);\n            s.add(value);\n            obj[key] = s;\n        }\n    }\n    else {\n        obj[key] = value;\n    }\n};\nconst lazySetDelete = (obj, key, value) => {\n    const set = obj[key];\n    if (set instanceof Set) {\n        set.delete(value);\n    }\n    else if (set === value) {\n        obj[key] = undefined;\n    }\n};\nconst lazySetEach = (set, fn) => {\n    if (set instanceof Set) {\n        for (const value of set) {\n            fn(value);\n        }\n    }\n    else if (set) {\n        fn(set);\n    }\n};\n/* EXPORT */\nexport { lazyArrayEach, lazyArrayEachRight, lazyArrayPush };\nexport { lazySetAdd, lazySetDelete, lazySetEach };\n","/* IMPORT */\nimport { UNAVAILABLE } from '../constants.js';\nimport { OBSERVER, OWNER, setObserver, setOwner } from '../context.js';\nimport { lazyArrayEachRight } from '../lazy.js';\nimport { castError } from '../utils.js';\n/* HELPERS */\nconst onCleanup = (cleanup) => cleanup.call(cleanup);\nconst onDispose = (owner) => owner.Q(true);\n/* MAIN */\n//TODO: Throw when registering stuff O disposing, maybe\nclass Owner {\n    constructor() {\n        /* VARIABLES */\n        this.disposed = false;\n        this.B = undefined;\n        this.S = undefined;\n        this.D = undefined;\n        this.K = undefined;\n        this.T = undefined;\n        this.U = undefined;\n    }\n    /* API */\n    catch(error, silent) {\n        const { S } = this;\n        if (S) {\n            S(error); //TODO: This assumes that the error handler won't throw immediately, which we know, but Owner shouldn't know\n            return true;\n        }\n        else {\n            if (this.parent?.catch(error, true))\n                return true;\n            if (silent)\n                return false;\n            // console.error ( error.stack ); // <-- Log \"error.stack\" to better understand where the error happened\n            throw error;\n        }\n    }\n    Q(deep) {\n        lazyArrayEachRight(this.D, onDispose);\n        lazyArrayEachRight(this.K, onDispose);\n        lazyArrayEachRight(this.U, onDispose);\n        lazyArrayEachRight(this.B, onCleanup);\n        this.B = undefined;\n        this.disposed = deep;\n        this.S = undefined;\n        this.K = undefined;\n        this.U = undefined;\n    }\n    get(symbol) {\n        return this.context?.[symbol];\n    }\n    E(fn, owner, observer) {\n        const ownerPrev = OWNER;\n        const observerPrev = OBSERVER;\n        setOwner(owner);\n        setObserver(observer);\n        try {\n            return fn();\n        }\n        catch (error) {\n            this.catch(castError(error), false); // Bubbling the error up\n            return UNAVAILABLE; // Returning a value that is the least likely to cause bugs\n        }\n        finally {\n            setOwner(ownerPrev);\n            setObserver(observerPrev);\n        }\n    }\n}\n/* EXPORT */\nexport default Owner;\n","/* IMPORT */\nimport Owner from './owner.js';\n/* MAIN */\nclass SuperRoot extends Owner {\n    constructor() {\n        /* VARIABLES */\n        super(...arguments);\n        this.context = {};\n    }\n}\n/* EXPORT */\nexport default SuperRoot;\n","/* IMPORT */\nimport SuperRoot from './objects/superroot.js';\n/* MAIN - READ */\n// This module relies on live-binding of exported variables to avoid a bunch of property accesses\nlet BATCH;\nlet SUPER_OWNER = new SuperRoot();\nlet OBSERVER;\nlet OWNER = SUPER_OWNER;\n/* MAIN - WRITE */\n// Unfortunately live-bounded exports can't just be overridden, so we need these functions\nconst setBatch = (value) => BATCH = value;\nconst setObserver = (value) => OBSERVER = value;\nconst setOwner = (value) => OWNER = value;\n/* EXPORT */\nexport { BATCH, OBSERVER, OWNER, SUPER_OWNER };\nexport { setBatch, setObserver, setOwner };\n","/* IMPORT */\nimport { setBatch } from '../context.js';\nimport { noop } from '../utils.js';\n/* HELPERS */\nlet M = 0;\nlet resolve = noop;\n/* MAIN */\nconst batch = async (fn) => {\n    if (!M) {\n        setBatch(new Promise(r => resolve = r));\n    }\n    try {\n        M += 1;\n        return await fn();\n    }\n    finally {\n        M -= 1;\n        if (!M) {\n            setBatch(undefined);\n            resolve();\n        }\n    }\n};\n/* MAIN */\nexport default batch;\n","/* IMPORT */\nimport { SYMBOL_OBSERVABLE_BOOLEAN } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nconst isObservableBoolean = (value) => {\n    return isFunction(value) && (SYMBOL_OBSERVABLE_BOOLEAN in value);\n};\n/* EXPORT */\nexport default isObservableBoolean;\n","/* IMPORT */\nimport { SYMBOL_OBSERVABLE_FROZEN, SYMBOL_OBSERVABLE_READABLE } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nconst isObservableFrozen = (value) => {\n    return isFunction(value) && ((SYMBOL_OBSERVABLE_FROZEN in value) || !!value[SYMBOL_OBSERVABLE_READABLE]?.parent?.disposed);\n};\n/* EXPORT */\nexport default isObservableFrozen;\n","/* IMPORT */\nimport { SYMBOL_UNTRACKED, SYMBOL_UNTRACKED_UNWRAPPED } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nconst isUntracked = (value) => {\n    return isFunction(value) && ((SYMBOL_UNTRACKED in value) || (SYMBOL_UNTRACKED_UNWRAPPED in value));\n};\n/* EXPORT */\nexport default isUntracked;\n","/* IMPORT */\n/* MAIN */\n// This ensures that there's only one flushing of the queue happening at the same time\nclass Scheduler {\n    constructor() {\n        /* VARIABLES */\n        this.A1 = [];\n        this.M = 0;\n        this.A2 = false;\n        /* QUEING API */\n        this.N = () => {\n            if (this.A2)\n                return;\n            if (this.M)\n                return;\n            if (!this.A1.length)\n                return;\n            try {\n                this.A2 = true;\n                while (true) {\n                    const queue = this.A1;\n                    if (!queue.length)\n                        break;\n                    this.A1 = [];\n                    for (let i = 0, l = queue.length; i < l; i++) {\n                        queue[i].C();\n                    }\n                }\n            }\n            finally {\n                this.A2 = false;\n            }\n        };\n        this.E = (fn) => {\n            this.M += 1;\n            fn();\n            this.M -= 1;\n            this.N();\n        };\n        /* SCHEDULING API */\n        this.F = (observer) => {\n            this.A1.push(observer);\n        };\n    }\n}\n/* EXPORT */\nexport default new Scheduler();\n","/* IMPORT */\nimport { DIRTY_MAYBE_NO, DIRTY_YES, UNINITIALIZED } from '../constants.js';\nimport { OBSERVER } from '../context.js';\nimport Scheduler from './scheduler.sync.js';\nimport { is, nope } from '../utils.js';\n/* MAIN */\nclass Observable {\n    /* CONSTRUCTOR */\n    constructor(value, options, parent) {\n        this.K = new Set();\n        this.value = value;\n        if (parent) {\n            this.parent = parent;\n        }\n        if (options?.equals !== undefined) {\n            this.equals = options.equals || nope;\n        }\n    }\n    /* API */\n    get() {\n        if (!this.parent?.disposed) {\n            this.parent?.C();\n            OBSERVER?.A.L(this);\n        }\n        return this.value;\n    }\n    set(value) {\n        const equals = this.equals || is;\n        const fresh = (this.value === UNINITIALIZED) || !equals(value, this.value);\n        if (!fresh)\n            return value;\n        this.value = value;\n        Scheduler.M += 1;\n        this.I(DIRTY_YES);\n        Scheduler.M -= 1;\n        Scheduler.N();\n        return value;\n    }\n    I(J) {\n        for (const observer of this.K) {\n            if (observer.J !== DIRTY_MAYBE_NO || observer.A.has(this)) { // Maybe this is a potential future dependency we haven't re-read yet\n                if (observer.sync) {\n                    observer.J = Math.max(observer.J, J);\n                    Scheduler.F(observer);\n                }\n                else {\n                    observer.I(J);\n                }\n            }\n        }\n    }\n    C(fn) {\n        const value = fn(this.value);\n        return this.set(value);\n    }\n}\n/* EXPORT */\nexport default Observable;\n","/* IMPORT */\n/* MAIN */\n// Dedicated data structures for managing A efficiently\n// We use an array if the list is small enough, as that's faster than a Set, and only switch to Sets O that\nclass ObservablesArray {\n    /* CONSTRUCTOR */\n    constructor(observer) {\n        this.observer = observer;\n        this.A = [];\n        this.P = 0;\n    }\n    /* API */\n    Q(deep) {\n        if (deep) {\n            const { observer, A } = this;\n            for (let i = 0; i < A.length; i++) {\n                A[i].K.delete(observer);\n            }\n        }\n        this.P = 0;\n    }\n    R() {\n        const { observer, A, P } = this;\n        const observablesLength = A.length;\n        if (P < observablesLength) {\n            for (let i = P; i < observablesLength; i++) {\n                A[i].K.delete(observer);\n            }\n            A.length = P;\n        }\n    }\n    empty() {\n        return !this.A.length;\n    }\n    has(observable) {\n        const index = this.A.indexOf(observable);\n        return index >= 0 && index < this.P;\n    }\n    L(observable) {\n        const { observer, A, P } = this;\n        const observablesLength = A.length;\n        if (observablesLength > 0) {\n            if (A[P] === observable) {\n                this.P += 1;\n                return;\n            }\n            const index = A.indexOf(observable);\n            if (index >= 0 && index < P) {\n                return;\n            }\n            if (P < observablesLength - 1) {\n                this.R();\n            }\n            else if (P === observablesLength - 1) {\n                A[P].K.delete(observer);\n            }\n        }\n        observable.K.add(observer);\n        A[this.P++] = observable;\n        if (P === 128) { // Switching to a Set, as indexOf checks may get artbirarily expensive otherwise\n            observer.A = new ObservablesSet(observer, A);\n        }\n    }\n    C() {\n        const { A } = this;\n        for (let i = 0, l = A.length; i < l; i++) {\n            A[i].parent?.C();\n        }\n    }\n}\nclass ObservablesSet {\n    /* CONSTRUCTOR */\n    constructor(observer, A) {\n        this.observer = observer;\n        this.A = new Set(A);\n    }\n    /* API */\n    Q(deep) {\n        for (const observable of this.A) {\n            observable.K.delete(this.observer);\n        }\n    }\n    R() {\n        return;\n    }\n    empty() {\n        return !this.A.size;\n    }\n    has(observable) {\n        return this.A.has(observable);\n    }\n    L(observable) {\n        const { observer, A } = this;\n        const sizePrev = A.size;\n        observable.K.add(observer);\n        const sizeNext = A.size;\n        if (sizePrev === sizeNext)\n            return; // Cheaper than Set.has+Set.add\n        A.add(observable);\n    }\n    C() {\n        for (const observable of this.A) {\n            observable.parent?.C();\n        }\n    }\n}\n/* EXPORT */\nexport { ObservablesArray, ObservablesSet };\n","/* IMPORT */\nimport { DIRTY_NO, DIRTY_MAYBE_NO, DIRTY_MAYBE_YES, DIRTY_YES } from '../constants.js';\nimport { OWNER, SUPER_OWNER } from '../context.js';\nimport { lazyArrayPush } from '../lazy.js';\nimport { ObservablesArray, ObservablesSet } from './observables.js';\nimport Owner from './owner.js';\n/* MAIN */\nclass Observer extends Owner {\n    /* CONSTRUCTOR */\n    constructor() {\n        super();\n        /* VARIABLES */\n        this.parent = OWNER;\n        this.context = OWNER.context;\n        this.J = DIRTY_YES;\n        this.A = new ObservablesArray(this);\n        if (OWNER !== SUPER_OWNER) {\n            lazyArrayPush(this.parent, 'K', this);\n        }\n    }\n    /* API */\n    Q(deep) {\n        this.A.Q(deep);\n        super.Q(deep);\n    }\n    H(fn) {\n        this.Q(false);\n        this.J = DIRTY_MAYBE_NO; // Resetting the trip flag, we didn't re-execute just yet\n        try {\n            return this.E(fn, this, this);\n        }\n        finally {\n            this.A.R();\n        }\n    }\n    run() {\n        throw new Error('Abstract method');\n    }\n    I(J) {\n        throw new Error('Abstract method');\n    }\n    C() {\n        if (this.disposed)\n            return; // Disposed, it shouldn't be updated again\n        if (this.J === DIRTY_MAYBE_YES) { // Maybe we are dirty, let's check with our A, to be sure\n            this.A.C();\n        }\n        if (this.J === DIRTY_YES) { // We are dirty, let's H\n            this.J = DIRTY_MAYBE_NO; // Trip flag, to be able to tell if we caused ourselves to be dirty again\n            this.run();\n            if (this.J === DIRTY_MAYBE_NO) { // Not dirty anymore\n                this.J = DIRTY_NO;\n            }\n            else { // Maybe we are still dirty, let's check again\n                this.C();\n            }\n        }\n        else { // Not dirty\n            this.J = DIRTY_NO;\n        }\n    }\n}\n/* EXPORT */\nexport default Observer;\n","/* IMPORT */\nimport { DIRTY_MAYBE_YES, UNAVAILABLE, UNINITIALIZED } from '../constants.js';\nimport Observable from './observable.js';\nimport Observer from './observer.js';\n/* MAIN */\nclass Memo extends Observer {\n    /* CONSTRUCTOR */\n    constructor(fn, options) {\n        super();\n        this.fn = fn;\n        this.observable = new Observable(UNINITIALIZED, options, this);\n        if (options?.sync === true) {\n            this.sync = true;\n            this.C();\n        }\n    }\n    /* API */\n    run() {\n        const G = super.H(this.fn);\n        if (!this.disposed && this.A.empty()) {\n            this.disposed = true;\n        }\n        if (G !== UNAVAILABLE) {\n            this.observable.set(G);\n        }\n    }\n    I(J) {\n        const statusPrev = this.J;\n        if (statusPrev >= J)\n            return;\n        this.J = J;\n        if (statusPrev === DIRTY_MAYBE_YES)\n            return;\n        this.observable.I(DIRTY_MAYBE_YES);\n    }\n}\n/* EXPORT */\nexport default Memo;\n","/* IMPORT */\nimport isObservableFrozen from './is_observable_frozen.js';\nimport isUntracked from './is_untracked.js';\nimport { frozen, readable } from '../objects/callable.js';\nimport Memo from '../objects/memo.js';\n/* MAIN */\nconst memo = (fn, options) => {\n    if (isObservableFrozen(fn)) {\n        return fn;\n    }\n    else if (isUntracked(fn)) {\n        return frozen(fn());\n    }\n    else {\n        const memo = new Memo(fn, options);\n        const observable = readable(memo.observable);\n        return observable;\n    }\n};\n/* EXPORT */\nexport default memo;\n","/* IMPORT */\nimport isObservableBoolean from './is_observable_boolean.js';\nimport isObservableFrozen from './is_observable_frozen.js';\nimport isUntracked from './is_untracked.js';\nimport memo from './memo.js';\nimport { SYMBOL_OBSERVABLE_BOOLEAN } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nconst boolean = (value) => {\n    if (isFunction(value)) {\n        if (isObservableFrozen(value) || isUntracked(value)) {\n            return !!value();\n        }\n        else if (isObservableBoolean(value)) {\n            return value;\n        }\n        else {\n            const boolean = memo(() => !!value());\n            boolean[SYMBOL_OBSERVABLE_BOOLEAN] = true;\n            return boolean;\n        }\n    }\n    else {\n        return !!value;\n    }\n};\n/* EXPORT */\nexport default boolean;\n","/* IMPORT */\nimport { OWNER } from '../context.js';\nimport { lazyArrayPush } from '../lazy.js';\n/* MAIN */\nconst cleanup = (fn) => {\n    lazyArrayPush(OWNER, 'B', fn);\n};\n/* EXPORT */\nexport default cleanup;\n","/* IMPORT */\nimport { OWNER } from '../context.js';\nimport { lazyArrayPush } from '../lazy.js';\nimport Owner from './owner.js';\n/* MAIN */\nclass Context extends Owner {\n    /* CONSTRUCTOR */\n    constructor(context) {\n        super();\n        /* VARIABLES */\n        this.parent = OWNER;\n        this.context = { ...OWNER.context, ...context };\n        lazyArrayPush(this.parent, 'D', this);\n    }\n    /* API */\n    E(fn) {\n        return super.E(fn, this, undefined);\n    }\n}\n/* EXPORT */\nexport default Context;\n","/* IMPORT */\nimport { OWNER } from '../context.js';\nimport Context from '../objects/context.js';\nimport { isSymbol, noop } from '../utils.js';\nfunction context(symbolOrContext, fn) {\n    if (isSymbol(symbolOrContext)) {\n        return OWNER.context[symbolOrContext];\n    }\n    else {\n        return new Context(symbolOrContext).E(fn || noop);\n    }\n}\n/* EXPORT */\nexport default context;\n","/* IMPORT */\nimport cleanup from './cleanup.js';\nimport { readable } from '../objects/callable.js';\nimport Observable from '../objects/observable.js';\n/* MAIN */\nconst disposed = () => {\n    const observable = new Observable(false);\n    const A4 = () => observable.set(true);\n    cleanup(A4);\n    return readable(observable);\n};\n/* EXPORT */\nexport default disposed;\n","/* IMPORT */\nimport { BATCH } from '../context.js';\n/* MAIN */\n// Using 2 microtasks to give a chance to things using 1 microtask (like refs in Voby) to run first\nclass Scheduler {\n    constructor() {\n        /* VARIABLES */\n        this.A1 = [];\n        this.A2 = false;\n        this.A3 = false;\n        /* QUEUING API */\n        this.N = () => {\n            if (this.A2)\n                return;\n            if (!this.A1.length)\n                return;\n            try {\n                this.A2 = true;\n                while (true) {\n                    const queue = this.A1;\n                    if (!queue.length)\n                        break;\n                    this.A1 = [];\n                    for (let i = 0, l = queue.length; i < l; i++) {\n                        queue[i].C();\n                    }\n                }\n            }\n            finally {\n                this.A2 = false;\n            }\n        };\n        this.queue = () => {\n            if (this.A3)\n                return;\n            this.A3 = true;\n            this.resolve();\n        };\n        this.resolve = () => {\n            queueMicrotask(() => {\n                queueMicrotask(() => {\n                    if (BATCH) {\n                        BATCH.finally(this.resolve);\n                    }\n                    else {\n                        this.A3 = false;\n                        this.N();\n                    }\n                });\n            });\n        };\n        /* SCHEDULING API */\n        this.F = (effect) => {\n            this.A1.push(effect);\n            this.queue();\n        };\n    }\n}\n/* EXPORT */\nexport default new Scheduler();\n","/* IMPORT */\nimport { lazyArrayPush } from '../lazy.js';\nimport Observer from './observer.js';\nimport Scheduler from './scheduler.async.js';\nimport { SYMBOL_SUSPENSE } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nclass Effect extends Observer {\n    /* CONSTRUCTOR */\n    constructor(fn, options) {\n        super();\n        this.fn = fn;\n        if (options?.suspense !== false) {\n            const suspense = this.get(SYMBOL_SUSPENSE);\n            if (suspense) {\n                this.suspense = suspense;\n            }\n        }\n        if (options?.sync === true) {\n            this.sync = true;\n        }\n        if (options?.sync === 'init') {\n            this.init = true;\n            this.C();\n        }\n        else {\n            this.F();\n        }\n    }\n    /* API */\n    run() {\n        const G = super.H(this.fn);\n        if (isFunction(G)) {\n            lazyArrayPush(this, 'B', G);\n        }\n    }\n    F() {\n        if (this.suspense?.suspended)\n            return;\n        if (this.sync) {\n            this.C();\n        }\n        else {\n            Scheduler.F(this);\n        }\n    }\n    I(J) {\n        const statusPrev = this.J;\n        if (statusPrev >= J)\n            return;\n        this.J = J;\n        if (!this.sync || (statusPrev !== 2 && statusPrev !== 3)) { // It isn't currently executing, so let's F it\n            this.F();\n        }\n    }\n    C() {\n        if (this.suspense?.suspended)\n            return;\n        super.C();\n    }\n}\n/* EXPORT */\nexport default Effect;\n","/* IMPORT */\nimport Effect from '../objects/effect.js';\n/* MAIN */\nconst effect = (fn, options) => {\n    const effect = new Effect(fn, options);\n    const Q = () => effect.Q(true);\n    return Q;\n};\n/* EXPORT */\nexport default effect;\n","/* IMPORT */\nimport memo from './memo.js';\nimport { frozen } from '../objects/callable.js';\nimport { SYMBOL_OBSERVABLE, SYMBOL_UNTRACKED, SYMBOL_UNTRACKED_UNWRAPPED } from '../symbols.js';\nimport { isFunction } from '../utils.js';\nfunction resolve(value) {\n    if (isFunction(value)) {\n        if (SYMBOL_UNTRACKED_UNWRAPPED in value) {\n            return resolve(value());\n        }\n        else if (SYMBOL_UNTRACKED in value) {\n            return frozen(resolve(value()));\n        }\n        else if (SYMBOL_OBSERVABLE in value) {\n            return value;\n        }\n        else {\n            return memo(() => resolve(value()));\n        }\n    }\n    if (value instanceof Array) {\n        const resolved = new Array(value.length);\n        for (let i = 0, l = resolved.length; i < l; i++) {\n            resolved[i] = resolve(value[i]);\n        }\n        return resolved;\n    }\n    else {\n        return value;\n    }\n}\n/* EXPORT */\nexport default resolve;\n","/* IMPORT */\nimport { OWNER } from '../context.js';\nimport { lazySetAdd, lazySetDelete } from '../lazy.js';\nimport Owner from './owner.js';\nimport { SYMBOL_SUSPENSE } from '../symbols.js';\n/* MAIN */\nclass Root extends Owner {\n    /* CONSTRUCTOR */\n    constructor(V) {\n        super();\n        /* VARIABLES */\n        this.parent = OWNER;\n        this.context = OWNER.context;\n        if (V) {\n            const suspense = this.get(SYMBOL_SUSPENSE);\n            if (suspense) {\n                this.A0 = true;\n                lazySetAdd(this.parent, 'T', this);\n            }\n        }\n    }\n    /* API */\n    Q(deep) {\n        if (this.A0) {\n            lazySetDelete(this.parent, 'T', this);\n        }\n        super.Q(deep);\n    }\n    E(fn) {\n        const Q = () => this.Q(true);\n        const fnWithDispose = () => fn(Q);\n        return super.E(fnWithDispose, this, undefined);\n    }\n}\n/* EXPORT */\nexport default Root;\n","/* IMPORT */\nimport { OWNER } from '../context.js';\nimport { lazySetAdd, lazySetDelete } from '../lazy.js';\nimport cleanup from './cleanup.js';\nimport resolve from './resolve.js';\nimport { frozen, readable } from '../objects/callable.js';\nimport Observable from '../objects/observable.js';\nimport Root from '../objects/root.js';\nimport { SYMBOL_CACHED, SYMBOL_SUSPENSE, SYMBOL_UNCACHED } from '../symbols.js';\n/* HELPERS */\nconst DUMMY_INDEX = frozen(-1);\nclass MappedRoot extends Root {\n}\n/* MAIN */\nclass CacheKeyed {\n    /* CONSTRUCTOR */\n    constructor(fn) {\n        /* VARIABLES */\n        this.parent = OWNER;\n        this.suspense = OWNER.get(SYMBOL_SUSPENSE);\n        this.A5 = new Map();\n        this.A6 = false; // The A6 is flipped with each iteration, the T that don't have the updated one are disposed, it's like a cheap M basically\n        this.A7 = 0; // Number of previous items\n        this.A8 = 0; // Number of previous items that got reused\n        this.A9 = 0; // Number of next items\n        /* API */\n        this.cleanup = () => {\n            if (!this.A7)\n                return; // There was nothing AA, no need to cleanup\n            if (this.A7 === this.A8)\n                return; // All the previous items were reused, no need to cleanup\n            const { A5, A6 } = this;\n            if (!A5.size)\n                return; // Nothing to Q of\n            if (this.A9) { // Regular cleanup\n                A5.forEach((mapped, value) => {\n                    if (mapped.A6 === A6)\n                        return;\n                    mapped.Q(true);\n                    A5.delete(value);\n                });\n            }\n            else { // There is nothing O, disposing quickly\n                this.A5.forEach(mapped => {\n                    mapped.Q(true);\n                });\n                this.A5 = new Map();\n            }\n        };\n        this.Q = () => {\n            if (this.suspense) {\n                lazySetDelete(this.parent, 'T', this.T);\n            }\n            this.A7 = this.A5.size;\n            this.A8 = 0;\n            this.A9 = 0;\n            this.cleanup();\n        };\n        this.AA = () => {\n            this.A6 = !this.A6;\n            this.A8 = 0;\n            this.A9 = 0;\n        };\n        this.O = (values) => {\n            this.A9 = values.length;\n            this.cleanup();\n            this.A7 = this.A9;\n            this.A8 = 0;\n        };\n        this.map = (values) => {\n            this.AA();\n            const { A5, A6, fn, AB } = this;\n            const results = new Array(values.length);\n            let resultsCached = true; // Whether all results are cached, if so this enables an optimization\n            let resultsUncached = true; // Whether all results are anew, if so this enables an optimization in Voby\n            let A8 = 0;\n            for (let i = 0, l = values.length; i < l; i++) {\n                const value = values[i];\n                const cached = A5.get(value);\n                if (cached && cached.A6 !== A6) {\n                    resultsUncached = false;\n                    A8 += 1;\n                    cached.A6 = A6;\n                    cached.index?.set(i);\n                    results[i] = cached.G; //TSC\n                }\n                else {\n                    resultsCached = false;\n                    const mapped = new MappedRoot(false);\n                    if (cached) {\n                        cleanup(() => mapped.Q(true));\n                    }\n                    mapped.E(() => {\n                        let index = DUMMY_INDEX;\n                        if (AB) {\n                            mapped.index = new Observable(i);\n                            index = readable(mapped.index);\n                        }\n                        const G = results[i] = resolve(fn(value, index));\n                        mapped.A6 = A6;\n                        mapped.G = G;\n                        if (!cached) {\n                            A5.set(value, mapped);\n                        }\n                    });\n                }\n            }\n            this.A8 = A8;\n            this.O(values);\n            if (resultsCached) {\n                results[SYMBOL_CACHED] = true;\n            }\n            if (resultsUncached) {\n                results[SYMBOL_UNCACHED] = true;\n            }\n            return results;\n        };\n        this.T = () => {\n            return Array.from(this.A5.values());\n        };\n        this.fn = fn;\n        this.AB = (fn.length > 1);\n        if (this.suspense) {\n            lazySetAdd(this.parent, 'T', this.T);\n        }\n    }\n}\n/* EXPORT */\nexport default CacheKeyed;\n","/* IMPORT */\nimport { SYMBOL_OBSERVABLE } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nconst isObservable = (value) => {\n    return isFunction(value) && (SYMBOL_OBSERVABLE in value);\n};\n/* EXPORT */\nexport default isObservable;\n","/* IMPORT */\nimport isObservable from './is_observable.js';\nimport { isFunction } from '../utils.js';\nfunction get(value, getFunction = true) {\n    const is = getFunction ? isFunction : isObservable;\n    if (is(value)) {\n        return value();\n    }\n    else {\n        return value;\n    }\n}\n/* EXPORT */\nexport default get;\n","/* IMPORT */\nimport { DIRTY_MAYBE_YES, DIRTY_YES } from '../constants.js';\nimport { OWNER } from '../context.js';\nimport { lazyArrayEach, lazyArrayPush, lazySetEach } from '../lazy.js';\nimport Effect from './effect.js';\nimport Owner from './owner.js';\nimport { SYMBOL_SUSPENSE } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nclass Suspense extends Owner {\n    /* CONSTRUCTOR */\n    constructor() {\n        super();\n        /* VARIABLES */\n        this.parent = OWNER;\n        this.context = { ...OWNER.context, [SYMBOL_SUSPENSE]: this };\n        lazyArrayPush(this.parent, 'U', this);\n        this.suspended = (OWNER.get(SYMBOL_SUSPENSE)?.suspended || 0);\n    }\n    /* API */\n    A4(force) {\n        if (!this.suspended && !force)\n            return; // Already suspended, this can happen at instantion time\n        const suspendedPrev = this.suspended;\n        const suspendedNext = suspendedPrev + (force ? 1 : -1);\n        this.suspended = suspendedNext;\n        if (!!suspendedPrev === !!suspendedNext)\n            return; // Same state, nothing to pause or resume\n        /* NOTIFYING OBSERVERS, ROOTS AND SUSPENSES */\n        this.observable?.set(!!suspendedNext);\n        const notifyOwner = (owner) => {\n            lazyArrayEach(owner.D, notifyOwner);\n            lazyArrayEach(owner.K, notifyObserver);\n            lazyArrayEach(owner.U, notifySuspense);\n            lazySetEach(owner.T, notifyRoot);\n        };\n        const notifyObserver = (observer) => {\n            if (observer instanceof Effect) {\n                if (observer.J === DIRTY_MAYBE_YES || observer.J === DIRTY_YES) {\n                    if (observer.init) {\n                        observer.C();\n                    }\n                    else {\n                        observer.F();\n                    }\n                }\n            }\n            notifyOwner(observer);\n        };\n        const notifyRoot = (root) => {\n            if (isFunction(root)) {\n                root().forEach(notifyOwner);\n            }\n            else {\n                notifyOwner(root);\n            }\n        };\n        const notifySuspense = (suspense) => {\n            suspense.A4(force);\n        };\n        notifyOwner(this);\n    }\n    E(fn) {\n        return super.E(fn, this, undefined);\n    }\n}\n/* EXPORT */\nexport default Suspense;\n","/* IMPORT */\nimport boolean from './boolean.js';\nimport effect from './effect.js';\nimport get from './get.js';\nimport Suspense from '../objects/suspense.js';\n/* MAIN */\nconst suspense = (when, fn) => {\n    const suspense = new Suspense();\n    const condition = boolean(when);\n    const A4 = () => suspense.A4(get(condition));\n    effect(A4, { sync: true });\n    return suspense.E(fn);\n};\n/* EXPORT */\nexport default suspense;\n","/* IMPORT */\nimport { OWNER } from '../context.js';\nimport { lazySetAdd, lazySetDelete } from '../lazy.js';\nimport cleanup from './cleanup.js';\nimport get from './get.js';\nimport memo from './memo.js';\nimport resolve from './resolve.js';\nimport suspense from './suspense.js';\nimport { frozen, readable } from '../objects/callable.js';\nimport Observable from '../objects/observable.js';\nimport Root from '../objects/root.js';\nimport { SYMBOL_CACHED, SYMBOL_SUSPENSE, SYMBOL_UNCACHED } from '../symbols.js';\n/* HELPERS */\nconst DUMMY_INDEX = frozen(-1);\nclass MappedRoot extends Root {\n}\n/* MAIN */\n//TODO: Optimize this more\nclass CacheUnkeyed {\n    /* CONSTRUCTOR */\n    constructor(fn, pooled) {\n        /* VARIABLES */\n        this.parent = OWNER;\n        this.suspense = OWNER.get(SYMBOL_SUSPENSE);\n        this.A5 = new Map();\n        this.AC = [];\n        this.AD = 0;\n        /* API */\n        this.cleanup = () => {\n            let pooled = 0;\n            let poolable = Math.max(0, this.pooled ? this.AD - this.AC.length : 0);\n            this.A5.forEach(mapped => {\n                if (poolable > 0 && pooled++ < poolable) {\n                    mapped.suspended?.set(true);\n                    this.AC.push(mapped);\n                }\n                else {\n                    mapped.Q(true);\n                }\n            });\n        };\n        this.Q = () => {\n            if (this.suspense) {\n                lazySetDelete(this.parent, 'T', this.T);\n            }\n            this.A5.forEach(mapped => {\n                mapped.Q(true);\n            });\n            this.AC.forEach(mapped => {\n                mapped.Q(true);\n            });\n        };\n        this.map = (values) => {\n            const { A5, fn, AB } = this;\n            const cacheNext = new Map();\n            const results = new Array(values.length);\n            const AC = this.AC;\n            const pooled = this.pooled;\n            let resultsCached = true; // Whether all results are cached, if so this enables an optimization\n            let resultsUncached = true; // Whether all results are anew, if so this enables an optimization in Voby\n            let leftovers = [];\n            if (A5.size) {\n                for (let i = 0, l = values.length; i < l; i++) {\n                    const value = values[i];\n                    const cached = A5.get(value);\n                    if (cached) {\n                        resultsUncached = false;\n                        A5.delete(value);\n                        cacheNext.set(value, cached);\n                        cached.index?.set(i);\n                        results[i] = cached.G; //TSC\n                    }\n                    else {\n                        leftovers.push(i);\n                    }\n                }\n            }\n            else {\n                leftovers = new Array(results.length);\n            }\n            outer: for (let i = 0, l = leftovers.length; i < l; i++) {\n                const index = leftovers[i] || i;\n                const value = values[index];\n                const isDuplicate = cacheNext.has(value);\n                if (!isDuplicate) {\n                    for (const [key, mapped] of A5.entries()) {\n                        A5.delete(key);\n                        cacheNext.set(value, mapped);\n                        mapped.index?.set(index);\n                        mapped.value?.set(value);\n                        results[index] = mapped.G; //TSC\n                        continue outer;\n                    }\n                }\n                resultsCached = false;\n                let mapped;\n                if (pooled && AC.length) {\n                    mapped = AC.pop(); //TSC\n                    mapped.index?.set(index);\n                    mapped.value?.set(value);\n                    mapped.suspended?.set(false);\n                    results[index] = mapped.G; //TSC\n                }\n                else {\n                    mapped = new MappedRoot(false);\n                    mapped.E(() => {\n                        let $index = DUMMY_INDEX;\n                        if (AB) {\n                            mapped.index = new Observable(index);\n                            $index = readable(mapped.index);\n                        }\n                        const observable = mapped.value = new Observable(value);\n                        const suspended = pooled ? new Observable(false) : undefined;\n                        const $value = memo(() => get(observable.get())); //TSC\n                        const G = results[index] = suspended ? suspense(() => suspended.get(), () => resolve(fn($value, $index))) : resolve(fn($value, $index));\n                        mapped.value = observable;\n                        mapped.G = G;\n                        mapped.suspended = suspended;\n                    });\n                }\n                if (isDuplicate) { // Expensive, not reusable\n                    cleanup(() => mapped.Q(true));\n                }\n                else { // Cheap, reusable\n                    cacheNext.set(value, mapped);\n                }\n            }\n            this.AD = Math.max(this.AD, results.length);\n            this.cleanup();\n            this.A5 = cacheNext;\n            if (resultsCached) {\n                results[SYMBOL_CACHED] = true;\n            }\n            if (resultsUncached) {\n                results[SYMBOL_UNCACHED] = true;\n            }\n            return results;\n        };\n        this.T = () => {\n            return [...this.A5.values(), ...this.AC.values()];\n        };\n        this.fn = fn;\n        this.AB = (fn.length > 1);\n        this.pooled = pooled;\n        if (this.suspense) {\n            lazySetAdd(this.parent, 'T', this.T);\n        }\n    }\n}\n/* EXPORT */\nexport default CacheUnkeyed;\n","/* IMPORT */\nimport { SYMBOL_STORE } from '../symbols.js';\nimport { isObject } from '../utils.js';\n/* MAIN */\nconst isStore = (value) => {\n    return isObject(value) && (SYMBOL_STORE in value);\n};\n/* EXPORT */\nexport default isStore;\n","/* IMPORT */\nimport { OBSERVER, setObserver } from '../context.js';\nimport { isFunction } from '../utils.js';\nfunction untrack(fn) {\n    if (isFunction(fn)) {\n        const observerPrev = OBSERVER;\n        if (observerPrev) {\n            try {\n                setObserver(undefined);\n                return fn();\n            }\n            finally {\n                setObserver(observerPrev);\n            }\n        }\n        else {\n            return fn();\n        }\n    }\n    else {\n        return fn;\n    }\n}\n/* EXPORT */\nexport default untrack;\n","/* IMPORT */\nimport untrack from './untrack.js';\n/* MAIN */\n// This function ensures an Observable contains a fresh value, mainly to try to push it into a frozen state, if possible\nconst warmup = (value) => {\n    untrack(value);\n    return value;\n};\n/* EXPORT */\nexport default warmup;\n","/* IMPORT */\nimport get from './get.js';\nimport isObservableBoolean from './is_observable_boolean.js';\nimport isObservableFrozen from './is_observable_frozen.js';\nimport isUntracked from './is_untracked.js';\nimport memo from './memo.js';\nimport resolve from './resolve.js';\nimport warmup from './warmup.js';\nimport { frozen } from '../objects/callable.js';\nimport { is, isFunction } from '../utils.js';\n/* HELPERS */\nconst match = (condition, values, fallback) => {\n    for (let i = 0, l = values.length; i < l; i++) {\n        const value = values[i];\n        if (value.length === 1)\n            return value[0];\n        if (is(value[0], condition))\n            return value[1];\n    }\n    return fallback;\n};\nfunction _switch(when, values, fallback) {\n    const isDynamic = isFunction(when) && !isObservableFrozen(when) && !isUntracked(when);\n    if (isDynamic) {\n        if (isObservableBoolean(when)) {\n            return memo(() => resolve(match(when(), values, fallback)));\n        }\n        const value = warmup(memo(() => match(when(), values, fallback)));\n        if (isObservableFrozen(value)) {\n            return frozen(resolve(value()));\n        }\n        else {\n            return memo(() => resolve(get(value)));\n        }\n    }\n    else {\n        const value = match(get(when), values, fallback);\n        return frozen(resolve(value));\n    }\n}\n/* EXPORT */\nexport default _switch;\n","/* IMPORT */\nimport boolean from './boolean.js';\nimport _switch from './switch.js';\n/* MAIN */\nconst ternary = (when, valueTrue, valueFalse) => {\n    const condition = boolean(when);\n    return _switch(condition, [[true, valueTrue], [valueFalse]]);\n};\n/* EXPORT */\nexport default ternary;\n","/* IMPORT */\nimport { BATCH } from '../context.js';\nimport SchedulerAsync from '../objects/scheduler.async.js';\nimport SchedulerSync from '../objects/scheduler.sync.js';\n/* MAIN */\nconst isBatching = () => {\n    return !!BATCH || SchedulerAsync.A3 || SchedulerAsync.A2 || SchedulerSync.A2;\n};\n/* EXPORT */\nexport default isBatching;\n","/* IMPORT */\nimport { writable } from '../objects/callable.js';\nimport ObservableClass from '../objects/observable.js';\nfunction observable(value, options) {\n    return writable(new ObservableClass(value, options));\n}\n/* EXPORT */\nexport default observable;\n","/* IMPORT */\nimport { SYMBOL_OBSERVABLE_WRITABLE } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nconst isObservableWritable = (value) => {\n    return isFunction(value) && (SYMBOL_OBSERVABLE_WRITABLE in value);\n};\n/* EXPORT */\nexport default isObservableWritable;\n","/* IMPORT */\nimport { UNAVAILABLE } from '../constants.js';\nimport { SYMBOL_OBSERVABLE_READABLE, SYMBOL_OBSERVABLE_WRITABLE } from '../symbols.js';\nimport { isFunction } from '../utils.js';\n/* MAIN */\nconst target = (observable) => {\n    if (isFunction(observable)) {\n        return observable[SYMBOL_OBSERVABLE_READABLE] || observable[SYMBOL_OBSERVABLE_WRITABLE] || UNAVAILABLE;\n    }\n    else {\n        return observable;\n    }\n};\n/* EXPORT */\nexport default target;\n","/* IMPORT */\nimport isObservableWritable from './is_observable_writable.js';\nimport target from './target.js';\nimport { readable } from '../objects/callable.js';\n/* MAIN */\nconst readonly = (observable) => {\n    if (isObservableWritable(observable)) {\n        return readable(target(observable));\n    }\n    else {\n        return observable;\n    }\n};\n/* EXPORT */\nexport default readonly;\n","/* IMPORT */\nimport Root from '../objects/root.js';\n/* MAIN */\nconst root = (fn) => {\n    return new Root(true).E(fn);\n};\n/* EXPORT */\nexport default root;\n","/* IMPORT */\nimport { OBSERVABLE_FALSE, OBSERVABLE_TRUE } from '../constants.js';\nimport cleanup from './cleanup.js';\nimport effect from './effect.js';\nimport isObservableFrozen from './is_observable_frozen.js';\nimport memo from './memo.js';\nimport untrack from './untrack.js';\nimport warmup from './warmup.js';\nimport { readable } from '../objects/callable.js';\nimport Observable from '../objects/observable.js';\nimport { is } from '../utils.js';\n/* HELPERS */\nclass DisposableMap extends Map {\n    constructor() {\n        super(...arguments);\n        this.disposed = false;\n    }\n}\nclass SelectedObservable extends Observable {\n    constructor() {\n        super(...arguments);\n        this.AE = 1;\n    }\n    /* API */\n    call() {\n        if (this.AF.disposed)\n            return;\n        this.AE -= 1;\n        if (this.AE)\n            return;\n        this.AF.delete(this.AG);\n    }\n}\n/* MAIN */\nconst selector = (AG) => {\n    /* NORMALIZING SOURCE */\n    AG = warmup(memo(AG));\n    /* FROZEN SOURCE */\n    if (isObservableFrozen(AG)) {\n        const sourceValue = untrack(AG);\n        return (value) => {\n            return (value === sourceValue) ? OBSERVABLE_TRUE : OBSERVABLE_FALSE;\n        };\n    }\n    /* SELECTEDS */\n    let AF = new DisposableMap();\n    let selectedValue = untrack(AG);\n    effect(() => {\n        const valuePrev = selectedValue;\n        const valueNext = AG();\n        if (is(valuePrev, valueNext))\n            return;\n        selectedValue = valueNext;\n        AF.get(valuePrev)?.set(false);\n        AF.get(valueNext)?.set(true);\n    }, { suspense: false, sync: true });\n    /* CLEANUP ALL */\n    const cleanupAll = () => {\n        AF.disposed = true;\n    };\n    cleanup(cleanupAll);\n    /* SELECTOR */\n    return (value) => {\n        /* INIT */\n        let selected = AF.get(value);\n        if (selected) {\n            selected.AE += 1;\n        }\n        else {\n            selected = new SelectedObservable(value === selectedValue);\n            selected.AF = AF;\n            selected.AG = value;\n            AF.set(value, selected);\n        }\n        /* CLEANUP */\n        cleanup(selected);\n        /* RETURN */\n        return readable(selected);\n    };\n};\n/* EXPORT */\nexport default selector;\n","/* IMPORT */\nimport { BATCH, OBSERVER } from '../context.js';\nimport { lazySetAdd, lazySetDelete, lazySetEach } from '../lazy.js';\nimport cleanup from './cleanup.js';\nimport effect from './effect.js';\nimport isBatching from './is_batching.js';\nimport isStore from './is_store.js';\nimport untrack from './untrack.js';\nimport { readable } from '../objects/callable.js';\nimport ObservableClass from '../objects/observable.js';\nimport { SYMBOL_STORE, SYMBOL_STORE_KEYS, SYMBOL_STORE_OBSERVABLE, SYMBOL_STORE_TARGET, SYMBOL_STORE_VALUES, SYMBOL_STORE_UNTRACKED } from '../symbols.js';\nimport { castArray, is, isArray, isFunction, isObject, noop, nope } from '../utils.js';\n/* CLASSES */\nclass StoreMap extends Map {\n    AH(key, value) {\n        super.set(key, value);\n        return value;\n    }\n}\nclass StoreCleanable {\n    constructor() {\n        this.AE = 0;\n    }\n    listen() {\n        this.AE += 1;\n        cleanup(this);\n    }\n    call() {\n        this.AE -= 1;\n        if (this.AE)\n            return;\n        this.Q();\n    }\n    Q() { }\n}\nclass StoreKeys extends StoreCleanable {\n    constructor(parent, observable) {\n        super();\n        this.parent = parent;\n        this.observable = observable;\n    }\n    Q() {\n        this.parent.keys = undefined;\n    }\n}\nclass StoreValues extends StoreCleanable {\n    constructor(parent, observable) {\n        super();\n        this.parent = parent;\n        this.observable = observable;\n    }\n    Q() {\n        this.parent.values = undefined;\n    }\n}\nclass StoreHas extends StoreCleanable {\n    constructor(parent, key, observable) {\n        super();\n        this.parent = parent;\n        this.key = key;\n        this.observable = observable;\n    }\n    Q() {\n        this.parent.has?.delete(this.key);\n    }\n}\nclass StoreProperty extends StoreCleanable {\n    constructor(parent, key, observable, AI) {\n        super();\n        this.parent = parent;\n        this.key = key;\n        this.observable = observable;\n        this.AI = AI;\n    }\n    Q() {\n        this.parent.AJ?.delete(this.key);\n    }\n}\nconst StoreListenersRegular = {\n    /* VARIABLES */\n    AK: 0,\n    AL: new Set(),\n    AM: new Set(),\n    /* API */\n    AN: () => {\n        const { AL, AM } = StoreListenersRegular;\n        const traversed = new Set();\n        const traverse = (AI) => {\n            if (traversed.has(AI))\n                return;\n            traversed.add(AI);\n            lazySetEach(AI.AO, traverse);\n            lazySetEach(AI.AP, listener => {\n                AL.add(listener);\n            });\n        };\n        AM.forEach(traverse);\n        return () => {\n            AL.forEach(listener => {\n                listener();\n            });\n        };\n    },\n    V: (AI) => {\n        StoreListenersRegular.AM.add(AI);\n        StoreScheduler.F();\n    },\n    reset: () => {\n        StoreListenersRegular.AL = new Set();\n        StoreListenersRegular.AM = new Set();\n    }\n};\nconst StoreListenersRoots = {\n    /* VARIABLES */\n    AK: 0,\n    AM: new Map(),\n    /* API */\n    AN: () => {\n        const { AM } = StoreListenersRoots;\n        return () => {\n            AM.forEach((rootsSet, store) => {\n                const T = Array.from(rootsSet);\n                lazySetEach(store.AQ, listener => {\n                    listener(T);\n                });\n            });\n        };\n    },\n    V: (store, root) => {\n        const T = StoreListenersRoots.AM.get(store) || new Set();\n        T.add(root);\n        StoreListenersRoots.AM.set(store, T);\n        StoreScheduler.F();\n    },\n    AR: (current, parent, key) => {\n        if (!parent.AO) {\n            const root = current?.store || untrack(() => parent.store[key]);\n            StoreListenersRoots.V(parent, root);\n        }\n        else {\n            const traversed = new Set();\n            const traverse = (AI) => {\n                if (traversed.has(AI))\n                    return;\n                traversed.add(AI);\n                lazySetEach(AI.AO, parent => {\n                    if (!parent.AO) {\n                        StoreListenersRoots.V(parent, AI.store);\n                    }\n                    traverse(parent);\n                });\n            };\n            traverse(current || parent);\n        }\n    },\n    reset: () => {\n        StoreListenersRoots.AM = new Map();\n    }\n};\nconst StoreScheduler = {\n    /* VARIABLES */\n    AK: false,\n    /* API */\n    N: () => {\n        const flushRegular = StoreListenersRegular.AN();\n        const flushRoots = StoreListenersRoots.AN();\n        StoreScheduler.reset();\n        flushRegular();\n        flushRoots();\n    },\n    AS: () => {\n        if (isBatching()) {\n            if (BATCH) {\n                BATCH.finally(StoreScheduler.AS);\n            }\n            else {\n                setTimeout(StoreScheduler.AS, 0);\n            }\n        }\n        else {\n            StoreScheduler.N();\n        }\n    },\n    reset: () => {\n        StoreScheduler.AK = false;\n        StoreListenersRegular.reset();\n        StoreListenersRoots.reset();\n    },\n    F: () => {\n        if (StoreScheduler.AK)\n            return;\n        StoreScheduler.AK = true;\n        queueMicrotask(StoreScheduler.AS);\n    }\n};\n/* CONSTANTS */\nconst NODES = new WeakMap();\nconst SPECIAL_SYMBOLS = new Set([SYMBOL_STORE, SYMBOL_STORE_KEYS, SYMBOL_STORE_OBSERVABLE, SYMBOL_STORE_TARGET, SYMBOL_STORE_VALUES]);\nconst UNREACTIVE_KEYS = new Set(['__proto__', '__defineGetter__', '__defineSetter__', '__lookupGetter__', '__lookupSetter__', 'prototype', 'constructor', 'hasOwnProperty', 'isPrototypeOf', 'propertyIsEnumerable', 'toLocaleString', 'toSource', 'toString', 'valueOf']);\nconst STORE_TRAPS = {\n    /* API */\n    get: (target, key) => {\n        if (SPECIAL_SYMBOLS.has(key)) {\n            if (key === SYMBOL_STORE)\n                return true;\n            if (key === SYMBOL_STORE_TARGET)\n                return target;\n            if (key === SYMBOL_STORE_KEYS) {\n                if (isListenable()) {\n                    const AI = getNodeExisting(target);\n                    AI.keys || (AI.keys = getNodeKeys(AI));\n                    AI.keys.listen();\n                    AI.keys.observable.get();\n                }\n                return;\n            }\n            if (key === SYMBOL_STORE_VALUES) {\n                if (isListenable()) {\n                    const AI = getNodeExisting(target);\n                    AI.values || (AI.values = getNodeValues(AI));\n                    AI.values.listen();\n                    AI.values.observable.get();\n                }\n                return;\n            }\n            if (key === SYMBOL_STORE_OBSERVABLE) {\n                return (key) => {\n                    key = (typeof key === 'number') ? String(key) : key;\n                    const AI = getNodeExisting(target);\n                    const getter = AI.AT?.get(key);\n                    if (getter)\n                        return getter.bind(AI.store);\n                    AI.AJ || (AI.AJ = new StoreMap());\n                    const value = target[key];\n                    const property = AI.AJ.get(key) || AI.AJ.AH(key, getNodeProperty(AI, key, value));\n                    const options = AI.equals ? { equals: AI.equals } : undefined;\n                    property.observable || (property.observable = getNodeObservable(AI, value, options));\n                    const observable = readable(property.observable);\n                    return observable;\n                };\n            }\n        }\n        if (UNREACTIVE_KEYS.has(key))\n            return target[key];\n        const AI = getNodeExisting(target);\n        const getter = AI.AT?.get(key);\n        const value = getter || target[key];\n        AI.AJ || (AI.AJ = new StoreMap());\n        const listenable = isListenable();\n        const proxiable = isProxiable(value);\n        const property = listenable || proxiable ? AI.AJ.get(key) || AI.AJ.AH(key, getNodeProperty(AI, key, value)) : undefined;\n        if (property?.AI) {\n            lazySetAdd(property.AI, 'AO', AI);\n        }\n        if (property && listenable) {\n            const options = AI.equals ? { equals: AI.equals } : undefined;\n            property.listen();\n            property.observable || (property.observable = getNodeObservable(AI, value, options));\n            property.observable.get();\n        }\n        if (getter) {\n            return getter.call(AI.store);\n        }\n        else {\n            if (typeof value === 'function' && value === Array.prototype[key]) {\n                return function () {\n                    return value.apply(AI.store, arguments);\n                };\n            }\n            return property?.AI?.store || value;\n        }\n    },\n    set: (target, key, value) => {\n        value = getTarget(value);\n        const AI = getNodeExisting(target);\n        const setter = AI.AU?.get(key);\n        if (setter) {\n            setter.call(AI.store, value);\n        }\n        else {\n            const valuePrev = target[key];\n            const hadProperty = !!valuePrev || (key in target);\n            const equals = AI.equals || is;\n            if (hadProperty && equals(value, valuePrev) && (key !== 'length' || !Array.isArray(target)))\n                return true; // Array.prototype.length is special, it gets updated AA this trap is called, we need to special-case it...\n            target[key] = value;\n            AI.values?.observable.set(0);\n            if (!hadProperty) {\n                AI.keys?.observable.set(0);\n                AI.has?.get(key)?.observable.set(true);\n            }\n            const property = AI.AJ?.get(key);\n            if (property?.AI) {\n                lazySetDelete(property.AI, 'AO', AI);\n            }\n            if (property) {\n                property.observable?.set(value);\n                property.AI = isProxiable(value) ? NODES.get(value) || getNode(value, AI) : undefined;\n            }\n            if (property?.AI) {\n                lazySetAdd(property.AI, 'AO', AI);\n            }\n            if (StoreListenersRoots.AK) {\n                StoreListenersRoots.AR(property?.AI, AI, key);\n            }\n            if (StoreListenersRegular.AK) {\n                StoreListenersRegular.V(AI);\n            }\n        }\n        return true;\n    },\n    deleteProperty: (target, key) => {\n        const hasProperty = (key in target);\n        if (!hasProperty)\n            return true;\n        const deleted = Reflect.deleteProperty(target, key);\n        if (!deleted)\n            return false;\n        const AI = getNodeExisting(target);\n        AI.keys?.observable.set(0);\n        AI.values?.observable.set(0);\n        AI.has?.get(key)?.observable.set(false);\n        const property = AI.AJ?.get(key);\n        if (StoreListenersRoots.AK) {\n            StoreListenersRoots.AR(property?.AI, AI, key);\n        }\n        if (property?.AI) {\n            lazySetDelete(property.AI, 'AO', AI);\n        }\n        if (property) {\n            property.observable?.set(undefined);\n            property.AI = undefined;\n        }\n        if (StoreListenersRegular.AK) {\n            StoreListenersRegular.V(AI);\n        }\n        return true;\n    },\n    defineProperty: (target, key, descriptor) => {\n        const AI = getNodeExisting(target);\n        const equals = AI.equals || is;\n        const hadProperty = (key in target);\n        const descriptorPrev = Reflect.getOwnPropertyDescriptor(target, key);\n        if ('value' in descriptor && isStore(descriptor.value)) {\n            descriptor = { ...descriptor, value: getTarget(descriptor.value) };\n        }\n        if (descriptorPrev && isEqualDescriptor(descriptorPrev, descriptor, equals))\n            return true;\n        const defined = Reflect.defineProperty(target, key, descriptor);\n        if (!defined)\n            return false;\n        if (!descriptor.get) {\n            AI.AT?.delete(key);\n        }\n        else if (descriptor.get) {\n            AI.AT || (AI.AT = new StoreMap());\n            AI.AT.set(key, descriptor.get);\n        }\n        if (!descriptor.set) {\n            AI.AU?.delete(key);\n        }\n        else if (descriptor.set) {\n            AI.AU || (AI.AU = new StoreMap());\n            AI.AU.set(key, descriptor.set);\n        }\n        if (hadProperty !== !!descriptor.enumerable) {\n            AI.keys?.observable.set(0);\n        }\n        AI.has?.get(key)?.observable.set(true);\n        const property = AI.AJ?.get(key);\n        if (StoreListenersRoots.AK) {\n            StoreListenersRoots.AR(property?.AI, AI, key);\n        }\n        if (property?.AI) {\n            lazySetDelete(property.AI, 'AO', AI);\n        }\n        if (property) {\n            if ('get' in descriptor) {\n                property.observable?.set(descriptor.get);\n                property.AI = undefined;\n            }\n            else {\n                const value = descriptor.value;\n                property.observable?.set(value);\n                property.AI = isProxiable(value) ? NODES.get(value) || getNode(value, AI) : undefined;\n            }\n        }\n        if (property?.AI) {\n            lazySetAdd(property.AI, 'AO', AI);\n        }\n        if (StoreListenersRoots.AK) {\n            StoreListenersRoots.AR(property?.AI, AI, key);\n        }\n        if (StoreListenersRegular.AK) {\n            StoreListenersRegular.V(AI);\n        }\n        return true;\n    },\n    has: (target, key) => {\n        if (key === SYMBOL_STORE)\n            return true;\n        if (key === SYMBOL_STORE_TARGET)\n            return true;\n        const value = (key in target);\n        if (isListenable()) {\n            const AI = getNodeExisting(target);\n            AI.has || (AI.has = new StoreMap());\n            const has = AI.has.get(key) || AI.has.AH(key, getNodeHas(AI, key, value));\n            has.listen();\n            has.observable.get();\n        }\n        return value;\n    },\n    ownKeys: (target) => {\n        const keys = Reflect.ownKeys(target);\n        if (isListenable()) {\n            const AI = getNodeExisting(target);\n            AI.keys || (AI.keys = getNodeKeys(AI));\n            AI.keys.listen();\n            AI.keys.observable.get();\n        }\n        return keys;\n    }\n};\nconst STORE_UNTRACK_TRAPS = {\n    /* API */\n    has: (target, key) => {\n        if (key === SYMBOL_STORE_UNTRACKED)\n            return true;\n        return (key in target);\n    }\n};\n/* HELPERS */\nconst getNode = (value, parent, equals) => {\n    const store = new Proxy(value, STORE_TRAPS);\n    const gettersAndSetters = getGettersAndSetters(value);\n    const AI = { AO: parent, store };\n    if (gettersAndSetters) {\n        const { AT, AU } = gettersAndSetters;\n        if (AT)\n            AI.AT = AT;\n        if (AU)\n            AI.AU = AU;\n    }\n    if (equals === false) {\n        AI.equals = nope;\n    }\n    else if (equals) {\n        AI.equals = equals;\n    }\n    else if (parent?.equals) {\n        AI.equals = parent.equals;\n    }\n    NODES.set(value, AI);\n    return AI;\n};\nconst getNodeExisting = (value) => {\n    const AI = NODES.get(value);\n    if (!AI)\n        throw new Error('Impossible');\n    return AI;\n};\nconst getNodeFromStore = (store) => {\n    return getNodeExisting(getTarget(store));\n};\nconst getNodeKeys = (AI) => {\n    const observable = getNodeObservable(AI, 0, { equals: false });\n    const keys = new StoreKeys(AI, observable);\n    return keys;\n};\nconst getNodeValues = (AI) => {\n    const observable = getNodeObservable(AI, 0, { equals: false });\n    const values = new StoreValues(AI, observable);\n    return values;\n};\nconst getNodeHas = (AI, key, value) => {\n    const observable = getNodeObservable(AI, value);\n    const has = new StoreHas(AI, key, observable);\n    return has;\n};\nconst getNodeObservable = (AI, value, options) => {\n    return new ObservableClass(value, options);\n};\nconst getNodeProperty = (AI, key, value) => {\n    const observable = undefined;\n    const propertyNode = isProxiable(value) ? NODES.get(value) || getNode(value, AI) : undefined;\n    const property = new StoreProperty(AI, key, observable, propertyNode);\n    AI.AJ || (AI.AJ = new StoreMap());\n    AI.AJ.set(key, property);\n    return property;\n};\nconst getGettersAndSetters = (value) => {\n    if (isArray(value))\n        return;\n    let AT;\n    let AU;\n    const keys = Object.keys(value);\n    for (let i = 0, l = keys.length; i < l; i++) {\n        const key = keys[i];\n        const descriptor = Object.getOwnPropertyDescriptor(value, key);\n        if (!descriptor)\n            continue;\n        const { get, set } = descriptor;\n        if (get) {\n            AT || (AT = new StoreMap());\n            AT.set(key, get);\n        }\n        if (set) {\n            AU || (AU = new StoreMap());\n            AU.set(key, set);\n        }\n    }\n    if (!AT && !AU)\n        return;\n    return { AT, AU };\n};\nconst getStore = (value, options) => {\n    if (isStore(value))\n        return value;\n    const AI = NODES.get(value) || getNode(value, undefined, options?.equals);\n    return AI.store;\n};\nconst getTarget = (value) => {\n    if (isStore(value))\n        return value[SYMBOL_STORE_TARGET];\n    return value;\n};\nconst getUntracked = (value) => {\n    if (!isObject(value))\n        return value;\n    if (isUntracked(value))\n        return value;\n    return new Proxy(value, STORE_UNTRACK_TRAPS);\n};\nconst isEqualDescriptor = (a, b, equals) => {\n    return (!!a.configurable === !!b.configurable && !!a.enumerable === !!b.enumerable && !!a.writable === !!b.writable && equals(a.value, b.value) && a.get === b.get && a.set === b.set);\n};\nconst isListenable = () => {\n    return !!OBSERVER;\n};\nconst isProxiable = (value) => {\n    if (value === null || typeof value !== 'object')\n        return false;\n    if (SYMBOL_STORE in value)\n        return true;\n    if (SYMBOL_STORE_UNTRACKED in value)\n        return false;\n    if (isArray(value))\n        return true;\n    const prototype = Object.getPrototypeOf(value);\n    if (prototype === null)\n        return true;\n    return (Object.getPrototypeOf(prototype) === null);\n};\nconst isUntracked = (value) => {\n    if (value === null || typeof value !== 'object')\n        return false;\n    return (SYMBOL_STORE_UNTRACKED in value);\n};\n/* MAIN */\n//TODO: Maybe have the \"on\" method trigger immediately too like \"$.on\", or maybe the other way around, which seems more flexible\n//TODO: Explore converting target values back to numbers (the Proxy always receives strings) whenever possible, to save memory\n//TODO: Implement \"_onRoots\" better, perhaps provding string paths instead, which should be more powerful\nconst store = (value, options) => {\n    if (!isObject(value))\n        return value;\n    if (isUntracked(value))\n        return value;\n    return getStore(value, options);\n};\n/* UTILITIES */\nstore.on = (target, listener) => {\n    /* VARIABLES */\n    const targets = isStore(target) ? [target] : castArray(target);\n    const selectors = targets.filter(isFunction);\n    const AM = targets.filter(isStore).map(getNodeFromStore);\n    /* ON */\n    StoreListenersRegular.AK += 1;\n    const disposers = selectors.map(selector => {\n        let inited = false;\n        return effect(() => {\n            if (inited) {\n                StoreListenersRegular.AL.add(listener);\n                StoreScheduler.F();\n            }\n            inited = true;\n            selector();\n        }, { suspense: false, sync: true });\n    });\n    AM.forEach(AI => {\n        lazySetAdd(AI, 'AP', listener);\n    });\n    /* OFF */\n    return () => {\n        StoreListenersRegular.AK -= 1;\n        disposers.forEach(disposer => {\n            disposer();\n        });\n        AM.forEach(AI => {\n            lazySetDelete(AI, 'AP', listener);\n        });\n    };\n};\nstore._onRoots = (target, listener) => {\n    if (!isStore(target))\n        return noop;\n    const AI = getNodeFromStore(target);\n    if (AI.AO)\n        throw new Error('Only top-level stores are supported');\n    /* ON */\n    StoreListenersRoots.AK += 1;\n    lazySetAdd(AI, 'AQ', listener);\n    /* OFF */\n    return () => {\n        StoreListenersRoots.AK -= 1;\n        lazySetDelete(AI, 'AQ', listener);\n    };\n};\nstore.reconcile = (() => {\n    //TODO: Support AT, AU and symbols (symbols could be supported with Reflect.ownKeys, but that's like 2x slower)\n    const getType = (value) => {\n        if (isArray(value))\n            return 1;\n        if (isProxiable(value))\n            return 2;\n        return 0;\n    };\n    const reconcileOuter = (prev, next) => {\n        const uprev = getTarget(prev);\n        const unext = getTarget(next);\n        reconcileInner(prev, next);\n        const prevType = getType(uprev);\n        const nextType = getType(unext);\n        if (prevType === 1 || nextType === 1) {\n            prev.length = next.length;\n        }\n        return prev;\n    };\n    const reconcileInner = (prev, next) => {\n        const uprev = getTarget(prev);\n        const unext = getTarget(next);\n        const prevKeys = Object.keys(uprev);\n        const nextKeys = Object.keys(unext);\n        for (let i = 0, l = nextKeys.length; i < l; i++) {\n            const key = nextKeys[i];\n            const prevValue = uprev[key];\n            const nextValue = unext[key];\n            if (!is(prevValue, nextValue)) {\n                const prevType = getType(prevValue);\n                const nextType = getType(nextValue);\n                if (prevType && prevType === nextType) {\n                    reconcileInner(prev[key], nextValue);\n                    if (prevType === 1) {\n                        prev[key].length = nextValue.length;\n                    }\n                }\n                else {\n                    prev[key] = nextValue;\n                }\n            }\n            else if (prevValue === undefined && !(key in uprev)) {\n                prev[key] = undefined;\n            }\n        }\n        for (let i = 0, l = prevKeys.length; i < l; i++) {\n            const key = prevKeys[i];\n            if (!(key in unext)) {\n                delete prev[key];\n            }\n        }\n        return prev;\n    };\n    const reconcile = (prev, next) => {\n        return untrack(() => {\n            return reconcileOuter(prev, next);\n        });\n    };\n    return reconcile;\n})();\nstore.untrack = (value) => {\n    return getUntracked(value);\n};\nstore.unwrap = (value) => {\n    return getTarget(value);\n};\n/* EXPORT */\nexport default store;\n","/* IMPORT */\nimport { OBSERVABLE_FALSE } from '../constants.js';\nimport { OWNER } from '../context.js';\nimport { readable } from '../objects/callable.js';\nimport Observable from '../objects/observable.js';\nimport { SYMBOL_SUSPENSE } from '../symbols.js';\n/* MAIN */\nconst suspended = () => {\n    const suspense = OWNER.get(SYMBOL_SUSPENSE);\n    if (!suspense)\n        return OBSERVABLE_FALSE;\n    const observable = (suspense.observable || (suspense.observable = new Observable(!!suspense.suspended)));\n    return readable(observable);\n};\n/* EXPORT */\nexport default suspended;\n","/* IMPORT */\nimport Scheduler from '../objects/scheduler.async.js';\n/* MAIN */\nconst tick = () => {\n    Scheduler.N();\n};\n/* EXPORT */\nexport default tick;\n","/* IMPORT */\nimport { OWNER } from '../context.js';\nimport memo from './memo.js';\nimport $ from './observable.js';\nimport resolve from './resolve.js';\n/* MAIN */\nconst tryCatch = (value, fn) => {\n    const observable = $();\n    return memo(() => {\n        const error = observable();\n        if (error) {\n            const reset = () => observable(undefined);\n            const options = { error, reset };\n            return resolve(fn(options));\n        }\n        else {\n            OWNER.S = observable;\n            return resolve(value);\n        }\n    });\n};\n/* EXPORT */\nexport default tryCatch;\n","/* IMPORT */\nimport untrack from './untrack.js';\nimport { SYMBOL_UNTRACKED } from '../symbols.js';\nimport { isFunction } from '../utils.js';\nfunction untracked(fn) {\n    const untracked = isFunction(fn) ? (...args) => untrack(() => fn(...args)) : () => fn;\n    untracked[SYMBOL_UNTRACKED] = true;\n    return untracked;\n}\n/* EXPORT */\nexport default untracked;\n","/* IMPORT */\nimport { OBSERVER, OWNER } from '../context.js';\n/* MAIN */\nconst _with = () => {\n    const owner = OWNER;\n    const observer = OBSERVER;\n    return (fn) => {\n        return owner.E(() => fn(), owner, observer);\n    };\n};\n/* EXPORT */\nexport default _with;\n","/* IMPORT */\nimport { SYMBOL_OBSERVABLE, SYMBOL_OBSERVABLE_FROZEN, SYMBOL_OBSERVABLE_READABLE, SYMBOL_UNCACHED, SYMBOL_UNTRACKED, SYMBOL_UNTRACKED_UNWRAPPED } from './oby.js';\n/* MAIN */\nconst CONTEXTS_DATA = new WeakMap();\nconst DIRECTIVES = {};\nconst SYMBOL_SUSPENSE = Symbol('Suspense');\nconst SYMBOL_SUSPENSE_COLLECTOR = Symbol('Suspense.Collector');\nconst SYMBOL_TEMPLATE_ACCESSOR = Symbol('Template.Accessor');\nconst SYMBOLS_DIRECTIVES = {};\n/* EXPORT */\nexport { SYMBOL_OBSERVABLE, SYMBOL_OBSERVABLE_FROZEN, SYMBOL_OBSERVABLE_READABLE, SYMBOL_UNCACHED, SYMBOL_UNTRACKED, SYMBOL_UNTRACKED_UNWRAPPED };\nexport { CONTEXTS_DATA, DIRECTIVES, SYMBOL_SUSPENSE, SYMBOL_SUSPENSE_COLLECTOR, SYMBOL_TEMPLATE_ACCESSOR, SYMBOLS_DIRECTIVES };\n","/* IMPORT */\nimport { SYMBOL_UNTRACKED_UNWRAPPED } from '../constants.js';\n/* MAIN */\nconst wrapElement = (element) => {\n    element[SYMBOL_UNTRACKED_UNWRAPPED] = true;\n    return element;\n};\n/* EXPORT */\nexport default wrapElement;\n","/* IMPORT */\n/* MAIN */\nconst createComment = document.createComment.bind(document, '');\nconst createHTMLNode = document.createElement.bind(document);\nconst createSVGNode = document.createElementNS.bind(document, 'http://www.w3.org/2000/svg');\nconst createText = document.createTextNode.bind(document);\n/* EXPORT */\nexport { createComment, createHTMLNode, createSVGNode, createText };\n","/* IMPORT */\nimport { SYMBOL_OBSERVABLE_FROZEN, SYMBOL_OBSERVABLE_READABLE, SYMBOL_TEMPLATE_ACCESSOR, SYMBOL_UNTRACKED, SYMBOL_UNTRACKED_UNWRAPPED } from '../constants.js';\n/* MAIN */\nconst { assign } = Object;\nconst castArray = (value) => {\n    return isArray(value) ? value : [value];\n};\nconst castError = (exception) => {\n    if (isError(exception))\n        return exception;\n    if (isString(exception))\n        return new Error(exception);\n    return new Error('Unknown error');\n};\nconst flatten = (arr) => {\n    for (let i = 0, l = arr.length; i < l; i++) {\n        if (!isArray(arr[i]))\n            continue;\n        return arr.flat(Infinity);\n    }\n    return arr;\n};\nconst indexOf = (() => {\n    const _indexOf = Array.prototype.indexOf;\n    return (arr, value) => {\n        return _indexOf.call(arr, value);\n    };\n})();\nconst { isArray } = Array;\nconst isBoolean = (value) => {\n    return typeof value === 'boolean';\n};\nconst isComponent = (value) => {\n    return isFunction(value) && (SYMBOL_UNTRACKED_UNWRAPPED in value);\n};\nconst isError = (value) => {\n    return value instanceof Error;\n};\nconst isFalsy = (value) => {\n    return !value;\n};\nconst isFunction = (value) => {\n    return typeof value === 'function';\n};\nconst isFunctionReactive = (value) => {\n    return !(SYMBOL_UNTRACKED in value || SYMBOL_UNTRACKED_UNWRAPPED in value || SYMBOL_OBSERVABLE_FROZEN in value || value[SYMBOL_OBSERVABLE_READABLE]?.parent?.disposed);\n};\nconst isNil = (value) => {\n    return value === null || value === undefined;\n};\nconst isNode = (value) => {\n    return value instanceof Node;\n};\nconst isObject = (value) => {\n    return typeof value === 'object' && value !== null;\n};\nconst isPromise = (value) => {\n    return value instanceof Promise;\n};\nconst isString = (value) => {\n    return typeof value === 'string';\n};\nconst isSVG = (value) => {\n    return !!value['isSVG'];\n};\nconst isSVGElement = (() => {\n    const svgRe = /^(t(ext$|s)|s[vwy]|g)|^set|tad|ker|p(at|s)|s(to|c$|ca|k)|r(ec|cl)|ew|us|f($|e|s)|cu|n[ei]|l[ty]|[GOP]/; //URL: https://regex101.com/r/Ck4kFp/1\n    const svgCache = {};\n    return (element) => {\n        const cached = svgCache[element];\n        return (cached !== undefined) ? cached : (svgCache[element] = !element.includes('-') && svgRe.test(element));\n    };\n})();\nconst isTemplateAccessor = (value) => {\n    return isFunction(value) && (SYMBOL_TEMPLATE_ACCESSOR in value);\n};\nconst isTruthy = (value) => {\n    return !!value;\n};\nconst isVoidChild = (value) => {\n    return value === null || value === undefined || typeof value === 'boolean' || typeof value === 'symbol';\n};\nconst noop = () => {\n    return;\n};\nconst once = (fn) => {\n    let called = false;\n    let result;\n    return () => {\n        if (!called) {\n            called = true;\n            result = fn();\n        }\n        return result;\n    };\n};\n/* EXPORT */\nexport { assign, castArray, castError, flatten, indexOf, isArray, isBoolean, isComponent, isError, isFalsy, isFunction, isFunctionReactive, isNil, isNode, isObject, isPromise, isString, isSVG, isSVGElement, isTemplateAccessor, isTruthy, isVoidChild, noop, once };\n","/* IMPORT */\nimport isObservable from '../methods/is_observable.js';\nimport { isArray, isFunction } from '../utils/lang.js';\nfunction useResolved(values, callback, resolveFunction) {\n    const isResolvable = (resolveFunction !== false && callback !== false) ? isFunction : isObservable;\n    const resolve = (value) => isResolvable(value) ? value() : value;\n    if (isArray(values)) {\n        const resolved = values.map(resolve);\n        if (isFunction(callback)) {\n            return callback.apply(undefined, resolved);\n        }\n        else {\n            return resolved;\n        }\n    }\n    else {\n        const resolved = resolve(values);\n        if (isFunction(callback)) {\n            return callback(resolved);\n        }\n        else {\n            return resolved;\n        }\n    }\n}\n/* EXPORT */\nexport default useResolved;\n","/* IMPORT */\nimport useEffect from './use_effect.js';\nimport useResolved from './use_resolved.js';\nimport $$ from '../methods/SS.js';\nimport { castArray } from '../utils/lang.js';\nfunction useEventListener(target, event, handler, options) {\n    return useEffect(() => {\n        const fn = $$(handler, false);\n        return useResolved([target, event, options], (target, event, options) => {\n            const targets = castArray(target);\n            targets.forEach(target => {\n                target?.addEventListener(event, fn, options);\n            });\n            return () => {\n                targets.forEach(target => {\n                    target?.removeEventListener(event, fn, options);\n                });\n            };\n        });\n    }, { sync: 'init' });\n}\n/* EXPORT */\nexport default useEventListener;\n","/* IMPORT */\nimport useCleanup from './use_cleanup.js';\nimport useEventListener from './use_event_listener.js';\nimport { castArray } from '../utils/lang.js';\n/* MAIN */\nconst useAbortController = (signals = []) => {\n    signals = castArray(signals);\n    const controller = new AbortController();\n    const abort = controller.abort.bind(controller);\n    const aborted = signals.some(signal => signal.aborted);\n    if (aborted) {\n        abort();\n    }\n    else {\n        signals.forEach(signal => useEventListener(signal, 'abort', abort));\n        useCleanup(abort);\n    }\n    return controller;\n};\n/* EXPORT */\nexport default useAbortController;\n","/* IMPORT */\nimport useAbortController from './use_abort_controller.js';\n/* MAIN */\nconst useAbortSignal = (signals = []) => {\n    return useAbortController(signals).signal;\n};\n/* EXPORT */\nexport default useAbortSignal;\n","/* IMPORT */\nimport useEffect from './use_effect.js';\nimport useSuspended from './use_suspended.js';\nimport $$ from '../methods/SS.js';\nimport untrack from '../methods/untrack.js';\n/* MAIN */\nconst useScheduler = ({ loop, once, callback, cancel, schedule }) => {\n    let executed = false;\n    let suspended = useSuspended();\n    let tickId;\n    const work = (value) => {\n        executed = true;\n        if ($$(loop))\n            tick();\n        $$(callback, false)(value);\n    };\n    const tick = () => {\n        tickId = untrack(() => schedule(work));\n    };\n    const dispose = () => {\n        untrack(() => cancel(tickId));\n    };\n    useEffect(() => {\n        if (once && executed)\n            return;\n        if (suspended())\n            return;\n        tick();\n        return dispose;\n    }, { suspense: false });\n    return dispose;\n};\n/* EXPORT */\nexport default useScheduler;\n","/* IMPORT */\nimport useScheduler from './use_scheduler.js';\n/* MAIN */\nconst useAnimationFrame = (callback) => {\n    return useScheduler({\n        callback,\n        once: true,\n        cancel: cancelAnimationFrame,\n        schedule: requestAnimationFrame\n    });\n};\n/* EXPORT */\nexport default useAnimationFrame;\n","/* IMPORT */\nimport useScheduler from './use_scheduler.js';\n/* MAIN */\nconst useAnimationLoop = (callback) => {\n    return useScheduler({\n        callback,\n        loop: true,\n        cancel: cancelAnimationFrame,\n        schedule: requestAnimationFrame\n    });\n};\n/* EXPORT */\nexport default useAnimationLoop;\n","/* IMPORT */\nimport { SYMBOL_SUSPENSE, SYMBOL_SUSPENSE_COLLECTOR } from '../constants.js';\nimport useCleanup from '../hooks/use_cleanup.js';\nimport useMemo from '../hooks/use_memo.js';\nimport $ from '../methods/S.js';\nimport { context, resolve } from '../oby.js';\n/* MAIN */\nconst SuspenseContext = {\n    create: () => {\n        const count = $(0);\n        const active = useMemo(() => !!count());\n        const increment = (nr = 1) => count(prev => prev + nr);\n        const decrement = (nr = -1) => queueMicrotask(() => count(prev => prev + nr));\n        const data = { active, increment, decrement };\n        const collector = context(SYMBOL_SUSPENSE_COLLECTOR);\n        if (collector) {\n            collector?.register(data);\n            useCleanup(() => collector.unregister(data));\n        }\n        return data;\n    },\n    get: () => {\n        return context(SYMBOL_SUSPENSE);\n    },\n    wrap: (fn) => {\n        const data = SuspenseContext.create();\n        return context({ [SYMBOL_SUSPENSE]: data }, () => {\n            return resolve(() => fn(data));\n        });\n    }\n};\n/* EXPORT */\nexport default SuspenseContext;\n","/* IMPORT */\nimport SuspenseContext from './suspense.context.js';\nimport useCleanup from '../hooks/use_cleanup.js';\n/* MAIN */\nclass SuspenseManager {\n    constructor() {\n        /* VARIABLES */\n        this.suspenses = new Map();\n        /* API */\n        this.change = (suspense, nr) => {\n            const counter = this.suspenses.get(suspense) || 0;\n            const counterNext = Math.max(0, counter + nr);\n            if (counter === counterNext)\n                return;\n            if (counterNext) {\n                this.suspenses.set(suspense, counterNext);\n            }\n            else {\n                this.suspenses.delete(suspense);\n            }\n            if (nr > 0) {\n                suspense.increment(nr);\n            }\n            else {\n                suspense.decrement(nr);\n            }\n        };\n        this.suspend = () => {\n            const suspense = SuspenseContext.get();\n            if (!suspense)\n                return;\n            this.change(suspense, 1);\n            useCleanup(() => {\n                this.change(suspense, -1);\n            });\n        };\n        this.unsuspend = () => {\n            this.suspenses.forEach((counter, suspense) => {\n                this.change(suspense, -counter);\n            });\n        };\n    }\n}\n;\n/* EXPORT */\nexport default SuspenseManager;\n","/* IMPORT */\nimport useEffect from './use_effect.js';\n/* HELPERS */\nconst options = {\n    sync: 'init'\n};\n/* MAIN */\n// This function exists for convenience, and to avoid creating unnecessary options objects\nconst useRenderEffect = (fn) => {\n    return useEffect(fn, options);\n};\n/* EXPORT */\nexport default useRenderEffect;\n","/* IMPORT */\nimport SuspenseManager from '../components/suspense.manager.js';\nimport useCheapDisposed from './use_cheap_disposed.js';\nimport useReadonly from './use_readonly.js';\nimport useRenderEffect from './use_render_effect.js';\nimport $ from '../methods/S.js';\nimport $$ from '../methods/SS.js';\nimport { assign, castError, isPromise } from '../utils/lang.js';\n/* MAIN */\n//TODO: Maybe port this to oby, as \"from\"\n//TODO: Option for returning the resource as a store, where also the returned value gets wrapped in a store\n//FIXME: SSR demo: toggling back and forth between /home and /loader is buggy, /loader gets loaded with no data, which is wrong\nconst useResource = (fetcher) => {\n    const pending = $(true);\n    const error = $();\n    const value = $();\n    const latest = $();\n    const { suspend, unsuspend } = new SuspenseManager();\n    const resourcePending = { pending: true, get value() { return void suspend(); }, get latest() { return latest() ?? void suspend(); } };\n    const resourceRejected = { pending: false, get error() { return error(); }, get value() { throw error(); }, get latest() { throw error(); } };\n    const resourceResolved = { pending: false, get value() { return value(); }, get latest() { return value(); } };\n    const resourceFunction = { pending: () => pending(), error: () => error(), value: () => resource().value, latest: () => resource().latest };\n    const resource = $(resourcePending);\n    useRenderEffect(() => {\n        const disposed = useCheapDisposed();\n        const onPending = () => {\n            pending(true);\n            error(undefined);\n            value(undefined);\n            resource(resourcePending);\n        };\n        const onResolve = (result) => {\n            if (disposed())\n                return;\n            pending(false);\n            error(undefined);\n            value(() => result);\n            latest(() => result);\n            resource(resourceResolved);\n        };\n        const onReject = (exception) => {\n            if (disposed())\n                return;\n            pending(false);\n            error(castError(exception));\n            value(undefined);\n            latest(undefined);\n            resource(resourceRejected);\n        };\n        const onFinally = () => {\n            if (disposed())\n                return;\n            unsuspend();\n        };\n        const fetch = () => {\n            try {\n                const value = $$(fetcher());\n                if (isPromise(value)) {\n                    onPending();\n                    value.then(onResolve, onReject).finally(onFinally);\n                }\n                else {\n                    onResolve(value);\n                    onFinally();\n                }\n            }\n            catch (error) {\n                onReject(error);\n                onFinally();\n            }\n        };\n        fetch();\n    });\n    return assign(useReadonly(resource), resourceFunction);\n};\n/* EXPORT */\nexport default useResource;\n","/* IMPORT */\nimport useAbortSignal from './use_abort_signal.js';\nimport useResolved from './use_resolved.js';\nimport useResource from './use_resource.js';\n/* MAIN */\nconst useFetch = (request, init) => {\n    return useResource(() => {\n        return useResolved([request, init], (request, init = {}) => {\n            const signal = useAbortSignal(init.signal || []);\n            init.signal = signal;\n            return fetch(request, init);\n        });\n    });\n};\n/* EXPORT */\nexport default useFetch;\n","/* IMPORT */\nimport useScheduler from './use_scheduler.js';\nimport $$ from '../methods/SS.js';\n/* MAIN */\nconst useIdleCallback = (callback, options) => {\n    return useScheduler({\n        callback,\n        once: true,\n        cancel: cancelIdleCallback,\n        schedule: callback => requestIdleCallback(callback, $$(options))\n    });\n};\n/* EXPORT */\nexport default useIdleCallback;\n","/* IMPORT */\nimport useScheduler from './use_scheduler.js';\nimport $$ from '../methods/SS.js';\n/* MAIN */\nconst useIdleLoop = (callback, options) => {\n    return useScheduler({\n        callback,\n        loop: true,\n        cancel: cancelIdleCallback,\n        schedule: callback => requestIdleCallback(callback, $$(options))\n    });\n};\n/* EXPORT */\nexport default useIdleLoop;\n","/* IMPORT */\nimport useScheduler from './use_scheduler.js';\nimport $$ from '../methods/SS.js';\n/* MAIN */\nconst useInterval = (callback, ms) => {\n    return useScheduler({\n        callback,\n        cancel: clearInterval,\n        schedule: callback => setInterval(callback, $$(ms))\n    });\n};\n/* EXPORT */\nexport default useInterval;\n","/* IMPORT */\nimport useResource from './use_resource.js';\nimport $$ from '../methods/SS.js';\n/* MAIN */\nconst usePromise = (promise) => {\n    return useResource(() => $$(promise));\n};\n/* EXPORT */\nexport default usePromise;\n","/* IMPORT */\nimport useScheduler from './use_scheduler.js';\nimport $$ from '../methods/SS.js';\n/* MAIN */\nconst useTimeout = (callback, ms) => {\n    return useScheduler({\n        callback,\n        once: true,\n        cancel: clearTimeout,\n        schedule: callback => setTimeout(callback, $$(ms))\n    });\n};\n/* EXPORT */\nexport default useTimeout;\n","/* IMPORT */\nimport { useCleanup } from './/index.js';\n/* MAIN */\nconst useCheapDisposed = () => {\n    let disposed = false;\n    const get = () => disposed;\n    const set = () => disposed = true;\n    useCleanup(set);\n    return get;\n};\n/* EXPORT */\nexport default useCheapDisposed;\n","/* IMPORT */\nimport useCheapDisposed from './use_cheap_disposed.js';\nimport { with as _with } from '../oby.js';\n/* MAIN */\n//TODO: Maybe port this to oby\n//TODO: Maybe special-case this to use one shared mirotask per microtask\nconst useMicrotask = (fn) => {\n    const disposed = useCheapDisposed();\n    const runWithOwner = _with();\n    queueMicrotask(() => {\n        if (disposed())\n            return;\n        runWithOwner(fn);\n    });\n};\n/* EXPORT */\nexport default useMicrotask;\n","/* IMPORT */\nimport { isString } from './lang.js';\n/* MAIN */\n// This function exists to optimize memory usage in some cases, where the classList API won't be touched without sacrificing performance\nconst classesToggle = (element, classes, force) => {\n    const { className } = element;\n    /* OPTIMIZED PATH */\n    if (isString(className)) {\n        if (!className) { // Optimized addition/deletion\n            if (force) { // Optimized addition\n                element.className = classes;\n                return;\n            }\n            else { // Optimized deletion, nothing to do really\n                return;\n            }\n        }\n        else if (!force && className === classes) { // Optimized deletion\n            element.className = '';\n            return;\n        }\n    }\n    /* REGULAR PATH */\n    if (classes.includes(' ')) {\n        classes.split(' ').forEach(cls => {\n            if (!cls.length)\n                return;\n            element.classList.toggle(cls, !!force);\n        });\n    }\n    else {\n        element.classList.toggle(classes, !!force);\n    }\n};\n/* EXPORT */\nexport { classesToggle };\n","/**\n * ISC License\n *\n * Copyright (c) 2020, Andrea Giammarchi, @WebReflection\n *\n * Permission to use, copy, modify, and/or distribute this software for any\n * purpose with or without fee is hereby granted, provided that the above\n * copyright notice and this permission notice appear in all copies.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n * REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n * AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n * INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n * LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE\n * OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n * PERFORMANCE OF THIS SOFTWARE.\n */\n/* MAIN */\n// This is just a slightly customized version of udomdiff: with types, no accessor function and support for diffing unwrapped nodes\nconst dummyNode = document.createComment('');\nconst beforeDummyWrapper = [dummyNode];\nconst afterDummyWrapper = [dummyNode];\nconst diff = (parent, before, after, nextSibling) => {\n    if (before === after)\n        return;\n    if (before instanceof Node) {\n        if (after instanceof Node) {\n            if (before.parentNode === parent) { // Safety check, since setChildStatic may trigger this\n                parent.replaceChild(after, before);\n                return;\n            }\n            else {\n                //TODO: Optimize this branch too\n            }\n        }\n        beforeDummyWrapper[0] = before;\n        before = beforeDummyWrapper;\n    }\n    if (after instanceof Node) {\n        afterDummyWrapper[0] = after;\n        after = afterDummyWrapper;\n    }\n    const bLength = after.length;\n    let aEnd = before.length;\n    let bEnd = bLength;\n    let aStart = 0;\n    let bStart = 0;\n    let map = null;\n    let removable;\n    while (aStart < aEnd || bStart < bEnd) {\n        // append head, tail, or nodes in between: fast path\n        if (aEnd === aStart) {\n            // we could be in a situation where the rest of nodes that\n            // need to be added are not at the end, and in such case\n            // the node to `insertBefore`, if the index is more than 0\n            // must be retrieved, otherwise it's gonna be the first item.\n            const node = bEnd < bLength ?\n                (bStart ?\n                    (after[bStart - 1].nextSibling) :\n                    after[bEnd - bStart]) :\n                nextSibling;\n            if (bStart < bEnd) {\n                // parent.insertBefore(after[bStart++], node);\n                if (node) {\n                    node.before.apply(node, after.slice(bStart, bEnd));\n                }\n                else {\n                    parent.append.apply(parent, after.slice(bStart, bEnd));\n                }\n                bStart = bEnd;\n            }\n        }\n        // remove head or tail: fast path\n        else if (bEnd === bStart) {\n            while (aStart < aEnd) {\n                // remove the node only if it's unknown or not live\n                if (!map || !map.has(before[aStart])) {\n                    removable = before[aStart];\n                    if (removable.parentNode === parent) { // Safety check, since setChildStatic may trigger this\n                        parent.removeChild(removable);\n                    }\n                }\n                aStart++;\n            }\n        }\n        // same node: fast path\n        else if (before[aStart] === after[bStart]) {\n            aStart++;\n            bStart++;\n        }\n        // same tail: fast path\n        else if (before[aEnd - 1] === after[bEnd - 1]) {\n            aEnd--;\n            bEnd--;\n        }\n        // The once here single last swap \"fast path\" has been removed in v1.1.0\n        // https://github.com/WebReflection/udomdiff/blob/single-final-swap/esm/index.js#L69-L85\n        // reverse swap: also fast path\n        else if (before[aStart] === after[bEnd - 1] &&\n            after[bStart] === before[aEnd - 1]) {\n            // this is a \"shrink\" operation that could happen in these cases:\n            // [1, 2, 3, 4, 5]\n            // [1, 4, 3, 2, 5]\n            // or asymmetric too\n            // [1, 2, 3, 4, 5]\n            // [1, 2, 3, 5, 6, 4]\n            const node = before[--aEnd].nextSibling;\n            parent.insertBefore(after[bStart++], before[aStart++].nextSibling);\n            parent.insertBefore(after[--bEnd], node);\n            // mark the future index as identical (yeah, it's dirty, but cheap )\n            // The main reason to do this, is that when a[aEnd] will be reached,\n            // the loop will likely be on the fast path, as identical to b[bEnd].\n            // In the best case scenario, the next loop will skip the tail,\n            // but in the worst one, this node will be considered as already\n            // processed, bailing out pretty quickly from the map index check\n            before[aEnd] = after[bEnd];\n        }\n        // map based fallback, \"slow\" path\n        else {\n            // the map requires an O(bEnd - bStart) operation once\n            // to store all future nodes indexes for later purposes.\n            // In the worst case scenario, this is a full O(N) cost,\n            // and such scenario happens at least when all nodes are different,\n            // but also if both first and last items of the lists are different\n            if (!map) {\n                map = new Map;\n                let i = bStart;\n                while (i < bEnd)\n                    map.set(after[i], i++);\n            }\n            // if it's a future node, hence it needs some handling\n            if (map.has(before[aStart])) {\n                // grab the index of such node, 'cause it might have been processed\n                const index = map.get(before[aStart]);\n                // if it's not already processed, look on demand for the next LCS\n                if (bStart < index && index < bEnd) {\n                    let i = aStart;\n                    // counts the amount of nodes that are the same in the future\n                    let sequence = 1;\n                    while (++i < aEnd && i < bEnd && map.get(before[i]) === (index + sequence))\n                        sequence++;\n                    // effort decision here: if the sequence is longer than replaces\n                    // needed to reach such sequence, which would brings again this loop\n                    // to the fast path, prepend the difference before a sequence,\n                    // and move only the future list index forward, so that aStart\n                    // and bStart will be aligned again, hence on the fast path.\n                    // An example considering aStart and bStart are both 0:\n                    // a: [1, 2, 3, 4]\n                    // b: [7, 1, 2, 3, 6]\n                    // this would place 7 before 1 and, from that time on, 1, 2, and 3\n                    // will be processed at zero cost\n                    if (sequence > (index - bStart)) {\n                        const node = before[aStart];\n                        if (bStart < index) {\n                            // parent.insertBefore(after[bStart++], node);\n                            if (node) {\n                                node.before.apply(node, after.slice(bStart, index));\n                            }\n                            else {\n                                parent.append.apply(parent, after.slice(bStart, index));\n                            }\n                            bStart = index;\n                        }\n                    }\n                    // if the effort wasn't good enough, fallback to a replace,\n                    // moving both source and target indexes forward, hoping that some\n                    // similar node will be found later on, to go back to the fast path\n                    else {\n                        parent.replaceChild(after[bStart++], before[aStart++]);\n                    }\n                }\n                // otherwise move the source forward, 'cause there's nothing to do\n                else\n                    aStart++;\n            }\n            // this node has no meaning in the future list, so it's more than safe\n            // to remove it, and check the next live node out instead, meaning\n            // that only the live list index should be forwarded\n            else {\n                removable = before[aStart++];\n                if (removable.parentNode === parent) { // Safety check, since setChildStatic may trigger this\n                    parent.removeChild(removable);\n                }\n            }\n        }\n    }\n    beforeDummyWrapper[0] = dummyNode;\n    afterDummyWrapper[0] = dummyNode;\n};\n/* EXPORT */\nexport default diff;\n","/* IMPORT */\n/* HELPERS */\nconst NOOP_CHILDREN = [];\n/* MAIN */\nconst FragmentUtils = {\n    make: () => {\n        return {\n            values: undefined,\n            length: 0\n        };\n    },\n    makeWithNode: (node) => {\n        return {\n            values: node,\n            length: 1\n        };\n    },\n    makeWithFragment: (fragment) => {\n        return {\n            values: fragment,\n            fragmented: true,\n            length: 1\n        };\n    },\n    getChildrenFragmented: (thiz, children = []) => {\n        const { values, length } = thiz;\n        if (!length)\n            return children;\n        if (values instanceof Array) {\n            for (let i = 0, l = values.length; i < l; i++) {\n                const value = values[i];\n                if (value instanceof Node) {\n                    children.push(value);\n                }\n                else {\n                    FragmentUtils.getChildrenFragmented(value, children);\n                }\n            }\n        }\n        else {\n            if (values instanceof Node) {\n                children.push(values);\n            }\n            else {\n                FragmentUtils.getChildrenFragmented(values, children);\n            }\n        }\n        return children;\n    },\n    getChildren: (thiz) => {\n        if (!thiz.length)\n            return NOOP_CHILDREN;\n        if (!thiz.fragmented)\n            return thiz.values;\n        if (thiz.length === 1)\n            return FragmentUtils.getChildren(thiz.values);\n        return FragmentUtils.getChildrenFragmented(thiz);\n    },\n    pushFragment: (thiz, fragment) => {\n        FragmentUtils.pushValue(thiz, fragment);\n        thiz.fragmented = true;\n    },\n    pushNode: (thiz, node) => {\n        FragmentUtils.pushValue(thiz, node);\n    },\n    pushValue: (thiz, value) => {\n        const { values, length } = thiz; //TSC\n        if (length === 0) {\n            thiz.values = value;\n        }\n        else if (length === 1) {\n            thiz.values = [values, value];\n        }\n        else {\n            values.push(value);\n        }\n        thiz.length += 1;\n    },\n    replaceWithNode: (thiz, node) => {\n        thiz.values = node;\n        delete thiz.fragmented;\n        thiz.length = 1;\n    },\n    replaceWithFragment: (thiz, fragment) => {\n        thiz.values = fragment.values;\n        thiz.fragmented = fragment.fragmented;\n        thiz.length = fragment.length;\n    }\n};\n/* EXPORT */\nexport default FragmentUtils;\n","/* IMPORT */\nimport { SYMBOL_UNCACHED } from '../constants.js';\nimport isObservable from '../methods/is_observable.js';\nimport useRenderEffect from '../hooks/use_render_effect.js';\nimport $$ from '../methods/SS.js';\nimport { createText } from './creators.js';\nimport { isArray, isFunction, isFunctionReactive, isString } from './lang.js';\n/* MAIN */\nconst resolveChild = (value, setter, _dynamic = false) => {\n    if (isFunction(value)) {\n        if (!isFunctionReactive(value)) {\n            resolveChild(value(), setter, _dynamic);\n        }\n        else {\n            useRenderEffect(() => {\n                resolveChild(value(), setter, true);\n            });\n        }\n    }\n    else if (isArray(value)) {\n        const [values, hasObservables] = resolveArraysAndStatics(value);\n        values[SYMBOL_UNCACHED] = value[SYMBOL_UNCACHED]; // Preserving this special symbol\n        setter(values, hasObservables || _dynamic);\n    }\n    else {\n        setter(value, _dynamic);\n    }\n};\nconst resolveClass = (classes, resolved = {}) => {\n    if (isString(classes)) {\n        classes.split(/\\s+/g).filter(Boolean).filter(cls => {\n            resolved[cls] = true;\n        });\n    }\n    else if (isFunction(classes)) {\n        resolveClass(classes(), resolved);\n    }\n    else if (isArray(classes)) {\n        classes.forEach(cls => {\n            resolveClass(cls, resolved); //TSC\n        });\n    }\n    else if (classes) {\n        for (const key in classes) {\n            const value = classes[key];\n            const isActive = !!$$(value);\n            if (!isActive)\n                continue;\n            resolved[key] = true;\n        }\n    }\n    return resolved;\n};\nconst resolveStyle = (styles, resolved = {}) => {\n    if (isString(styles)) { //TODO: split into the individual styles, to be able to merge them with other styles\n        return styles;\n    }\n    else if (isFunction(styles)) {\n        return resolveStyle(styles(), resolved);\n    }\n    else if (isArray(styles)) {\n        styles.forEach(style => {\n            resolveStyle(style, resolved); //TSC\n        });\n    }\n    else if (styles) {\n        for (const key in styles) {\n            const value = styles[key];\n            resolved[key] = $$(value);\n        }\n    }\n    return resolved;\n};\nconst resolveArraysAndStatics = (() => {\n    // This function does 3 things:\n    // 1. It deeply flattens the array, only if actually needed though (!)\n    // 2. It resolves statics, it's important to resolve them soon enough or they will be re-created multiple times (!)\n    // 3. It checks if we found any Observables along the way, avoiding looping over the array another time in the future\n    const DUMMY_RESOLVED = [];\n    const resolveArraysAndStaticsInner = (values, resolved, hasObservables) => {\n        for (let i = 0, l = values.length; i < l; i++) {\n            const value = values[i];\n            const type = typeof value;\n            if (type === 'string' || type === 'number' || type === 'bigint') { // Static\n                if (resolved === DUMMY_RESOLVED)\n                    resolved = values.slice(0, i);\n                resolved.push(createText(value));\n            }\n            else if (type === 'object' && isArray(value)) { // Array\n                if (resolved === DUMMY_RESOLVED)\n                    resolved = values.slice(0, i);\n                hasObservables = resolveArraysAndStaticsInner(value, resolved, hasObservables)[1];\n            }\n            else if (type === 'function' && isObservable(value)) { // Observable\n                if (resolved !== DUMMY_RESOLVED)\n                    resolved.push(value);\n                hasObservables = true;\n            }\n            else { // Something else\n                if (resolved !== DUMMY_RESOLVED)\n                    resolved.push(value);\n            }\n        }\n        if (resolved === DUMMY_RESOLVED)\n            resolved = values;\n        return [resolved, hasObservables];\n    };\n    return (values) => {\n        return resolveArraysAndStaticsInner(values, DUMMY_RESOLVED, false);\n    };\n})();\n/* EXPORT */\nexport { resolveChild, resolveClass, resolveStyle, resolveArraysAndStatics };\n","/* IMPORT */\nimport { DIRECTIVES, SYMBOLS_DIRECTIVES, SYMBOL_UNCACHED } from '../constants.js';\nimport useMicrotask from '../hooks/use_microtask.js';\nimport useRenderEffect from '../hooks/use_render_effect.js';\nimport isStore from '../methods/is_store.js';\nimport $$ from '../methods/SS.js';\nimport store from '../methods/store.js';\nimport untrack from '../methods/untrack.js';\nimport { context, with as _with } from '../oby.js';\nimport { SYMBOL_STORE_OBSERVABLE } from '../oby.js';\nimport { classesToggle } from './classlist.js';\nimport { createText, createComment } from './creators.js';\nimport diff from './diff.js';\nimport FragmentUtils from './fragment.js';\nimport { castArray, flatten, isArray, isBoolean, isFunction, isFunctionReactive, isNil, isString, isSVG, isTemplateAccessor } from './lang.js';\nimport { resolveChild, resolveClass, resolveStyle } from './resolvers.js';\n/* MAIN */\nconst setAttributeStatic = (() => {\n    const attributesBoolean = new Set(['allowfullscreen', 'async', 'autofocus', 'autoplay', 'checked', 'controls', 'default', 'disabled', 'formnovalidate', 'hidden', 'indeterminate', 'ismap', 'loop', 'multiple', 'muted', 'nomodule', 'novalidate', 'open', 'playsinline', 'readonly', 'required', 'reversed', 'seamless', 'selected']);\n    const attributeCamelCasedRe = /e(r[HRWrv]|[Vawy])|Con|l(e[Tcs]|c)|s(eP|y)|a(t[rt]|u|v)|Of|Ex|f[XYa]|gt|hR|d[Pg]|t[TXYd]|[UZq]/; //URL: https://regex101.com/r/I8Wm4S/1\n    const attributesCache = {};\n    const uppercaseRe = /[A-Z]/g;\n    const normalizeKeySvg = (key) => {\n        return attributesCache[key] || (attributesCache[key] = attributeCamelCasedRe.test(key) ? key : key.replace(uppercaseRe, char => `-${char.toLowerCase()}`));\n    };\n    return (element, key, value) => {\n        if (isSVG(element)) {\n            key = (key === 'xlinkHref' || key === 'xlink:href') ? 'href' : normalizeKeySvg(key);\n            if (isNil(value) || (value === false && attributesBoolean.has(key))) {\n                element.removeAttribute(key);\n            }\n            else {\n                element.setAttribute(key, String(value));\n            }\n        }\n        else {\n            if (isNil(value) || (value === false && attributesBoolean.has(key))) {\n                element.removeAttribute(key);\n            }\n            else {\n                value = (value === true) ? '' : String(value);\n                element.setAttribute(key, value);\n            }\n        }\n    };\n})();\nconst setAttribute = (element, key, value) => {\n    if (isFunction(value) && isFunctionReactive(value)) {\n        useRenderEffect(() => {\n            setAttributeStatic(element, key, value());\n        });\n    }\n    else {\n        setAttributeStatic(element, key, $$(value));\n    }\n};\nconst setChildReplacementFunction = (parent, fragment, child) => {\n    useRenderEffect(() => {\n        let valueNext = child();\n        while (isFunction(valueNext)) {\n            valueNext = valueNext();\n        }\n        setChildStatic(parent, fragment, false, valueNext, true);\n    });\n};\nconst setChildReplacementText = (child, childPrev) => {\n    if (childPrev.nodeType === 3) {\n        childPrev.nodeValue = child;\n        return childPrev;\n    }\n    else {\n        const parent = childPrev.parentElement;\n        if (!parent)\n            throw new Error('Invalid child replacement');\n        const textNode = createText(child);\n        parent.replaceChild(textNode, childPrev);\n        return textNode;\n    }\n};\nconst setChildReplacement = (child, childPrev) => {\n    const type = typeof child;\n    if (type === 'string' || type === 'number' || type === 'bigint') {\n        setChildReplacementText(String(child), childPrev);\n    }\n    else {\n        const parent = childPrev.parentElement;\n        if (!parent)\n            throw new Error('Invalid child replacement');\n        const fragment = FragmentUtils.makeWithNode(childPrev);\n        if (type === 'function') {\n            setChildReplacementFunction(parent, fragment, child); //TSC\n        }\n        else {\n            setChild(parent, child, fragment);\n        }\n    }\n};\nconst setChildStatic = (parent, fragment, fragmentOnly, child, dynamic) => {\n    if (!dynamic && child === undefined)\n        return; // Ignoring static undefined children, avoiding inserting some useless placeholder nodes\n    const prev = FragmentUtils.getChildren(fragment);\n    const prevIsArray = (prev instanceof Array);\n    const prevLength = prevIsArray ? prev.length : 1;\n    const prevFirst = prevIsArray ? prev[0] : prev;\n    const prevLast = prevIsArray ? prev[prevLength - 1] : prev;\n    const prevSibling = prevLast?.nextSibling || null;\n    if (prevLength === 0) { // Fast path for appending a node the first time\n        const type = typeof child;\n        if (type === 'string' || type === 'number' || type === 'bigint') {\n            const textNode = createText(child);\n            if (!fragmentOnly) {\n                parent.appendChild(textNode);\n            }\n            FragmentUtils.replaceWithNode(fragment, textNode);\n            return;\n        }\n        else if (type === 'object' && child !== null && typeof child.nodeType === 'number') { //TSC\n            const node = child;\n            if (!fragmentOnly) {\n                parent.insertBefore(node, null);\n            }\n            FragmentUtils.replaceWithNode(fragment, node);\n            return;\n        }\n    }\n    if (prevLength === 1 && prevFirst.parentNode) { // Fast path for single text child replacing a mounted node\n        const type = typeof child;\n        if (type === 'string' || type === 'number' || type === 'bigint') {\n            const node = setChildReplacementText(String(child), prevFirst); //TODO: maybe \"fragmentOnly\" should be passed on here, but it seems unnecessary\n            FragmentUtils.replaceWithNode(fragment, node);\n            return;\n        }\n    }\n    const fragmentNext = FragmentUtils.make();\n    const children = (Array.isArray(child) ? child : [child]); //TSC\n    for (let i = 0, l = children.length; i < l; i++) {\n        const child = children[i];\n        const type = typeof child;\n        if (type === 'string' || type === 'number' || type === 'bigint') {\n            FragmentUtils.pushNode(fragmentNext, createText(child));\n        }\n        else if (type === 'object' && child !== null && typeof child.nodeType === 'number') {\n            FragmentUtils.pushNode(fragmentNext, child);\n        }\n        else if (type === 'function') {\n            const fragment = FragmentUtils.make();\n            let childFragmentOnly = !fragmentOnly; // Avoiding mutating the DOM immediately, letting the parent handle it\n            FragmentUtils.pushFragment(fragmentNext, fragment);\n            resolveChild(child, (child, dynamic) => {\n                const fragmentOnly = childFragmentOnly;\n                childFragmentOnly = false;\n                setChildStatic(parent, fragment, fragmentOnly, child, dynamic);\n            });\n        }\n    }\n    let next = FragmentUtils.getChildren(fragmentNext);\n    let nextLength = fragmentNext.length;\n    if (nextLength === 0 && prevLength === 1 && prevFirst.nodeType === 8) { // It's a placeholder already, no need to replace it\n        return;\n    }\n    if (!fragmentOnly && (nextLength === 0 || (prevLength === 1 && prevFirst.nodeType === 8) || children[SYMBOL_UNCACHED])) { // Fast path for removing all children and/or replacing the placeholder\n        const { childNodes } = parent;\n        if (childNodes.length === prevLength) { // Maybe this fragment doesn't handle all children but only a range of them, checking for that here\n            parent.textContent = '';\n            if (nextLength === 0) { // Placeholder, to keep the right spot in the array of children\n                const placeholder = (fragmentNext.placeholder || (fragmentNext.placeholder = fragment.placeholder || (fragment.placeholder = createComment())));\n                FragmentUtils.pushNode(fragmentNext, placeholder);\n                if (next !== fragmentNext.values) {\n                    next = placeholder;\n                    nextLength += 1;\n                }\n            }\n            if (prevSibling) {\n                if (next instanceof Array) {\n                    prevSibling.before.apply(prevSibling, next);\n                }\n                else {\n                    parent.insertBefore(next, prevSibling);\n                }\n            }\n            else {\n                if (next instanceof Array) {\n                    parent.append.apply(parent, next);\n                }\n                else {\n                    parent.append(next);\n                }\n            }\n            FragmentUtils.replaceWithFragment(fragment, fragmentNext);\n            return;\n        }\n    }\n    if (nextLength === 0) { // Placeholder, to keep the right spot in the array of children\n        const placeholder = (fragmentNext.placeholder || (fragmentNext.placeholder = fragment.placeholder || (fragment.placeholder = createComment())));\n        FragmentUtils.pushNode(fragmentNext, placeholder);\n        if (next !== fragmentNext.values) {\n            next = placeholder;\n            nextLength += 1;\n        }\n    }\n    if (!fragmentOnly) {\n        diff(parent, prev, next, prevSibling);\n    }\n    FragmentUtils.replaceWithFragment(fragment, fragmentNext);\n};\nconst setChild = (parent, child, fragment = FragmentUtils.make()) => {\n    resolveChild(child, setChildStatic.bind(undefined, parent, fragment, false));\n};\nconst setClassStatic = classesToggle;\nconst setClass = (element, key, value) => {\n    if (isFunction(value) && isFunctionReactive(value)) {\n        useRenderEffect(() => {\n            setClassStatic(element, key, value());\n        });\n    }\n    else {\n        setClassStatic(element, key, $$(value));\n    }\n};\nconst setClassBooleanStatic = (element, value, key, keyPrev) => {\n    if (keyPrev && keyPrev !== true) {\n        setClassStatic(element, keyPrev, false);\n    }\n    if (key && key !== true) {\n        setClassStatic(element, key, value);\n    }\n};\nconst setClassBoolean = (element, value, key) => {\n    if (isFunction(key) && isFunctionReactive(key)) {\n        let keyPrev;\n        useRenderEffect(() => {\n            const keyNext = key();\n            setClassBooleanStatic(element, value, keyNext, keyPrev);\n            keyPrev = keyNext;\n        });\n    }\n    else {\n        setClassBooleanStatic(element, value, $$(key));\n    }\n};\nconst setClassesStatic = (element, object, objectPrev) => {\n    if (isString(object)) {\n        if (isSVG(element)) {\n            element.setAttribute('class', object);\n        }\n        else {\n            element.className = object;\n        }\n    }\n    else {\n        if (objectPrev) {\n            if (isString(objectPrev)) {\n                if (objectPrev) {\n                    if (isSVG(element)) {\n                        element.setAttribute('class', '');\n                    }\n                    else {\n                        element.className = '';\n                    }\n                }\n            }\n            else if (isArray(objectPrev)) {\n                objectPrev = store.unwrap(objectPrev);\n                for (let i = 0, l = objectPrev.length; i < l; i++) {\n                    if (!objectPrev[i])\n                        continue;\n                    setClassBoolean(element, false, objectPrev[i]);\n                }\n            }\n            else {\n                objectPrev = store.unwrap(objectPrev);\n                for (const key in objectPrev) {\n                    if (object && key in object)\n                        continue;\n                    setClass(element, key, false);\n                }\n            }\n        }\n        if (isArray(object)) {\n            if (isStore(object)) {\n                for (let i = 0, l = object.length; i < l; i++) {\n                    const fn = untrack(() => isFunction(object[i]) ? object[i] : object[SYMBOL_STORE_OBSERVABLE](String(i))); //TSC\n                    setClassBoolean(element, true, fn);\n                }\n            }\n            else {\n                for (let i = 0, l = object.length; i < l; i++) {\n                    if (!object[i])\n                        continue;\n                    setClassBoolean(element, true, object[i]);\n                }\n            }\n        }\n        else {\n            if (isStore(object)) {\n                for (const key in object) {\n                    const fn = untrack(() => isFunction(object[key]) ? object[key] : object[SYMBOL_STORE_OBSERVABLE](key)); //TSC\n                    setClass(element, key, fn);\n                }\n            }\n            else {\n                for (const key in object) {\n                    setClass(element, key, object[key]);\n                }\n            }\n        }\n    }\n};\nconst setClasses = (element, object) => {\n    if (isFunction(object) || isArray(object)) {\n        let objectPrev;\n        useRenderEffect(() => {\n            const objectNext = resolveClass(object);\n            setClassesStatic(element, objectNext, objectPrev);\n            objectPrev = objectNext;\n        });\n    }\n    else {\n        setClassesStatic(element, object);\n    }\n};\nconst setDirective = (element, directive, args) => {\n    const symbol = SYMBOLS_DIRECTIVES[directive] || Symbol();\n    const data = context(symbol) || DIRECTIVES[symbol];\n    if (!data)\n        throw new Error(`Directive \"${directive}\" not found`);\n    const call = () => data.fn(element, ...castArray(args)); //TSC\n    if (data.immediate) {\n        call();\n    }\n    else {\n        useMicrotask(call);\n    }\n};\nconst setEventStatic = (() => {\n    //TODO: Maybe delete event delegation\n    //TODO: Maybe delegate more events: [onmousemove, onmouseout, onmouseover, onpointerdown, onpointermove, onpointerout, onpointerover, onpointerup, ontouchend, ontouchmove, ontouchstart]\n    const delegatedEvents = {\n        onauxclick: ['_onauxclick', false],\n        onbeforeinput: ['_onbeforeinput', false],\n        onclick: ['_onclick', false],\n        ondblclick: ['_ondblclick', false],\n        onfocusin: ['_onfocusin', false],\n        onfocusout: ['_onfocusout', false],\n        oninput: ['_oninput', false],\n        onkeydown: ['_onkeydown', false],\n        onkeyup: ['_onkeyup', false],\n        onmousedown: ['_onmousedown', false],\n        onmouseup: ['_onmouseup', false]\n    };\n    const delegate = (event) => {\n        const key = `_${event}`;\n        document.addEventListener(event.slice(2), event => {\n            const targets = event.composedPath();\n            let target = null;\n            Object.defineProperty(event, 'currentTarget', {\n                configurable: true,\n                get() {\n                    return target;\n                }\n            });\n            for (let i = 0, l = targets.length; i < l; i++) {\n                target = targets[i];\n                const handler = target[key];\n                if (!handler)\n                    continue;\n                handler(event);\n                if (event.cancelBubble)\n                    break;\n            }\n            target = null;\n        });\n    };\n    return (element, event, value) => {\n        if (event.startsWith('onmiddleclick')) { // Special-cased synthetic event, somewhat ugly but very convenient\n            const _value = value;\n            event = `onauxclick${event.slice(13)}`;\n            value = _value && ((event) => event['button'] === 1 && _value(event));\n        }\n        const delegated = delegatedEvents[event];\n        if (delegated) {\n            if (!delegated[1]) { // Not actually delegating yet\n                delegated[1] = true;\n                delegate(event);\n            }\n            element[delegated[0]] = value;\n        }\n        else if (event.endsWith('passive')) {\n            const isCapture = event.endsWith('capturepassive');\n            const type = event.slice(2, -7 - (isCapture ? 7 : 0));\n            const key = `_${event}`;\n            const valuePrev = element[key];\n            if (valuePrev)\n                element.removeEventListener(type, valuePrev, { capture: isCapture });\n            if (value)\n                element.addEventListener(type, value, { passive: true, capture: isCapture });\n            element[key] = value;\n        }\n        else if (event.endsWith('capture')) {\n            const type = event.slice(2, -7);\n            const key = `_${event}`;\n            const valuePrev = element[key];\n            if (valuePrev)\n                element.removeEventListener(type, valuePrev, { capture: true });\n            if (value)\n                element.addEventListener(type, value, { capture: true });\n            element[key] = value;\n        }\n        else {\n            element[event] = value;\n        }\n    };\n})();\nconst setEvent = (element, event, value) => {\n    setEventStatic(element, event, value);\n};\nconst setHTMLStatic = (element, value) => {\n    element.innerHTML = String(isNil(value) ? '' : value);\n};\nconst setHTML = (element, value) => {\n    useRenderEffect(() => {\n        setHTMLStatic(element, $$($$(value).__html));\n    });\n};\nconst setPropertyStatic = (element, key, value) => {\n    if (key === 'tabIndex' && isBoolean(value)) {\n        value = value ? 0 : undefined;\n    }\n    if (key === 'value') {\n        if (element.tagName === 'PROGRESS') {\n            value ?? (value = null);\n        }\n        else if (element.tagName === 'SELECT' && !element['_$inited']) {\n            element['_$inited'] = true;\n            queueMicrotask(() => element[key] = value);\n        }\n    }\n    try { // Trying setting the property\n        element[key] = value;\n        if (isNil(value)) {\n            setAttributeStatic(element, key, null);\n        }\n    }\n    catch { // If it fails, maybe because like HTMLInputElement.form there's only a getter, we try as an attribute instead //TODO: Figure out something better than this\n        setAttributeStatic(element, key, value);\n    }\n};\nconst setProperty = (element, key, value) => {\n    if (isFunction(value) && isFunctionReactive(value)) {\n        useRenderEffect(() => {\n            setPropertyStatic(element, key, value());\n        });\n    }\n    else {\n        setPropertyStatic(element, key, $$(value));\n    }\n};\nconst setRef = (element, value) => {\n    if (isNil(value))\n        return;\n    const values = flatten(castArray(value)).filter(Boolean); //TODO: Maybe special-case this to be faster for non-array values, or 2-values arrays\n    if (!values.length)\n        return;\n    useMicrotask(() => untrack(() => values.forEach(value => value?.(element))));\n};\nconst setStyleStatic = (() => {\n    // From Preact: https://github.com/preactjs/preact/blob/e703a62b77c9de45e886d8a7f59bd0db658318f9/src/constants.js#L3\n    // const propertyNonDimensionalRe = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n    // From this Preact issue: https://github.com/preactjs/preact/issues/2607\n    const propertyNonDimensionalRe = /^(-|f[lo].*[^se]$|g.{5,}[^ps]$|z|o[pr]|(W.{5})?[lL]i.*(t|mp)$|an|(bo|s).{4}Im|sca|m.{6}[ds]|ta|c.*[st]$|wido|ini)/i;\n    const propertyNonDimensionalCache = {};\n    return (element, key, value) => {\n        if (key.charCodeAt(0) === 45) { // /^-/\n            if (isNil(value)) {\n                element.style.removeProperty(key);\n            }\n            else {\n                element.style.setProperty(key, String(value));\n            }\n        }\n        else if (isNil(value)) {\n            element.style[key] = null;\n        }\n        else {\n            element.style[key] = (isString(value) || (propertyNonDimensionalCache[key] || (propertyNonDimensionalCache[key] = propertyNonDimensionalRe.test(key))) ? value : `${value}px`);\n        }\n    };\n})();\nconst setStyle = (element, key, value) => {\n    if (isFunction(value) && isFunctionReactive(value)) {\n        useRenderEffect(() => {\n            setStyleStatic(element, key, value());\n        });\n    }\n    else {\n        setStyleStatic(element, key, $$(value));\n    }\n};\nconst setStylesStatic = (element, object, objectPrev) => {\n    if (isString(object)) {\n        element.setAttribute('style', object);\n    }\n    else {\n        if (objectPrev) {\n            if (isString(objectPrev)) {\n                if (objectPrev) {\n                    element.style.cssText = '';\n                }\n            }\n            else {\n                objectPrev = store.unwrap(objectPrev);\n                for (const key in objectPrev) {\n                    if (object && key in object)\n                        continue;\n                    setStyleStatic(element, key, null);\n                }\n            }\n        }\n        if (isStore(object)) {\n            for (const key in object) {\n                const fn = untrack(() => isFunction(object[key]) ? object[key] : object[SYMBOL_STORE_OBSERVABLE](key)); //TSC\n                setStyle(element, key, fn);\n            }\n        }\n        else {\n            for (const key in object) {\n                setStyle(element, key, object[key]);\n            }\n        }\n    }\n};\nconst setStyles = (element, object) => {\n    if (isFunction(object) || isArray(object)) {\n        let objectPrev;\n        useRenderEffect(() => {\n            const objectNext = resolveStyle(object);\n            setStylesStatic(element, objectNext, objectPrev);\n            objectPrev = objectNext;\n        });\n    }\n    else {\n        setStylesStatic(element, $$(object));\n    }\n};\nconst setTemplateAccessor = (element, key, value) => {\n    if (key === 'children') {\n        const placeholder = createText(''); // Using a Text node rather than a Comment as the former may be what we actually want ultimately\n        element.insertBefore(placeholder, null);\n        value(element, 'setChildReplacement', undefined, placeholder);\n    }\n    else if (key === 'ref') {\n        value(element, 'setRef');\n    }\n    else if (key === 'style') {\n        value(element, 'setStyles');\n    }\n    else if (key === 'class') {\n        if (!isSVG(element)) {\n            element.className = ''; // Ensuring the attribute is present\n        }\n        value(element, 'setClasses');\n    }\n    else if (key === 'dangerouslySetInnerHTML') {\n        value(element, 'setHTML');\n    }\n    else if (key.charCodeAt(0) === 111 && key.charCodeAt(1) === 110) { // /^on/\n        value(element, 'setEvent', key.toLowerCase());\n    }\n    else if (key.charCodeAt(0) === 117 && key.charCodeAt(3) === 58) { // /^u..:/\n        value(element, 'setDirective', key.slice(4));\n    }\n    else if (key === 'innerHTML' || key === 'outerHTML' || key === 'textContent' || key === 'className') {\n        // Forbidden props\n    }\n    else if (key in element && !isSVG(element)) {\n        value(element, 'setProperty', key);\n    }\n    else {\n        element.setAttribute(key, ''); // Ensuring the attribute is present\n        value(element, 'setAttribute', key);\n    }\n};\nconst setProp = (element, key, value) => {\n    if (value === undefined)\n        return; // Ignoring undefined props, for performance\n    if (isTemplateAccessor(value)) {\n        setTemplateAccessor(element, key, value);\n    }\n    else if (key === 'children') {\n        setChild(element, value);\n    }\n    else if (key === 'ref') {\n        setRef(element, value);\n    }\n    else if (key === 'style') {\n        setStyles(element, value);\n    }\n    else if (key === 'class') {\n        setClasses(element, value);\n    }\n    else if (key === 'dangerouslySetInnerHTML') {\n        setHTML(element, value);\n    }\n    else if (key.charCodeAt(0) === 111 && key.charCodeAt(1) === 110) { // /^on/\n        setEvent(element, key.toLowerCase(), value);\n    }\n    else if (key.charCodeAt(0) === 117 && key.charCodeAt(3) === 58) { // /^u..:/\n        setDirective(element, key.slice(4), value);\n    }\n    else if (key === 'innerHTML' || key === 'outerHTML' || key === 'textContent' || key === 'className') {\n        // Forbidden props\n    }\n    else if (key in element && !isSVG(element)) {\n        setProperty(element, key, value);\n    }\n    else {\n        setAttribute(element, key, value);\n    }\n};\nconst setProps = (element, object) => {\n    for (const key in object) {\n        setProp(element, key, object[key]);\n    }\n};\n/* EXPORT */\nexport { setAttributeStatic, setAttribute, setChildReplacementFunction, setChildReplacementText, setChildReplacement, setChildStatic, setChild, setClassStatic, setClass, setClassBooleanStatic, setClassesStatic, setClasses, setEventStatic, setEvent, setHTMLStatic, setHTML, setPropertyStatic, setProperty, setRef, setStyleStatic, setStyle, setStylesStatic, setStyles, setTemplateAccessor, setProp, setProps };\n","/* IMPORT */\nimport untrack from './untrack.js';\nimport wrapElement from './wrap_element.js';\nimport { createHTMLNode, createSVGNode } from '../utils/creators.js';\nimport { isFunction, isNil, isNode, isString, isSVGElement, isVoidChild } from '../utils/lang.js';\nimport { setProps } from '../utils/setters.js';\n/* MAIN */\n// It's important to wrap components, so that they can be executed in the right order, from parent to child, rather than from child to parent in some cases\nconst createElement = (component, props, ..._children) => {\n    const { children: __children, key, ref, ...rest } = (props || {}); //TSC\n    const children = (_children.length === 1) ? _children[0] : (_children.length === 0) ? __children : _children;\n    if (isFunction(component)) {\n        const props = rest;\n        if (!isNil(children))\n            props.children = children;\n        if (!isNil(ref))\n            props.ref = ref;\n        return wrapElement(() => {\n            return untrack(() => component.call(component, props)); //TSC\n        });\n    }\n    else if (isString(component)) {\n        const props = rest;\n        const isSVG = isSVGElement(component);\n        const createNode = isSVG ? createSVGNode : createHTMLNode;\n        if (!isVoidChild(children))\n            props.children = children;\n        if (!isNil(ref))\n            props.ref = ref;\n        return wrapElement(() => {\n            const child = createNode(component); //TSC\n            if (isSVG)\n                child['isSVG'] = true;\n            untrack(() => setProps(child, props));\n            return child;\n        });\n    }\n    else if (isNode(component)) {\n        return wrapElement(() => component);\n    }\n    else {\n        throw new Error('Invalid component');\n    }\n};\n/* EXPORT */\nexport default createElement;\n","/* IMPORT */\nimport useMemo from '../hooks/use_memo.js';\nimport createElement from '../methods/create_element.js';\nimport resolve from '../methods/resolve.js';\nimport $$ from '../methods/SS.js';\n/* MAIN */\nconst Dynamic = ({ component, props, children }) => {\n    return useMemo(() => {\n        return resolve(createElement($$(component, false), $$(props), children));\n    });\n};\n/* EXPORT */\nexport default Dynamic;\n","/* IMPORT */\nimport untrack from '../methods/untrack.js';\nimport { tryCatch } from '../oby.js';\nimport { isFunction } from '../utils/lang.js';\n/* MAIN */\nconst ErrorBoundary = ({ fallback, children }) => {\n    return tryCatch(children, props => untrack(() => isFunction(fallback) ? fallback(props) : fallback));\n};\n/* EXPORT */\nexport default ErrorBoundary;\n","/* IMPORT */\nimport { for as _for } from '../oby.js';\nfunction For({ values, fallback, pooled, unkeyed, children }) {\n    return _for(values, children, fallback, { pooled, unkeyed }); //TSC\n}\n/* EXPORT */\nexport default For;\n","/* IMPORT */\nimport cleanup from './cleanup.js';\nimport CacheKeyed from './for.cache.keyed.js';\nimport CacheUnkeyed from './for.cache.unkeyed.js';\nimport get from './get.js';\nimport isObservable from './is_observable.js';\nimport isStore from './is_store.js';\nimport memo from './memo.js';\nimport resolve from './resolve.js';\nimport untrack from './untrack.js';\nimport { frozen } from '../objects/callable.js';\nimport { SYMBOL_CACHED, SYMBOL_STORE_VALUES } from '../symbols.js';\nimport { isArray, isEqual } from '../utils.js';\nfunction _for(values, fn, fallback = [], options) {\n    if (isArray(values) && !isStore(values)) { // Fast path for plain arrays\n        const isUnkeyed = !!options?.unkeyed;\n        return frozen(untrack(() => {\n            if (values.length) {\n                return values.map((value, index) => {\n                    return resolve(fn(isUnkeyed && !isObservable(value) ? frozen(value) : value, index));\n                });\n            }\n            else {\n                return resolve(fallback);\n            }\n        }));\n    }\n    else { // Regular path\n        const { Q, map } = options?.unkeyed ? new CacheUnkeyed(fn, !!options.pooled) : new CacheKeyed(fn); //TSC\n        cleanup(Q);\n        const value = memo(() => {\n            return get(values) ?? [];\n        }, {\n            equals: (next, prev) => {\n                return !!next && !!prev && !next.length && !prev.length && !isStore(next) && !isStore(prev);\n            }\n        });\n        return memo(() => {\n            const array = value();\n            if (isStore(array)) {\n                array[SYMBOL_STORE_VALUES];\n            }\n            return untrack(() => {\n                const results = map(array);\n                return results?.length ? results : resolve(fallback);\n            });\n        }, {\n            equals: (next, prev) => {\n                return isArray(next) && !!next[SYMBOL_CACHED] && isArray(prev) && isEqual(next, prev);\n            }\n        });\n    }\n}\n/* EXPORT */\nexport default _for;\n","/* IMPORT */\n/* MAIN */\nconst Fragment = ({ children }) => {\n    return children;\n};\n/* EXPORT */\nexport default Fragment;\n","/* IMPORT */\nimport useMemo from './use_memo.js';\nimport $$ from '../methods/SS.js';\nimport { isNil } from '../utils/lang.js';\n/* MAIN */\n//TODO: Maybe port this to oby, as \"when\" or \"is\" or \"guarded\"\n//TODO: Optimize this, checking if the value is actually potentially reactive\nconst useGuarded = (value, guard) => {\n    let valueLast;\n    const guarded = useMemo(() => {\n        const current = $$(value);\n        if (!guard(current))\n            return valueLast;\n        return valueLast = current;\n    });\n    return () => {\n        const current = guarded();\n        if (isNil(current))\n            throw new Error('The value never passed the type guard');\n        return current;\n    };\n};\n/* EXPORT */\nexport default useGuarded;\n","/* IMPORT */\nimport isObservable from '../methods/is_observable.js';\nimport useGuarded from '../hooks/use_guarded.js';\nimport useUntracked from '../hooks/use_untracked.js';\nimport { ternary } from '../oby.js';\nimport { isComponent, isFunction, isTruthy } from '../utils/lang.js';\n/* MAIN */\n//TODO: Support an is/guard prop, maybe\nconst If = ({ when, fallback, children }) => {\n    if (isFunction(children) && !isObservable(children) && !isComponent(children)) { // Calling the children function with an (() => Truthy<T>)\n        const truthy = useGuarded(when, isTruthy);\n        return ternary(when, useUntracked(() => children(truthy)), fallback);\n    }\n    else { // Just passing the children along\n        return ternary(when, children, fallback); //TSC\n    }\n};\n/* EXPORT */\nexport default If;\n","/* IMPORT */\nimport useCleanup from '../hooks/use_cleanup.js';\nimport useMemo from '../hooks/use_memo.js';\nimport useResolved from '../hooks/use_resolved.js';\nimport useRoot from '../hooks/use_root.js';\nimport useSuspense from '../hooks/use_suspense.js';\nimport resolve from '../methods/resolve.js';\nimport $ from '../methods/S.js';\nimport { with as _with } from '../oby.js';\n/* HELPERS */\nconst cache = {};\nconst runWithSuperRoot = _with();\nlet lockId = 1;\n/* MAIN */\n//TODO: Support hot-swapping owner and context, to make the context JustWork\nconst KeepAlive = ({ id, ttl, children }) => {\n    return useMemo(() => {\n        return useResolved([id, ttl], (id, ttl) => {\n            const lock = lockId++;\n            const item = cache[id] || (cache[id] = { id, lock });\n            item.lock = lock;\n            item.reset?.();\n            item.suspended || (item.suspended = $(false));\n            item.suspended(false);\n            if (!item.dispose || !item.result) {\n                runWithSuperRoot(() => {\n                    useRoot(dispose => {\n                        item.dispose = () => {\n                            delete cache[id];\n                            dispose();\n                        };\n                        useSuspense(item.suspended, () => {\n                            item.result = resolve(children);\n                        });\n                    });\n                });\n            }\n            useCleanup(() => {\n                const hasLock = () => lock === item.lock;\n                if (!hasLock())\n                    return;\n                item.suspended?.(true);\n                if (!ttl || ttl <= 0 || ttl >= Infinity)\n                    return;\n                const dispose = () => hasLock() && item.dispose?.();\n                const timeoutId = setTimeout(dispose, ttl);\n                const reset = () => clearTimeout(timeoutId);\n                item.reset = reset;\n            });\n            return item.result;\n        });\n    });\n};\n/* EXPORT */\nexport default KeepAlive;\n","/* IMPORT */\nimport useRoot from '../hooks/use_root.js';\nimport { setChild } from '../utils/setters.js';\n/* MAIN */\nconst render = (child, parent) => {\n    if (!parent || !(parent instanceof HTMLElement))\n        throw new Error('Invalid parent node');\n    parent.textContent = '';\n    return useRoot(dispose => {\n        setChild(parent, child);\n        return () => {\n            dispose();\n            parent.textContent = '';\n        };\n    });\n};\n/* EXPORT */\nexport default render;\n","/* IMPORT */\nimport useBoolean from '../hooks/use_boolean.js';\nimport useRenderEffect from '../hooks/use_render_effect.js';\nimport render from '../methods/render.js';\nimport $$ from '../methods/SS.js';\nimport { createHTMLNode } from '../utils/creators.js';\nimport { assign } from '../utils/lang.js';\n/* MAIN */\nconst Portal = ({ when = true, mount, wrapper, children }) => {\n    const portal = $$(wrapper) || createHTMLNode('div');\n    if (!(portal instanceof HTMLElement))\n        throw new Error('Invalid wrapper node');\n    const condition = useBoolean(when);\n    useRenderEffect(() => {\n        if (!$$(condition))\n            return;\n        const parent = $$(mount) || document.body;\n        if (!(parent instanceof Element))\n            throw new Error('Invalid mount node');\n        parent.insertBefore(portal, null);\n        return () => {\n            parent.removeChild(portal);\n        };\n    });\n    useRenderEffect(() => {\n        if (!$$(condition))\n            return;\n        return render(children, portal);\n    });\n    return assign(() => $$(condition) || children, { metadata: { portal } });\n};\n/* EXPORT */\nexport default Portal;\n","/* IMPORT */\nimport SuspenseContext from './suspense.context.js';\nimport useMemo from '../hooks/use_memo.js';\nimport useSuspense from '../hooks/use_suspense.js';\nimport resolve from '../methods/resolve.js';\nimport $$ from '../methods/SS.js';\nimport { suspense as _suspense, ternary } from '../oby.js';\n/* MAIN */\nconst Suspense = ({ when, fallback, children }) => {\n    return SuspenseContext.wrap(suspense => {\n        const condition = useMemo(() => !!$$(when) || suspense.active());\n        const childrenSuspended = useSuspense(condition, () => resolve(children));\n        return ternary(condition, fallback, childrenSuspended);\n    });\n};\n/* EXPORT */\nexport default Suspense;\n","/* IMPORT */\nimport { switch as _switch } from '../oby.js';\nimport { assign, castArray } from '../utils/lang.js';\n/* MAIN */\n//TODO: Enforce children of Switch to be of type Switch.Case or Switch.Default\nconst Switch = ({ when, fallback, children }) => {\n    const childrenWithValues = castArray(children); //TSC\n    const values = childrenWithValues.map(child => child().metadata);\n    return _switch(when, values, fallback); //TSC\n};\n/* UTILITIES */\nSwitch.Case = ({ when, children }) => {\n    const metadata = { metadata: [when, children] };\n    return assign(() => children, metadata);\n};\nSwitch.Default = ({ children }) => {\n    const metadata = { metadata: [children] };\n    return assign(() => children, metadata);\n};\n/* EXPORT */\nexport default Switch;\n","/* IMPORT */\nimport { ternary } from '../oby.js';\n/* MAIN */\nconst Ternary = ({ when, children }) => {\n    return ternary(when, children[0], children[1]);\n};\n/* EXPORT */\nexport default Ternary;\n","/* IMPORT */\nimport './types.js';\nimport Fragment from '../components/fragment.js';\nimport createElement from '../methods/create_element.js';\n/* MAIN */\nconst jsx = (component, props) => {\n    return createElement(component, props);\n};\n/* EXPORT */\nexport { jsx, jsx as jsxs, jsx as jsxDEV, Fragment };\n","/* IMPORT */\nimport { DIRECTIVES, SYMBOLS_DIRECTIVES } from '../constants.js';\nimport resolve from './resolve.js';\nimport { context } from '../oby.js';\n/* MAIN */\nconst createDirective = (name, fn, options) => {\n    const immediate = !!options?.immediate;\n    const data = { fn, immediate };\n    const symbol = (SYMBOLS_DIRECTIVES[name] || (SYMBOLS_DIRECTIVES[name] = Symbol()));\n    const Provider = ({ children }) => {\n        return context({ [symbol]: data }, () => {\n            return resolve(children);\n        });\n    };\n    const ref = (...args) => {\n        return (element) => {\n            fn(element, ...args);\n        };\n    };\n    const register = () => {\n        if (symbol in DIRECTIVES)\n            throw new Error('Directive \"name\" is already registered');\n        DIRECTIVES[symbol] = data;\n    };\n    return { Provider, ref, register };\n};\n/* EXPORT */\nexport default createDirective;\n","/* IMPORT */\nimport useMemo from '../hooks/use_memo.js';\nimport $ from './S.js';\nimport resolve from './resolve.js';\nimport untrack from './untrack.js';\nimport { isFunction } from '../utils/lang.js';\n/* HELPERS */\nconst COMPONENT_RE = /^_?[A-Z][a-zA-Z0-9$_-]*$/;\nconst SYMBOL_AS = '__hmr_as__';\nconst SYMBOL_COLD_COMPONENT = Symbol('HMR.Cold');\nconst SYMBOL_HOT_COMPONENT = Symbol('HMR.Hot');\nconst SYMBOL_HOT_ID = Symbol('HMR.ID');\nconst SOURCES = new WeakMap();\n/* MAIN */\n//TODO: This seems excessively complicated, maybe it can be simplified somewhat?\n//TODO: Make this work better when a nested component is added/removed too\nconst hmr = (accept, component) => {\n    if (accept) { // Making the component hot\n        /* CHECK */\n        const cached = component[SYMBOL_HOT_COMPONENT];\n        if (cached)\n            return cached; // Already hot\n        const isProvider = !isFunction(component) && ('Provider' in component);\n        if (isProvider)\n            return component; // Context/Directive providers are not hot-reloadable\n        /* HELPERS */\n        const createHotComponent = (path) => {\n            return (...args) => {\n                return useMemo(() => {\n                    const component = path.reduce((component, key) => component[key], SOURCES.get(id())?.() || source());\n                    const result = resolve(untrack(() => component(...args)));\n                    return result;\n                });\n            };\n        };\n        const createHotComponentDeep = (component, path) => {\n            const cached = component[SYMBOL_HOT_COMPONENT];\n            if (cached)\n                return cached;\n            const hot = component[SYMBOL_HOT_COMPONENT] = createHotComponent(path);\n            for (const key in component) {\n                const value = component[key];\n                if (isFunction(value) && COMPONENT_RE.test(key)) { // A component\n                    hot[key] = createHotComponentDeep(value, [...path, key]);\n                }\n                else { // Something else\n                    hot[key] = value;\n                }\n            }\n            return hot;\n        };\n        const onAccept = (module) => {\n            const hot = module[component[SYMBOL_AS]] || module[component.name] || module.default;\n            if (!hot)\n                return console.error(`[hmr] Failed to handle update for \"${component.name}\" component:\\n\\n`, component);\n            const cold = hot[SYMBOL_COLD_COMPONENT] || hot;\n            hot[SYMBOL_HOT_ID]?.(id());\n            SOURCES.get(id())?.(() => cold);\n        };\n        /* MAIN */\n        const id = $({});\n        const source = $(component);\n        SOURCES.set(id(), source);\n        const cold = component[SYMBOL_COLD_COMPONENT] || component;\n        const hot = createHotComponentDeep(component, []);\n        cold[SYMBOL_HOT_COMPONENT] = hot;\n        hot[SYMBOL_COLD_COMPONENT] = cold;\n        hot[SYMBOL_HOT_COMPONENT] = hot;\n        hot[SYMBOL_HOT_ID] = id;\n        accept(onAccept);\n        /* RETURN */\n        return hot;\n    }\n    else { // Returning the component as is\n        return component;\n    }\n};\n/* EXPORT */\nexport default hmr;\n","var n=function(t,s,r,e){var u;s[0]=0;for(var h=1;h<s.length;h++){var p=s[h++],a=s[h]?(s[0]|=p?1:2,r[s[h++]]):s[++h];3===p?e[0]=a:4===p?e[1]=Object.assign(e[1]||{},a):5===p?(e[1]=e[1]||{})[s[++h]]=a:6===p?e[1][s[++h]]+=a+\"\":p?(u=t.apply(a,n(t,a,r,[\"\",null])),e.push(u),a[0]?s[0]|=2:(s[h-2]=0,s[h]=u)):e.push(a)}return e},t=new Map;export default function(s){var r=t.get(this);return r||(r=new Map,t.set(this,r)),(r=n(this,r.get(s)||(r.set(s,r=function(n){for(var t,s,r=1,e=\"\",u=\"\",h=[0],p=function(n){1===r&&(n||(e=e.replace(/^\\s*\\n\\s*|\\s*\\n\\s*$/g,\"\")))?h.push(0,n,e):3===r&&(n||e)?(h.push(3,n,e),r=2):2===r&&\"...\"===e&&n?h.push(4,n,0):2===r&&e&&!n?h.push(5,0,!0,e):r>=5&&((e||!n&&5===r)&&(h.push(r,0,e,s),r=6),n&&(h.push(r,n,0,s),r=6)),e=\"\"},a=0;a<n.length;a++){a&&(1===r&&p(),p(a));for(var l=0;l<n[a].length;l++)t=n[a][l],1===r?\"<\"===t?(p(),h=[h],r=3):e+=t:4===r?\"--\"===e&&\">\"===t?(r=1,e=\"\"):e=t+e[0]:u?t===u?u=\"\":e+=t:'\"'===t||\"'\"===t?u=t:\">\"===t?(p(),r=1):r&&(\"=\"===t?(r=5,s=e,e=\"\"):\"/\"===t&&(r<5||\">\"===n[a][l+1])?(p(),3===r&&(h=h[0]),r=h,(h=h[0]).push(2,0,r),r=0):\" \"===t||\"\\t\"===t||\"\\n\"===t||\"\\r\"===t?(p(),r=2):e+=t),3===r&&\"!--\"===e&&(r=4,h=h[0])}return p(),h}(s)),r),arguments,[])).length>1?r:r[0]}\n","/* IMPORT */\nimport htm from 'htm';\nimport createElement from './create_element.js';\nimport { assign } from '../utils/lang.js';\n/* HELPERS */\nconst registry = {};\nconst h = (type, props, ...children) => createElement(registry[type] || type, props, ...children);\nconst register = (components) => void assign(registry, components);\n/* MAIN */\nconst html = assign(htm.bind(h), { register });\n/* EXPORT */\nexport default html;\n","/* IMPORT */\nimport useMemo from '../hooks/use_memo.js';\nimport useResolved from '../hooks/use_resolved.js';\nimport useResource from '../hooks/use_resource.js';\nimport creatElement from './create_element.js';\nimport resolve from './resolve.js';\nimport { once } from '../utils/lang.js';\n/* MAIN */\nconst lazy = (fetcher) => {\n    const fetcherOnce = once(fetcher);\n    const component = (props) => {\n        const resource = useResource(fetcherOnce);\n        return useMemo(() => {\n            return useResolved(resource, ({ pending, error, value }) => {\n                if (pending)\n                    return;\n                if (error)\n                    throw error;\n                const component = ('default' in value) ? value.default : value;\n                return resolve(creatElement(component, props));\n            });\n        });\n    };\n    component.preload = () => {\n        return new Promise((resolve, reject) => {\n            const resource = useResource(fetcherOnce);\n            useResolved(resource, ({ pending, error }) => {\n                if (pending)\n                    return;\n                if (error)\n                    return reject(error);\n                return resolve();\n            });\n        });\n    };\n    return component;\n};\n/* EXPORT */\nexport default lazy;\n","/* IMPORT */\nimport { SYMBOL_SUSPENSE_COLLECTOR } from '../constants.js';\nimport useMemo from '../hooks/use_memo.js';\nimport $ from '../methods/S.js';\nimport { context, resolve } from '../oby.js';\n/* MAIN */\n// Keeping track of all Suspense instances below it, needed in some cases\nconst SuspenseCollector = {\n    create: () => {\n        const parent = SuspenseCollector.get();\n        const suspenses = $([]);\n        const active = useMemo(() => suspenses().some(suspense => suspense.active()));\n        const register = (suspense) => { parent?.register(suspense); suspenses(prev => [...prev, suspense]); };\n        const unregister = (suspense) => { parent?.unregister(suspense); suspenses(prev => prev.filter(other => other !== suspense)); };\n        const data = { suspenses, active, register, unregister };\n        return data;\n    },\n    get: () => {\n        return context(SYMBOL_SUSPENSE_COLLECTOR);\n    },\n    wrap: (fn) => {\n        const data = SuspenseCollector.create();\n        return context({ [SYMBOL_SUSPENSE_COLLECTOR]: data }, () => {\n            return resolve(() => fn(data));\n        });\n    }\n};\n/* EXPORT */\nexport default SuspenseCollector;\n","/* IMPORT */\nimport Portal from '../components/portal.js';\nimport SuspenseCollector from '../components/suspense.collector.js';\nimport useEffect from '../hooks/use_effect.js';\nimport useRoot from '../hooks/use_root.js';\nimport $$ from './SS.js';\n/* MAIN */\n//TODO: Implement this properly, without relying on JSDOM or stuff like that\nconst renderToString = (child) => {\n    return new Promise(resolve => {\n        useRoot(dispose => {\n            $$(SuspenseCollector.wrap(suspenses => {\n                const { portal } = Portal({ children: child }).metadata;\n                useEffect(() => {\n                    if (suspenses.active())\n                        return;\n                    resolve(portal.innerHTML);\n                    dispose();\n                }, { suspense: false });\n            }));\n        });\n    });\n};\n/* EXPORT */\nexport default renderToString;\n","/* IMPORT */\nimport { SYMBOL_TEMPLATE_ACCESSOR } from '../constants.js';\nimport wrapElement from './wrap_element.js';\nimport { assign, indexOf, isFunction, isString } from '../utils/lang.js';\nimport { setAttribute, setChildReplacement, setClasses, setEvent, setHTML, setProperty, setRef, setStyles } from '../utils/setters.js';\n/* MAIN */\n//TODO: Avoid using \"Function\" and \"eval\", while still keeping similar performance, if possible\n//TODO: Support complex children in the template function\n//TODO: Support argumentless calls on props, like props.foo.bar()\nconst template = (fn) => {\n    const safePropertyRe = /^[a-z0-9-_]+$/i;\n    const checkValidProperty = (property) => {\n        if (isString(property) && safePropertyRe.test(property))\n            return true;\n        throw new Error(`Invalid property, only alphanumeric properties are allowed inside templates, received: \"${property}\"`);\n    };\n    const makeAccessor = (actionsWithNodes) => {\n        return new Proxy({}, {\n            get(target, prop) {\n                checkValidProperty(prop);\n                const accessor = (node, method, key, targetNode) => {\n                    if (key)\n                        checkValidProperty(key);\n                    actionsWithNodes.push([node, method, prop, key, targetNode]);\n                };\n                const metadata = { [SYMBOL_TEMPLATE_ACCESSOR]: true };\n                return assign(accessor, metadata);\n            }\n        });\n    };\n    const makeActionsWithNodesAndTemplate = () => {\n        const actionsWithNodes = [];\n        const accessor = makeAccessor(actionsWithNodes);\n        const component = fn(accessor);\n        if (isFunction(component)) {\n            const root = component();\n            if (root instanceof Element) {\n                return { actionsWithNodes, root };\n            }\n        }\n        throw new Error('Invalid template, it must return a function that returns an Element');\n    };\n    const makeActionsWithPaths = (actionsWithNodes) => {\n        const actionsWithPaths = [];\n        for (let i = 0, l = actionsWithNodes.length; i < l; i++) {\n            const [node, method, prop, key, targetNode] = actionsWithNodes[i];\n            const nodePath = makeNodePath(node);\n            const targetNodePath = targetNode ? makeNodePath(targetNode) : undefined;\n            actionsWithPaths.push([nodePath, method, prop, key, targetNodePath]);\n        }\n        return actionsWithPaths;\n    };\n    const makeNodePath = (() => {\n        let prevNode = null;\n        let prevPath;\n        return (node) => {\n            if (node === prevNode)\n                return prevPath; // Cache hit\n            const path = [];\n            let child = node;\n            let parent = child.parentNode;\n            while (parent) {\n                const index = !child.previousSibling ? 0 : !child.nextSibling ? -0 : indexOf(parent.childNodes, child);\n                path.push(index);\n                child = parent;\n                parent = parent.parentNode;\n            }\n            prevNode = node;\n            prevPath = path;\n            return path;\n        };\n    })();\n    const makeNodePathProperties = (path) => {\n        const properties = ['root'];\n        const parts = path.slice().reverse();\n        for (let i = 0, l = parts.length; i < l; i++) {\n            const part = parts[i];\n            if (Object.is(0, part)) {\n                properties.push('firstChild');\n            }\n            else if (Object.is(-0, part)) {\n                properties.push('lastChild');\n            }\n            else {\n                properties.push('firstChild');\n                for (let nsi = 0; nsi < part; nsi++) {\n                    properties.push('nextSibling');\n                }\n            }\n        }\n        return properties;\n    };\n    const makeReviverPaths = (actionsWithPaths) => {\n        const paths = [];\n        for (let i = 0, l = actionsWithPaths.length; i < l; i++) {\n            const action = actionsWithPaths[i];\n            const nodePath = action[0];\n            const targetNodePath = action[4];\n            paths.push(nodePath);\n            if (targetNodePath) {\n                paths.push(targetNodePath);\n            }\n        }\n        return paths;\n    };\n    const makeReviverVariablesData = (paths, properties) => {\n        const data = new Array(paths.length);\n        for (let i = 0, l = paths.length; i < l; i++) {\n            data[i] = {\n                path: paths[i],\n                properties: properties[i]\n            };\n        }\n        return data;\n    };\n    const makeReviverVariables = (actionsWithPaths) => {\n        const paths = makeReviverPaths(actionsWithPaths);\n        const properties = paths.map(makeNodePathProperties);\n        const data = makeReviverVariablesData(paths, properties);\n        const assignments = [];\n        const map = new Map();\n        let variableId = 0;\n        while (true) {\n            const datum = data.find(datum => datum.properties.length > 1);\n            if (!datum)\n                break;\n            const [current, next] = datum.properties;\n            const variable = `$${variableId++}`;\n            const assignment = `const ${variable} = ${current}.${next};`;\n            assignments.push(assignment);\n            for (let i = 0, l = data.length; i < l; i++) {\n                const datum = data[i];\n                const [otherCurrent, otherNext] = datum.properties;\n                if (otherCurrent !== current || otherNext !== next)\n                    continue;\n                datum.properties[0] = variable;\n                datum.properties.splice(1, 1);\n            }\n        }\n        for (let i = 0, l = data.length; i < l; i++) {\n            const datum = data[i];\n            map.set(datum.path, datum.properties[0]);\n        }\n        return { assignments, map };\n    };\n    const makeReviverActions = (actionsWithPaths, variables) => {\n        const actions = [];\n        for (let i = 0, l = actionsWithPaths.length; i < l; i++) { //TODO: Write this more cleanly, with a single case\n            const [nodePath, method, prop, key, targetNodePath] = actionsWithPaths[i];\n            if (targetNodePath) {\n                actions.push(`this.${method} ( props[\"${prop}\"], ${variables.get(targetNodePath)} );`);\n            }\n            else if (key) {\n                actions.push(`this.${method} ( ${variables.get(nodePath)}, \"${key}\", props[\"${prop}\"] );`);\n            }\n            else {\n                actions.push(`this.${method} ( ${variables.get(nodePath)}, props[\"${prop}\"] );`);\n            }\n        }\n        return actions;\n    };\n    const makeReviver = (actionsWithPaths) => {\n        const { assignments, map } = makeReviverVariables(actionsWithPaths);\n        const actions = makeReviverActions(actionsWithPaths, map);\n        const fn = new Function('root', 'props', `${assignments.join('')}${actions.join('')}return root;`);\n        const apis = { setAttribute, setChildReplacement, setClasses, setEvent, setHTML, setProperty, setRef, setStyles };\n        const reviver = fn.bind(apis);\n        return reviver;\n    };\n    const makeComponent = () => {\n        const { actionsWithNodes, root } = makeActionsWithNodesAndTemplate();\n        const actionsWithPaths = makeActionsWithPaths(actionsWithNodes);\n        const reviver = makeReviver(actionsWithPaths);\n        return (props) => {\n            const clone = root.cloneNode(true);\n            return wrapElement(reviver.bind(undefined, clone, props));\n        };\n    };\n    return makeComponent();\n};\n/* EXPORT */\nexport default template;\n","/* IMPORT */\nimport { CONTEXTS_DATA } from '../constants.js';\nimport resolve from './resolve.js';\nimport { context } from '../oby.js';\nfunction createContext(defaultValue) {\n    const symbol = Symbol();\n    const Provider = ({ value, children }) => {\n        return context({ [symbol]: value }, () => {\n            return resolve(children);\n        });\n    };\n    const Context = { Provider };\n    CONTEXTS_DATA.set(Context, { symbol, defaultValue });\n    return Context;\n}\n/* EXPORT */\nexport default createContext;\n","/* IMPORT */\nimport createElement from './create_element.js';\nimport { isArray, isObject } from '../utils/lang.js';\nfunction h(component, props, ...children) {\n    if (children.length || (isObject(props) && !isArray(props))) {\n        return createElement(component, props, ...children); //TSC\n    }\n    else {\n        return createElement(component, null, props); //TSC\n    }\n}\n/* EXPORT */\nexport default h;\n","/* IMPORT */\nimport { CONTEXTS_DATA } from '../constants.js';\nimport { context } from '../oby.js';\nimport { isNil } from '../utils/lang.js';\nfunction useContext(Context) {\n    const { symbol, defaultValue } = CONTEXTS_DATA.get(Context) || { symbol: Symbol() };\n    const valueContext = context(symbol);\n    const value = isNil(valueContext) ? defaultValue : valueContext;\n    return value;\n}\n/* EXPORT */\nexport default useContext;\n","import { html, render, $, isObservable } from \"voby\";\n\ncustomElements.define(\n  \"neptune-reactive-root\",\n  class extends HTMLElement {\n    constructor() {\n      super();\n      this.c = () => {};\n    }\n\n    connectedCallback() {\n      this.style.display = \"contents\";\n      this.dispose?.();\n      this.dispose = render(html`${this.c()}`, this);\n    }\n\n    disconnectedCallback() {\n      this.dispose?.();\n    }\n  },\n);\n\nexport function ReactiveRoot({ children }) {\n  const root = html`<neptune-reactive-root></neptune-reactive-root>`();\n  root.c = () => children;\n\n  return root;\n}\n\nexport function Switch(props) {\n  let checked = props.checked ?? false;\n\n  if (!props.onClick) {\n    checked = $(!!checked);\n    props.onClick = () => checked((c) => !c);\n  }\n\n  return html`\n    <div>\n      <input class=\"neptune-switch-checkbox\" type=\"checkbox\" checked=${checked} />\n      <span onClick=${props.onClick} class=\"neptune-switch\"></span>\n    </div>\n  `;\n}\n\nexport function TextInput({ placeholder = \"\", type = \"text\", value = \"\", onEnter = () => {} }) {\n  if (!isObservable(value)) value = $(value);\n\n  return html`\n    <input\n      class=\"neptune-text-input\"\n      value=${value}\n      onKeyup=${(e) => {\n        if (e.key != \"Enter\") return;\n        onEnter(e);\n      }}\n      onInput=${(e) => value(e.target.value)}\n      placeholder=${placeholder}\n      type=${type} />\n  `;\n}\n\nexport function Button({ onClick = () => {}, children }) {\n  return html` <button class=\"neptune-button\" onClick=${onClick}>${children}</button> `;\n}\n\nexport function ReloadIcon() {\n  return html`<svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"22\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    stroke-width=\"1.5\"\n    stroke=\"currentColor\">\n    <path\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n      d=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99\" />\n  </svg>`;\n}\n\nexport function TrashIcon() {\n  return html`<svg\n    style=\"width: 22px;\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    stroke-width=\"1.5\"\n    stroke=\"currentColor\">\n    <path\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n      d=\"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0\"></path>\n  </svg>`;\n}\n","function promisifyRequest(request) {\n    return new Promise((resolve, reject) => {\n        // @ts-ignore - file size hacks\n        request.oncomplete = request.onsuccess = () => resolve(request.result);\n        // @ts-ignore - file size hacks\n        request.onabort = request.onerror = () => reject(request.error);\n    });\n}\nfunction createStore(dbName, storeName) {\n    const request = indexedDB.open(dbName);\n    request.onupgradeneeded = () => request.result.createObjectStore(storeName);\n    const dbp = promisifyRequest(request);\n    return (txMode, callback) => dbp.then((db) => callback(db.transaction(storeName, txMode).objectStore(storeName)));\n}\nlet defaultGetStoreFunc;\nfunction defaultGetStore() {\n    if (!defaultGetStoreFunc) {\n        defaultGetStoreFunc = createStore('keyval-store', 'keyval');\n    }\n    return defaultGetStoreFunc;\n}\n/**\n * Get a value by its key.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction get(key, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => promisifyRequest(store.get(key)));\n}\n/**\n * Set a value with a key.\n *\n * @param key\n * @param value\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction set(key, value, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.put(value, key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Set multiple values at once. This is faster than calling set() multiple times.\n * It's also atomic  if one of the pairs can't be added, none will be added.\n *\n * @param entries Array of entries, where each entry is an array of `[key, value]`.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction setMany(entries, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        entries.forEach((entry) => store.put(entry[1], entry[0]));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Get multiple values by their keys\n *\n * @param keys\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction getMany(keys, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => Promise.all(keys.map((key) => promisifyRequest(store.get(key)))));\n}\n/**\n * Update a value. This lets you see the old value and update it as an atomic operation.\n *\n * @param key\n * @param updater A callback that takes the old value and returns a new value.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction update(key, updater, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => \n    // Need to create the promise manually.\n    // If I try to chain promises, the transaction closes in browsers\n    // that use a promise polyfill (IE10/11).\n    new Promise((resolve, reject) => {\n        store.get(key).onsuccess = function () {\n            try {\n                store.put(updater(this.result), key);\n                resolve(promisifyRequest(store.transaction));\n            }\n            catch (err) {\n                reject(err);\n            }\n        };\n    }));\n}\n/**\n * Delete a particular key from the store.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction del(key, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.delete(key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Delete multiple keys at once.\n *\n * @param keys List of keys to delete.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction delMany(keys, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        keys.forEach((key) => store.delete(key));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Clear all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction clear(customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.clear();\n        return promisifyRequest(store.transaction);\n    });\n}\nfunction eachCursor(store, callback) {\n    store.openCursor().onsuccess = function () {\n        if (!this.result)\n            return;\n        callback(this.result);\n        this.result.continue();\n    };\n    return promisifyRequest(store.transaction);\n}\n/**\n * Get all keys in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction keys(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAllKeys) {\n            return promisifyRequest(store.getAllKeys());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.key)).then(() => items);\n    });\n}\n/**\n * Get all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction values(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAll) {\n            return promisifyRequest(store.getAll());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.value)).then(() => items);\n    });\n}\n/**\n * Get all entries in the store. Each entry is an array of `[key, value]`.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction entries(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        // (although, hopefully we'll get a simpler path some day)\n        if (store.getAll && store.getAllKeys) {\n            return Promise.all([\n                promisifyRequest(store.getAllKeys()),\n                promisifyRequest(store.getAll()),\n            ]).then(([keys, values]) => keys.map((key, i) => [key, values[i]]));\n        }\n        const items = [];\n        return customStore('readonly', (store) => eachCursor(store, (cursor) => items.push([cursor.key, cursor.value])).then(() => items));\n    });\n}\n\nexport { clear, createStore, del, delMany, entries, get, getMany, keys, promisifyRequest, set, setMany, update, values };\n","import { createStore as createIdbStore, set as idbSet, get as idbGet } from \"idb-keyval\";\nimport { store } from \"voby\";\n\nexport function appendStyle(style) {\n  const styleTag = document.createElement(\"style\");\n  styleTag.innerHTML = style;\n\n  // Forgive me, for I have sinned.\n  if (document.head) {\n    document.head.appendChild(styleTag);\n  } else {\n    document.addEventListener(\"DOMContentLoaded\", () => {\n      document.head.appendChild(styleTag);\n    })\n  }\n\n  return (newStyle) => {\n    if (newStyle == undefined) return document.head.removeChild(styleTag);\n\n    styleTag.innerHTML = newStyle;\n  };\n}\n\nexport const neptuneIdbStore = createIdbStore(\"__NEPTUNE_IDB_STORAGE\", \"__NEPTUNE_IDB_STORAGE\");\n\n// store.on appears to not work upon isArray being true. This makes me a very sad toonlink.\nexport function createPersistentObject(id, isArray = false) {\n  // This is fucking moronic. But fine, we'll do this dumb shit just for you.\n  const persistentObject = store(isArray ? { value: [] } : {});\n\n  store.on(persistentObject, () => {\n    idbSet(id, store.unwrap(persistentObject), neptuneIdbStore);\n  });\n\n  return [\n    isArray ? persistentObject.value : persistentObject,\n    new Promise((res) =>\n      idbGet(id, neptuneIdbStore).then((obj) => {\n        store.reconcile(persistentObject, obj ?? (isArray ? { value: [] } : {}));\n        res();\n      }),\n    ),\n  ];\n}\n\nexport const parseManifest = (manifest) => {\n  try {\n    if (typeof manifest == \"string\")\n      manifest = JSON.parse(manifest.slice(manifest.indexOf(\"/*\") + 2, manifest.indexOf(\"*/\")));\n  } catch {\n    throw \"Failed to parse manifest!\";\n  }\n\n  if (![\"name\", \"author\", \"description\"].every((i) => typeof manifest[i] === \"string\"))\n    throw \"Manifest doesn't contain required properties!\";\n\n  return manifest;\n};\n\nexport const getMediaURLFromID = (id, path = \"/1280x1280.jpg\") =>\n  \"https://resources.tidal.com/images/\" + id.split(\"-\").join(\"/\") + path;\n\n\nexport function convertHexToRGB(h) {\n  let r = 0;\n  let g = 0;\n  let b = 0;\n\n  // 3 digits\n  if (h.length === 4) {\n    r = Number('0x' + h[1] + h[1]);\n    g = Number('0x' + h[2] + h[2]);\n    b = Number('0x' + h[3] + h[3]);\n\n    // 6 digits\n  } else if (h.length === 7) {\n    r = Number('0x' + h[1] + h[2]);\n    g = Number('0x' + h[3] + h[4]);\n    b = Number('0x' + h[5] + h[6]);\n  }\n\n  return `${r}, ${g}, ${b}`\n}\n","/* es-module-lexer 1.3.0 */\nconst A=1===new Uint8Array(new Uint16Array([1]).buffer)[0];export function parse(E,g=\"@\"){if(!C)return init.then((()=>parse(E)));const I=E.length+1,o=(C.__heap_base.value||C.__heap_base)+4*I-C.memory.buffer.byteLength;o>0&&C.memory.grow(Math.ceil(o/65536));const D=C.sa(I-1);if((A?B:Q)(E,new Uint16Array(C.memory.buffer,D,I)),!C.parse())throw Object.assign(new Error(`Parse error ${g}:${E.slice(0,C.e()).split(\"\\n\").length}:${C.e()-E.lastIndexOf(\"\\n\",C.e()-1)}`),{idx:C.e()});const K=[],k=[];for(;C.ri();){const A=C.is(),Q=C.ie(),B=C.ai(),g=C.id(),I=C.ss(),o=C.se();let D;C.ip()&&(D=J(E.slice(-1===g?A-1:A,-1===g?Q+1:Q))),K.push({n:D,s:A,e:Q,ss:I,se:o,d:g,a:B})}for(;C.re();){const A=C.es(),Q=C.ee(),B=C.els(),g=C.ele(),I=E.slice(A,Q),o=I[0],D=B<0?void 0:E.slice(B,g),K=D?D[0]:\"\";k.push({s:A,e:Q,ls:B,le:g,n:'\"'===o||\"'\"===o?J(I):I,ln:'\"'===K||\"'\"===K?J(D):D})}function J(A){try{return(0,eval)(A)}catch(A){}}return[K,k,!!C.f()]}function Q(A,Q){const B=A.length;let C=0;for(;C<B;){const B=A.charCodeAt(C);Q[C++]=(255&B)<<8|B>>>8}}function B(A,Q){const B=A.length;let C=0;for(;C<B;)Q[C]=A.charCodeAt(C++)}let C;export const init=WebAssembly.compile((E=\"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9wBGDQFBACgCoAohAQwCC0EAKAKgCiIBQQJqQbAIQQoQLQ0BQQYhAAwCC0EAKAKgCiIBLwECQekARw0AIAEvAQRB9ABHDQBBBCEAIAEvAQZB6ABGDQELQQAgAUF+ajYCoAoPC0EAIAEgAEEBdGo2AqAKAkBBARAnQfsARg0AQQAgATYCoAoPC0EAKAKgCiICIQADQEEAIABBAmo2AqAKAkACQAJAQQEQJyIAQSJGDQAgAEEnRw0BQScQGEEAQQAoAqAKQQJqNgKgCkEBECchAAwCC0EiEBhBAEEAKAKgCkECajYCoApBARAnIQAMAQsgABAqIQALAkAgAEE6Rg0AQQAgATYCoAoPC0EAQQAoAqAKQQJqNgKgCgJAQQEQJyIAQSJGDQAgAEEnRg0AQQAgATYCoAoPCyAAEBhBAEEAKAKgCkECajYCoAoCQAJAQQEQJyIAQSxGDQAgAEH9AEYNAUEAIAE2AqAKDwtBAEEAKAKgCkECajYCoApBARAnQf0ARg0AQQAoAqAKIQAMAQsLQQAoAuQJIgEgAjYCECABQQAoAqAKQQJqNgIMC20BAn8CQAJAA0ACQCAAQf//A3EiAUF3aiICQRdLDQBBASACdEGfgIAEcQ0CCyABQaABRg0BIAAhAiABECYNAkEAIQJBAEEAKAKgCiIAQQJqNgKgCiAALwECIgANAAwCCwsgACECCyACQf//A3ELqwEBBH8CQAJAQQAoAqAKIgIvAQAiA0HhAEYNACABIQQgACEFDAELQQAgAkEEajYCoApBARAnIQJBACgCoAohBQJAAkAgAkEiRg0AIAJBJ0YNACACECoaQQAoAqAKIQQMAQsgAhAYQQBBACgCoApBAmoiBDYCoAoLQQEQJyEDQQAoAqAKIQILAkAgAiAFRg0AIAUgBEEAIAAgACABRiICG0EAIAEgAhsQAgsgAwtyAQR/QQAoAqAKIQBBACgCpAohAQJAAkADQCAAQQJqIQIgACABTw0BAkACQCACLwEAIgNBpH9qDgIBBAALIAIhACADQXZqDgQCAQECAQsgAEEEaiEADAALC0EAIAI2AqAKECJBAA8LQQAgAjYCoApB3QALSQEDf0EAIQMCQCACRQ0AAkADQCAALQAAIgQgAS0AACIFRw0BIAFBAWohASAAQQFqIQAgAkF/aiICDQAMAgsLIAQgBWshAwsgAwsL4gECAEGACAvEAQAAeABwAG8AcgB0AG0AcABvAHIAdABlAHQAYQByAG8AbQB1AG4AYwB0AGkAbwBuAHMAcwBlAHIAdAB2AG8AeQBpAGUAZABlAGwAZQBjAG8AbgB0AGkAbgBpAG4AcwB0AGEAbgB0AHkAYgByAGUAYQByAGUAdAB1AHIAZABlAGIAdQBnAGcAZQBhAHcAYQBpAHQAaAByAHcAaABpAGwAZQBmAG8AcgBpAGYAYwBhAHQAYwBmAGkAbgBhAGwAbABlAGwAcwAAQcQJCxABAAAAAgAAAAAEAAAwOQAA\",\"undefined\"!=typeof Buffer?Buffer.from(E,\"base64\"):Uint8Array.from(atob(E),(A=>A.charCodeAt(0))))).then(WebAssembly.instantiate).then((({exports:A})=>{C=A}));var E;","import { parse } from \"es-module-lexer\";\n\n// This needs support for 3 things to be \"complete\":\n// 1. `import \"./module.js\"`\n// 2. `await import(\"module\")`\n// 3. `export * from \"module\"`\n// For now, it's fine.\n\nasync function betterParse(src) {\n  let [imports] = await parse(src);\n  let exports = [];\n\n  imports = imports.filter((imp) => {\n    imp.declaration = src\n      .slice(imp.ss, imp.se)\n      .replace(/\\/\\*[\\w\\W]*?\\*\\//g, \"\");\n    imp.importClause = imp.declaration\n      .slice(6, imp.declaration.lastIndexOf(\"from\"))\n      .trim();\n\n    const namedImportOpener = imp.importClause.indexOf(\"{\");\n    const namedImportCloser = imp.importClause.indexOf(\"}\") + 1;\n\n    imp.namedImport = imp.importClause.slice(\n      namedImportOpener,\n      namedImportCloser\n    );\n\n    if (imp.namedImport != \"\") {\n      imp.importClause =\n        imp.importClause.slice(0, namedImportOpener) +\n        imp.importClause.slice(namedImportCloser);\n\n      imp.namedImports = imp.namedImport\n        .slice(1, -1)\n        .trim()\n        .split(\",\")\n        .filter((i) => i.trim() != \"\")\n        .map((i) => {\n          const split = i.trim().split(\" as \");\n\n          if (!split[1]) split[1] = split[0];\n          return split;\n        })\n        .reduce((obj, c) => {\n          obj[c[0]] = c[1];\n\n          return obj;\n        }, {});\n    }\n\n    const commaIndex = imp.importClause.indexOf(\",\");\n\n    if (imp.namedImport == \"\") {\n      const namespace =\n        commaIndex == -1\n          ? imp.importClause\n          : imp.importClause.slice(commaIndex + 1).trim();\n\n      if (namespace[0] == \"*\")\n        imp.namespace = namespace.slice(namespace.indexOf(\"as\") + 2).trim();\n    }\n\n    // If there's no named imports and there's no namespaces, the default export *is* the importClause\n    if (imp.namedImport == \"\" && !imp.namespace) {\n      imp.default = imp.importClause;\n    } else if (commaIndex != -1) {\n      // Otherwise, the default export *must* come before the comma\n      imp.default = imp.importClause.slice(0, commaIndex);\n    }\n\n    if (imp.declaration.slice(0, 6) == \"import\") return true;\n\n    imp.isExport = true;\n    exports.push(imp);\n  });\n\n  return [imports, exports];\n}\n\nconst destructurifyImp = (obj) =>\n  Object.entries(obj)\n    .map(([k, v]) => `${k}:${v}`)\n    .join();\n\nconst removeFromString = (string, start, end) =>\n  string.slice(0, start) + string.slice(end);\n\nconst insertIntoString = (string, start, newString) =>\n  string.slice(0, start) + newString + string.slice(start);\n\nexport default async function quartz(\n  code,\n  config = { plugins: [] },\n  moduleId = false\n) {\n  let generatedImports = \"\";\n\n  for (const plugin of config.plugins)\n    if (plugin.transform) code = plugin.transform({ code });\n\n  const [imports, exports] = await betterParse(code);\n\n  // I don't want to have to parse any of this shit more than once.\n  let offset = 0;\n\n  for (const exp of exports) {\n    imports.push(exp);\n\n    const startIndex = exp.ss + offset;\n    const endIndex = exp.se + offset;\n\n    const namespace = exp.namespace;\n    if (namespace != undefined) {\n      // Because of how `export * from \"module\"` works, we can't dynamically export things.\n      // My proposal is that we have a $$$QUARTZ_DYNAMIC_EXPORTS object passed through,\n      // we add a randomly generated namespace, and then we convert the export into reassigning $$$QUARTZ_DYNAMIC_EXPORTS.\n      // We then spread the exports and the dynamic exports together and return that as the exports.\n\n      if (namespace != \"\") {\n        code = removeFromString(code, startIndex, endIndex);\n        const newExport = `export { ${namespace} };`;\n        code = insertIntoString(code, startIndex, newExport);\n\n        offset -= endIndex - startIndex + newExport.length;\n      }\n\n      continue;\n    }\n\n    const fromIndex =\n      startIndex + code.slice(startIndex, endIndex).lastIndexOf(\"from\");\n    code = removeFromString(code, fromIndex, endIndex);\n    offset -= endIndex - fromIndex;\n  }\n\n  let quartzStore = {};\n\n  for (const imp of imports) {\n    if (!imp.isExport) {\n      code = removeFromString(code, imp.ss + offset, imp.se + offset);\n\n      offset -= imp.se + offset - (imp.ss + offset);\n    }\n\n    let id = (Math.random() + 1).toString(36).substring(7);\n\n    let store = (quartzStore[id] = {});\n    let accessor = `$$$QUARTZ_STORE[\"${id}\"]`;\n\n    for (const plugin of config.plugins) {\n      if (!plugin.resolve) continue;\n\n      const generatedImport = await plugin.resolve({\n        config,\n        accessor,\n        store,\n        name: imp.n,\n        moduleId,\n      });\n\n      if (!generatedImport) continue;\n\n      const addImport = (name) =>\n        (generatedImports += `const ${name} = ${generatedImport};`);\n\n      if (imp.default) addImport(`{default:${imp.default}}`);\n      if (imp.namespace) addImport(imp.namespace);\n      if (imp.namedImports) {\n        addImport(\"{\" + destructurifyImp(imp.namedImports) + \"}\");\n      }\n\n      break;\n    }\n  }\n\n  // This appears to be the only way to share things between realms.\n  const globalStoreID = (Math.random() + 1).toString(36).substring(7);\n  globalThis[globalStoreID] = quartzStore;\n\n  // console.log(generatedImports + code)\n\n  const mod = await import(\n    `data:text/javascript;base64,${btoa(\n      `const $$$QUARTZ_STORE = globalThis[\"${globalStoreID}\"];` +\n        generatedImports +\n        code\n    )}`\n  );\n  delete globalThis[globalStoreID];\n\n  return mod;\n}\n","export default ({baseUrl = \"https://esm.sh/\", existingUrls = true} = {}) => {\n  return {\n    resolve({ name }) {\n      if (name.startsWith(\".\") || name.startsWith(\"/\")) return; // local url\n\n      // npm package\n      if (!/^\\w+:/.test(name) && baseUrl) {\n        name = baseUrl + name;\n      }\n      else if (!existingUrls) return;\n\n      return `await import(\"${name}\")`;\n    },\n  };\n};\n","export const interceptors = {};\n\nexport default function intercept(types, cb, once = false) {\n  if (typeof types == \"string\") types = [types];\n\n  const uninterceptors = [];\n  const unintercept = () => uninterceptors.forEach((u) => u());\n\n  for (let type of types) {\n    if (!interceptors[type]) interceptors[type] = [];\n\n    const handleIntercept = once\n      ? (...args) => {\n          unintercept();\n\n          return cb(...args);\n        }\n      : cb;\n    interceptors[type].push(handleIntercept);\n\n    uninterceptors.push(() =>\n      interceptors[type].splice(interceptors[type].indexOf(handleIntercept), 1),\n    );\n  }\n\n  return unintercept;\n}\n","import { store } from \"voby\";\nimport { createPersistentObject, neptuneIdbStore, parseManifest } from \"./utils.js\";\nimport { del } from \"idb-keyval\";\nimport quartz from \"@uwu/quartz\";\nimport urlImport from \"quartz-plugin-url-import\";\nimport { actions } from \"../handleExfiltrations.js\";\nimport intercept from \"./intercept.js\";\n\nexport const [pluginStore, pluginStoreReady] = createPersistentObject(\"NEW_NEPTUNE_PLUGINS\", true);\nexport const enabled = store({});\n\nexport const getPluginById = (id) => pluginStore.find((p) => p.id == id);\n\nexport async function disablePlugin(id) {\n  getPluginById(id).enabled = false;\n  const onUnload = enabled?.[id]?.onUnload;\n\n  delete enabled[id];\n\n  try {\n    await onUnload?.();\n  } catch (e) {\n    console.error(\"Failed to completely clean up neptune plugin!\\n\", e);\n  }\n}\n\nexport function togglePlugin(id) {\n  return getPluginById(id).enabled ? disablePlugin(id) : enablePlugin(id);\n}\n\nexport async function enablePlugin(id) {\n  const plugin = getPluginById(id);\n  plugin.enabled = true;\n\n  await runPlugin(plugin);\n}\n\nasync function runPlugin(plugin) {\n  try {\n    const [persistentStorage, persistentStorageReady] = createPersistentObject(\n      plugin.id + \"_PERSISTENT_STORAGE\",\n    );\n\n    await persistentStorageReady;\n\n    const unloadables = [];\n    const pluginData = {\n      id: plugin.id,\n      manifest: plugin.manifest,\n      storage: persistentStorage,\n      addUnloadable(callback) {\n        unloadables.push(callback);\n      },\n    };\n\n    const { onUnload, Settings } = await quartz(plugin.code, {\n      plugins: [\n        {\n          resolve({ name }) {\n            if (!name.startsWith(\"@neptune\")) return;\n\n            return `window${name\n              .slice(1)\n              .split(\"/\")\n              .map((i) => `[${JSON.stringify(i)}]`)\n              .join(\"\")}`;\n          },\n        },\n        {\n          resolve({ name, store, accessor }) {\n            if (!name.startsWith(\"@plugin\")) return;\n\n            if (!store.plugin) store.plugin = { ...pluginData, default: pluginData };\n\n            return `${accessor}${name\n              .slice(1)\n              .split(\"/\")\n              .map((i) => `[${JSON.stringify(i)}]`)\n              .join(\"\")}`;\n          },\n        },\n        urlImport(),\n      ],\n    });\n\n    enabled[plugin.id] = {\n      onUnload: () => {\n        onUnload?.();\n        for (const ul of unloadables) {\n          ul();\n        }\n      },\n    };\n    if (Settings) enabled[plugin.id].Settings = Settings;\n  } catch (e) {\n    await disablePlugin(plugin.id);\n\n    console.error(\"Failed to load neptune plugin!\\n\", e);\n  }\n}\n\nexport async function installPlugin(id, code, manifest, enabled = true) {\n  const plugin = {\n    id,\n    code,\n    manifest,\n    enabled,\n  };\n\n  pluginStore.unshift(plugin);\n\n  if (enabled) await runPlugin(plugin);\n}\n\nexport async function removePlugin(id) {\n  try {\n    if (enabled[id]) await enabled[id].onUnload();\n  } catch {\n    console.log(\"[neptune] failed to unload plugin upon removal\");\n  }\n\n  pluginStore.splice(\n    pluginStore.findIndex((p) => p.id == id),\n    1,\n  );\n\n  await del(id + \"_PERSISTENT_STORAGE\", neptuneIdbStore);\n}\n\n// This handles caching too!\nexport async function fetchPluginFromURL(url) {\n  let parsedURL = url;\n\n  if (!parsedURL.endsWith(\"/\")) parsedURL += \"/\";\n\n  const manifest = parseManifest(\n    await (await fetch(parsedURL + \"manifest.json\", { cache: \"no-store\" })).json(),\n  );\n\n  const plugin = getPluginById(url);\n  let code = plugin?.code;\n\n  if (plugin?.manifest?.hash != manifest.hash)\n    code = await (\n      await fetch(parsedURL + (manifest.main ?? \"index.js\"), { cache: \"no-store\" })\n    ).text();\n\n  return [\n    code,\n    {\n      name: manifest.name,\n      author: manifest.author,\n      description: manifest.description,\n      hash: manifest.hash,\n    },\n  ];\n}\n\nexport async function reloadPlugin(plugin) {\n  let pluginWasEnabled = plugin.enabled;\n\n  if (pluginWasEnabled) disablePlugin(plugin.id);\n\n  if (plugin.hasOwnProperty(\"update\")) {\n    try {\n      const [code, manifest] = await fetchPluginFromURL(plugin.id);\n\n      plugin.manifest = manifest;\n      plugin.code = code;\n    } catch {}\n  }\n\n  if (pluginWasEnabled) enablePlugin(plugin.id);\n}\n\nexport async function installPluginFromURL(url, enabled = true) {\n  if (getPluginById(url))\n    return actions.message.messageError({ message: \"Plugin is already imported!\" });\n\n  try {\n    const [code, manifest] = await fetchPluginFromURL(url);\n\n    const plugin = {\n      id: url,\n      code,\n      manifest,\n      enabled,\n      update: true,\n    };\n\n    pluginStore.unshift(plugin);\n\n    if (enabled) runPlugin(plugin);\n  } catch {\n    actions.message.messageError({ message: \"Failed to import neptune plugin!\" });\n  }\n}\n\n// Load as early as we possibly can.\nintercept(\n  \"session/RECEIVED_COUNTRY_CODE\",\n  async () => {\n    // We don't attempt to load plugins if CSP exists because loading every plugin will fail and automatically disable the plugin.\n    if (document.querySelector(`[http-equiv=\"Content-Security-Policy\"]`)) return;\n\n    for (const plugin of pluginStore) {\n      if (plugin.update) {\n        try {\n          const [code, manifest] = await fetchPluginFromURL(plugin.id);\n\n          plugin.manifest = manifest;\n          plugin.code = code;\n        } catch {\n          console.log(\"[neptune] failed to update plugin\");\n        }\n      }\n\n      // We do not currently account for plugin updates, but this will be handled once\n      // remote plugin installation is handled.\n      if (plugin.enabled) runPlugin(plugin);\n    }\n  },\n  true,\n);\n","import { store } from \"voby\";\nimport { appendStyle, createPersistentObject, parseManifest } from \"./utils.js\";\n\nexport const [themesStore, themesStoreReady] = createPersistentObject(\"NEPTUNE_THEMES\", true);\n\nlet updateThemeStyle = appendStyle(\"\");\n\n// Not sure why this didn't work previously?\nstore.on(themesStore, reloadThemes)\n\nfunction reloadThemes() {\n  updateThemeStyle(themesStore.filter(t => t.enabled).map((t) => `@import url(\"${t.url}\")`).join(\";\"));\n}\n\nexport function removeTheme(url) {\n  themesStore.splice(\n    themesStore.findIndex((t) => t.url == url),\n    1,\n  );\n}\n\nexport function toggleTheme(url) {\n  const theme = themesStore.find((t) => t.url == url);\n  theme.enabled = !theme.enabled;\n}\n\nexport async function importTheme(url, enabled = true) {\n  let manifest;\n\n  try {\n    manifest = parseManifest(await (await fetch(url)).text());\n  } catch {\n    throw \"Failed to parse theme manifest!\";\n  }\n\n  if (![\"name\", \"author\", \"description\"].every((i) => typeof manifest[i] === \"string\"))\n    throw \"Manifest doesn't contain required properties!\";\n\n  const { name, author, description } = manifest;\n\n  themesStore.unshift({\n    name,\n    author,\n    description,\n    enabled,\n    url,\n  });\n}\n","// code source: https://github.com/KaiHax/kaihax/blob/master/src/patcher.ts\n\nconst observations = new Set();\nconst observer = new MutationObserver((records) => {\n  // de-dupe to be sure\n  const changedElems = new Set();\n\n  for (const record of records) {\n    changedElems.add(record.target);\n\n    for (const e of record.removedNodes)\n      if (e instanceof HTMLElement || e instanceof SVGElement) changedElems.add(e);\n  }\n\n  for (const elem of changedElems)\n    for (const obs of observations) {\n      if (elem.matches(obs[0])) obs[1](elem);\n\n      elem\n        .querySelectorAll(obs[0])\n        .forEach(\n          (e) => !obs[2] && (e instanceof HTMLElement || e instanceof SVGElement) && obs[1](e),\n        );\n    }\n});\n\nconst startObserving = () =>\n  observer.observe(document.body, {\n    subtree: true,\n    childList: true,\n    attributes: true,\n  });\n\nconst stopObserving = () => observer.disconnect();\n\nexport function observe(sel, cb) {\n  if (observations.size === 0) startObserving();\n  const entry = [sel, cb, false];\n  observations.add(entry);\n\n  const unobs = () => {\n    observations.delete(entry);\n    if (observations.size === 0) stopObserving();\n  };\n\n  unobs.now = () => {\n    entry[2] = true;\n    unobs();\n  };\n\n  return unobs;\n}\nexport function unobserve() {\n  observations.clear();\n  stopObserving();\n}\n","import { ReactiveRoot } from \"../ui/components.js\";\nimport intercept from \"./intercept.js\";\nimport { observe } from \"./observe.js\";\n\nconst pageNotFoundSelector = `[class^=\"contentArea--\"] [class^=\"pageNotFoundError--\"]`;\n\nconst replacePage = (page, component) => {\n  page.style.display = \"none\";\n\n  const neptunePage = document.createElement(\"div\");\n  neptunePage.className = \"__NEPTUNE_PAGE\";\n\n  page.insertAdjacentElement(\"afterend\", neptunePage);\n  neptunePage.appendChild(ReactiveRoot({ children: component }));\n};\n\nintercept(\"ROUTER_LOCATION_CHANGED\", () => {\n  for (const page of document.getElementsByClassName(\"__NEPTUNE_PAGE\"))\n    page.parentElement.removeChild(page);\n});\n\nexport default function registerRoute(path, component) {\n  return intercept(\"ROUTER_LOCATION_CHANGED\", ([payload]) => {\n    if (payload.pathname != `/neptune/${path}`) return;\n\n    const pageNotFound = document.querySelector(pageNotFoundSelector);\n    if (pageNotFound) return replacePage(pageNotFound, component);\n\n    const unob = observe(pageNotFoundSelector, (page) => {\n      unob.now();\n      replacePage(page, component);\n    });\n  });\n}\n","import registerRoute from \"./registerRoute.js\";\nimport intercept from \"./intercept.js\";\nimport { actions } from \"../handleExfiltrations.js\";\nfunction makeInactive(tab) {\n  tab.classList.remove(Array.from(tab.classList).find((c) => c.startsWith(\"activeItem--\")));\n}\n\nconst getTabs = () => document.querySelector(`.sidebarWrapper section[class^=\"section--\"]`);\n\n// Automatically set tab to unchecked.\nintercept(\"ROUTER_LOCATION_CHANGED\", () => {\n  for (const tab of document.getElementsByClassName(\"__NEPTUNE_TAB\")) tab.style.color = \"\";\n});\n\n/*\n  This entire function abuses their router's 404 handling to insert our own tabs.\n  Because 404s count towards router history, our tabs function perfectly fine even when using the back arrows!\n*/\nexport default function registerTab(name, path, component = () => {}) {\n  const unobservers = [];\n\n  const addTab = (tabs) => {\n    const tab = tabs.children[0].cloneNode(true);\n    makeInactive(tab);\n\n    tab.querySelector(`[class^=\"responsiveText--\"]`).textContent = name;\n\n    tab.classList.add(\"__NEPTUNE_TAB\");\n\n    tab.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n\n      actions.router.push({\n        pathname: `/neptune/${path}`,\n        replace: true,\n      });\n    });\n\n    const removeRouteHandler = registerRoute(path, () => {\n      tab.style.color = \"var(--wave-color-solid-accent-fill)\";\n\n      return component;\n    });\n\n    tabs.appendChild(tab);\n    unobservers.push(removeRouteHandler, () => tabs.removeChild(tab));\n  };\n\n  const tabs = getTabs();\n\n  if (!tabs) {\n    // Instead of DOM observing we just intercept the first action that gets called after the UI shows. Maybe we can DOM observe later?\n    unobservers.push(\n      intercept(\n        \"favorites/SET_FAVORITE_IDS\",\n        () => {\n          addTab(getTabs());\n        },\n        true,\n      ),\n    );\n  } else addTab(tabs);\n\n  return () => unobservers.forEach((u) => u());\n}\n","import intercept from \"./intercept.js\";\nimport { observe } from \"./observe.js\";\n\nexport default function hookContextMenu(menuType, name, handler) {\n  return intercept(\"contextMenu/OPEN\", ([payload]) => {\n    // TODO: Change this to a switch statement.\n\n    if (payload?.type != menuType) return;\n\n    const unob = observe(`[data-type=\"contextmenu-item\"]`, (elem) => {\n      unob.now();\n\n      const contextMenuItem = elem.cloneNode(true);\n      const contextMenuLabel = contextMenuItem.querySelector(`[class^=\"actionTextInner--\"]`);\n      contextMenuLabel.innerText = name;\n\n      const parentClasses = contextMenuLabel.parentElement.classList;\n\n      contextMenuItem.innerHTML = \"\";\n\n      const contextMenuWrapper = document.createElement(\"div\");\n      contextMenuWrapper.setAttribute(\"tabindex\", \"0\");\n      contextMenuWrapper.classList.add(...parentClasses);\n      contextMenuWrapper.appendChild(contextMenuLabel);\n\n      contextMenuItem.addEventListener(\"keyup\", (event) => {\n        if (event.keyCode != 13) return;\n\n        event.target.click();\n      });\n\n      contextMenuItem.appendChild(contextMenuWrapper);\n\n      contextMenuItem.addEventListener(\"click\", (event) => {\n        handler(event);\n      });\n\n      elem.parentElement.appendChild(contextMenuItem);\n    });\n  });\n}\n","import { ReactiveRoot } from \"../ui/components.js\";\nimport { actions } from \"../handleExfiltrations.js\";\nimport { observe } from \"./observe.js\";\n\nexport default function showModal(name, component) {\n  actions.modal.showReleaseNotes();\n  const unob = observe(`[class^=\"modalHeader--\"]`, (header) => {\n    unob.now();\n\n    header.getElementsByTagName(\"h4\")[0].innerText = name;\n\n    header.nextSibling.replaceChildren(\n      ReactiveRoot({\n        children: component,\n      }),\n    );\n  });\n}\n","import * as voby from \"voby\";\nimport * as patcher from \"spitroast\";\nimport * as utils from \"./api/utils.js\";\nimport * as plugins from \"./api/plugins.js\";\nimport * as themes from \"./api/themes.js\";\nimport * as components from \"./ui/components.js\";\nimport intercept from \"./api/intercept.js\";\nimport { observe } from \"./api/observe.js\";\nimport registerTab from \"./api/registerTab.js\";\nimport registerRoute from \"./api/registerRoute.js\";\nimport hookContextMenu from \"./api/hookContextMenu.js\";\nimport showModal from \"./api/showModal.js\";\n// TODO: AWFUL VOMIT VOMIT KILL MURDER DIE KILL KILL DIE MURDER VOMIT\nimport { store } from \"./handleExfiltrations.js\";\n\nlet currentMediaItem = {};\n\ntry {\n  const vibrantColorStyle = utils.appendStyle(\"\");\n\n  intercept(\"playbackControls/MEDIA_PRODUCT_TRANSITION\", ([{ mediaProduct }]) => {\n    Object.assign(\n      currentMediaItem,\n      store.getState().content.mediaItems[mediaProduct.productId],\n    );\n    const vibrantColor = currentMediaItem?.item?.album?.vibrantColor;\n\n    if (!vibrantColor) return;\n\n    vibrantColorStyle(`:root{--track-vibrant-color:${vibrantColor};--track-vibrant-color-rgb:${utils.convertHexToRGB(vibrantColor)}}`);\n  });\n} catch {}\n\nexport default {\n  patcher,\n  utils,\n  intercept,\n  observe,\n  registerTab,\n  registerRoute,\n  hookContextMenu,\n  showModal,\n  voby,\n  plugins,\n  themes,\n  components,\n  currentMediaItem,\n};\n","import windowObject from \"./windowObject.js\";\nimport * as patcher from \"spitroast\";\nimport { interceptors } from \"./api/intercept.js\";\nimport loadStyles from \"./styles.js\";\n\n// abandon all hope, ye who enter here\n\n/*\n  This code runs before webpackChunk_tidal_web is defined.\n  Upon it being assigned to, we patch push to intercept webpackRequire and exfiltrate modules.\n  The upcoming comments will explain each step of the process.\n*/\n\n// Variables used for hooking into webpack.\nlet webpackObject;\n\n// Exfiltrations gained from hooking into webpack.\nlet patchedPrepareAction = false;\nlet exfiltratedStore;\n\n// Main store exfiltration\nexport let store;\n\n// Built action handlers\nexport const actions = {};\nwindowObject.actions = actions;\n\nconst getModulesFromWpRequire = (wpRequire) =>\n  Object.fromEntries(\n    Object.entries(wpRequire.m).map(([k]) => [k, { id: k, loaded: true, exports: wpRequire(k) }]),\n  );\n\nObject.defineProperty(window, \"webpackChunk_tidal_web\", {\n  get: () => webpackObject,\n  set(val) {\n    if (webpackObject) return true;\n\n    loadStyles();\n\n    webpackObject = val;\n\n    const originalPush = webpackObject.push;\n    let newPush;\n    Object.defineProperty(webpackObject, \"push\", {\n      set(v) {\n        if (!newPush) newPush = v;\n      },\n      get: () =>\n        newPush\n          ? function () {\n              try {\n                for (const chunk of arguments) {\n                  const [, modules] = chunk;\n                  if (!modules) continue;\n\n                  for (const moduleId in modules) {\n                    const originalModule = modules[moduleId];\n\n                    modules[moduleId] = function () {\n                      const wpRequire = arguments[2];\n\n                      if (!windowObject.hasOwnProperty(\"modules\"))\n                        Object.defineProperty(windowObject, \"modules\", {\n                          get: () => Object.values(getModulesFromWpRequire(wpRequire)),\n                        });\n\n                      // thinking i'll add a try { } catch { } finally { } to this.\n                      arguments[2] = new Proxy(wpRequire, {\n                        apply(target, thisArg, args) {\n                          const originalResponse = target.apply(thisArg, args);\n                          if (typeof originalResponse != \"object\") return originalResponse;\n\n                          // neptune.store exfiltration code\n                          try {\n                            if (!exfiltratedStore) {\n                              const [key] = Object.entries(originalResponse).find(([, e]) =>\n                                e?.toString?.().includes?.('Error(\"No global store set\"'),\n                              );\n\n                              if (key) exfiltratedStore = true;\n\n                              const unpatch = patcher.after(key, originalResponse, (_, resp) => {\n                                if (!typeof resp == \"object\" && windowObject.store) return;\n\n                                store = resp;\n                                // Hate.\n                                windowObject.store = store;\n                                unpatch();\n                              });\n                            }\n                          } catch {}\n\n                          // neptune.intercept setup code\n                          try {\n                            if (patchedPrepareAction) return originalResponse;\n\n                            let found = Object.entries(originalResponse).find(\n                              ([, possiblyPrepareAction]) =>\n                                possiblyPrepareAction\n                                  ?.toString?.()\n                                  ?.includes?.(\n                                    `.payload,...\"meta\"in `,\n                                  ),\n                            );\n\n                            if (!found) return originalResponse;\n\n                            patchedPrepareAction = true;\n\n                            patcher.after(found[0], originalResponse, ([type], resp) => {\n                              if (!interceptors[type]) interceptors[type] = [];\n\n                              const [parent, child] = type\n                                .split(\"/\")\n                                .map((n) =>\n                                  n.toUpperCase() == n\n                                    ? n\n                                        .toLowerCase()\n                                        .replace(/_([a-z])/g, (_, i) => i.toUpperCase())\n                                    : n,\n                                );\n\n                              const builtAction = (...args) => {\n                                const act = resp(...args);\n\n                                if (!(act.__proto__.toString() == \"[object Promise]\"))\n                                  return windowObject.store.dispatch(act);\n\n                                return new Promise(async (res, rej) => {\n                                  try {\n                                    res(windowObject.store.dispatch(await act));\n                                  } catch (e) {\n                                    rej(e);\n                                  }\n                                });\n                              };\n\n                              if (child) {\n                                if (!actions[parent]) actions[parent] = {};\n\n                                actions[parent][child] = builtAction;\n                              } else {\n                                actions[parent] = builtAction;\n                              }\n\n                              return new Proxy(resp, {\n                                apply(orig, ctxt, [payload]) {\n                                  try {\n                                    let shouldDispatch = true;\n\n                                    const interceptorData = [payload, type];\n\n                                    for (let interceptor of interceptors[type]) {\n                                      try {\n                                        const resp = interceptor(interceptorData);\n\n                                        if (resp === true) shouldDispatch = false;\n                                      } catch (e) {\n                                        console.error(\"Failed to run interceptor!\\n\", e);\n                                      }\n                                    }\n\n                                    return shouldDispatch\n                                      ? orig.apply(ctxt, [interceptorData[0]])\n                                      : { type: \"NOOP\" };\n                                  } catch (e) {\n                                    console.log(e);\n                                  }\n                                },\n                              });\n                            });\n                          } catch {}\n\n                          return originalResponse;\n                        },\n                      });\n\n                      return originalModule.apply(this, arguments);\n                    };\n                  }\n                }\n              } catch (e) {\n                console.error(\"[neptune] failed to hook properly\", e);\n              }\n\n              return newPush.apply(this, arguments);\n            }\n          : originalPush,\n    });\n  },\n});\n","import { Switch, TextInput, ReloadIcon, TrashIcon } from \"./components.js\";\nimport { actions } from \"../handleExfiltrations.js\";\nimport {\n  pluginStore,\n  togglePlugin,\n  removePlugin,\n  installPluginFromURL,\n  installPlugin,\n  reloadPlugin,\n  enabled as enabledPlugins,\n} from \"../api/plugins.js\";\nimport showModal from \"../api/showModal.js\";\nimport { parseManifest } from \"../api/utils.js\";\nimport { $, For, If, html } from \"voby\";\n\nasync function importLocalPlugin() {\n  const [fileHandle] = await showOpenFilePicker({\n    types: [{ description: \"A neptune plugin file\", accept: { \"text/javascript\": [\".js\"] } }],\n  });\n\n  const file = await fileHandle.getFile();\n  const content = await file.text();\n\n  let manifest;\n  try {\n    manifest = parseManifest(content);\n\n    if (![\"name\", \"author\", \"description\"].every((m) => typeof manifest[m] === \"string\"))\n      throw \"invalid manifest\";\n  } catch (e) {\n    return actions.message.messageError({ message: e });\n  }\n\n  try {\n    await installPlugin(\n      manifest.name + \"-\" + (Math.random() + 1).toString(36).substring(7),\n      content,\n      {\n        name: manifest.name,\n        author: manifest.author,\n        description: manifest.description,\n      },\n    );\n  } catch {\n    actions.message.messageError({ message: \"Failed to install plugin!\" });\n  }\n}\n\nexport function PluginTab() {\n  const pluginToImport = $(\"\");\n\n  return html`\n  <div style=\"display: flex; gap: 10px; flex-direction: column\">\n    <div style=\"padding-top: 10px; display: flex; gap:10px\">\n      <!-- This text input *needs* to be able to have an onEnter event. -->\n      <${TextInput} value=${pluginToImport} onEnter=${() => {\n        installPluginFromURL(pluginToImport());\n        pluginToImport(\"\");\n      }} placeholder=\"Import plugin from URL\" />\n      <!-- This button will be used for importing from local files. -->\n      <button onClick=${importLocalPlugin} class=\"neptune-round-button\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path><polyline points=\"17 8 12 3 7 8\"></polyline><line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\"></line></svg>\n      </button>\n    </div>\n    <${For} values=${() => pluginStore}>\n      ${(plugin) => html`<${PluginCard} plugin=${plugin} />`}\n    </${For}>\n  </div>`;\n}\n\nfunction PluginCard({ plugin }) {\n  return html`<div class=\"neptune-card\">\n    <div class=\"neptune-card-content\">\n      <div>\n        <div style=\"display: flex; gap: 15px; align-items: center\">\n          <button class=\"neptune-round-button\" onClick=${() => reloadPlugin(plugin)}>\n            <${ReloadIcon} />\n          </button>\n          <div style=\"padding-top: 10px;padding-bottom: 10px\">\n            <div>\n              <span class=\"neptune-card-title\">${plugin.manifest.name}</span>\n              <span> by </span>\n              <span class=\"neptune-card-title\">${plugin.manifest.author}</span>\n            </div>\n            <div style=\"font-size: medium\">${plugin.manifest.description}</div>\n          </div>\n        </div>\n      </div>\n      <div style=\"margin-top: auto; margin-bottom: auto; display: flex\">\n        <div style=\"display: flex; justify-content: center; align-items: center; gap: 6px\">\n          <${If} when=${() => enabledPlugins?.[plugin.id]?.Settings}>\n            <button style=\"display: grid; place-items: center; padding: 0px\" onClick=${() =>\n              showModal(plugin.manifest.name, enabledPlugins[plugin.id].Settings)}>\n              <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" style=\"width: 22px\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z\"></path>\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"></path>\n              </svg>\n            </button>\n          </${If}>\n          <button style=\"display: grid; place-items: center; padding: 0px\" onClick=${() =>\n            removePlugin(plugin.id)}>\n            <${TrashIcon} />\n          </button>\n        </div>\n        <${Switch}\n          checked=${() => plugin.enabled}\n          onClick=${() => {\n            togglePlugin(plugin.id);\n          }} />\n      </div>\n    </div>\n  </div>`;\n}\n","import { $, For, html, useCleanup } from \"voby\";\nimport { TextInput, Switch, TrashIcon } from \"./components\";\nimport { themesStore, toggleTheme, removeTheme, importTheme } from \"../api/themes\";\nimport { actions } from \"../handleExfiltrations.js\";\nimport { appendStyle } from \"../api/utils.js\";\n\nexport function ThemesTab() {\n  const themeToImport = $(\"\");\n\n  return html`\n  <div style=\"margin-top: 10px; display: flex; gap: 10px; flex-direction: column\">\n    <${TextInput} onEnter=${() => {\n      importTheme(themeToImport(), false).catch((e) => actions.message.messageError({ message: e }));\n      themeToImport(\"\");\n    }} value=${themeToImport} placeholder=\"Import theme from URL\" />\n    <${For} values=${() => themesStore}>\n      ${(theme) => html`<${ThemeCard} theme=${theme} />`}\n    </${For}>\n  </div>`;\n}\n\nfunction ThemeCard({ theme}) {\n  // TODO: i have no fucking clue why this needs a try catch to not implode in on itself lmfao\n  useCleanup(() => { try { removeStyle() } catch {} });\n\n  let removeStyle = () => {};\n\n  return html`<div class=\"neptune-card\">\n    <div class=\"neptune-card-content\">\n      <div style=\"padding-top: 10px; padding-bottom: 10px\">\n        <div>\n          <span class=\"neptune-card-title\">${theme.name}</span>\n          <span> by </span>\n          <span class=\"neptune-card-title\">${theme.author}</span>\n        </div>\n        <div style=\"font-size: medium\">${theme.description}</div>\n      </div>\n      <div style=\"margin-top: auto; margin-bottom: auto; display: flex\">\n        <button onClick=${() => removeTheme(theme.url)}>\n          <${TrashIcon} />\n        </button>\n        <div onmouseover=${() => {\n          try {\n          removeStyle();\n          } catch {}\n          removeStyle = appendStyle(`@import url(\"${theme.url}\");`)\n        }}\n        \n        onmouseout=${() => removeStyle()}\n        >\n          <${Switch} checked=${() => theme.enabled} onClick=${() => toggleTheme(theme.url)} />\n        </div>\n      </div>\n    </div>\n  </div>`\n}","import { appendStyle } from \"./api/utils.js\";\n\nexport default function loadStyles() {\n  appendStyle(`\n  .__NEPTUNE_PAGE {\n    margin: 0px auto;\n    max-width: 870px;\n    width: calc(100% - var(--defaultPadding)*2);\n  }\n\n  .neptune-card {\n    background-color: var(--wave-color-solid-base-brighter, var(--wave-color-opacity-contrast-fill-ultra-thick));\n    border: 1px solid var(--wave-color-opacity-contrast-fill-ultra-thin);\n    border-radius: 12px;\n    min-height: 70px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n  }\n\n  .neptune-card-content {\n    display: flex;\n    justify-content: space-between;\n    padding: 0 15px 0px 15px;\n  }\n  \n  .neptune-active-tab {\n    color: var(--wave-color-solid-accent-fill);\n    box-shadow: 0px 2px var(--wave-color-solid-accent-fill);\n  }\n  \n  .neptune-card-title {\n    font-weight: 600;\n    font-size: medium;\n  }\n\n  .neptune-switch-checkbox {\n    cursor: pointer;\n    margin-left: 0.8rem;\n    opacity: 0;\n    position: absolute;\n    z-index: 1;\n  }\n\n  .neptune-switch {\n    cursor: pointer;\n    background-color: var(--wave-color-opacity-contrast-fill-ultra-thin);\n    border-radius: 28px;\n    display: block;\n    height: 28px;\n    margin-left: 0.8rem;\n    min-width: 48px;\n    position: relative;\n    transition: background-color .25s ease,border-color .25s ease;\n    -webkit-user-select: none;\n    user-select: none;\n  }\n\n  .neptune-switch:after {\n    background-color: var(--wave-color-solid-contrast-fill);\n    border-radius: 50%;\n    box-shadow: 0 1px 2px rgb(0 0 0 / 30%);\n    content: \"\";\n    display: block;\n    height: 24px;\n    left: 2px;\n    position: absolute;\n    top: 2px;\n    transition: all .25s ease;\n    width: 24px;\n  }\n\n  .neptune-switch-checkbox:checked + .neptune-switch:after {\n    left: calc(100% - 0.1em);\n    transform: translateX(-100%);\n  }\n\n  .neptune-switch-checkbox:checked + .neptune-switch {\n    background-color: var(--wave-color-solid-accent-fill);\n    border-color: var(--wave-color-solid-accent-fill);\n  }\n\n  .neptune-text-input {\n    background: transparent;\n    border: 0;\n    border-bottom: 1px solid var(--wave-color-opacity-contrast-fill-ultra-thin);\n    color: var(--wave-color-opacity-contrast-fill-thick);\n    display: block;\n    width: 100%;\n    height: 40px;\n    box-sizing: border-box;\n  }\n\n  .neptune-text-input:not([readonly]):focus {\n    border-bottom-color: var(--wave-color-solid-accent-fill);\n    color: var(--wave-color-solid-contrast-fill);\n  }\n\n  .neptune-button {\n    align-items: center;\n    background-color: var(--wave-color-solid-contrast-fill);\n    border-radius: 12px;\n    display: inline-flex;\n    height: 48px;\n    justify-content: center;\n    line-height: 49px;\n    min-height: 48px;\n    min-width: 0;\n    overflow: hidden;\n    padding: 0 24px;\n    text-align: center;\n    text-overflow: ellipsis;\n    transition: background .35s ease;\n    white-space: nowrap;\n  }\n\n  .neptune-round-button {\n    color: var(--wave-color-opacity-contrast-fill-thick);\n    background-color: var(--wave-color-solid-base-brighter);\n    border: 1px solid var(--wave-color-opacity-contrast-fill-ultra-thin);\n    transition: background-color 0.35s ease 0s;\n    transition-property: background-color;\n    transition-duration: 0.35s;\n    transition-timing-function: ease;\n    transition-delay: 0s;\n    position: relative;\n    border-radius: 100%;\n    min-height: 40px;\n    min-width: 40px;\n    display: grid;\n    place-items: center;\n  }\n\n  .neptune-round-button:active {\n    background-color: rgba(255, 255, 255, 0.2);\n  }\n`);\n}\n","import { $, html } from \"voby\";\nimport { PluginTab } from \"./pluginsTab.js\";\nimport { ThemesTab } from \"./themesTab.js\";\nimport registerRoute from \"../api/registerRoute.js\";\nimport hookContextMenu from \"../api/hookContextMenu.js\";\n\nlet selectedTab = $(0);\nconst tabs = [\n  {\n    name: \"Plugins\",\n    component: PluginTab,\n  },\n  {\n    name: \"Themes\",\n    component: ThemesTab,\n  },\n  {\n    name: \"Addon Store\",\n    component: () => html`[WIP]`,\n  },\n];\n\nfunction TabButton({ className = \"\", onClick = () => {}, children }) {\n  return html`<button\n    onClick=${onClick}\n    style=\"font-weight: 500; font-size: 1.14286rem; padding-bottom: 6px\"\n    class=\"${className}\">\n    ${children}\n  </button>`;\n}\n\nregisterRoute(\n  \"settings\",\n  html`<div style=\"width: 675px\">\n    <div>\n      <div style=\"display: flex; gap: 25px; padding-bottom: 10px\">\n        ${tabs.map(\n          (tab, idx) =>\n            html`<${TabButton} onClick=${() => selectedTab(idx)} className=${() =>\n              idx == selectedTab() ? \"neptune-active-tab\" : \"\"}>${tab.name}</${TabButton}>`,\n        )}\n      </div>\n      <div>${() => tabs[selectedTab()].component}</div>\n    </div>\n  </div>`,\n);\n\nhookContextMenu(\"USER_PROFILE\", \"neptune settings\", () =>\n  neptune.actions.router.push({ pathname: \"/neptune/settings\", replace: true }),\n);\n","import { after, instead } from \"spitroast\";\nimport \"./ui/settings.js\";\nimport \"./handleExfiltrations.js\";\nimport windowObject from \"./windowObject.js\";\n\n// Restore the console\nfor (let key in console) {\n  const orig = console[key];\n\n  Object.defineProperty(console, key, {\n    set() {\n      return true;\n    },\n    get() {\n      return orig;\n    },\n  });\n}\n\n// Force properties to be writable for patching\nconst originalDefineProperty = Object.defineProperty;\n\nObject.defineProperty = function (...args) {\n  args[2].configurable = true;\n\n  try {\n    return originalDefineProperty.apply(this, args);\n  } catch {}\n};\n\nObject.freeze = (arg) => arg;\n\n// Polyfill node setInterval and setTimeout\nconst delayHandler = (_, resp) => {\n  return {\n    id: resp,\n    unref() {},\n  };\n};\n\nconst clearDelayHandler = ([id], orig) => orig(id?.id ?? id);\n\nafter(\"setInterval\", window, delayHandler);\nafter(\"setTimeout\", window, delayHandler);\n\ninstead(\"clearInterval\", window, clearDelayHandler);\ninstead(\"clearTimeout\", window, clearDelayHandler);\n\n// If the app fails to load for any reason we simply reload the page.\nsetTimeout(() => {\n  if (!windowObject.store) window.location.reload();\n}, 7000);\n\nwindow.neptune = windowObject;\n"],"names":["patchTypes","patchedObjects","Map","unpatch","funcParent","funcName","hookId","type","patchedObject","get","patch","has","delete","every","t","size","Reflect","defineProperty","value","o","writable","configurable","Object","keys","length","getPatchFunc","patchType","callback","oneTime","Error","constructor","name","set","parentInjections","origFunc","b","i","a","runHook","ctxt","args","construct","ret","funcArgs","isConstruct","apply","hook","values","maybefuncArgs","call","Array","isArray","workingRetVal","reduce","prev","current","unpatchThisPatch","replaceProxy","Proxy","_","target","prop","receiver","toString","bind","Symbol","before","instead","after","parentObject","entries","hookType","IS_BROWSER","globalThis","CDATASection","match","isServer$1","SYMBOL_CACHED","SYMBOL_OBSERVABLE","SYMBOL_OBSERVABLE_BOOLEAN","SYMBOL_OBSERVABLE_FROZEN","SYMBOL_OBSERVABLE_READABLE","SYMBOL_OBSERVABLE_WRITABLE","SYMBOL_STORE","SYMBOL_STORE_KEYS","SYMBOL_STORE_OBSERVABLE","SYMBOL_STORE_TARGET","SYMBOL_STORE_VALUES","SYMBOL_STORE_UNTRACKED","SYMBOL_SUSPENSE","SYMBOL_UNCACHED","SYMBOL_UNTRACKED","SYMBOL_UNTRACKED_UNWRAPPED","is","isEqual","l","valueA","valueB","isFunction","isObject","isSymbol","noop","nope","frozenFunction","arguments","this","readableFunction","writableFunction","fn","C","frozen","readable","OBSERVABLE_FALSE","OBSERVABLE_TRUE","UNAVAILABLE","UNINITIALIZED","lazyArrayEach","arr","lazyArrayEachRight","lazyArrayPush","obj","key","push","lazySetAdd","Set","add","s","lazySetDelete","undefined","lazySetEach","onCleanup","cleanup","onDispose","owner","Q","Owner$1","disposed","B","S","D","K","T","U","catch","error","silent","parent","deep","symbol","context","E","observer","ownerPrev","OWNER","observerPrev","OBSERVER","setOwner","setObserver","castError","SuperRoot$1","Owner","super","BATCH","SUPER_OWNER","SuperRoot","setBatch","M","resolve","batch$1","async","Promise","r","isObservableBoolean$1","isObservableFrozen$1","isUntracked$2","SchedulerSync","A1","A2","N","queue","F","ObservableClass","options","equals","A","L","Scheduler","I","J","sync","Math","max","ObservablesArray","P","R","observablesLength","empty","observable","index","indexOf","ObservablesSet","sizePrev","Observer$1","H","run","Memo$1","Observer","Observable","G","statusPrev","memo$1","isObservableFrozen","isUntracked","memo","Memo","boolean$1","isObservableBoolean","boolean","cleanup$1","Context$1","symbolOrContext","Context","disposed$1","Scheduler$1","A3","queueMicrotask","finally","effect","Effect$1","suspense","init","suspended","effect$1","Effect","resolved","Root$1","V","A0","DUMMY_INDEX","Root","CacheKeyed$1","A5","A6","A7","A8","A9","forEach","mapped","AA","O","map","AB","results","resultsCached","resultsUncached","cached","MappedRoot","from","isObservable$1","getFunction","isObservable","Suspense$3","SYMBOL_SUSPENSE$1","A4","force","suspendedPrev","suspendedNext","notifyOwner","notifyObserver","notifySuspense","notifyRoot","root","suspense$1","when","Suspense","condition","CacheUnkeyed$1","pooled","AC","AD","poolable","cacheNext","leftovers","outer","isDuplicate","pop","$index","$value","isStore$1","untrack","warmup$1","fallback","_switch","warmup","ternary$1","valueTrue","valueFalse","isBatching$1","SchedulerAsync","isObservableWritable$1","target$1","readonly$1","isObservableWritable","root$1","DisposableMap","SelectedObservable","AE","AF","AG","selector$1","sourceValue","selectedValue","valuePrev","valueNext","selected","StoreMap","AH","StoreCleanable","listen","StoreKeys","StoreValues","StoreHas","StoreProperty","AI","AJ","StoreListenersRegular","AK","AL","AM","AN","traversed","traverse","AO","AP","listener","StoreScheduler","reset","StoreListenersRoots","rootsSet","store","AQ","AR","flushRegular","flushRoots","AS","isBatching","setTimeout","NODES","WeakMap","SPECIAL_SYMBOLS","UNREACTIVE_KEYS","STORE_TRAPS","isListenable","getNodeExisting","getNodeKeys","getNodeValues","String","getter","AT","property","getNodeProperty","getNodeObservable","listenable","proxiable","isProxiable","prototype","getTarget","setter","AU","hadProperty","getNode","deleteProperty","descriptor","descriptorPrev","getOwnPropertyDescriptor","isStore","isEqualDescriptor","enumerable","getNodeHas","ownKeys","STORE_UNTRACK_TRAPS","gettersAndSetters","getGettersAndSetters","getNodeFromStore","propertyNode","getPrototypeOf","getStore","on","targets","selectors","filter","disposers","selector","inited","disposer","_onRoots","reconcile","getType","reconcileInner","next","uprev","unext","prevKeys","nextKeys","prevValue","nextValue","prevType","nextType","reconcileOuter","getUntracked","unwrap","store$2","suspended$1","tick$1","tryCatch$1","$","untracked","_with$1","CONTEXTS_DATA","DIRECTIVES","SYMBOL_SUSPENSE_COLLECTOR","SYMBOL_TEMPLATE_ACCESSOR","SYMBOLS_DIRECTIVES","wrapElement$1","element","createComment","document","createHTMLNode","createElement","createSVGNode","createElementNS","createText","createTextNode","assign","castArray","_indexOf","isError","isFunctionReactive","isNil","isString","isSVG","isSVGElement","svgRe","svgCache","includes","test","isTruthy","useResolved","resolveFunction","isResolvable","useEventListener","event","handler","useEffect","$$","addEventListener","removeEventListener","useAbortController$1","signals","controller","AbortController","abort","some","signal","aborted","useCleanup","useAbortSignal$1","useAbortController","useScheduler$1","loop","once","cancel","schedule","tickId","executed","useSuspended","work","tick","dispose","useAnimationFrame$1","useScheduler","cancelAnimationFrame","requestAnimationFrame","useAnimationLoop$1","SuspenseContext","create","count","data","active","useMemo","increment","nr","decrement","collector","register","unregister","wrap","SuspenseContext$1","SuspenseManager$1","suspenses","change","counter","counterNext","suspend","unsuspend","useRenderEffect$1","useResource$1","fetcher","pending","latest","SuspenseManager","resourcePending","resourceRejected","resourceResolved","resourceFunction","resource","useRenderEffect","useCheapDisposed","onPending","onResolve","result","onReject","exception","onFinally","isPromise","then","fetch","useReadonly","useFetch$1","request","useResource","useAbortSignal","useIdleCallback$1","cancelIdleCallback","requestIdleCallback","useIdleLoop$1","useInterval$1","ms","clearInterval","setInterval","usePromise$1","promise","useTimeout$1","clearTimeout","useCheapDisposed$1","useMicrotask$1","runWithOwner","_with","dummyNode","beforeDummyWrapper","afterDummyWrapper","diff$1","nextSibling","Node","parentNode","replaceChild","bLength","removable","aEnd","bEnd","aStart","bStart","node","slice","append","removeChild","insertBefore","sequence","NOOP_CHILDREN","FragmentUtils","make","makeWithNode","makeWithFragment","fragment","fragmented","getChildrenFragmented","thiz","children","getChildren","pushFragment","pushValue","pushNode","replaceWithNode","replaceWithFragment","FragmentUtils$1","resolveChild","_dynamic","hasObservables","resolveArraysAndStatics","resolveClass","classes","split","Boolean","cls","resolveStyle","styles","style","DUMMY_RESOLVED","resolveArraysAndStaticsInner","setAttributeStatic","attributesBoolean","attributeCamelCasedRe","attributesCache","uppercaseRe","replace","char","toLowerCase","normalizeKeySvg","removeAttribute","setAttribute","setChildReplacementText","child","childPrev","nodeType","nodeValue","parentElement","textNode","setChildReplacement","setChildStatic","setChildReplacementFunction","setChild","fragmentOnly","dynamic","prevIsArray","prevLength","prevFirst","prevLast","prevSibling","appendChild","fragmentNext","childFragmentOnly","nextLength","childNodes","textContent","placeholder","diff","setClassStatic","className","classList","toggle","setClass","setClassBooleanStatic","keyPrev","setClassBoolean","keyNext","setClassesStatic","object","objectPrev","setClasses","objectNext","setEventStatic","delegatedEvents","onauxclick","onbeforeinput","onclick","ondblclick","onfocusin","onfocusout","oninput","onkeydown","onkeyup","onmousedown","onmouseup","startsWith","_value","delegated","composedPath","cancelBubble","delegate","endsWith","isCapture","capture","passive","setEvent","setHTML","innerHTML","setHTMLStatic","__html","setPropertyStatic","isBoolean","tagName","setProperty","setRef","flat","Infinity","flatten","useMicrotask","setStyleStatic","propertyNonDimensionalRe","propertyNonDimensionalCache","charCodeAt","removeProperty","setStyle","setStylesStatic","cssText","setStyles","setProp","isTemplateAccessor","setTemplateAccessor","directive","immediate","setDirective","creatElement","component","props","_children","__children","ref","rest","wrapElement","createNode","setProps","isNode","Dynamic$1","ErrorBoundary$1","tryCatch","For","unkeyed","isUnkeyed","CacheUnkeyed","CacheKeyed","array","_for","Fragment$1","useGuarded$1","guard","valueLast","guarded","If$1","ternary","truthy","useGuarded","useUntracked","cache","runWithSuperRoot","lockId","KeepAlive$1","id","ttl","lock","item","useRoot","useSuspense","hasLock","timeoutId","render$1","HTMLElement","Portal$1","mount","wrapper","portal","useBoolean","body","Element","render","metadata","Suspense$1","childrenSuspended","Switch","Switch$1","Case","Default","Switch$2","Ternary$1","jsx","createDirective$1","Provider","COMPONENT_RE","SYMBOL_COLD_COMPONENT","SYMBOL_HOT_COMPONENT","SYMBOL_HOT_ID","SOURCES","hmr$1","accept","createHotComponent","path","source","createHotComponentDeep","hot","onAccept","module","default","console","cold","n","e","u","h","p","registry","html","components","html$1","lazy$1","fetcherOnce","called","preload","reject","SuspenseCollector","other","SuspenseCollector$1","renderToString$1","Portal","template$1","safePropertyRe","checkValidProperty","makeActionsWithNodesAndTemplate","actionsWithNodes","accessor","method","targetNode","makeAccessor","makeNodePath","prevPath","prevNode","previousSibling","makeNodePathProperties","properties","parts","reverse","part","nsi","makeReviverVariables","actionsWithPaths","paths","action","nodePath","targetNodePath","makeReviverPaths","makeReviverVariablesData","assignments","variableId","datum","find","variable","assignment","otherCurrent","otherNext","splice","makeActionsWithPaths","reviver","actions","variables","makeReviverActions","Function","join","apis","makeReviver","clone","cloneNode","makeComponent","defaultValue","valueContext","ReactiveRoot","c","checked","onClick","TextInput","onEnter","ReloadIcon","TrashIcon","customElements","define","connectedCallback","display","disconnectedCallback","promisifyRequest","oncomplete","onsuccess","onabort","onerror","createStore","dbName","storeName","indexedDB","open","onupgradeneeded","createObjectStore","dbp","txMode","db","transaction","objectStore","defaultGetStoreFunc","defaultGetStore","appendStyle","styleTag","head","newStyle","neptuneIdbStore","createIdbStore","createPersistentObject","persistentObject","customStore","put","idbSet","res","idbGet","parseManifest","manifest","JSON","parse","convertHexToRGB","g","Number","Uint8Array","Uint16Array","buffer","__heap_base","memory","byteLength","grow","ceil","sa","lastIndexOf","idx","k","ri","ie","ai","ss","se","ip","d","re","es","ee","els","ele","ls","le","ln","eval","f","WebAssembly","compile","Buffer","atob","instantiate","exports","betterParse","src","imports","imp","declaration","importClause","trim","namedImportOpener","namedImportCloser","namedImport","namedImports","commaIndex","namespace","isExport","destructurifyImp","v","removeFromString","string","start","end","insertIntoString","newString","urlImport","baseUrl","existingUrls","interceptors","intercept","types","cb","uninterceptors","unintercept","handleIntercept","pluginStore","pluginStoreReady","enabled","getPluginById","disablePlugin","onUnload","togglePlugin","enablePlugin","plugin","runPlugin","persistentStorage","persistentStorageReady","unloadables","pluginData","storage","addUnloadable","Settings","code","config","plugins","moduleId","generatedImports","transform","offset","exp","startIndex","endIndex","newExport","fromIndex","quartzStore","random","substring","generatedImport","addImport","globalStoreID","mod","import","btoa","quartz","stringify","ul","installPlugin","unshift","removePlugin","log","findIndex","del","fetchPluginFromURL","url","parsedURL","json","hash","main","text","author","description","reloadPlugin","pluginWasEnabled","hasOwnProperty","installPluginFromURL","message","messageError","update","querySelector","themesStore","themesStoreReady","updateThemeStyle","removeTheme","toggleTheme","theme","importTheme","observations","MutationObserver","records","changedElems","record","removedNodes","SVGElement","elem","obs","matches","querySelectorAll","startObserving","observe","subtree","childList","attributes","stopObserving","disconnect","sel","entry","unobs","now","pageNotFoundSelector","replacePage","page","neptunePage","insertAdjacentElement","registerRoute","payload","pathname","pageNotFound","unob","getElementsByClassName","getTabs","hookContextMenu","menuType","contextMenuItem","contextMenuLabel","innerText","parentClasses","contextMenuWrapper","keyCode","click","showModal","modal","showReleaseNotes","header","getElementsByTagName","replaceChildren","tab","color","currentMediaItem","vibrantColorStyle","utils.appendStyle","mediaProduct","getState","content","mediaItems","productId","vibrantColor","album","utils.convertHexToRGB","windowObject","patcher","utils","registerTab","unobservers","addTab","tabs","remove","makeInactive","preventDefault","router","removeRouteHandler","voby","themes","webpackObject","exfiltratedStore","patchedPrepareAction","getModulesFromWpRequire","wpRequire","fromEntries","m","loaded","importLocalPlugin","fileHandle","showOpenFilePicker","file","getFile","PluginCard","If","enabledPlugins","ThemeCard","removeStyle","window","val","originalPush","newPush","chunk","modules","originalModule","thisArg","originalResponse","patcher.after","resp","found","possiblyPrepareAction","toUpperCase","builtAction","act","__proto__","dispatch","rej","orig","shouldDispatch","interceptorData","interceptor","selectedTab","pluginToImport","themeToImport","TabButton","neptune","originalDefineProperty","freeze","arg","delayHandler","unref","clearDelayHandler","location","reload"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,113,115,116,117]}